"use strict";(self.webpackChunkpatternmanager_app=self.webpackChunkpatternmanager_app||[]).push([[502],{502:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var r=n(307),i=n(736);function l(e){let{url:t,scale:n,viewportWidth:l}=e;const[a,o]=(0,r.useState)(void 0),[s,c]=(0,r.useState)(0),[u,d]=(0,r.useState)(!1);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"pattern-preview-iframe-inner",style:{height:s*n,opacity:u?1:0}},(0,r.createElement)("iframe",{ref:o,onLoad:()=>{var e,t,n;null!=a&&null!==(e=a.contentWindow)&&void 0!==e&&null!==(t=e.document)&&void 0!==t&&null!==(n=t.documentElement)&&void 0!==n&&n.scrollHeight&&a.contentWindow.document.documentElement.scrollHeight>0&&c(a.contentWindow.document.documentElement.scrollHeight),d(!0)},src:t,title:(0,i.__)("Pattern Preview","pattern-manager"),role:"img",tabIndex:-1,"aria-hidden":"true",style:{width:l,height:s,display:"block",transform:"scale("+n+")",transformOrigin:"top left",pointerEvents:"none"}})),(0,r.createElement)("div",{hidden:u,className:"pattern-loader"}))}function a(e){var t;let{url:n,viewportWidth:i}=e;const a=(0,r.useRef)(null),{lazyHasIntersected:o}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,i]=(0,r.useState)(!1),[l,a]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const n=new IntersectionObserver((e=>{let[t]=e;i(t.isIntersecting),a((e=>e||t.isIntersecting))}),t);return n.observe(e.current),()=>{n.disconnect()}}),[e]),{lazyIsIntersecting:!("IntersectionObserver"in window)||n,lazyHasIntersected:!("IntersectionObserver"in window)||l}}(a,{threshold:[.3,.6,1]}),s=null==a||null===(t=a.current)||void 0===t?void 0:t.getBoundingClientRect(),c=s?(null==s?void 0:s.width)/i:.2;return(0,r.createElement)("div",{className:"pattern-preview-iframe-outer",style:{pointerEvents:"none"},ref:a},o?(0,r.createElement)(l,{url:n,scale:c,viewportWidth:i,previewContainerSize:s}):null)}}}]);