!function(_){"use strict";_(".tpgb-search-bar").each(function(){var g,b,r,l,i,h=_(this),c=(h.data("id"),h.find(".tpgb-search-form"),h.data("ajax_search")),o=h.data("acfdata"),p=h.data("genericfilter"),d=h.find(".tpgb-search-list-inner"),u=(h.find(".tpgb-search-btn"),h.find(".tpgb-search-area")),f=".tpgb-search-slider tpgb-row",y=h.find(".tpgb-search-header"),m=h[0].dataset?JSON.parse(h[0].dataset.resultSetting):[],v=h[0].dataset?JSON.parse(h[0].dataset.paginationData):[],x=h[0].dataset?JSON.parse(h[0].dataset.defaultData):[];d.css("transform","translateX(0)"),0<h[0].querySelectorAll(".tpgb-rental-overlay").length&&function(t){let e=t[0].querySelector(".tpgb-rental-overlay"),a=t[0].querySelector(".tpgb-input-field");_(".tpgb-search-input",t).on({focus:function(){e.style.cssText="visibility:visible;opacity:1;",a.style.cssText="z-index:1000;"},focusout:function(){e.style.cssText="visibility:hidden;opacity:0;",a.style.cssText=""}}),_(".tpgb-select",t).on("click",function(t){e.style.cssText="visibility:visible;opacity:1;"}),_(".tpgb-rental-overlay",t).on("click",function(t){e.style.cssText="visibility:hidden;opacity:0;"}),t.keyup(function(t){"Escape"===t.key&&(e.style.cssText="visibility:hidden;opacity:0;")})}(h),0<h[0].querySelectorAll(".tpgb-sbar-dropdown").length&&(_(".tpgb-sbar-dropdown",_(this)).on("click",function(){_(this).attr("tabindex",1).focus(),_(this).toggleClass("active"),_(this).find(".tpgb-sbar-dropdown-menu").slideToggle(300)}),_(".tpgb-sbar-dropdown",_(this)).focusout(function(){_(this).removeClass("active"),_(this).find(".tpgb-sbar-dropdown-menu").slideUp(300)}),_(".tpgb-sbar-dropdown .tpgb-sbar-dropdown-menu .tpgb-searchbar-li",_(this)).on("click",function(){_(this).parents(".tpgb-sbar-dropdown").find("span.search-selected-text").text(_(this).text()),_(this).parents(".tpgb-sbar-dropdown").find("input").attr("value",_(this).attr("id")).change()})),"yes"==c.ajax&&(g=v.PNavigation||0,b=c&&c.post_page?c.post_page:3,r=x&&x.SpecialCTP?x.SpecialCTP:0,l=c&&c.ajaxsearchCharLimit?c.ajaxsearchCharLimit:0,i=null,_(h[0]).on("change keyup",function(t){var e=t.type,a=_("input[name=s]",_(this)).val(),s=_("input[name=post_type]",_(this)).val(),n=(_("input[name=taxonomy]",_(this)).val(),_("input[name=cat]",_(this)).val());"keyup"==e&&a.length>=l||"change"==e&&s&&0==r||s&&a.length>=l||""==s&&a.length>=l||n&&0==r||n&&a.length>=l||""==n&&a.length>=l?(h[0].querySelector(".tpgb-close-btn").style.cssText="display:none",h[0].querySelector(".tpgb-ajx-loading").style.cssText="display:flex",clearTimeout(i),i=setTimeout(function(t){var e=_("input[name=s]",h).val();_("input[name=taxonomy]",h).val(),_("input[name=post_type]",h).val();d.html(""),y.find(".tpgb-search-pagina",h).html("");var i={action:"tpgb_search",searchData:_(".tpgb-search-form",h).serialize(),text:e,postper:c.post_page,GFilter:p,ACFilter:o,ResultData:v,DefaultData:x,nonce:c.nonce};_.ajax({url:tpgb_load.ajaxUrl,method:"post",async:!0,data:i,beforeSend:function(){"pagination"==v.Pagestyle&&(h[0].querySelector(".tpgb-search-list-inner").style.cssText="transform: translateX(0px)")},success:function(r){let t=h[0].querySelectorAll(".tpgb-search-error"),e=h[0].querySelector(".tpgb-search-header");if(r.data.error&&0<t.length)return t[0].style.cssText="display:block",t[0].innerHTML=r.data.message,e.style.cssText="display:none",void u.slideDown(100);t[0].style.cssText="display:none",e.style.cssText="display:flex",t[0].innerHTML="";var l=r.data||"";if(l&&0!==l.post_count){let t=l.posts,e=null,a="",s='<div class="'+f.replace(".","")+'">%s</div>',n="";for(e in u.slideDown(100),t)n+=S(t[e]),(parseInt(e)+1)%l.limit_query!=0&&parseInt(e)!==t.length-1||(a+=s.replace("%s",n),n="");if(d.html(a),m.TotalResult&&(r=m.TotalResultTxt||"",y.find(".tpgb-search-resultcount").html(l.post_count+" "+r)),l.pagination)h[0].querySelector(".tpgb-search-pagina").innerHTML=l.pagination,k(f,d,l,i);else if(l.loadmore)if(l.limit_query<l.total_count)h[0].querySelector(".tpgb-load-more").innerHTML=l.loadmore,T(f,d,l,i);else{let t=h[0].querySelectorAll(".tpgb-search-pagina");0<t.length&&(t[0].innerHTML=l.loadmore_page)}else l.lazymore&&l.limit_query<l.total_count&&(h[0].querySelector(".tpgb-lazy-load").innerHTML=l.lazymore,q(f,d,l,i))}else t[0].style.cssText="display:block",t[0].innerHTML=m.errormsg,e.style.cssText="display:none",u.slideDown(400)},complete:function(){let t=document.querySelectorAll(".tpgb-search-input");0<t.length&&t.forEach(t=>{setTimeout(function(){t.blur()},500)})}}).then(function(t){setTimeout(function(){h[0].querySelector(".tpgb-ajx-loading").style.cssText="display:none",h[0].querySelector(".tpgb-close-btn").style.cssText="display:flex"},500),j()})}.bind(void 0,t.target.value),400)):h[0].querySelectorAll(".tpgb-close-btn")}));var S=function(t){let e="",a=t.title||"",s=t.content||"",n=m&&m.ResultlinkOn?m.ResultlinkOn:"",r=n&&m&&m.Resultlinktarget?'target="'+m.Resultlinktarget+'"':"",l=n&&t&&t.link?'href="'+t.link+'"':"";var i,o;return m.textlimit&&(m.TxtTitle&&(i=m.textcount||100,o=m.textdots||"","char"==m.texttype?a=a.substring(0,i)+o:"word"==m.texttype&&(a=a.split(" ",i).toString().replace(/,/g," ")+o)),m.Txtcont&&(i=m.ContCount||100,o=m.ContDots||"","char"==m.ContType?s=s.substring(0,i)+o:"word"==m.ContType&&(s=s.split(" ",i).toString().replace(/,/g," ")+o))),e+='<div class="tpgb-ser-item tpgb-trans-linear '+c.styleColumn+'">',e+='<a class="tpgb-serpost-link tpgb-trans-easeinout" '+l+" "+r+" >",m.ONThumb&&t.thumb&&(e+='<div class="tpgb-serpost-thumb">',e+='<img class="tpgb-item-image" src='+t.thumb+">",e+="</div>"),e+='<div class="tpgb-serpost-wrap">',(m.ONTitle&&a||m.ONPrice&&t.Wo_Price)&&(e+='<div class="tpgb-serpost-inner-wrap">',m.ONTitle&&a&&(e+='<div class="tpgb-serpost-title">'+a+"</div>"),m.ONPrice&&t.Wo_Price&&(e+='<div class="tpgb-serpost-price">'+t.Wo_Price+"</div>"),e+="</div>"),m.ONContent&&s&&(e+='<div class="tpgb-serpost-excerpt">'+s+"</div>"),m.ONShortDesc&&t.Wo_shortDesc&&(e+='<div class="tpgb-serpost-shortDesc">'+t.Wo_shortDesc+"</div>"),e+="</div>",e+="</a>",e+="</div>",e},T=function(t,e,a,s){let l=h[0].querySelectorAll(".post-load-more"),i=h[0].querySelector(".tpgb-search-slider"),o=h[0].querySelectorAll(".tpgb-search-pagina");0<o.length&&(o[0].innerHTML=a.loadmore_page),0<l.length&&l[0].addEventListener("click",function(t){var e=Number(this.dataset.page),r=Number(e+1),e=h[0].querySelectorAll(".tpgb-ser-item");s.offset=e.length,s.loadNumpost=v.loadnumber,jQuery.ajax({url:tpgb_load.ajaxUrl,method:"post",async:!0,data:s,beforeSend:function(){l[0].textContent=v.loadingtxt},success:function(t){l[0].textContent=v.loadbtntxt;let e=t.data.posts,a=t.data.total_count,s=null,n="";for(s in e)n+=S(e[s]);if(_(i).append(n),l[0].setAttribute("data-page",r),0<o.length){let t=o[0].querySelectorAll(".tpgb-load-number");t[0].textContent=r}h[0].querySelectorAll(".tpgb-ser-item").length==a&&(l[0].classList.add("tp-hide"),_(l[0].parentNode).append('<div class="tpgb-post-loaded">'+v.loadedtxt+"</div>"))},complete:function(){}})})},q=function(t,e,a,s){let r=h[0].querySelectorAll(".post-lazy-load"),l=h[0].querySelector(".tpgb-search-slider");h[0].querySelectorAll(".tpgb-search-pagina");function n(){u.width(),i=u.height(),o=_("body").height(),p=_(".tpgb-search-area").height(),d=_(".tpgb-search-area").offset().top+50,setTimeout(function(){p=_(".tpgb-search-area").height(),d=_(".tpgb-search-area").offset().top+50},50)}var i,o,c,p,d,u=_(window);n(),u.resize(n),u.bind("scroll",function(t){t.preventDefault(),n(),c=u.scrollTop(),p=_(".tpgb-search-area").height(),d=_(".tpgb-search-area").offset().top+50;var e=_(".tpgb-search-area").find(".post-lazy-load"),t=h[0].querySelectorAll(".tpgb-ser-item");s.offset=t.length,s.loadNumpost=v.loadnumber,_(".tpgb-search-area").find(".post-lazy-load").length&&c<o&&p+d-i<c+60&&(e.data("requestRunning")||(e.data("requestRunning",!0),jQuery.ajax({url:tpgb_load.ajaxUrl,method:"post",async:!0,data:s,beforeSend:function(){},success:function(t){let e=t.data.posts,a=t.data.total_count,s=null,n="";for(s in e)n+=S(e[s]);_(l).append(n),h[0].querySelectorAll(".tpgb-ser-item").length==a&&(r[0].classList.add("tp-hide"),_(r[0].parentNode).append('<div class="tpgb-post-loaded">'+v.loadedtxt+"</div>"))},complete:function(){e.data("requestRunning",!1)}})))})},k=function(t,e,l,i){let o=h[0].querySelector(".tpgb-search-list-inner"),c=h[0].querySelectorAll(".tpgb-pagelink.tpgb-ajax-page"),p=h[0].querySelectorAll(".tpgb-pagelink.next"),d=h[0].querySelectorAll(".tpgb-pagelink.prev"),a=v.Pcounter||0,u=v.PClimit||3;0<c.length&&c.forEach(function(t,s){if(Number(t.dataset.page)==Number(1)){let t=h[0].querySelectorAll(".tpgb-search-slider");0<t.length&&t[0].classList.add("ajax-"+Number(1))}else _(o).append('<div class="tpgb-search-slider tpgb-row ajax-'+Number(s+1)+'"></div>');t.addEventListener("click",function(t){var e=this.dataset.page,a=e*b-b,n=100*s;i.offset=a,N(c,e),g&&(d[0].setAttribute("data-prev",e),p[0].setAttribute("data-next",e));let r=o.querySelectorAll(".tpgb-search-slider.ajax-"+e);if(0<r.length&&r[0].querySelector(".tpgb-ser-item"))return o.style.cssText="transform: translateX("+-n+"%)",void A(l);jQuery.ajax({url:tpgb_load.ajaxUrl,method:"post",async:!0,data:i,beforeSend:function(){},success:function(t){let e=t.data.posts,a=null,s="";for(a in e)s+=S(e[a]);_(r[0]).append(s),o.style.cssText="transform: translateX("+-n+"%)",A(l)},complete:function(){}})})}),0<p.length&&p[0].addEventListener("click",function(t){var e=Number(this.dataset.next),s=e+Number(1),n=-(e*Number(100)),e=s*b-b;i.offset=e,a&&c.forEach(function(t,e){var a;s==Number(t.dataset.page)&&t.classList.contains("tp-hide")&&(a=Number(e+1-u),t.classList.remove("tp-hide"),c.forEach(function(t,e){a==e+1&&t.classList.add("tp-hide")}))}),N(c,s),g&&(d[0].setAttribute("data-prev",s),p[0].setAttribute("data-next",s));let r=o.querySelectorAll(".tpgb-search-slider.ajax-"+s);if(0<r.length&&r[0].querySelector(".tpgb-ser-item"))return o.style.cssText="transform: translateX("+n+"%)",void A(l);jQuery.ajax({url:tpgb_load.ajaxUrl,method:"post",async:!0,data:i,beforeSend:function(){},success:function(t){let e=t.data.posts,a=null,s="";for(a in e)s+=S(e[a]);_(r[0]).append(s),o.style.cssText="transform: translateX("+n+"%)",A(l)},complete:function(){}})}),0<d.length&&d[0].addEventListener("click",function(t){var s=Number(this.dataset.prev)-Number(1),n=-100*s+100,e=s*b-b;i.offset=e,a&&c.forEach(function(t,e){var a;s==Number(t.dataset.page)&&t.classList.contains("tp-hide")&&(a=Number(e+1)+Number(u),t.classList.remove("tp-hide"),c.forEach(function(t,e){a==e+1&&t.classList.add("tp-hide")}))}),N(c,s),g&&(d[0].setAttribute("data-prev",s),p[0].setAttribute("data-next",s));let r=o.querySelectorAll(".tpgb-search-slider.ajax-"+s);if(0<r.length&&r[0].querySelector(".tpgb-ser-item"))return o.style.cssText="transform: translateX("+n+"%)",void A(l);jQuery.ajax({url:tpgb_load.ajaxUrl,method:"post",async:!0,data:i,beforeSend:function(){},success:function(t){let e=t.data.posts,a=null,s="";for(a in e)s+=S(e[a]);_(r[0]).append(s),o.style.cssText="transform: translateX("+n+"%)",A(l)},complete:function(){}})})},A=function(t){var e,a;t.columns&&(e=h[0].querySelectorAll(".tpgb-pagelink.next"),a=h[0].querySelectorAll(".tpgb-pagelink.prev"),0<e.length&&(e=e[0].dataset&&e[0].dataset.next?e[0].dataset.next:"",parseInt(e)==t.columns?_(".tpgb-pagelink.next").hide():_(".tpgb-pagelink.next").show()),0<a.length&&(a=a[0].dataset&&a[0].dataset.prev?a[0].dataset.prev:"",1==parseInt(a)?_(".tpgb-pagelink.prev").hide():_(".tpgb-pagelink.prev").show()))},N=function(t,e){0<t.length&&t.forEach(function(t){e==Number(t.dataset.page)?t.classList.add("active"):t.classList.contains("active")&&t.classList.remove("active")})},j=function(){let e=h[0].querySelector(".tpgb-search-area"),a=h[0].querySelector("input[name=s]"),t=h[0].querySelectorAll(".tpgb-rental-overlay"),s=h[0].querySelector(".tpgb-close-btn");_(s).on("click",function(){a.value="",_(this).hide(),_(e).slideUp(),0<t.length&&(t[0].style.cssText="visibility:hidden;opacity:0;")}),h.keyup(function(t){"Escape"===t.key&&(a.value="",_(e).slideUp(),s.style.cssText="display:none")})}})}(jQuery);