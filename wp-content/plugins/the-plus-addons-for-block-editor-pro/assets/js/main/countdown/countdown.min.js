(function(a){"use strict";function b(b){var c=a("."+b+".tp-countdown");if(0<c.length){function d(){c.each(function(){var c=a(this),d=c.find(".tpgb-countdown-counter").data("time"),e=c.data("offset"),f=c.data("day"),g=c.data("hour"),h=c.data("min"),i=c.data("sec");d&&""!=d&&c.downCount({date:d,offset:e,text_day:f,text_hour:g,text_minute:h,text_second:i},function(){k(b)})})}d(),c.change(function(){d()})}}function c(b){var c=a("."+b+" .flipdown").data("time"),d=a("."+b),e=d.data("offset"),f=d.data("day"),g=d.data("hour"),h=d.data("min"),i=d.data("sec"),j=d.data("filptheme");f=null==f?"":f,g=null==g?"":g,h=null==h?"":h,i=null==i?"":i,null!=c&&(c-=3600*e,new FlipDown(c,b,{theme:j,headings:[f,g,h,i]}).start().ifEnded(()=>{k(b)}))}function d(b){var c=document.getElementById("s"+b),d=document.getElementById("m"+b),e=document.getElementById("h"+b),f=document.getElementById("d"+b),g={duration:200,color:"#000000",trailColor:"#ddd",strokeWidth:5,trailWidth:3};if(null!=c){var h=new ProgressBar.Circle(c,g),i=new ProgressBar.Circle(d,g),j=new ProgressBar.Circle(e,g),l=new ProgressBar.Circle(f,g),m=a("."+b),n=m.find(".tpgb-countdown-counter").data("time"),o=m.data("day"),p=m.data("hour"),q=m.data("min"),r=m.data("sec");o=null==o?"":o,p=null==p?"":p,q=null==q?"":q,r=null==r?"":r;var s=setInterval(function(){var a=new Date,c=new Date(n),d=c-a,e=Math.floor(1*(d/86400000));l.animate(e/(e+5),function(){l.setText("<span class = \"number\">"+e+"</span><span class=\"label\">"+o+"</span>")});var f=Math.floor(1*(d%86400000/3600000));j.animate(f/24,function(){j.setText("<span class=\"number\">"+f+"</span><span class=\"label\">"+p+"</span>")});var g=Math.floor(1*(d%86400000%3600000/60000));i.animate(g/60,function(){i.setText("<span class = \"number\">"+g+"</span><span class = \"label\">"+q+"</span>")});var m=Math.floor(1*(d%86400000%3600000%60000/1e3));h.animate(m/60,function(){h.setText("<span class = \"number\">"+m+"</span><span class = \"label\">"+r+"</span>")}),0==e+f+g+m&&(k(b),clearInterval(s))},1e3)}}function e(b){let c=a("."+b+".tp-countdown"),d=c.data("countdata"),e=c[0].querySelectorAll(".tpgb-countdown-counter"),f=new Date().getTime()+6e4*d.sctimeli;if(d&&d.storetype&&"cookie"==d.storetype)var g=`tpgb-${d.type}-${d.style}-${b}-${d.sctimeli}`;if(0<e.length)if("cookie"==d.storetype){localStorage.getItem(g)||localStorage.setItem(g,+new Date(f)),o=+localStorage.getItem(g),n=o+6e4*d.delayminit;let a=c.s1Interval=setInterval(function(){let e=Math.floor((o-new Date)/6e4);if(0<e+1){let a=new Date,b=o-a,d=Math.floor(b/86400000),e=Math.floor(b%86400000/3600000),f=Math.floor(b%3600000/60000),g=Math.floor(b%60000/1e3);0<c[0].querySelectorAll(".days").length&&(c[0].querySelector(".days").innerHTML=d),0<c[0].querySelectorAll(".hours").length&&(c[0].querySelector(".hours").innerHTML=e),0<c[0].querySelectorAll(".minutes").length&&(c[0].querySelector(".minutes").innerHTML=f),0<c[0].querySelectorAll(".seconds").length&&(c[0].querySelector(".seconds").innerHTML=g)}else k(b,g),"no"==d.fakeloop&&clearInterval(a)},1e3)}else if("normal"==d.storetype){let a=setInterval(function(){let b=+new Date(f),d=new Date,e=b-d,g=Math.floor(e/86400000),h=Math.floor(e%86400000/3600000),i=Math.floor(e%3600000/60000),j=Math.floor(e%60000/1e3);0<=g+h+i+j?(0<c[0].querySelectorAll(".days").length&&(c[0].querySelector(".days").innerHTML=g),0<c[0].querySelectorAll(".hours").length&&(c[0].querySelector(".hours").innerHTML=h),0<c[0].querySelectorAll(".minutes").length&&(c[0].querySelector(".minutes").innerHTML=i),0<c[0].querySelectorAll(".seconds").length&&(c[0].querySelector(".seconds").innerHTML=j)):clearInterval(a)},1e3)}}function f(b){let c=a("."+b),d=c.data("countdata"),e=a("."+b+" .flipdown"),f=c.data("day"),g=c.data("hour"),h=c.data("min"),i=c.data("sec"),j=c.data("filptheme"),l=`tpgb-${d.type}-${d.style}-${b}-${d.sctimeli}`;if(f=null==f?"":f,g=null==g?"":g,h=null==h?"":h,i=null==i?"":i,c[0].classList.contains("countdown-style-2"))if(c[0].insertAdjacentHTML("afterbegin",`<div id ="${b}" class="flipdown tpgb-countdown-counter"></div>`),"cookie"==d.storetype){let a=new Date().getTime()+6e4*d.sctimeli;localStorage.getItem(l)||localStorage.setItem(l,+new Date(a));let c=+localStorage.getItem(l),e=new Date(c).getTime()/1e3,m=Math.floor((c-new Date)/6e4);n=c+60000*d.delayminit,0<=m?new FlipDown(e,b,{theme:j,headings:[f,g,h,i]}).start().ifEnded(()=>{k(b,l)}):k(b,l)}else if("normal"==d.storetype){let a=new Date().getTime()+6e4*d.sctimeli,c=+new Date(a),e=new Date(c).getTime()/1e3;new FlipDown(e,b,{theme:j,headings:[f,g,h,i]}).start().ifEnded(()=>{})}}function g(b){let c=a("."+b+".countdown-style-3"),d=c.data("countdata"),e=`tpgb-${d.type}-${d.style}-${b}-${d.sctimeli}`,f=new Date().getTime()+6e4*d.sctimeli;l(b,c);var g=document.getElementById("s"+b),h=document.getElementById("m"+b),i=document.getElementById("h"+b),j=document.getElementById("d"+b),m={duration:200,color:"#000000",trailColor:"#ddd",strokeWidth:5,trailWidth:3},o=new ProgressBar.Circle(g,m),p=new ProgressBar.Circle(h,m),q=new ProgressBar.Circle(i,m),r=new ProgressBar.Circle(j,m),s=a("."+b),t=s.data("day"),u=s.data("hour"),v=s.data("min"),w=s.data("sec");if(t=null==t?"":t,u=null==u?"":u,v=null==v?"":v,w=null==w?"":w,"cookie"==d.storetype){if(localStorage.getItem(e)||localStorage.setItem(e,+new Date(f)),g){let a=+localStorage.getItem(e),c=Math.floor((a-new Date)/6e4);n=a+6e4*d.delayminit;let f=new Date(a).getTime();if(0<c+1)var x=setInterval(function(){var a=new Date,c=new Date(f),d=c-a,e=Math.floor(1*(d/86400000));r.animate(e/(e+5),function(){r.setText("<span class = \"number\">"+e+"</span><span class=\"label\">"+t+"</span>")});var g=Math.floor(1*(d%86400000/3600000));q.animate(g/24,function(){q.setText("<span class=\"number\">"+g+"</span><span class=\"label\">"+u+"</span>")});var h=Math.floor(1*(d%86400000%3600000/60000));p.animate(h/60,function(){p.setText("<span class = \"number\">"+h+"</span><span class = \"label\">"+v+"</span>")});var i=Math.floor(1*(d%86400000%3600000%60000/1e3));o.animate(i/60,function(){o.setText("<span class = \"number\">"+i+"</span><span class = \"label\">"+w+"</span>")}),0==e+g+h+i&&(k(b),clearInterval(x))},1e3);else k(b,e)}}else if("normal"==d.storetype&&null!=g){let a=+new Date(f),c=new Date(a).getTime();var x=setInterval(function(){var a=new Date,d=new Date(c),f=d-a,g=Math.floor(1*(f/86400000));r.animate(g/(g+5),function(){r.setText("<span class = \"number\">"+g+"</span><span class=\"label\">"+t+"</span>")});var h=Math.floor(1*(f%86400000/3600000));q.animate(h/24,function(){q.setText("<span class=\"number\">"+h+"</span><span class=\"label\">"+u+"</span>")});var i=Math.floor(1*(f%86400000%3600000/60000));p.animate(i/60,function(){p.setText("<span class = \"number\">"+i+"</span><span class = \"label\">"+v+"</span>")});var j=Math.floor(1*(f%86400000%3600000%60000/1e3));o.animate(j/60,function(){o.setText("<span class = \"number\">"+j+"</span><span class = \"label\">"+w+"</span>")}),0==g+h+i+j&&(k(b,e),clearInterval(x))},1e3)}}function h(b){let c=a("."+b),d=c.data("countdata");if(d&&d.storetype&&"cookie"==d.storetype)var e=`tpgb-${d.type}-${b}-${d.initNum}`;let f,g=c[0].querySelector(".tpgb-number-count"),h=d.initNum,k=d.endNum,l=d.numRange,m=d.changeInterval,n=d.fenaLoop,o=d.massage;if(g.innerHTML="<span class=\"tpgb-fake-text\">"+o.replace("{visible_counter}",`<span class="tpgb-fake-visiblecounter">${h}</span>`)+"</span>",+h>=+k){let a,b;"normal"==d.storetype?a=h:"cookie"==d.storetype&&!localStorage.getItem(e)&&i(e,h),f=setInterval(function(){let c=1<+l?Math.round(Math.random()*+l):1;"normal"==d.storetype?b=h-=c:"cookie"==d.storetype&&(b=h=localStorage.getItem(e)-c,i(e,h)),+b>=+k?j(o,b,g):d.fenaLoop&&"yes"==d.fenaLoop?"normal"==d.storetype?h=a:"cookie"==d.storetype&&i(e,h):clearInterval(f)},1e3*m)}if(h<=k){let a,b;"normal"==d.storetype?a=h:"cookie"==d.storetype&&(a=h),f=setInterval(function(){let c=1<+l?Math.round(Math.random()*l):1;"normal"==d.storetype?b=h=+h+ +c:"cookie"==d.storetype&&(b=h=+localStorage.getItem(e)+ +c,i(e,h)),+b<=+k?j(o,b,g):d.fenaLoop&&"yes"==d.fenaLoop?"normal"==d.storetype?h=a:"cookie"==d.storetype&&i(e,a):clearInterval(f)},1e3*m)}}function i(a,b){localStorage.setItem(a,b)}function j(a,b,c){let d="<span class=\"tpgb-fake-text\">"+a.replace("{visible_counter}",`<span class="tpgb-fake-visiblecounter">${Math.floor(b)}</span>`)+"</span>";c.innerText="",d?c.insertAdjacentHTML("afterbegin",d):c.insertAdjacentHTML("afterbegin",Math.floor(b))}function k(b,c){var d=a("."+b+".tp-countdown"),h=d.data("countdata");if(h.fakeloop&&"yes"==h.fakeloop&&"none"==h.expiry&&"scarcity"==h.type)if("style-1"==h.style){let a=Math.floor((n-new Date)/6e4),d=new Date().getTime()+6e4*h.sctimeli;0>a&&(localStorage.removeItem(c),o=localStorage.setItem(c,+new Date(d)),e(b))}else if("style-2"==h.style){let a=setInterval(function(){let e=Math.floor((n-new Date)/6e4);d[0].innerHTML="",0>e&&(localStorage.removeItem(c),clearInterval(a),f(b))},1e3)}else if("style-3"==h.style){let a=setInterval(function(){let e=Math.floor((n-new Date)/6e4);d[0].innerHTML="",0>e&&(localStorage.removeItem(c),clearInterval(a),g(b))},1e3)}if("none"!=h.expiry){let a=h?h.expiry:"",i=Math.floor((n-new Date)/6e4),j=new Date().getTime()+6e4*h.sctimeli;if("redirect"==a){if("scarcity"!=h.type)"normal"==h.type&&(window.location.href=decodeURIComponent(h.redirect));else if("style-1"==h.style)h.fakeloop&&"yes"==h.fakeloop?0>i?(localStorage.removeItem(c),o=localStorage.setItem(c+new Date(j)),e(b)):window.location.href=decodeURIComponent(h.redirect):window.location.href=decodeURIComponent(h.redirect);else if("style-2"==h.style){if(h.fakeloop&&"yes"==h.fakeloop){let a=setInterval(function(){let d=Math.floor((n-new Date)/6e4);0>d?(localStorage.removeItem(c),clearInterval(a),f(b)):window.location.href=decodeURIComponent(h.redirect)},1e3)}else window.location.href=decodeURIComponent(h.redirect);}else if("style-3"==h.style){let a=d[0].querySelectorAll(".tpgb-countdown-counter");if(0<a.length&&a[0].remove(),h.fakeloop&&"yes"==h.fakeloop){let a=setInterval(function(){let d=Math.floor((n-new Date)/6e4);0>d?(localStorage.removeItem(c),clearInterval(a),g(b)):window.location.href=decodeURIComponent(h.redirect)},1e3)}else window.location.href=decodeURIComponent(h.redirect)}}else if("showmsg"==a){if("scarcity"!=h.type)"normal"==h.type&&(d[0].innerHTML="",d[0].innerHTML=`<div class="tpgb-countdown-expiry">${h.expiryMsg}</div>`);else if("style-1"==h.style){let a=d[0].querySelectorAll(".tpgb-countdown-expiry"),f=d[0].querySelectorAll(".tpgb-countdown-counter");0>i?(localStorage.removeItem(c),o=localStorage.setItem(c,+new Date(j)),0<a.length&&a[0].remove(),f[0].style.display="block",e(b)):0==a.length&&(f[0].style.display="none",d[0].insertAdjacentHTML("afterbegin",`<div class="tpgb-countdown-expiry">${h.expiryMsg}</div>`))}else if("style-2"==h.style){if(h.fakeloop&&"yes"==h.fakeloop){let a=setInterval(function(){let e=Math.floor((n-new Date)/6e4);d[0].innerHTML="",0>e?(localStorage.removeItem(c),clearInterval(a),f(b)):d[0].innerHTML=`<div class="tpgb-countdown-expiry">${h.expiryMsg}</div>`},1e3)}else d[0].innerHTML="",d[0].innerHTML=`<div class="tpgb-countdown-expiry">${h.expiryMsg}</div>`;}else if("style-3"==h.style)if(h.fakeloop&&"yes"==h.fakeloop){let a=setInterval(function(){let e=Math.floor((n-new Date)/6e4);0>e?(localStorage.removeItem(c),d[0].innerHTML="",clearInterval(a),g(b)):(d[0].innerHTML="",d[0].innerHTML=`<div class="tpgb-countdown-expiry">${h.expiryMsg}</div>`)},1e3)}else d[0].innerHTML="",d[0].innerHTML=`<div class="tpgb-countdown-expiry">${h.expiryMsg}</div>`;}else if("showtemp"==h.expiry){let a=d[0].querySelectorAll(".tpgb-countdown-expiry");if("scarcity"==h.type){if("style-1"==h.style){let f=d[0].querySelectorAll(".tpgb-countdown-counter");0>i?(localStorage.removeItem(c),o=localStorage.setItem(c,+new Date(j)),0<f.length&&f[0].classList.contains("tpgb-hide")&&f[0].classList.remove("tpgb-hide"),0<a.length&&a[0].classList.add("tpgb-hide"),e(b)):(f[0].classList.add("tpgb-hide"),0<a.length&&a[0].classList.contains("tpgb-hide")&&a[0].classList.remove("tpgb-hide"),m())}else if("style-2"==h.style){let e=d[0].querySelectorAll(".flipdown.tpgb-countdown-counter");if(0<e.length&&e[0].remove(),a&&a[0]&&a[0].classList.contains("tpgb-hide")&&(a[0].classList.remove("tpgb-hide"),a[0].classList.add("tpgb-show"),m()),h.fakeloop&&"yes"==h.fakeloop){let d=setInterval(function(){let e=Math.floor((n-new Date)/6e4);0>e&&(localStorage.removeItem(c),a&&a[0]&&a[0].classList.contains("tpgb-show")&&a[0].classList.remove("tpgb-show"),a&&a[0]&&!a[0].classList.contains("tpgb-hide")&&a[0].classList.add("tpgb-hide"),clearInterval(d),f(b))},1e3)}}else if("style-3"==h.style){let e=d[0].querySelectorAll(".tpgb-countdown-counter");if(0<e.length&&e[0].remove(),a[0].classList.contains("tpgb-hide")&&(a[0].classList.remove("tpgb-hide"),a[0].classList.add("tpgb-show"),m()),h.fakeloop&&"yes"==h.fakeloop){let d=setInterval(function(){let e=Math.floor((n-new Date)/6e4);0>e&&(localStorage.removeItem(c),a[0].classList.contains("tpgb-show")&&a[0].classList.remove("tpgb-show"),!a[0].classList.contains("tpgb-hide")&&a[0].classList.add("tpgb-hide"),clearInterval(d),g(b))},1e3)}}}else if("normal"==h.type){let a=d[0].querySelectorAll(".tpgb-countdown-expiry"),b=d[0].querySelectorAll(".tpgb-countdown-counter");0<b.length&&b[0].remove(),a[0].classList.contains("tpgb-hide")&&(a[0].classList.remove("tpgb-hide"),a[0].classList.add("tpgb-show"),m())}}}}function l(a,b){if(a){b[0].insertAdjacentHTML("afterbegin",`<div class="tpgb-countdown-counter"><div class="counter-part" id="d${a}"></div><div class="counter-part" id="h${a}"></div><div class="counter-part" id="m${a}"></div><div class="counter-part" id="s${a}"></div></div>`)}}function m(){let b=document.querySelectorAll(".tpgb-isotope");b.forEach(function(b){let c=b.querySelector(".post-loop-inner");null!=c&&setTimeout(function(){a(c).isotope("reloadItems").isotope()},300)});let c=document.querySelectorAll(".tpgb-carousel");c.forEach(function(a){var b=slideStore.get(a);b.refresh()});let d=document.querySelectorAll(".tpgb-metro");d&&null!=d&&tpgb_metro_layout("")}var n,o="";a(".tp-countdown").each(function(){var i=a(this),j=i.data("countdata");j&&j.type&&"normal"==j.type?(j.style&&"style-1"==j.style&&b(j.blockId),j.style&&"style-2"==j.style&&c(j.blockId),j.style&&"style-3"==j.style&&d(j.blockId)):j&&j.type&&"scarcity"==j.type?j.style&&"style-1"==j.style?e(j.blockId):j.style&&"style-2"==j.style?f(j.blockId):j.style&&"style-3"==j.style&&g(j.blockId):j&&j.type&&"numbers"==j.type&&h(j.blockId)})})(jQuery);