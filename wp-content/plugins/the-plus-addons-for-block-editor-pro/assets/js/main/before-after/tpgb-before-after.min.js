var ba_Container;!function(s){"use strict";s(document).ready(function(){s(".tpgb-before-after").on("dragstart",function(e){e.preventDefault()});var e,i,o,t=0,n="";s(".tpgb-before-after").each(function(){var a,a=s(this).data("id");(a=s("."+a)).css("visibility","hidden"),t++,a.attr("data-before-after-id",t),e=a.data("type"),i=a.data("separate_width"),o=a.data("bottom-separator-size"),a.data("show")&&("cursor"==e?(n=a.data("separate_position"),a.find(".tpgb-beforeafter-img").css("position","absolute"),a.find(".tpgb-before-sepicon").css("left",n+"%"),a.find(".tpgb-beforeafter-img").css("position","absolute"),a.find(".tpgb-before-sepicon").hide(),a.find(".tpgb-beforeafter-inner").on("mouseout",function(e){show_separator_image(),position_changing(e.pageX,e.pageY)})):(n=a.data("separate_position"),"horizontal"==e?a.find(".tpgb-before-sepicon").css("left",n+"%"):"vertical"==e&&a.find(".tpgb-before-sepicon").css("top",n+"%"),a.find(".tpgb-beforeafter-img").css("position","absolute"),a.find(".tpgb-before-sepicon").show(),a.find(".tpgb-beforeafter-inner").on("mouseout",function(e){show_separator_image(),position_changing(e.pageX,e.pageY)})),"no"==a.data("separate_switch")&&(a.find(".tpgb-bottom-sep").css("display","none"),a.find(".tpgb-beforeafter-sep").css("display","none"),a.find(".tpgb-before-sepicon").css("display","none")),"show"!=e&&(a.on("touchstart",function(e){setba_Container(this),changing_this=TouchDevice=!0}),a.on("touchend",function(){s(".tpgb-before-after").find(".tpgb-beforeafter-sep");changing_this=!1,show_separator_image()}),a.on("touchcancel",function(){s(".tpgb-before-after").find(".tpgb-beforeafter-sep");changing_this=!1,show_separator_image()})),"yes"==a.data("click_hover_move")?(a.find(".tpgb-beforeafter-inner , .tpgb-bottom-sep").on("mouseover",function(e){var t;setba_Container(this),Playing_this||(changing_this=!0,"horizontal"==ba_type?(t=e.pageX-ba_Container.offset().left,s(this).find(".tpgb-beforeafter-sep").css("left",t-i/2),s(this).find(".tpgb-before-img").width(t),a.find(".tpgb-beforeafter-inner").css("cursor","ew-resize")):"vertical"==ba_type?(t=e.pageY-ba_Container.offset().top-i/2,s(this).find(".tpgb-beforeafter-sep").css("top",t),s(this).find(".tpgb-before-img").height(t),a.find(".tpgb-beforeafter-inner").css("cursor","ns-resize")):"cursor"==ba_type&&(t=e.pageX-ba_Container.offset().left,s(this).find(".tpgb-beforeafter-sep").css("left",t-o/2)))}),a.find(".tpgb-beforeafter-inner, .tpgb-bottom-sep").on("mouseout",function(e){position_changing(e.pageX,e.pageY),changing_this=!1})):(a.find(".tpgb-beforeafter-inner, .tpgb-bottom-sep").on("mousedown",function(e){var t;TouchDevice||(ba_sep_obj&&ba_sep_show&&ba_sep_obj.show(),setba_Container(this),t=s(this).parent(".tpgb-before-after").data("id"),onMouseMove(e.pageX,e.pageY,t))}),a.find(".tpgb-beforeafter-inner, .tpgb-bottom-sep").on("mouseenter",function(e){ba_sep_obj&&ba_sep_show&&ba_sep_obj.show(),setba_Container(this),e.which||(changing_this=!1)}),a.find(".tpgb-beforeafter-sep,.tpgb-before-sepicon").on("mousedown",function(e){TouchDevice||(setba_Container(this),changing_this=!0)}),a.find(".tpgb-beforeafter-sep,.tpgb-before-sepicon").on("mouseover",function(e){setba_Container(this)}),a.find(".tpgb-beforeafter-sep,.tpgb-before-sepicon").on("mouseup",function(){changing_this=!1}),a.find(".tpgb-beforeafter-inner, .tpgb-bottom-sep").on("mouseup",function(){changing_this=!1})),a.find(".tpgb-beforeafter-inner").on("mousedown",function(e){TouchDevice||(setba_Container(this),stop_animation())}))}),size_Elements(),s(".tpgb-beforeafter-inner").on("mousemove",function(e){var t=s(this).parent(".tpgb-before-after").data("id");changing_this&&!Playing_this&&onMouseMove(e.pageX,e.pageY,t)}),s(".tpgb-bottom-sep").on("mousemove",function(e){var t=s(this).parent(".tpgb-before-after").data("id");changing_this&&!Playing_this&&onMouseMove(e.pageX,e.pageY,t)}),s(".tpgb-beforeafter-inner").on("touchmove",function(e){e.preventDefault();var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],e=s(this).parent(".tpgb-before-after").data("id");changing_this&&!Playing_this&&onMouseMove(t.pageX,t.pageY,e)}),s(".tpgb-bottom-sep").on("touchmove",function(e){e.preventDefault();var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],e=s(this).parent(".tpgb-before-after").data("id");changing_this&&!Playing_this&&onMouseMove(t.pageX,t.pageY,e)}),s(window).on("resize",function(){size_Elements()})})}(jQuery);var ba_obj,ba_sep_obj,ba_sep_Image,before_obj,after_obj,beforeImage,afterImage,ba_type,ba_sep_show,ba_show_mode,sep_Size,ba_ContainerId=0,changing_this=!1,Playing_this=!1,indSize=10,fpsPlay=60,TouchDevice=!1;function setba_Container(e){container=jQuery(e).closest(".tpgb-before-after"),containerId=container.data("id"),hide_separator_image(container),ba_Container&&ba_ContainerId==containerId||(Playing_this&&(stop_animation(),ba_sep_show&&ba_sep_obj.show()),ba_Container=container,ba_ContainerId=containerId,ba_sep_obj=ba_Container.find(".tpgb-beforeafter-sep"),ba_obj=ba_Container.find(".tpgb-beforeafter-inner"),before_obj=ba_Container.find(".tpgb-before-img"),after_obj=ba_Container.find(".tpgb-after-img"),beforeImage=ba_Container.find(".tpgb-before-img > img"),afterImage=ba_Container.find(".tpgb-after-img > img"),ba_type=ba_Container.data("type"),ba_sep_show=!0,"no"==ba_Container.data("separate_switch")&&(ba_sep_show=!1),1==ba_sep_show?ba_sep_obj.show():ba_sep_obj.hide())}function play_animation(e,t,a,i,o,n){Playing_this&&(e+=t,"vertical"==ba_type?onMouseMove(a,i+e):onMouseMove(a+e,i),e<=o+1?setTimeout(play_animation,n,e,t,a,i,o,n):stop_animation())}function stop_animation(){Playing_this&&(changing_this=!(Playing_this=!1),ba_sep_obj.hide())}function onMouseMove(e,t,a){var i;changing_this&&ba_sep_show&&ba_sep_obj.show(),position_changing(e,t)||(a=jQuery("."+a),sep_Size=a.data("separate_width"),"horizontal"==ba_type?(i=jQuery("."+containerId).offset().left,pos=e-i,pos>=ba_obj.width()&&(pos=ba_obj.width()),jQuery("."+containerId+" .tpgb-beforeafter-sep").css("left",pos-sep_Size/2),0!=ba_show_mode&&ba_sep_Image.css("left",pos),jQuery("."+containerId+" .tpgb-beforeafter-img.tpgb-before-img").width(pos),before_obj.find(".tpgb-beforeafter-label.before-label").width()+50<pos?before_obj.find(".tpgb-beforeafter-label.before-label").css("opacity","1"):before_obj.find(".tpgb-beforeafter-label.before-label").css("opacity","0")):"vertical"==ba_type?(i=jQuery("."+containerId).offset().top,pos=t-i,pos>=ba_obj.height()&&(pos=ba_obj.height()),jQuery("."+containerId+" .tpgb-beforeafter-sep").css("top",pos-sep_Size/2),0!=ba_show_mode&&ba_sep_Image.css("top",pos),jQuery("."+containerId+" .tpgb-beforeafter-img.tpgb-before-img").height(pos),before_obj.find(".tpgb-beforeafter-label.before-label"),rat=ba_obj.height()/pos,rat<2?before_obj.find(".tpgb-beforeafter-label.before-label").css("opacity","1"):before_obj.find(".tpgb-beforeafter-label.before-label").css("opacity","0")):"cursor"==ba_type&&(pos=e-ba_Container.offset().left,pos>=ba_obj.width()&&(pos=ba_obj.width()),ba_sep_obj.css("left",pos-indSize/2),rat=pos/ba_obj.width(),beforeImage.css("opacity",1-rat),before_obj.find(".tpgb-beforeafter-label.before-label"),.3<1-rat?before_obj.find(".tpgb-beforeafter-label.before-label").css("opacity","1"):before_obj.find(".tpgb-beforeafter-label.before-label").css("opacity","0")))}function size_Elements(){jQuery(".tpgb-beforeafter-img > img").imgLoad(function(){if(img=jQuery(this),container=img.closest(".tpgb-before-after"),container=container.data("id"),container=jQuery("."+container),style=container.data("type"),"show"!=style){if(img.css("min-width","none"),img.css("max-width","none"),sbsShrinked=!1,"yes"==container.data("responsive")){for(p=container.parent(),parentWidth=p.width();!p||0==parentWidth;)p=p.parent(),parentWidth=p.width();img.css("max-width")&&"none"!=img.css("max-width")||"yes"!=container.data("full_width")?img.css("max-width")&&"none"!=img.css("max-width")||img.css("max-width",img.width()):img.css("max-width",parentWidth),"yes"==container.data("full_width")?img.css("width",parentWidth):img.css("width",img.width())}var e;container.data("width")&&img.css("width",container.data("width")),container.data("max-width")&&img.css("max-width",container.data("max-width")),initRatio=container.data("separate_position")/100,(img.hasClass("tpgb-beforeimg-wrap")&&"vertical"!=style||img.hasClass("tpgb-afterimg-wrap"))&&img.css("height","100%"),img.hasClass("tpgb-beforeimg-wrap")&&(container.css("visibility","visible"),width=img.width(),height=img.height(),container.find(".tpgb-beforeafter-img").width("auto").css("height","100%"),container.find(".tpgb-beforeafter-inner").width(width).height(height),container.find(".tpgb-bottom-sep").width(width),container.width(width),"horizontal"==style?container.find(".tpgb-before-img").width(img.width()*initRatio):"vertical"==style&&container.find(".tpgb-before-img").height(img.height()*initRatio),separator=container.find(".tpgb-beforeafter-sep"),"horizontal"==style?"middle"==container.data("separator_style")?(sep_Size=container.data("separate_width"),separator.width(sep_Size),separator.height(img.height()),sp=container.find(".tpgb-before-img").width()-sep_Size/2,separator.css("left",sp),separator.css("cursor","ew-resize")):(sep_Size=container.data("separate_width"),separator.height(sep_Size),separator.width(15),separator.css("left",img.width()*initRatio+"px"),e=container.find(".tpgb-before-img").height(),separator.css("top",e),separator.css("cursor","ew-resize"),container.find(".tpgb-bottom-sep").height(sep_Size),container.find(".tpgb-bottom-sep").show()):"vertical"==style?"middle"==container.data("separator_style")&&(sep_Size=container.data("separate_width"),separator.height(sep_Size),separator.width(img.width()),sp=container.find(".tpgb-before-img").height()-sep_Size/2,separator.css("top",sp),separator.css("cursor","ns-resize")):"cursor"==style&&"yes"==container.data("separate_switch")&&(sep_Size=container.data("separate_width"),e=container.find(".tpgb-before-img").height(),container.find(".tpgb-bottom-sep").show()))}})}function hide_separator_image(e){ba_sep_Image=e.find(".tpgb-before-sepicon"),ba_show_mode=0,e.data("separate_image")&&(ba_show_mode=e.data("separate_image"))}function show_separator_image(){1==ba_show_mode&&ba_sep_Image.show()}function full_After(){w=ba_obj.width()-indSize,ba_sep_obj.css("left",w),beforeImage.css("opacity","0")}function zero_After(){ba_sep_obj.css("left",0),beforeImage.css("opacity","1")}function position_changing(e,t){return!(!changing_this&&!Playing_this)&&(!Playing_this&&(aligned=!1,"horizontal"==ba_type?(a=jQuery("."+containerId).offset().left,e>=ba_obj.width()+a?(sep_Right(),aligned=!0):e<=a&&(sep_Left(),aligned=!0)):"vertical"==ba_type?(a=jQuery("."+containerId).offset().top,t>=ba_obj.height()+a?(sep_Bottom(),aligned=!0):t<=a&&(sep_Top(),aligned=!0)):"cursor"==ba_type&&(e+indSize/2>=ba_obj.width()+ba_Container.offset().left?(full_After(),aligned=!0):e-indSize/2<=ba_Container.offset().left&&(zero_After(),aligned=!0)),aligned&&"cursor"!=ba_type&&(Playing_this||ba_sep_obj.hide()),aligned));var a}function sep_Right(){w=ba_obj.width(),ba_sep_obj.css("left",w-sep_Size/2),0!=ba_show_mode&&ba_sep_Image.css("left",w),before_obj.width(w)}function sep_Left(){ba_sep_obj.css("left",0),0!=ba_show_mode&&ba_sep_Image.css("left",0),before_obj.width(0)}function sep_Top(){ba_sep_obj.css("top",-sep_Size/2),0!=ba_show_mode&&ba_sep_Image.css("top",0),before_obj.height(0)}function sep_Bottom(){h=ba_obj.height(),ba_sep_obj.css("top",h-sep_Size/2),0!=ba_show_mode&&ba_sep_Image.css("top",h),before_obj.height(h)}!function(t){t.fn.imgLoad=function(e){return this.each(function(){e&&(this.complete?e.apply(this):t(this).on("load",function(){e.apply(this)}))})}}(jQuery);