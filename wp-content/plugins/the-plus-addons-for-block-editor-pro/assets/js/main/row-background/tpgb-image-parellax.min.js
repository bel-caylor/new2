!function(s){"use strict";s(".tpgb-section:not(.tpgb-section-editor),.tpgb-container-row:not(.tpgb-container-row-editor)").each(function(){var t,e,a,r,o,l=s(this).find(".tpgb-deep-layer");l.hasClass("tpgb-img-parallax-hover")&&(r=l.attr("data-opacity"),t=l.attr("data-amount"),o=l.attr("data-perspective"),e=l.attr("data-scale"),a=l.attr("data-type"),l.css("opacity",r),r=0,r="tilt"===a?.6*-parseInt(t)+"%":-parseInt(t)+"px",l.css({top:r,left:r,right:r,bottom:r,transform:"scale("+e+") perspective("+o+"px)"}),o=document.querySelectorAll(".tpgb-img-parallax-mouse"),Array.prototype.forEach.call(o,function(t,e){t.parentNode.classList.add("image_parallax_row")}),o=document.querySelectorAll(".image_parallax_row"),Array.prototype.forEach.call(o,function(t,e){t.addEventListener("mousemove",function(t){for(var e=t.target.parentNode;!e.classList.contains("image_parallax_row");){if("HTML"===e.tagName)return;e=e.parentNode}var a=e.getBoundingClientRect(),n=t.pageY-(a.top+window.pageYOffset),c=t.pageX-(a.left+window.pageXOffset);n/=e.clientHeight,c/=e.clientWidth;a=e.querySelectorAll(".tpgb-img-parallax-hover");Array.prototype.forEach.call(a,function(t,e){var a,r,o,l=parseFloat(t.getAttribute("data-amount")),s=parseFloat(t.getAttribute("data-perspective")),i=parseFloat(t.getAttribute("data-scale")),p="true"===t.getAttribute("data-inverted");"tilt"===t.getAttribute("data-type")?(r=c*l-l/2,o=(1-n)*l-l/2,p&&(r=(1-c)*l-l/2,o=n*l-l/2),a="scale("+i+") perspective("+s+"px) ",a+="rotateY("+r+"deg) ",a+="rotateX("+o+"deg) "):(o=c*l-l/2,l=n*l-l/2,p&&(o*=-1,l*=-1),a="scale("+i+") translate3D("+o+"px, "+l+"px, 0) "),t.style.transition="all 0s",t.style.webkitTransform=a,t.style.transform=a})}),t.addEventListener("mouseout",function(t){for(var e=t.target.parentNode;!e.classList.contains("image_parallax_row");){if("HTML"===e.tagName)return;e=e.parentNode}t=e.querySelectorAll(".tpgb-img-parallax-hover");Array.prototype.forEach.call(t,function(t,e){parseFloat(t.getAttribute("data-amount"));var a=parseFloat(t.getAttribute("data-scale")),r=parseFloat(t.getAttribute("data-perspective"));t.style.transition="all 3s ease-in-out","tilt"===t.getAttribute("data-type")?(t.style.webkitTransform="scale("+a+") perspective("+r+"px) rotateY(0) rotateX(0)",t.style.transform="scale("+a+") perspective("+r+"px) rotateY(0) rotateX(0)"):(t.style.webkitTransform="scale("+a+") translate3D(0, 0, 0)",t.style.transform="scale("+a+") translate3D(0, 0, 0)")})})}))})}(jQuery);