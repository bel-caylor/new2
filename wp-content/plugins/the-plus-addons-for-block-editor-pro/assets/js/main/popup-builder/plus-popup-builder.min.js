let tpPopupData=new Map;function PlusOffcanvas(t){"use strict";this.wrap=t,this.content=t.find(".tpgb-canvas-content-wrap"),this.button=t.find(".offcanvas-toggle-btn"),this.settings=this.wrap.data("settings"),this.id=this.settings.content_id,this.transition=this.settings.transition,this.esc_close=this.settings.esc_close,this.body_click_close=this.settings.body_click_close,this.direction=this.settings.direction,this.trigger=this.settings.trigger,this.onpageLoad=this.settings.onpageLoad,this.onpageloadDelay=this.settings.onpageloadDelay,this.onScroll=this.settings.onScroll,this.onpageviews=this.settings.onpageviews,this.exitinlet=this.settings.exitInlet,this.inactivity=this.settings.inactivity,this.extraclick=this.settings.extraclick,this.prevurl=this.settings.prevurl,this.scrollHeight=this.settings.scrollHeight,this.previousUrl=this.settings.previousUrl,this.extraId=this.settings.extraId,this.inactivitySec=this.settings.inactivitySec,this.showuseRes=this.settings.showuseRes,this.noXTimes=this.settings.noXTimes,this.tpgbXdays=this.settings.days,this.duration=500,this.time=0,this.flag=!0,this.ele=jQuery(".tpgb-block-"+this.id+"-canvas"),this.animSetting=this.ele.data("animationsetting"),this.destroy(),this.init(),tpPopupData.set(this.id,this.settings)}function showuserRest(t){var e,s,i=t.data("settings"),a="tpgbXTimeView-"+i.content_id;if(sFlag=!0,i.showuseRes&&"yes"==i.showuseRes&&""!=i.noXTimes&&""!=i.days?(s=localStorage.getItem(a),null!=(s=jQuery.parseJSON(s))&&null!=s.xtimeView?(e=Number(s.xtimeView)+1,localStorage.setItem(a,JSON.stringify(Object.assign({},s,{xtimeView:e})))):localStorage.setItem(a,'{ "xtimeView": 1 }'),Number(jQuery.parseJSON(localStorage.getItem(a)).xtimeView)<=Number(i.noXTimes)?sFlag=!0:(e=new Date,i=(new Date).setDate(e.getDate()+Number(i.days)),s=localStorage.getItem(a),s=jQuery.parseJSON(s),i=Object.assign({},s,{Xdate:i}),null!=s&&null==s.Xdate&&localStorage.setItem(a,JSON.stringify(i)),sFlag=!1,i=localStorage.getItem(a),null!=(i=jQuery.parseJSON(i))&&null!=i.Xdate&&new Date(Number(e))>new Date(Number(i.Xdate))&&(localStorage.removeItem(a),sFlag=!0))):localStorage.getItem(a)&&localStorage.removeItem(a),!sFlag)return!1;new PlusOffcanvas(t)}document.addEventListener("DOMContentLoaded",function(){jQuery("body").hasClass("block-editor-page")||jQuery(".tpgb-offcanvas-wrapper").each(function(){var t=jQuery(this);showuserRest(t);var e=t.find(".scroll-view"),s=t.find(".offcanvas-toggle-btn.position-fixed");t.hasClass("scroll-view")&&s&&jQuery(window).on("scroll",function(){var s=jQuery(this).scrollTop();e.each(function(){var t=jQuery(this).data("scroll-view"),e=jQuery(this).data("canvas-id"),e=jQuery("."+e);t<s?e.addClass("show"):e.removeClass("show")})})})}),PlusOffcanvas.prototype={id:"",wrap:"",content:"",button:"",settings:{},transition:"",delaytimeout:"",ele:"",duration:400,initialized:!1,animSetting:{},animations:["slide","slide-along","reveal","push","popup"],init:function(){var t="yes"===this.body_click_close?"":"tpgb-pop-outer-none";this.wrap.length&&(jQuery("html").addClass("tpgb-offcanvas-content-widget"),0===jQuery(".tpgb-offcanvas-container").length&&(jQuery("body").wrapInner('<div class="tpgb-offcanvas-container '+t+'"/>'),this.content.insertBefore(".tpgb-offcanvas-container")),0<this.wrap.find(".tpgb-canvas-content-wrap").length&&(0<jQuery(".tpgb-offcanvas-container > .tpgb-block-"+this.id+"-canvas").length&&jQuery(".tpgb-offcanvas-container > .tpgb-block-"+this.id+"-canvas").remove(),0<jQuery("body > .tpgb-block-"+this.id+"-canvas").length&&jQuery("body > .tpgb-block-"+this.id+"-canvas").remove(),jQuery("body").prepend(this.wrap.find(".tpgb-canvas-content-wrap"))),this.bindEvents());var e=this;document.addEventListener("wpcf7mailsent",function(t){e.destroy()},!1)},destroy:function(){this.close(),this.animations.forEach(function(t){jQuery("html").hasClass("tpgb-"+t)&&jQuery("html").removeClass("tpgb-"+t)}),jQuery("body > .tpgb-block-"+this.id+"-canvas").length},bindEvents:function(){this.trigger&&"yes"==this.trigger&&this.button.on("click",jQuery.proxy(this.toggleContent,this)),"yes"==this.extraclick&&this.extraId&&""!=this.extraId&&jQuery("."+this.extraId).on("click",jQuery.proxy(this.toggleContent,this)),"yes"!=this.onpageLoad&&"yes"!=this.inactivity&&"yes"!=this.prevurl&&"yes"!=this.onpageviews||this.loadShow(),jQuery(window).on("scroll",jQuery.proxy(this.scrollShow,this)),jQuery(document).on("mouseleave",jQuery.proxy(this.exitInlet,this)),jQuery("body").delegate(".tpgb-canvas-content-wrap .tpgb-offcanvas-close","click",jQuery.proxy(this.close,this)),"yes"===this.esc_close&&this.closeESC(),"yes"===this.body_click_close&&this.closeClick()},triggerClick:function(){if("yes"==this.extraclick&&this.extraId&&""!=this.extraId&&this.flag){let t=jQuery(document).find("."+this.extraId);t.on("click",jQuery.proxy(this.toggleContent,this))}},toggleContent:function(t){"yes"==this.extraclick&&this.extraId&&""!=this.extraId&&t.preventDefault(),jQuery("html").hasClass("tpgb-open")?this.close():this.flag&&this.show()},exitInlet:function(){"yes"==this.exitinlet&&this.flag&&(this.show(),this.flag=!1)},loadShow:function(){function t(t){clearTimeout(e),e=setTimeout(function(){t.show(),t.flag=!1},1e3*t.inactivitySec)}var e;"yes"!=this.onpageLoad&&"yes"!=this.onpageviews||!this.flag||setTimeout(()=>{this.show(),this.flag=!1},"yes"==this.onpageLoad?this.onpageloadDelay:500),"yes"==this.inactivity&&this.flag&&this.inactivitySec&&""!=this.inactivitySec&&(this.flag,document.onmousemove=t(this),document.onkeypress=t(this)),"yes"==this.prevurl&&this.previousUrl&&document.referrer&&this.previousUrl==document.referrer&&this.flag&&setTimeout(()=>{this.show()},500)},scrollShow:function(){var t=this.scrollHeight,e=jQuery(window).scrollTop();"yes"==this.onScroll&&this.flag&&t<=e&&(this.show(),this.flag=!1)},AnimIn:function(){!this.ele.hasClass("tpgb_animated")&&this.animSetting&&void 0!==this.animSetting.anime&&this.ele.removeClass("tpgb-view-animation-out tpgb_animated_out tpgb_"+this.animSetting.animeOut).addClass("tpgb_animated").addClass("tpgb_"+this.animSetting.anime)},AnimOut:function(){jQuery(".tpgb-block-"+this.id+"-canvas").hasClass("tpgb-visible")&&!this.ele.hasClass("tpgb_animated_out")&&this.animSetting&&void 0!==this.animSetting.animeOut&&this.ele.removeClass("tpgb_animated tpgb_"+this.animSetting.anime).addClass("tpgb_"+this.animSetting.animeOut).addClass("tpgb-view-animation-out tpgb_animated_out")},show:function(){jQuery(".tpgb-block-"+this.id+"-canvas").addClass("tpgb-visible"),jQuery("html").addClass("tpgb-"+this.transition),jQuery("html").addClass("tpgb-"+this.direction),jQuery("html").addClass("tpgb-open"),jQuery("html").addClass("tpgb-block-"+this.id+"-canvas-open"),jQuery("html").addClass("tpgb-reset"),this.button.addClass("tpgb-is-active"),this.AnimIn()},close:function(){jQuery(".tpgb-block-"+this.id+"-canvas").hasClass("tpgb-slide-along")?(this.delaytimeout=0,jQuery(".tpgb-block-"+this.id+"-canvas").removeClass("tpgb-visible")):this.delaytimeout=this.animSetting.custoutDur||500,setTimeout(jQuery.proxy(function(){jQuery("html").removeClass("tpgb-block-"+this.id+"-canvas-open"),jQuery("html").removeClass("tpgb-open"),jQuery("html").removeClass("tpgb-reset"),jQuery("html").removeClass("tpgb-"+this.transition),jQuery("html").removeClass("tpgb-"+this.direction),jQuery(".tpgb-block-"+this.id+"-canvas").hasClass("tpgb-slide-along")||jQuery(".tpgb-block-"+this.id+"-canvas").removeClass("tpgb-visible")},this),this.delaytimeout),this.button.removeClass("tpgb-is-active"),this.AnimOut()},closeESC:function(){var e=this;""!==e.settings.esc_close&&jQuery(document).on("keydown",function(t){27===t.keyCode&&e.close()})},closeClick:function(){var s=this;jQuery(document).on("click",function(t){var e=[];tpPopupData.forEach(function(t){t.extraclick&&"yes"==t.extraclick&&t.extraId&&""!=t.extraId&&s.flag&&e.push("."+t.extraId)}),e=e.length?e.join(","):".offcanvas-toggle-btn",jQuery(t.target).is(".tpgb-canvas-content-wrap")||0<jQuery(t.target).parents(".tpgb-canvas-content-wrap").length||jQuery(t.target).is(".offcanvas-toggle-btn")||jQuery(t.target).is(e)||0<jQuery(t.target).parents(e).length||s.close()})}};