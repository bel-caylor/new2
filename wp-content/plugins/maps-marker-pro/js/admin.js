!function(){var t={607:function(){(()=>{var t={9705:(t,e,i)=>{"use strict";var n=i(1540);function o(t){var e=[1/0,1/0,-1/0,-1/0];return n.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}o.default=o,e.Z=o},4102:(t,e)=>{"use strict";function i(t,e,i){void 0===i&&(i={});var n={type:"Feature"};return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function n(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var o=0,r=t;o<r.length;o++){var a=r[o];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:t},e,n)}function r(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:t},e,n)}function a(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function s(t,e,n){return void 0===n&&(n={}),i({type:"MultiLineString",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),i({type:"MultiPoint",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),i({type:"MultiPolygon",coordinates:t},e,n)}function h(t,i){void 0===i&&(i="kilometers");var n=e.factors[i];if(!n)throw new Error(i+" units is invalid");return t*n}function u(t,i){void 0===i&&(i="kilometers");var n=e.factors[i];if(!n)throw new Error(i+" units is invalid");return t/n}function p(t){return t%(2*Math.PI)*180/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=i,e.geometry=function(t,e,i){switch(void 0===i&&(i={}),t){case"Point":return n(e).geometry;case"LineString":return r(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=n,e.points=function(t,e,i){return void 0===i&&(i={}),a(t.map((function(t){return n(t,e)})),i)},e.polygon=o,e.polygons=function(t,e,i){return void 0===i&&(i={}),a(t.map((function(t){return o(t,e)})),i)},e.lineString=r,e.lineStrings=function(t,e,i){return void 0===i&&(i={}),a(t.map((function(t){return r(t,e)})),i)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=l,e.multiPolygon=c,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),i({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i},e.radiansToLength=h,e.lengthToRadians=u,e.lengthToDegrees=function(t,e){return p(u(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,i){if(void 0===e&&(e="kilometers"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("length must be a positive number");return h(u(t,e),i)},e.convertArea=function(t,i,n){if(void 0===i&&(i="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var o=e.areaFactors[i];if(!o)throw new Error("invalid original units");var r=e.areaFactors[n];if(!r)throw new Error("invalid final units");return t/o*r},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},1540:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4102);function o(t,e,i){if(null!==t)for(var n,r,a,s,l,c,h,u,p=0,d=0,m=t.type,f="FeatureCollection"===m,g="Feature"===m,_=f?t.features.length:1,v=0;v<_;v++){l=(u=!!(h=f?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var y=0;y<l;y++){var b=0,x=0;if(null!==(s=u?h.geometries[y]:h)){c=s.coordinates;var k=s.type;switch(p=!i||"Polygon"!==k&&"MultiPolygon"!==k?0:1,k){case null:break;case"Point":if(!1===e(c,d,v,b,x))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(!1===e(c[n],d,v,b,x))return!1;d++,"MultiPoint"===k&&b++}"LineString"===k&&b++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(r=0;r<c[n].length-p;r++){if(!1===e(c[n][r],d,v,b,x))return!1;d++}"MultiLineString"===k&&b++,"Polygon"===k&&x++}"Polygon"===k&&b++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(x=0,r=0;r<c[n].length;r++){for(a=0;a<c[n][r].length-p;a++){if(!1===e(c[n][r][a],d,v,b,x))return!1;d++}x++}b++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===o(s.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&!1!==e(t.features[i].properties,i);i++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function s(t,e){var i,n,o,r,a,s,l,c,h,u,p=0,d="FeatureCollection"===t.type,m="Feature"===t.type,f=d?t.features.length:1;for(i=0;i<f;i++){for(s=d?t.features[i].geometry:m?t.geometry:t,c=d?t.features[i].properties:m?t.properties:{},h=d?t.features[i].bbox:m?t.bbox:void 0,u=d?t.features[i].id:m?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(r=l?s.geometries[o]:s))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(r,p,c,h,u))return!1;break;case"GeometryCollection":for(n=0;n<r.geometries.length;n++)if(!1===e(r.geometries[n],p,c,h,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,h,u))return!1;p++}}function l(t,e){s(t,(function(t,i,o,r,a){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(n.feature(t,o,{bbox:r,id:a}),i,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var h={type:s,coordinates:t.coordinates[c]};if(!1===e(n.feature(h,o),i,c))return!1}}))}function c(t,e){l(t,(function(t,i,r){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,c=0,h=0,u=0;return!1!==o(t,(function(o,s,p,d,m){if(void 0===l||i>c||d>h||m>u)return l=o,c=i,h=d,u=m,void(a=0);var f=n.lineString([l,o],t.properties);if(!1===e(f,i,r,m,a))return!1;a++,l=o}))&&void 0}}}))}function h(t,e){if(!t)throw new Error("geojson is required");l(t,(function(t,i,o){if(null!==t.geometry){var r=t.geometry.type,a=t.geometry.coordinates;switch(r){case"LineString":if(!1===e(t,i,o,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(n.lineString(a[s],t.properties),i,o,s))return!1}}}))}e.coordAll=function(t){var e=[];return o(t,(function(t){e.push(t)})),e},e.coordEach=o,e.coordReduce=function(t,e,i,n){var r=i;return o(t,(function(t,n,o,a,s){r=0===n&&void 0===i?t:e(r,t,n,o,a,s)}),n),r},e.featureEach=a,e.featureReduce=function(t,e,i){var n=i;return a(t,(function(t,o){n=0===o&&void 0===i?t:e(n,t,o)})),n},e.findPoint=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var i,o=e.featureIndex||0,r=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),l=l||t.features[o].properties,i=t.features[o].geometry;break;case"Feature":l=l||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var c=i.coordinates;switch(i.type){case"Point":return n.point(c,l,e);case"MultiPoint":return r<0&&(r=c.length+r),n.point(c[r],l,e);case"LineString":return s<0&&(s=c.length+s),n.point(c[s],l,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),n.point(c[a][s],l,e);case"MultiLineString":return r<0&&(r=c.length+r),s<0&&(s=c[r].length+s),n.point(c[r][s],l,e);case"MultiPolygon":return r<0&&(r=c.length+r),a<0&&(a=c[r].length+a),s<0&&(s=c[r][a].length-s),n.point(c[r][a][s],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var i,o=e.featureIndex||0,r=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),l=l||t.features[o].properties,i=t.features[o].geometry;break;case"Feature":l=l||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var c=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),n.lineString([c[s],c[s+1]],l,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),n.lineString([c[a][s],c[a][s+1]],l,e);case"MultiLineString":return r<0&&(r=c.length+r),s<0&&(s=c[r].length+s-1),n.lineString([c[r][s],c[r][s+1]],l,e);case"MultiPolygon":return r<0&&(r=c.length+r),a<0&&(a=c[r].length+a),s<0&&(s=c[r][a].length-s-1),n.lineString([c[r][a][s],c[r][a][s+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,i){var n=i;return l(t,(function(t,o,r){n=0===o&&0===r&&void 0===i?t:e(n,t,o,r)})),n},e.geomEach=s,e.geomReduce=function(t,e,i){var n=i;return s(t,(function(t,o,r,a,s){n=0===o&&void 0===i?t:e(n,t,o,r,a,s)})),n},e.lineEach=h,e.lineReduce=function(t,e,i){var n=i;return h(t,(function(t,o,r,a){n=0===o&&void 0===i?t:e(n,t,o,r,a)})),n},e.propEach=r,e.propReduce=function(t,e,i){var n=i;return r(t,(function(t,o){n=0===o&&void 0===i?t:e(n,t,o)})),n},e.segmentEach=c,e.segmentReduce=function(t,e,i){var n=i,o=!1;return c(t,(function(t,r,a,s,l){n=!1===o&&void 0===i?t:e(n,t,r,a,s,l),o=!0})),n}},5975:(t,e,i)=>{"use strict";i(7107);var n=i(2492),o=i.n(n);const r=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text","scaleButton":"Scale Layers","autoTracingButton":"Auto trace Line"},"measurements":{"totalLength":"Length","segmentLength":"Segment length","area":"Area","radius":"Radius","perimeter":"Perimeter","height":"Height","width":"Width","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),a=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex löschen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer löschen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verknüpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen","scaleButton":"Layer skalieren","autoTracingButton":"Linie automatisch nachzeichen"},"measurements":{"totalLength":"Länge","segmentLength":"Segment Länge","area":"Fläche","radius":"Radius","perimeter":"Umfang","height":"Höhe","width":"Breite","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),s=JSON.parse('{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l\'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}'),l=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),c=JSON.parse('{"tooltips":{"placeMarker":"Adaugă un punct","firstVertex":"Apasă aici pentru a adăuga primul Vertex","continueLine":"Apasă aici pentru a continua desenul","finishLine":"Apasă pe orice obiect pentru a finisa desenul","finishPoly":"Apasă pe primul obiect pentru a finisa","finishRect":"Apasă pentru a finisa","startCircle":"Apasă pentru a desena un cerc","finishCircle":"Apasă pentru a finisa un cerc","placeCircleMarker":"Adaugă un punct"},"actions":{"finish":"Termină","cancel":"Anulează","removeLastVertex":"Șterge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaugă o bulină","drawPolyButton":"Desenează un poligon","drawLineButton":"Desenează o linie","drawCircleButton":"Desenează un cerc","drawRectButton":"Desenează un dreptunghi","editButton":"Editează straturile","dragButton":"Mută straturile","cutButton":"Taie straturile","deleteButton":"Șterge straturile","drawCircleMarkerButton":"Desenează marcatorul cercului","snappingButton":"Fixați marcatorul glisat pe alte straturi și vârfuri","pinningButton":"Fixați vârfurile partajate împreună"}}'),h=JSON.parse('{"tooltips":{"placeMarker":"Нажмите, чтобы нанести маркер","firstVertex":"Нажмите, чтобы нанести первый объект","continueLine":"Нажмите, чтобы продолжить рисование","finishLine":"Нажмите любой существующий маркер для завершения","finishPoly":"Выберите первую точку, чтобы закончить","finishRect":"Нажмите, чтобы закончить","startCircle":"Нажмите, чтобы добавить центр круга","finishCircle":"Нажмите, чтобы задать радиус","placeCircleMarker":"Нажмите, чтобы нанести круговой маркер"},"actions":{"finish":"Завершить","cancel":"Отменить","removeLastVertex":"Отменить последнее действие"},"buttonTitles":{"drawMarkerButton":"Добавить маркер","drawPolyButton":"Рисовать полигон","drawLineButton":"Рисовать кривую","drawCircleButton":"Рисовать круг","drawRectButton":"Рисовать прямоугольник","editButton":"Редактировать слой","dragButton":"Перенести слой","cutButton":"Вырезать слой","deleteButton":"Удалить слой","drawCircleMarkerButton":"Добавить круговой маркер","snappingButton":"Привязать перетаскиваемый маркер к другим слоям и вершинам","pinningButton":"Связать общие точки вместе"}}'),u=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer vértice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del círculo","finishCircle":"Presiona para finalizar el círculo","placeCircleMarker":"Presiona para colocar un marcador de círculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Eliminar último vértice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Polígono","drawLineButton":"Dibujar Línea","drawCircleButton":"Dibujar Círculo","drawRectButton":"Dibujar Rectángulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Eliminar Capas","drawCircleMarkerButton":"Dibujar Marcador de Círculo","snappingButton":"El marcador de Snap arrastrado a otras capas y vértices","pinningButton":"Fijar juntos los vértices compartidos"}}'),p=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te beëindigen","finishPoly":"Klik op het eerst punt om te beëindigen","finishRect":"Klik om te beëindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te beëindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),d=JSON.parse('{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer à dessiner","finishLine":"Cliquez sur n\'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"Éditer des calques","dragButton":"Déplacer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d\'autres couches et sommets","pinningButton":"Épingler ensemble les sommets partagés","rotateButton":"Tourner des calques"}}'),m=JSON.parse('{"tooltips":{"placeMarker":"单击放置标记","firstVertex":"单击放置首个顶点","continueLine":"单击继续绘制","finishLine":"单击任何存在的标记以完成","finishPoly":"单击第一个标记以完成","finishRect":"单击完成","startCircle":"单击放置圆心","finishCircle":"单击完成圆形","placeCircleMarker":"点击放置圆形标记"},"actions":{"finish":"完成","cancel":"取消","removeLastVertex":"移除最后的顶点"},"buttonTitles":{"drawMarkerButton":"绘制标记","drawPolyButton":"绘制多边形","drawLineButton":"绘制线段","drawCircleButton":"绘制圆形","drawRectButton":"绘制长方形","editButton":"编辑图层","dragButton":"拖拽图层","cutButton":"剪切图层","deleteButton":"删除图层","drawCircleMarkerButton":"画圆圈标记","snappingButton":"将拖动的标记捕捉到其他图层和顶点","pinningButton":"将共享顶点固定在一起"}}'),f=JSON.parse('{"tooltips":{"placeMarker":"單擊放置標記","firstVertex":"單擊放置第一個頂點","continueLine":"單擊繼續繪製","finishLine":"單擊任何存在的標記以完成","finishPoly":"單擊第一個標記以完成","finishRect":"單擊完成","startCircle":"單擊放置圓心","finishCircle":"單擊完成圓形","placeCircleMarker":"點擊放置圓形標記"},"actions":{"finish":"完成","cancel":"取消","removeLastVertex":"移除最後一個頂點"},"buttonTitles":{"drawMarkerButton":"放置標記","drawPolyButton":"繪製多邊形","drawLineButton":"繪製線段","drawCircleButton":"繪製圓形","drawRectButton":"繪製方形","editButton":"編輯圖形","dragButton":"移動圖形","cutButton":"裁切圖形","deleteButton":"刪除圖形","drawCircleMarkerButton":"畫圓圈標記","snappingButton":"將拖動的標記對齊到其他圖層和頂點","pinningButton":"將共享頂點固定在一起"}}'),g={en:r,de:a,it:s,id:l,ro:c,ru:h,es:u,nl:p,fr:d,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro vértice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o polígono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do círculo","finishCircle":"Clique para fechar o círculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover último vértice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um polígono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um círculo","drawRectButton":"Desenhar um retângulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de círculos de desenho","snappingButton":"Marcador arrastado para outras camadas e vértices","pinningButton":"Vértices compartilhados de pinos juntos"}}'),zh:m,zh_tw:f,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawić znacznik","firstVertex":"Kliknij, aby ustawić pierwszy punkt","continueLine":"Kliknij, aby kontynuować rysowanie","finishLine":"Kliknij dowolny punkt, aby zakończyć","finishPoly":"Kliknij pierwszy punkt, aby zakończyć","finishRect":"Kliknij, aby zakończyć","startCircle":"Kliknij, aby ustawić środek koła","finishCircle":"Kliknij, aby zakończyć rysowanie koła","placeCircleMarker":"Kliknij, aby ustawić okrągły znacznik"},"actions":{"finish":"Zakończ","cancel":"Anuluj","removeLastVertex":"Usuń ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielokąt","drawLineButton":"Narysuj ścieżkę","drawCircleButton":"Narysuj koło","drawRectButton":"Narysuj prostokąt","editButton":"Edytuj","dragButton":"Przesuń","cutButton":"Wytnij","deleteButton":"Usuń","drawCircleMarkerButton":"Narysuj okrągły znacznik","snappingButton":"Snap przeciągnięty marker na inne warstwy i wierzchołki","pinningButton":"Sworzeń wspólne wierzchołki razem"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka för att placera markör","firstVertex":"Klicka för att placera första hörnet","continueLine":"Klicka för att fortsätta rita","finishLine":"Klicka på en existerande punkt för att slutföra","finishPoly":"Klicka på den första punkten för att slutföra","finishRect":"Klicka för att slutföra","startCircle":"Klicka för att placera cirkelns centrum","finishCircle":"Klicka för att slutföra cirkeln","placeCircleMarker":"Klicka för att placera cirkelmarkör"},"actions":{"finish":"Slutför","cancel":"Avbryt","removeLastVertex":"Ta bort sista hörnet"},"buttonTitles":{"drawMarkerButton":"Rita Markör","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmarkör","snappingButton":"Snäpp dra markören till andra lager och hörn","pinningButton":"Fäst delade hörn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"Κάντε κλικ για να τοποθετήσετε Δείκτη","firstVertex":"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο","continueLine":"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε","finishLine":"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί","finishPoly":"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε","finishRect":"Κάντε κλικ για να τελειώσετε","startCircle":"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου","finishCircle":"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο","placeCircleMarker":"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},"actions":{"finish":"Τέλος","cancel":"Ακύρωση","removeLastVertex":"Κατάργηση τελευταίου σημείου"},"buttonTitles":{"drawMarkerButton":"Σχεδίαση Δείκτη","drawPolyButton":"Σχεδίαση Πολυγώνου","drawLineButton":"Σχεδίαση Γραμμής","drawCircleButton":"Σχεδίαση Κύκλου","drawRectButton":"Σχεδίαση Ορθογωνίου","editButton":"Επεξεργασία Επιπέδων","dragButton":"Μεταφορά Επιπέδων","cutButton":"Αποκοπή Επιπέδων","deleteButton":"Κατάργηση Επιπέδων","drawCircleMarkerButton":"Σχεδίαση Κυκλικού Δείκτη","snappingButton":"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές","pinningButton":"Περικοπή κοινών κορυφών μαζί"}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jelölő elhelyezéséhez","firstVertex":"Kattintson az első pont elhelyezéséhez","continueLine":"Kattintson a következő pont elhelyezéséhez","finishLine":"A befejezéshez kattintson egy meglévő pontra","finishPoly":"A befejezéshez kattintson az első pontra","finishRect":"Kattintson a befejezéshez","startCircle":"Kattintson a kör középpontjának elhelyezéséhez","finishCircle":"Kattintson a kör befejezéséhez","placeCircleMarker":"Kattintson a körjelölő elhelyezéséhez"},"actions":{"finish":"Befejezés","cancel":"Mégse","removeLastVertex":"Utolsó pont eltávolítása"},"buttonTitles":{"drawMarkerButton":"Jelölő rajzolása","drawPolyButton":"Poligon rajzolása","drawLineButton":"Vonal rajzolása","drawCircleButton":"Kör rajzolása","drawRectButton":"Négyzet rajzolása","editButton":"Elemek szerkesztése","dragButton":"Elemek mozgatása","cutButton":"Elemek vágása","deleteButton":"Elemek törlése","drawCircleMarkerButton":"Kör jelölő rajzolása","snappingButton":"Kapcsolja a jelöltőt másik elemhez vagy ponthoz","pinningButton":"Közös pontok összekötése"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en markør","firstVertex":"Tryk for at placere det første punkt","continueLine":"Tryk for at fortsætte linjen","finishLine":"Tryk på et eksisterende punkt for at afslutte","finishPoly":"Tryk på det første punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmarkør"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer markør","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Træk","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmarkør","snappingButton":"Fastgør trukket markør til andre elementer","pinningButton":"Sammenlæg delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for å plassere punkt","firstVertex":"Klikk for å plassere første punkt","continueLine":"Klikk for å tegne videre","finishLine":"Klikk på et eksisterende punkt for å fullføre","finishPoly":"Klikk første punkt for å fullføre","finishRect":"Klikk for å fullføre","startCircle":"Klikk for å sette sirkel midtpunkt","finishCircle":"Klikk for å fullføre sirkel","placeCircleMarker":"Klikk for å plassere sirkel"},"actions":{"finish":"Fullfør","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"کلیک برای جانمایی نشان","firstVertex":"کلیک برای رسم اولین رأس","continueLine":"کلیک برای ادامه رسم","finishLine":"کلیک روی هر نشان موجود برای پایان","finishPoly":"کلیک روی اولین نشان برای پایان","finishRect":"کلیک برای پایان","startCircle":"کلیک برای رسم مرکز دایره","finishCircle":"کلیک برای پایان رسم دایره","placeCircleMarker":"کلیک برای رسم نشان دایره","placeText":"کلیک برای نوشتن متن"},"actions":{"finish":"پایان","cancel":"لفو","removeLastVertex":"حذف آخرین رأس"},"buttonTitles":{"drawMarkerButton":"درج نشان","drawPolyButton":"رسم چندضلعی","drawLineButton":"رسم خط","drawCircleButton":"رسم دایره","drawRectButton":"رسم چهارضلعی","editButton":"ویرایش لایه‌ها","dragButton":"جابجایی لایه‌ها","cutButton":"برش لایه‌ها","deleteButton":"حذف لایه‌ها","drawCircleMarkerButton":"رسم نشان دایره","snappingButton":"نشانگر را به لایه‌ها و رئوس دیگر بکشید","pinningButton":"رئوس مشترک را با هم پین کنید","rotateButton":"چرخش لایه","drawTextButton":"رسم متن"}}'),ua:JSON.parse('{"tooltips":{"placeMarker":"Натисніть, щоб нанести маркер","firstVertex":"Натисніть, щоб нанести першу вершину","continueLine":"Натисніть, щоб продовжити малювати","finishLine":"Натисніть будь-який існуючий маркер для завершення","finishPoly":"Виберіть перший маркер, щоб завершити","finishRect":"Натисніть, щоб завершити","startCircle":"Натисніть, щоб додати центр кола","finishCircle":"Натисніть, щоб завершити коло","placeCircleMarker":"Натисніть, щоб нанести круговий маркер"},"actions":{"finish":"Завершити","cancel":"Відмінити","removeLastVertex":"Видалити попередню вершину"},"buttonTitles":{"drawMarkerButton":"Малювати маркер","drawPolyButton":"Малювати полігон","drawLineButton":"Малювати криву","drawCircleButton":"Малювати коло","drawRectButton":"Малювати прямокутник","editButton":"Редагувати шари","dragButton":"Перенести шари","cutButton":"Вирізати шари","deleteButton":"Видалити шари","drawCircleMarkerButton":"Малювати круговий маркер","snappingButton":"Прив’язати перетягнутий маркер до інших шарів та вершин","pinningButton":"Зв\'язати спільні вершини разом"}}'),tr:JSON.parse('{"tooltips":{"placeMarker":"İşaretçi yerleştirmek için tıklayın","firstVertex":"İlk tepe noktasını yerleştirmek için tıklayın","continueLine":"Çizime devam etmek için tıklayın","finishLine":"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın","finishPoly":"Bitirmek için ilk işaretçiyi tıklayın","finishRect":"Bitirmek için tıklayın","startCircle":"Daire merkezine yerleştirmek için tıklayın","finishCircle":"Daireyi bitirmek için tıklayın","placeCircleMarker":"Daire işaretçisi yerleştirmek için tıklayın"},"actions":{"finish":"Bitir","cancel":"İptal","removeLastVertex":"Son köşeyi kaldır"},"buttonTitles":{"drawMarkerButton":"Çizim İşaretçisi","drawPolyButton":"Çokgenler çiz","drawLineButton":"Çoklu çizgi çiz","drawCircleButton":"Çember çiz","drawRectButton":"Dikdörtgen çiz","editButton":"Katmanları düzenle","dragButton":"Katmanları sürükle","cutButton":"Katmanları kes","deleteButton":"Katmanları kaldır","drawCircleMarkerButton":"Daire işaretçisi çiz","snappingButton":"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır","pinningButton":"Paylaşılan köşeleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknutím vytvoříte značku","firstVertex":"Kliknutím vytvoříte první objekt","continueLine":"Kliknutím pokračujte v kreslení","finishLine":"Kliknutí na libovolnou existující značku pro dokončení","finishPoly":"Vyberte první bod pro dokončení","finishRect":"Klikněte pro dokončení","startCircle":"Kliknutím přidejte střed kruhu","finishCircle":"Нажмите, чтобы задать радиус","placeCircleMarker":"Kliknutím nastavte poloměr"},"actions":{"finish":"Dokončit","cancel":"Zrušit","removeLastVertex":"Zrušit poslední akci"},"buttonTitles":{"drawMarkerButton":"Přidat značku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit křivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obdélník","editButton":"Upravit vrstvu","dragButton":"Přeneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"Přidat kruhovou značku","snappingButton":"Navázat tažnou značku k dalším vrstvám a vrcholům","pinningButton":"Spojit společné body dohromady"}}'),ja:JSON.parse('{"tooltips":{"placeMarker":"クリックしてマーカーを配置","firstVertex":"クリックして最初の頂点を配置","continueLine":"クリックして描画を続ける","finishLine":"任意のマーカーをクリックして終了","finishPoly":"最初のマーカーをクリックして終了","finishRect":"クリックして終了","startCircle":"クリックして円の中心を配置","finishCircle":"クリックして円の描画を終了","placeCircleMarker":"クリックして円マーカーを配置","placeText":"クリックしてテキストを配置"},"actions":{"finish":"終了","cancel":"キャンセル","removeLastVertex":"最後の頂点を削除"},"buttonTitles":{"drawMarkerButton":"マーカーを描画","drawPolyButton":"ポリゴンを描画","drawLineButton":"折れ線を描画","drawCircleButton":"円を描画","drawRectButton":"矩形を描画","editButton":"レイヤーを編集","dragButton":"レイヤーをドラッグ","cutButton":"レイヤーを切り取り","deleteButton":"レイヤーを削除","drawCircleMarkerButton":"円マーカーを描画","snappingButton":"ドラッグしたマーカーを他のレイヤーや頂点にスナップする","pinningButton":"共有する頂点を同時に動かす","rotateButton":"レイヤーを回転","drawTextButton":"テキストを描画"}}'),fi:JSON.parse('{"tooltips":{"placeMarker":"Klikkaa asettaaksesi merkin","firstVertex":"Klikkaa asettaakseni ensimmäisen osuuden","continueLine":"Klikkaa jatkaaksesi piirtämistä","finishLine":"Klikkaa olemassa olevaa merkkiä lopettaaksesi","finishPoly":"Klikkaa ensimmäistä merkkiä lopettaaksesi","finishRect":"Klikkaa lopettaaksesi","startCircle":"Klikkaa asettaaksesi ympyrän keskipisteen","finishCircle":"Klikkaa lopettaaksesi ympyrän","placeCircleMarker":"Klikkaa asettaaksesi ympyrämerkin","placeText":"Klikkaa asettaaksesi tekstin"},"actions":{"finish":"Valmis","cancel":"Peruuta","removeLastVertex":"Poista viimeinen osuus"},"buttonTitles":{"drawMarkerButton":"Piirrä merkkejä","drawPolyButton":"Piirrä monikulmioita","drawLineButton":"Piirrä viivoja","drawCircleButton":"Piirrä ympyrä","drawRectButton":"Piirrä neliskulmioita","editButton":"Muokkaa","dragButton":"Siirrä","cutButton":"Leikkaa","deleteButton":"Poista","drawCircleMarkerButton":"Piirrä ympyrämerkki","snappingButton":"Kiinnitä siirrettävä merkki toisiin muotoihin","pinningButton":"Kiinnitä jaetut muodot yhteen","rotateButton":"Käännä","drawTextButton":"Piirrä tekstiä"}}'),ko:JSON.parse('{"tooltips":{"placeMarker":"마커 위치를 클릭하세요","firstVertex":"첫번째 꼭지점 위치을 클릭하세요","continueLine":"계속 그리려면 클릭하세요","finishLine":"끝내려면 기존 마커를 클릭하세요","finishPoly":"끝내려면 처음 마커를 클릭하세요","finishRect":"끝내려면 클릭하세요","startCircle":"원의 중심이 될 위치를 클릭하세요","finishCircle":"원을 끝내려면 클릭하세요","placeCircleMarker":"원 마커 위치를 클릭하세요","placeText":"텍스트 위치를 클릭하세요"},"actions":{"finish":"끝내기","cancel":"취소","removeLastVertex":"마지막 꼭지점 제거"},"buttonTitles":{"drawMarkerButton":"마커 그리기","drawPolyButton":"다각형 그리기","drawLineButton":"다각선 그리기","drawCircleButton":"원 그리기","drawRectButton":"직사각형 그리기","editButton":"레이어 편집하기","dragButton":"레이어 끌기","cutButton":"레이어 자르기","deleteButton":"레이어 제거하기","drawCircleMarkerButton":"원 마커 그리기","snappingButton":"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기","pinningButton":"공유 꼭지점을 함께 찍기","rotateButton":"레이어 회전하기","drawTextButton":"텍스트 그리기"}}')};function _(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_(Object(i),!0).forEach((function(e){y(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function y(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const b={_globalEditModeEnabled:!1,enableGlobalEditMode:function(t){var e=v({},t);this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach((function(t){t.pm.enable(e)})),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers={},this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach((function(t){t.pm.disable()})),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(t)},handleLayerAdditionInGlobalEditMode:function(){var t=this._addedLayers;for(var e in this._addedLayers={},t){var i=t[e];this._isRelevantForEdit(i)&&this.globalEditModeEnabled()&&i.pm.enable(v({},this.globalOptions))}},_layerAdded:function(t){var e=t.layer;this._addedLayers[L.stamp(e)]=e},_isRelevantForEdit:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore)&&!t._pmTempLayer&&t.pm.options.allowEditing}},x={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},t.forEach((function(t){t.pm.enableLayerDrag()})),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,t.forEach((function(t){t.pm.disableLayerDrag()})),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var t=this._addedLayersDrag;for(var e in this._addedLayersDrag={},t){var i=t[e];this._isRelevantForDrag(i)&&this.globalDragModeEnabled()&&i.pm.enableLayerDrag()}},_layerAddedDrag:function(t){var e=t.layer;this._addedLayersDrag[L.stamp(e)]=e},_isRelevantForDrag:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore)&&!t._pmTempLayer&&t.pm.options.draggable}},k={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer((function(e){t._isRelevantForRemoval(e)&&(e.pm.disable(),e.on("click",t.removeLayer,t))})),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer((function(e){e.off("click",t.removeLayer,t)})),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(t){var e=t.layer;this._isRelevantForRemoval(e)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(t){var e=t.target;this._isRelevantForRemoval(e)&&!e.pm.dragging()&&(e.removeFrom(this.map.pm._getContainingLayer()),e.remove(),e instanceof L.LayerGroup?(this._fireRemoveLayerGroup(e),this._fireRemoveLayerGroup(this.map,e)):(e.pm._fireRemove(e),e.pm._fireRemove(this.map,e)))},_isRelevantForRemoval:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore)&&!t._pmTempLayer&&t.pm.options.allowRemoval}},w={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var t=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter((function(t){return t instanceof L.Polyline})).forEach((function(e){t._isRelevantForRotate(e)&&e.pm.enableRotate()})),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter((function(t){return t instanceof L.Polyline})).forEach((function(t){t.pm.disableRotate()})),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(t){var e=t.layer;this._isRelevantForRotate(e)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore)&&!t._pmTempLayer&&t.pm.options.allowRotation}};function M(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function C(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?M(Object(i),!0).forEach((function(e){P(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):M(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function P(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var S={_fireDrawStart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Draw",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},t,e)},_fireDrawEnd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Draw",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},t,e)},_fireCreate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Draw",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:t,layer:t},e,i)},_fireCenterPlaced:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Draw",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="Draw"===t?this._layer:void 0,n="Draw"!==t?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:i,layer:n,latlng:this._layer.getLatLng()},t,e)},_fireCut:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Draw",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(t,"pm:cut",{shape:this._shape,layer:e,originalLayer:i},n,o)},_fireEdit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._layer,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(t,"pm:edit",{layer:this._layer,shape:this.getShape()},e,i)},_fireEnable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},t,e)},_fireDisable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},t,e)},_fireUpdate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},t,e)},_fireMarkerDragStart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},i,n)},_fireMarkerDrag:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},i,n)},_fireMarkerDragEnd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Edit",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e,intersectionReset:i},n,o)},_fireDragStart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},t,e)},_fireDrag:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._layer,"pm:drag",C(C({},t),{},{shape:this.getShape()}),e,i)},_fireDragEnd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},t,e)},_fireDragEnable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},t,e)},_fireDragDisable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},t,e)},_fireRemove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:this.getShape()},i,n)},_fireVertexAdded:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Edit",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:t,indexPath:e,latlng:i,shape:this.getShape()},n,o)},_fireVertexRemoved:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:t,indexPath:e,shape:this.getShape()},i,n)},_fireVertexClick:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},i,n)},_fireIntersect:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:t,shape:this.getShape()},e,i)},_fireLayerReset:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},i,n)},_fireChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:t,shape:this.getShape()},e,i)},_fireTextChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:t,shape:this.getShape()},e,i)},_fireTextFocus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},t,e)},_fireTextBlur:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},t,e)},_fireSnapDrag:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Snapping",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:snapdrag",e,i,n)},_fireSnap:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Snapping",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:snap",e,i,n)},_fireUnsnap:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Snapping",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:unsnap",e,i,n)},_fireRotationEnable:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Rotation",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},i,n)},_fireRotationDisable:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Rotation",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(t,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},e,i)},_fireRotationStart:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Rotation",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:e},i,n)},_fireRotation:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._rotationLayer,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Rotation",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.__fire(t,"pm:rotate",{layer:n,helpLayer:this._layer,startAngle:this._startAngle,angle:n.pm.getAngle(),angleDiff:e,oldLatLngs:i,newLatLngs:n.getLatLngs()},o,r)},_fireRotationEnd:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Rotation",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(t,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:e,angle:this._rotationLayer.pm.getAngle(),originLatLngs:i,newLatLngs:this._rotationLayer.getLatLngs()},n,o)},_fireActionClick:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Toolbar",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:t.text,action:t,btnName:e,button:i},n,o)},_fireButtonClick:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Toolbar",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:t,button:e},i,n)},_fireLangChange:function(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Global",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:t,activeLang:e,fallback:i,translations:n},o,r)},_fireGlobalDragModeToggled:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:t,map:this.map},e,i)},_fireGlobalEditModeToggled:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:t,map:this.map},e,i)},_fireGlobalRemovalModeToggled:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:t,map:this.map},e,i)},_fireGlobalCutModeToggled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},t,e)},_fireGlobalDrawModeToggled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},t,e)},_fireGlobalRotateModeToggled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},t,e)},_fireRemoveLayerGroup:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:void 0},i,n)},_fireKeyeventEvent:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Global",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:t,eventType:e,focusOn:i},n,o)},__fire:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};i=o()(i,r,{source:n}),L.PM.Utils._fireEvent(t,e,i)}};const T=S,A={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(t){this.map=t,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(t){var e="document";this.map.getContainer().contains(t.target)&&(e="map");var i={event:t,eventType:t.type,focusOn:e};this._lastEvents[t.type]=i,this._lastEvents.current=i,this.map.pm._fireKeyeventEvent(t,t.type,e)},_onBlur:function(t){t.altKey=!1;var e={event:t,eventType:t.type,focusOn:"document"};this._lastEvents[t.type]=e,this._lastEvents.current=e},getLastKeyEvent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current";return this._lastEvents[t]},isShiftKeyPressed:function(){var t;return null===(t=this._lastEvents.current)||void 0===t?void 0:t.event.shiftKey},isAltKeyPressed:function(){var t;return null===(t=this._lastEvents.current)||void 0===t?void 0:t.event.altKey},isCtrlKeyPressed:function(){var t;return null===(t=this._lastEvents.current)||void 0===t?void 0:t.event.ctrlKey},isMetaKeyPressed:function(){var t;return null===(t=this._lastEvents.current)||void 0===t?void 0:t.event.metaKey},getPressedKey:function(){var t;return null===(t=this._lastEvents.current)||void 0===t?void 0:t.event.key}};var D=i(7361),E=i.n(D),O=i(8721),I=i.n(O);function B(t){var e=L.PM.activeLang;return I()(g,e)||(e="en"),E()(g[e],t)}function R(t){for(var e=0;e<t.length;e+=1){var i=t[e];if(Array.isArray(i)){if(R(i))return!0}else if(null!=i&&""!==i)return!0}return!1}function z(t){return t.reduce((function(t,e){if(0!==e.length){var i=Array.isArray(e)?z(e):e;Array.isArray(i)?0!==i.length&&t.push(i):t.push(i)}return t}),[])}function F(t,e,i){for(var n,o,r,a=6378137,s=6356752.3142,l=1/298.257223563,c=t.lng,h=t.lat,u=i,p=Math.PI,d=e*p/180,m=Math.sin(d),f=Math.cos(d),g=(1-l)*Math.tan(h*p/180),_=1/Math.sqrt(1+g*g),v=g*_,y=Math.atan2(g,f),b=_*m,x=1-b*b,k=x*(a*a-s*s)/(s*s),w=1+k/16384*(4096+k*(k*(320-175*k)-768)),M=k/1024*(256+k*(k*(74-47*k)-128)),C=u/(s*w),P=2*Math.PI;Math.abs(C-P)>1e-12;)n=Math.cos(2*y+C),P=C,C=u/(s*w)+M*(o=Math.sin(C))*(n+M/4*((r=Math.cos(C))*(2*n*n-1)-M/6*n*(4*o*o-3)*(4*n*n-3)));var S=v*o-_*r*f,T=Math.atan2(v*r+_*o*f,(1-l)*Math.sqrt(b*b+S*S)),A=l/16*x*(4+l*(4-3*x)),D=c+180*(Math.atan2(o*m,_*r-v*o*f)-(1-A)*l*b*(C+A*o*(n+A*r*(2*n*n-1))))/p,E=180*T/p;return L.latLng(D,E)}function j(t,e,i,n){for(var o,r,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=[],l=0;l<i;l+=1){if(a)o=F(t,360*l/i+n,e),r=L.latLng(o.lng,o.lat);else{var c=t.lat+Math.cos(2*l*Math.PI/i)*e,h=t.lng+Math.sin(2*l*Math.PI/i)*e;r=L.latLng(c,h)}s.push(r)}return s}function N(t,e,i,n){var o=function(t,e,i){var n=t.latLngToContainerPoint(e),o=t.latLngToContainerPoint(i),r=180*Math.atan2(o.y-n.y,o.x-n.x)/Math.PI+90;return r+(r<0?360:0)}(t,e,i);return function(t,e,i){e=(e+360)%360;var n=Math.PI/180,o=180/Math.PI,r=6378137,a=t.lng*n,s=t.lat*n,l=e*n,c=Math.sin(s),h=Math.cos(s),u=Math.cos(i/r),p=Math.sin(i/r),d=Math.asin(c*u+h*p*Math.cos(l)),m=a+Math.atan2(Math.sin(l)*p*h,u-c*Math.sin(d));return m=(m*=o)>180?m-360:m<-180?m+360:m,L.latLng([d*o,m])}(e,o,n)}function U(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e||0===Object.keys(e).length)return function(t,e){return t-e};for(var n,o=Object.keys(e),r=o.length-1,a={};r>=0;)n=o[r],a[n.toLowerCase()]=e[n],r-=1;function s(t){return t instanceof L.Marker?"Marker":t instanceof L.Circle?"Circle":t instanceof L.CircleMarker?"CircleMarker":t instanceof L.Rectangle?"Rectangle":t instanceof L.Polygon?"Polygon":t instanceof L.Polyline?"Line":void 0}return function(e,n){var o,r;if("instanceofShape"===t){if(o=s(e.layer).toLowerCase(),r=s(n.layer).toLowerCase(),!o||!r)return 0}else{if(!e.hasOwnProperty(t)||!n.hasOwnProperty(t))return 0;o=e[t].toLowerCase(),r=n[t].toLowerCase()}var l=o in a?a[o]:Number.MAX_SAFE_INTEGER,c=r in a?a[r]:Number.MAX_SAFE_INTEGER,h=0;return l<c?h=-1:l>c&&(h=1),"desc"===i?-1*h:h}}function G(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getLatLngs();return t instanceof L.Polygon?L.polygon(e).getLatLngs():L.polyline(e).getLatLngs()}function H(t,e){var i,n;if(null!==(i=e.options.crs)&&void 0!==i&&null!==(n=i.projection)&&void 0!==n&&n.MAX_LATITUDE){var o,r,a=null===(o=e.options.crs)||void 0===o||null===(r=o.projection)||void 0===r?void 0:r.MAX_LATITUDE;t.lat=Math.max(Math.min(a,t.lat),-a)}return t}function Z(t){return t.options.renderer||t._map&&(t._map._getPaneRenderer(t.options.pane)||t._map.options.renderer||t._map._renderer)||t._renderer}const V=L.Class.extend({includes:[b,x,k,w,T],initialize:function(t){this.map=t,this.Draw=new L.PM.Draw(t),this.Toolbar=new L.PM.Toolbar(t),this.Keyboard=A,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(t)},setLang:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",n=L.PM.activeLang;e&&(g[t]=o()(g[i],e)),L.PM.activeLang=t,this.map.pm.Toolbar.reinit(),this._fireLangChange(n,t,i,g[t])},addControls:function(t){this.Toolbar.addControls(t)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Polygon",e=arguments.length>1?arguments[1]:void 0;"Poly"===t&&(t="Polygon"),this.Draw.enable(t,e)},disableDraw:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Polygon";"Poly"===t&&(t="Polygon"),this.Draw.disable(t)},setPathOptions:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.ignoreShapes||[],o=i.merge||!1;this.map.pm.Draw.shapes.forEach((function(i){-1===n.indexOf(i)&&e.map.pm.Draw[i].setPathOptions(t,o)}))},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(t){var e=this,i=o()(this.globalOptions,t),n=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.editable!=!!i.editable&&(this.map.pm.Draw.CircleMarker.disable(),n=!0),this.map.pm.Draw.shapes.forEach((function(t){e.map.pm.Draw[t].setOptions(i)})),n&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach((function(t){t.pm.setOptions(i)})),this.map.fire("pm:globaloptionschanged"),this.globalOptions=i,this.applyGlobalOptions()},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach((function(t){t.pm.enabled()&&t.pm.applyOptions()}))},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(t){return this.Draw.Cut.enable(t)},toggleGlobalCutMode:function(t){return this.Draw.Cut.toggle(t)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=L.PM.Utils.findLayers(this.map);if(!t)return e;var i=L.featureGroup();return i._pmTempLayer=!0,e.forEach((function(t){i.addLayer(t)})),i},getGeomanDrawLayers:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=L.PM.Utils.findLayers(this.map).filter((function(t){return!0===t._drawnByGeoman}));if(!t)return e;var i=L.featureGroup();return i._pmTempLayer=!0,e.forEach((function(t){i.addLayer(t)})),i},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(t){0===this._touchEventCounter&&(L.DomEvent.on(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(t){1===this._touchEventCounter&&(L.DomEvent.off(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(t){Z(this.map)._onMouseMove(this._createMouseEvent("mousemove",t))},_canvasTouchClick:function(t){var e="";"touchstart"===t.type||"pointerdown"===t.type?e="mousedown":"touchend"===t.type||"pointerup"===t.type?e="mouseup":"touchcancel"!==t.type&&"pointercancel"!==t.type||(e="mouseup"),e&&Z(this.map)._onClick(this._createMouseEvent(e,t))},_createMouseEvent:function(t,e){var i,n=e.touches[0]||e.changedTouches[0];try{i=new MouseEvent(t,{bubbles:e.bubbles,cancelable:e.cancelable,view:e.view,detail:n.detail,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,button:e.button,relatedTarget:e.relatedTarget})}catch(o){(i=document.createEvent("MouseEvents")).initMouseEvent(t,e.bubbles,e.cancelable,e.view,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}return i}}),W=L.Control.extend({includes:[T],options:{position:"topleft",disableByOtherButtons:!0},initialize:function(t){this._button=L.Util.extend({},this.options,t)},onAdd:function(t){return this._map=t,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):"edit"===this._button.tool?this._container=this._map.pm.Toolbar.editContainer:"options"===this._button.tool?this._container=this._map.pm.Toolbar.optionsContainer:"custom"===this._button.tool?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(t){return this._button.toggleStatus="boolean"==typeof t?t:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(t){t&&t.preventDefault(),this._button.disabled||(this._button.onClick(t,{button:this,event:t}),this._clicked(t),this._button.afterClick(t,{button:this,event:t}))},_makeButton:function(t){var e=this,i=this.options.position.indexOf("right")>-1?"pos-right":"",n=L.DomUtil.create("div","button-container  ".concat(i),this._container);t.title&&n.setAttribute("title",t.title);var o=L.DomUtil.create("a","leaflet-buttons-control-button",n);o.setAttribute("role","button"),o.setAttribute("tabindex","0"),o.href="#";var r=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(i),n),a=t.actions,s={cancel:{text:B("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:B("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:B("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[t.jsClass]._removeLastVertex()}},finish:{text:B("actions.finish"),onClick:function(e){this._map.pm.Draw[t.jsClass]._finishShape(e)}}};a.forEach((function(n){var o,a="string"==typeof n?n:n.name;if(s[a])o=s[a];else{if(!n.text)return;o=n}var l=L.DomUtil.create("a","leaflet-pm-action ".concat(i," action-").concat(a),r);l.setAttribute("role","button"),l.setAttribute("tabindex","0"),l.href="#",l.innerHTML=o.text,L.DomEvent.disableClickPropagation(l),L.DomEvent.on(l,"click",L.DomEvent.stop),!t.disabled&&o.onClick&&(L.DomEvent.addListener(l,"click",(function(i){i.preventDefault();var n="",r=e._map.pm.Toolbar.buttons;for(var a in r)if(r[a]._button===t){n=a;break}e._fireActionClick(o,n,t)}),e),L.DomEvent.addListener(l,"click",o.onClick,e))})),t.toggleStatus&&L.DomUtil.addClass(n,"active");var l=L.DomUtil.create("div","control-icon",o);return t.iconUrl&&l.setAttribute("src",t.iconUrl),t.className&&L.DomUtil.addClass(l,t.className),L.DomEvent.disableClickPropagation(o),L.DomEvent.on(o,"click",L.DomEvent.stop),t.disabled||(L.DomEvent.addListener(o,"click",this._onBtnClick,this),L.DomEvent.addListener(o,"click",this._triggerClick,this)),t.disabled&&(L.DomUtil.addClass(o,"pm-disabled"),o.setAttribute("aria-disabled","true")),n},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&!1!==this._button.cssToggle?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var t="",e=this._map.pm.Toolbar.buttons;for(var i in e)if(e[i]._button===this._button){t=i;break}this._fireButtonClick(t,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var t="pm-disabled",e=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(e,t),e.setAttribute("aria-disabled","true"),L.DomEvent.off(e,"click",this._triggerClick,this),L.DomEvent.off(e,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(e,t),e.setAttribute("aria-disabled","false"),L.DomEvent.on(e,"click",this._triggerClick,this),L.DomEvent.on(e,"click",this._onBtnClick,this))}}});function q(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function $(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?q(Object(i),!0).forEach((function(e){Y(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Y(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}L.Control.PMButton=W;const J=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(t){this.init(t)},reinit:function(){var t=this.isVisible;this.removeControls(),this._defineButtons(),t&&this.addControls()},init:function(t){this.map=t,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(t){var e="".concat(t,"Container");return this[e]||(this[e]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(t," leaflet-bar leaflet-control"))),this[e]},getButtons:function(){return this.buttons},addControls:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;void 0!==t.editPolygon&&(t.editMode=t.editPolygon),void 0!==t.deleteLayer&&(t.removalMode=t.deleteLayer),L.Util.setOptions(this,t),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var t=this.getButtons(),e={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var i in t){var n=t[i];L.Util.setOptions(n,{className:e.geomanIcons[i]})}},removeControls:function(){var t=this.getButtons();for(var e in t)t[e].remove();this.isVisible=!1},toggleControls:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(t)},_addButton:function(t,e){return this.buttons[t]=e,this.options[t]=this.options[t]||!1,this.buttons[t]},triggerClickOnToggledButtons:function(t){for(var e in this.buttons){var i=this.buttons[e];i._button.disableByOtherButtons&&i!==t&&i.toggled()&&i._triggerClick()}},toggleButton:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return"editPolygon"===t&&(t="editMode"),"deleteLayer"===t&&(t="removalMode"),i&&this.triggerClickOnToggledButtons(this.buttons[t]),!!this.buttons[t]&&this.buttons[t].toggle(e)},_defineButtons:function(){var t=this,e={className:"control-icon leaflet-pm-icon-marker",title:B("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},i={title:B("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},n={className:"control-icon leaflet-pm-icon-polyline",title:B("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},o={title:B("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:B("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},a={title:B("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},s={title:B("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},l={title:B("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},c={title:B("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},h={title:B("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},u={title:B("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},p={className:"control-icon leaflet-pm-icon-text",title:B("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(e)),this._addButton("drawPolyline",new L.Control.PMButton(n)),this._addButton("drawRectangle",new L.Control.PMButton(a)),this._addButton("drawPolygon",new L.Control.PMButton(i)),this._addButton("drawCircle",new L.Control.PMButton(o)),this._addButton("drawCircleMarker",new L.Control.PMButton(r)),this._addButton("drawText",new L.Control.PMButton(p)),this._addButton("editMode",new L.Control.PMButton(s)),this._addButton("dragMode",new L.Control.PMButton(l)),this._addButton("cutPolygon",new L.Control.PMButton(c)),this._addButton("removalMode",new L.Control.PMButton(h)),this._addButton("rotateMode",new L.Control.PMButton(u))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var t=this.getButtons(),e=[];for(var i in!1===this.options.drawControls&&(e=e.concat(Object.keys(t).filter((function(e){return!t[e]._button.tool})))),!1===this.options.editControls&&(e=e.concat(Object.keys(t).filter((function(e){return"edit"===t[e]._button.tool})))),!1===this.options.optionsControls&&(e=e.concat(Object.keys(t).filter((function(e){return"options"===t[e]._button.tool})))),!1===this.options.customControls&&(e=e.concat(Object.keys(t).filter((function(e){return"custom"===t[e]._button.tool})))),t)if(this.options[i]&&-1===e.indexOf(i)){var n=t[i]._button.tool;n||(n="draw"),t[i].setPosition(this._getBtnPosition(n)),t[i].addTo(this.map)}}},_getBtnPosition:function(t){return this.options.positions&&this.options.positions[t]?this.options.positions[t]:this.options.position},setBlockPosition:function(t,e){this.options.positions[t]=e,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(t,e){if(!e)throw new TypeError("Button has no name");"object"!==K(e)&&(e={name:e});var i=this._btnNameMapping(t);if(!e.name)throw new TypeError("Button has no name");if(this.buttons[e.name])throw new TypeError("Button with this name already exists");var n=this.map.pm.Draw.createNewDrawInstance(e.name,i);return e=$($({},this.buttons[i]._button),e),{drawInstance:n,control:this.createCustomControl(e)}},createCustomControl:function(t){var e,i;if(!t.name)throw new TypeError("Button has no name");if(this.buttons[t.name])throw new TypeError("Button with this name already exists");t.onClick||(t.onClick=function(){}),t.afterClick||(t.afterClick=function(){}),!1!==t.toggle&&(t.toggle=!0),t.block&&(t.block=t.block.toLowerCase()),t.block&&"draw"!==t.block||(t.block=""),t.className?-1===t.className.indexOf("control-icon")&&(t.className="control-icon ".concat(t.className)):t.className="control-icon";var n={tool:t.block,className:t.className,title:t.title||"",jsClass:t.name,onClick:t.onClick,afterClick:t.afterClick,doToggle:t.toggle,toggleStatus:!1,disableOtherButtons:null===(e=t.disableOtherButtons)||void 0===e||e,disableByOtherButtons:null===(i=t.disableByOtherButtons)||void 0===i||i,cssToggle:t.toggle,position:this.options.position,actions:t.actions||[],disabled:!!t.disabled};!1!==this.options[t.name]&&(this.options[t.name]=!0);var o=this._addButton(t.name,new L.Control.PMButton(n));return this.changeControlOrder(),o},changeControlOrder:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this._shapeMapping(),i=[];t.forEach((function(t){e[t]?i.push(e[t]):i.push(t)}));var n=this.getButtons(),o={};i.forEach((function(t){n[t]&&(o[t]=n[t])}));var r=Object.keys(n).filter((function(t){return!n[t]._button.tool}));r.forEach((function(t){-1===i.indexOf(t)&&(o[t]=n[t])}));var a=Object.keys(n).filter((function(t){return"edit"===n[t]._button.tool}));a.forEach((function(t){-1===i.indexOf(t)&&(o[t]=n[t])}));var s=Object.keys(n).filter((function(t){return"options"===n[t]._button.tool}));s.forEach((function(t){-1===i.indexOf(t)&&(o[t]=n[t])}));var l=Object.keys(n).filter((function(t){return"custom"===n[t]._button.tool}));l.forEach((function(t){-1===i.indexOf(t)&&(o[t]=n[t])})),Object.keys(n).forEach((function(t){-1===i.indexOf(t)&&(o[t]=n[t])})),this.map.pm.Toolbar.buttons=o,this._showHideButtons()},getControlOrder:function(){var t=this.getButtons(),e=[];for(var i in t)e.push(i);return e},changeActionsOfControl:function(t,e){var i=this._btnNameMapping(t);if(!i)throw new TypeError("No name passed");if(!e)throw new TypeError("No actions passed");if(!this.buttons[i])throw new TypeError("Button with this name not exists");this.buttons[i]._button.actions=e,this.changeControlOrder()},setButtonDisabled:function(t,e){var i=this._btnNameMapping(t);e?this.buttons[i].disable():this.buttons[i].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(t){var e=this._shapeMapping();return e[t]?e[t]:t}});function X(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Q(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?X(Object(i),!0).forEach((function(e){tt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):X(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function tt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var et={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=void 0===this.options.snapSegment||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(t){var e=this;t.forEach((function(t){Array.isArray(t)?e._assignEvents(t):(t.off("drag",e._handleSnapping,e),t.on("drag",e._handleSnapping,e),t.off("dragend",e._cleanupSnapping,e),t.on("dragend",e._cleanupSnapping,e))}))},_cleanupSnapping:function(t){t&&(t.target._snapped=!1),delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach((function(t){t.remove()}))},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(t){var e=this,i=t.target;if(i._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed())return!1;if(void 0===this._snapList&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0)return!1;var n,o=this._calcClosestLayer(i.getLatLng(),this._snapList);if(0===Object.keys(o).length)return!1;n=o.layer instanceof L.Marker||o.layer instanceof L.CircleMarker||!this.options.snapSegment?o.latlng:this._checkPrioritiySnapping(o);var r=this.options.snapDistance,a={marker:i,shape:this._shape,snapLatLng:n,segment:o.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:o.layer,distance:o.distance};if(this._fireSnapDrag(a.marker,a),this._fireSnapDrag(this._layer,a),o.distance<r){i._orgLatLng=i.getLatLng(),i.setLatLng(n),i._snapped=!0,i._snapInfo=a;var s=this._snapLatLng||{},l=n||{};s.lat===l.lat&&s.lng===l.lng||(e._snapLatLng=n,e._fireSnap(i,a),e._fireSnap(e._layer,a))}else this._snapLatLng&&(this._unsnap(a),i._snapped=!1,i._snapInfo=void 0,this._fireUnsnap(a.marker,a),this._fireUnsnap(this._layer,a));return!0},_createSnapList:function(){var t=this,e=[],i=[],n=this._map;n.off("pm:remove",this._handleSnapLayerRemoval,this),n.on("pm:remove",this._handleSnapLayerRemoval,this),n.eachLayer((function(t){if((t instanceof L.Polyline||t instanceof L.Marker||t instanceof L.CircleMarker||t instanceof L.ImageOverlay)&&!0!==t.options.snapIgnore){if(void 0===t.options.snapIgnore&&(!L.PM.optIn&&!0===t.options.pmIgnore||L.PM.optIn&&!1!==t.options.pmIgnore))return;(t instanceof L.Circle||t instanceof L.CircleMarker)&&t.pm&&t.pm._hiddenPolyCircle?e.push(t.pm._hiddenPolyCircle):t instanceof L.ImageOverlay&&(t=L.rectangle(t.getBounds())),e.push(t);var n=L.polyline([],{color:"red",pmIgnore:!0});n._pmTempLayer=!0,i.push(n),(t instanceof L.Circle||t instanceof L.CircleMarker)&&i.push(n)}})),e=(e=(e=e.filter((function(e){return t._layer!==e}))).filter((function(t){return t._latlng||t._latlngs&&R(t._latlngs)}))).filter((function(t){return!t._pmTempLayer})),this._otherSnapLayers?(this._otherSnapLayers.forEach((function(){var t=L.polyline([],{color:"red",pmIgnore:!0});t._pmTempLayer=!0,i.push(t)})),this._snapList=e.concat(this._otherSnapLayers)):this._snapList=e,this.debugIndicatorLines=i},_handleSnapLayerRemoval:function(t){var e=t.layer,i=this._snapList.findIndex((function(t){return t._leaflet_id===e._leaflet_id}));this._snapList.splice(i,1)},_calcClosestLayer:function(t,e){return this._calcClosestLayers(t,e,1)[0]},_calcClosestLayers:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=[],r={};e.forEach((function(e,a){if(!e._parentCopy||e._parentCopy!==i._layer){var s=i._calcLayerDistances(t,e);if(s.distance=Math.floor(s.distance),i.debugIndicatorLines){if(!i.debugIndicatorLines[a]){var l=L.polyline([],{color:"red",pmIgnore:!0});l._pmTempLayer=!0,i.debugIndicatorLines[a]=l}i.debugIndicatorLines[a].setLatLngs([t,s.latlng])}1===n&&(void 0===r.distance||s.distance<=r.distance)?(s.distance<r.distance&&(o=[]),(r=s).layer=e,o.push(r)):1!==n&&(r={},(r=s).layer=e,o.push(r))}})),1!==n&&(o=o.sort((function(t,e){return t.distance-e.distance}))),-1===n&&(n=o.length);var a=this._getClosestLayerByPriority(o,n);return L.Util.isArray(a)?a:[a]},_calcLayerDistances:function(t,e){var i=this._map,n=e instanceof L.Marker||e instanceof L.CircleMarker,o=e instanceof L.Polygon,r=t;if(n){var a=e.getLatLng();return{latlng:Q({},a),distance:this._getDistance(i,a,r)}}return this._calcLatLngDistances(r,e.getLatLngs(),i,o)},_calcLatLngDistances:function(t,e,i){var n,o,r,a=this,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=function e(l){l.forEach((function(c,h){if(Array.isArray(c))e(c);else if(a.options.snapSegment){var u,p=c;u=s?h+1===l.length?0:h+1:h+1===l.length?void 0:h+1;var d=l[u];if(d){var m=a._getDistanceToSegment(i,t,p,d);(void 0===o||m<o)&&(o=m,r=[p,d])}}else{var f=a._getDistance(i,t,c);(void 0===o||f<o)&&(o=f,n=c)}}))};if(l(e),this.options.snapSegment){var c=this._getClosestPointOnSegment(i,t,r[0],r[1]);return{latlng:Q({},c),segment:r,distance:o}}return{latlng:n,distance:o}},_getClosestLayerByPriority:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t=t.sort((function(t,e){return t._leaflet_id-e._leaflet_id}));var i=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],n=this._map.pm.globalOptions.snappingOrder||[],o=0,r={};return n.concat(i).forEach((function(t){r[t]||(o+=1,r[t]=o)})),t.sort(U("instanceofShape",r)),1===e?t[0]||{}:t.slice(0,e)},_checkPrioritiySnapping:function(t){var e=this._map,i=t.segment[0],n=t.segment[1],o=t.latlng,r=this._getDistance(e,i,o),a=this._getDistance(e,n,o),s=r<a?i:n,l=r<a?r:a;if(this.options.snapMiddle){var c=L.PM.Utils.calcMiddleLatLng(e,i,n),h=this._getDistance(e,c,o);h<r&&h<a&&(s=c,l=h)}return Q({},l<this.options.snapDistance?s:o)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(t,e,i,n){var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());var r=t.project(e,o),a=t.project(i,o),s=t.project(n,o),l=L.LineUtil.closestPointOnSegment(r,a,s);return t.unproject(l,o)},_getDistanceToSegment:function(t,e,i,n){var o=t.latLngToLayerPoint(e),r=t.latLngToLayerPoint(i),a=t.latLngToLayerPoint(n);return L.LineUtil.pointToSegmentDistance(o,r,a)},_getDistance:function(t,e,i){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(i))}};const it=et,nt=L.Class.extend({includes:[it,T],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(t){L.Util.setOptions(this,t),this.setStyle(this.options)},setStyle:function(){},getOptions:function(){return this.options},initialize:function(t){var e=this,i=new L.Icon.Default;i.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=i,this._map=t,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach((function(t){e[t]=new L.PM.Draw[t](e._map)})),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.options.pathOptions=e?o()(this.options.pathOptions,t):t},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(t,e){if(!t)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[t].enable(e)},disable:function(){var t=this;this.shapes.forEach((function(e){t[e].disable()}))},addControls:function(){var t=this;this.shapes.forEach((function(e){t[e].addButton()}))},getActiveShape:function(){var t,e=this;return this.shapes.forEach((function(i){e[i]._enabled&&(t=i)})),t},_setGlobalDrawMode:function(){"Cut"===this._shape?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var t=L.PM.Utils.findLayers(this._map);this._enabled?t.forEach((function(t){L.PM.Utils.disablePopup(t)})):t.forEach((function(t){L.PM.Utils.enablePopup(t)}))},createNewDrawInstance:function(t,e){var i=this._getShapeFromBtnName(e);if(this[t])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[i])throw new TypeError("There is no class L.PM.Draw.".concat(i));return this[t]=new L.PM.Draw[i](this._map),this[t].toolbarButtonName=t,this[t]._shape=t,this.shapes.push(t),this[e]&&this[t].setOptions(this[e].options),this[t].setOptions(this[t].options),this[t]},_getShapeFromBtnName:function(t){var e={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return e[t]?e[t]:this[t]?this[t]._shape:t},_finishLayer:function(t){t.pm&&(t.pm.setOptions(this.options),t.pm._shape=this._shape,t.pm._map=this._map),this._addDrawnLayerProp(t)},_addDrawnLayerProp:function(t){t._drawnByGeoman=!0},_setPane:function(t,e){"layerPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":"vertexPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":"markerPane"===e&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return 0===(this._map||this._layer._map).pm.getGeomanLayers().length}});nt.Marker=nt.extend({initialize:function(t){this._map=t,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(t){var e=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer((function(t){e.isRelevantMarker(t)&&t.pm.enable()})),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer((function(e){t.isRelevantMarker(e)&&e.pm.disable()})),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},isRelevantMarker:function(t){return t instanceof L.Marker&&t.pm&&!t._pmTempLayer&&!t.pm._initTextMarker},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(t){if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),i=new L.Marker(e,this.options.markerStyle);this._setPane(i,"markerPane"),this._finishLayer(i),i.pm||(i.options.draggable=!1),i.addTo(this._map.pm._getContainingLayer()),i.pm&&this.options.markerEditable?i.pm.enable():i.dragging&&i.dragging.disable(),this._fireCreate(i),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},setStyle:function(){var t,e;null!==(t=this.options.markerStyle)&&void 0!==t&&t.icon&&(null===(e=this._hintMarker)||void 0===e||e.setIcon(this.options.markerStyle.icon))}});var ot=6371008.8,rt={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*ot,kilometers:6371.0088,kilometres:6371.0088,meters:ot,metres:ot,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:ot/1852,radians:1,yards:6967335.223679999};function at(t,e,i){void 0===i&&(i={});var n={type:"Feature"};return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function st(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!pt(t[0])||!pt(t[1]))throw new Error("coordinates must contain numbers");return at({type:"Point",coordinates:t},e,i)}function lt(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return at({type:"LineString",coordinates:t},e,i)}function ct(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function ht(t){return t%(2*Math.PI)*180/Math.PI}function ut(t){return t%360*Math.PI/180}function pt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function dt(t){var e,i,n={type:"FeatureCollection",features:[]};if("LineString"===(i="Feature"===t.type?t.geometry:t).type)e=[i.coordinates];else if("MultiLineString"===i.type)e=i.coordinates;else if("MultiPolygon"===i.type)e=[].concat.apply([],i.coordinates);else{if("Polygon"!==i.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=i.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var i=0;i<t.length-1;i++)for(var o=i;o<e.length-1;o++){if(t===e){if(1===Math.abs(i-o))continue;if(0===i&&o===t.length-2&&t[i][0]===t[t.length-1][0]&&t[i][1]===t[t.length-1][1])continue}var r=mt(t[i][0],t[i][1],t[i+1][0],t[i+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);r&&n.features.push(st([r[0],r[1]]))}}))})),n}function mt(t,e,i,n,o,r,a,s){var l,c,h,u,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(l=(s-r)*(i-t)-(a-o)*(n-e))?null!==p.x&&null!==p.y&&p:(u=(i-t)*(c=e-r)-(n-e)*(h=t-o),c=((a-o)*c-(s-r)*h)/l,h=u/l,p.x=t+c*(i-t),p.y=e+c*(n-e),c>=0&&c<=1&&(p.onLine1=!0),h>=0&&h<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}function ft(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function gt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(i),!0).forEach((function(e){_t(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ft(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function _t(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function vt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function yt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(i),!0).forEach((function(e){bt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function bt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function xt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function kt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(i),!0).forEach((function(e){Lt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):xt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Lt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function wt(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Mt(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ct(t){return"Feature"===t.type?t.geometry:t}function Pt(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}function St(t,e,i){if(null!==t)for(var n,o,r,a,s,l,c,h,u=0,p=0,d=t.type,m="FeatureCollection"===d,f="Feature"===d,g=m?t.features.length:1,_=0;_<g;_++){s=(h=!!(c=m?t.features[_].geometry:f?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var y=0,b=0;if(null!==(a=h?c.geometries[v]:c)){l=a.coordinates;var x=a.type;switch(u=!i||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,_,y,b))return!1;p++,y++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],p,_,y,b))return!1;p++,"MultiPoint"===x&&y++}"LineString"===x&&y++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(o=0;o<l[n].length-u;o++){if(!1===e(l[n][o],p,_,y,b))return!1;p++}"MultiLineString"===x&&y++,"Polygon"===x&&b++}"Polygon"===x&&y++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(b=0,o=0;o<l[n].length;o++){for(r=0;r<l[n][o].length-u;r++){if(!1===e(l[n][o][r],p,_,y,b))return!1;p++}b++}y++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===St(a.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Tt(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function At(t,e){!function(t,e){var i,n,o,r,a,s,l,c,h,u,p=0,d="FeatureCollection"===t.type,m="Feature"===t.type,f=d?t.features.length:1;for(i=0;i<f;i++){for(s=d?t.features[i].geometry:m?t.geometry:t,c=d?t.features[i].properties:m?t.properties:{},h=d?t.features[i].bbox:m?t.bbox:void 0,u=d?t.features[i].id:m?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(r=l?s.geometries[o]:s))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(r,p,c,h,u))return!1;break;case"GeometryCollection":for(n=0;n<r.geometries.length;n++)if(!1===e(r.geometries[n],p,c,h,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,h,u))return!1;p++}}(t,(function(t,i,n,o,r){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(at(t,n,{bbox:o,id:r}),i,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(at({type:a,coordinates:c},n),i,l))return!1}}))}nt.Line=nt.extend({initialize:function(t){this._map=t,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],gt(gt({},this.options.templineStyle),{},{pmIgnore:!1})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&"snap"!==this.options.finishOn&&this._map.on(this.options.finishOn,this._finishShape,this),"dblclick"===this.options.finishOn&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&"snap"!==this.options.finishOn&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._layer.getLatLngs();if(t.length>0){var e=t[t.length-1];this._hintline.setLatLngs([e,this._hintMarker.getLatLng()])}},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());var i=this._layer._defaultShape().slice();i.push(this._hintMarker.getLatLng()),this._change(i)},hasSelfIntersection:function(){return dt(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(t,e){var i=L.polyline(this._layer.getLatLngs());t&&(e||(e=this._hintMarker.getLatLng()),i.addLatLng(e));var n=dt(i.toGeoJSON(15));this._doesSelfIntersect=n.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(t){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,t.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),i=this._layer.getLatLngs(),n=i[i.length-1];if(e.equals(i[0])||i.length>0&&e.equals(n))this._finishShape();else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:e,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(e);var o=this._createMarker(e);this._setTooltipText(),this._setHintLineAfterNewVertex(e),this._fireVertexAdded(o,void 0,e,"Draw"),this._change(this._layer.getLatLngs()),"snap"===this.options.finishOn&&this._hintMarker._snapped&&this._finishShape(t)}}},_setHintLineAfterNewVertex:function(t){this._hintline.setLatLngs([t,t])},_removeLastVertex:function(){var t=this._markers;if(t.length<=1)this.disable();else{var e=this._layer.getLatLngs(),i=t[t.length-1],n=L.PM.Utils.findDeepMarkerIndex(t,i).indexPath;t.pop(),this._layerGroup.removeLayer(i);var o=t[t.length-1],r=e.indexOf(o.getLatLng());e=e.slice(0,r+1),this._layer.setLatLngs(e),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(i,n,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=1)){var e=L.polyline(t,this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),this._fireCreate(e),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),this._markers.push(e),e.on("click",this._finishShape,this),e},_setTooltipText:function(){var t;t=B(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(t)},_change:function(t){this._fireChange(t,"Draw")},setStyle:function(){var t,e;null===(t=this._layer)||void 0===t||t.setStyle(this.options.templineStyle),null===(e=this._hintline)||void 0===e||e.setStyle(this.options.hintlineStyle)}}),nt.Polygon=nt.Line.extend({initialize:function(t){this._map=t,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable:function(t){L.PM.Draw.Line.prototype.enable.call(this,t),this._layer.pm._shape="Polygon"},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),this._markers.push(e),1===this._layer.getLatLngs().flat().length?(e.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(e)-1,this.options.snappable&&this._cleanupSnapping()):e.on("click",(function(){return 1})),e},_setTooltipText:function(){var t;t=B(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(t)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=2)){var e=L.polygon(t,this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),this._fireCreate(e),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),nt.Rectangle=nt.extend({initialize:function(t){this._map=t,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(t){if(L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(var e=0;e<2;e+=1){var i=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(i,"vertexPane"),i._pmTempLayer=!0,this._layerGroup.addLayer(i),this._styleMarkers.push(i)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_placeStartingMarkers:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(e),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach((function(t){L.DomUtil.addClass(t._icon,"visible"),t.setLatLng(e)})),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(B("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var t=this._startMarker.getLatLng();t&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([t,t]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}var i=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(i,"Draw")},_syncRectangleSize:function(){var t=this,e=H(this._startMarker.getLatLng(),this._map),i=H(this._hintMarker.getLatLng(),this._map),n=L.PM.Utils._getRotatedRectangle(e,i,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(n),this.options.cursorMarker&&this._styleMarkers){var o=[];n.forEach((function(t){t.equals(e,1e-8)||t.equals(i,1e-8)||o.push(t)})),o.forEach((function(e,i){try{t._styleMarkers[i].setLatLng(e)}catch(t){}}))}},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),i=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var n=L.rectangle([i,e],this.options.pathOptions);if(this.options.rectangleAngle){var o=L.PM.Utils._getRotatedRectangle(i,e,this.options.rectangleAngle||0,this._map);n.setLatLngs(o),n.pm&&n.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(n,"layerPane"),this._finishLayer(n),n.addTo(this._map.pm._getContainingLayer()),this._fireCreate(n),this.disable(),this.options.continueDrawing&&this.enable()}},setStyle:function(){var t;null===(t=this._layer)||void 0===t||t.setStyle(this.options.pathOptions)}}),nt.Circle=nt.extend({initialize:function(t){this._map=t,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(t){L.Util.setOptions(this,t),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle(this._map.getCenter(),yt(yt({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t,e=this._centerMarker.getLatLng(),i=this._hintMarker.getLatLng();t=this._map.options.crs===L.CRS.Simple?this._map.distance(e,i):e.distanceTo(i),this.options.minRadiusCircle&&t<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&t>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping();var i=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(i,"Draw")},_placeCenterMarker:function(t){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(B("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e,i=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng();e=this._map.options.crs===L.CRS.Simple?this._map.distance(i,n):i.distanceTo(n),this.options.minRadiusCircle&&e<this.options.minRadiusCircle?e=this.options.minRadiusCircle:this.options.maxRadiusCircle&&e>this.options.maxRadiusCircle&&(e=this.options.maxRadiusCircle);var o=yt(yt({},this.options.pathOptions),{},{radius:e}),r=L.circle(i,o);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),r.pm&&r.pm._updateHiddenPolyCircle(),this._fireCreate(r),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._hintMarker.getLatLng();if(!this._layerGroup.hasLayer(this._centerMarker))return t;var e=this._centerMarker.getLatLng(),i=e.distanceTo(t);return this.options.minRadiusCircle&&i<this.options.minRadiusCircle?t=N(this._map,e,t,this.options.minRadiusCircle):this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle&&(t=N(this._map,e,t,this.options.maxRadiusCircle)),t},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),i=t.distanceTo(e);this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircle&&i<this.options.minRadiusCircle||this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())},setStyle:function(){var t,e;null===(t=this._layer)||void 0===t||t.setStyle(this.options.templineStyle),null===(e=this._hintline)||void 0===e||e.setStyle(this.options.hintlineStyle)}}),nt.CircleMarker=nt.Marker.extend({initialize:function(t){this._map=t,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(t){var e=this;if(L.Util.setOptions(this,t),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable){var i={};L.extend(i,this.options.templineStyle),i.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker(this._map.getCenter(),i),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"}else this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker(this._map.getCenter(),this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer((function(t){e.isRelevantMarker(t)&&t.pm.enable()})),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer((function(e){t.isRelevantMarker(e)&&e.pm.disable()})),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(t){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(B("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(i)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping();var i=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(i,"Draw")},isRelevantMarker:function(t){return t instanceof L.CircleMarker&&!(t instanceof L.Circle)&&t.pm&&!t._pmTempLayer},_createMarker:function(t){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&t.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),i=L.circleMarker(e,this.options.pathOptions);this._setPane(i,"layerPane"),this._finishLayer(i),i.addTo(this._map.pm._getContainingLayer()),i.pm&&this.options.markerEditable&&i.pm.enable(),this._fireCreate(i),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._centerMarker.getLatLng(),i=this._hintMarker.getLatLng(),n=this._map.project(e).distanceTo(this._map.project(i));this.options.editable&&(this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?n=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker&&(n=this.options.maxRadiusCircleMarker));var o=kt(kt({},this.options.pathOptions),{},{radius:n}),r=L.circleMarker(e,o);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),r.pm&&r.pm._updateHiddenPolyCircle(),this._fireCreate(r),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._hintMarker.getLatLng();if(this.options.editable){if(!this._layerGroup.hasLayer(this._centerMarker))return t;var e=this._centerMarker.getLatLng(),i=this._map.project(e).distanceTo(this._map.project(t));this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker?t=N(this._map,e,t,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker&&(t=N(this._map,e,t,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return t},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(t){var e=this._centerMarker.getLatLng(),i=this._map.project(e),n=L.point(i.x+t,i.y);return this._map.unproject(n).distanceTo(e)},setStyle:function(){var t,e,i={};L.extend(i,this.options.templineStyle),this.options.editable&&(i.radius=0),null===(t=this._layer)||void 0===t||t.setStyle(i),null===(e=this._hintline)||void 0===e||e.setStyle(this.options.hintlineStyle)}});const Dt=function(t){if(!t)throw new Error("geojson is required");var e=[];return At(t,(function(t){!function(t,e){var i=[],n=t.geometry;if(null!==n){switch(n.type){case"Polygon":i=Mt(n);break;case"LineString":i=[Mt(n)]}i.forEach((function(i){var n=function(t,e){var i=[];return t.reduce((function(t,n){var o,r,a,s,l,c,h=lt([t,n],e);return h.bbox=(r=n,a=(o=t)[0],s=o[1],[a<(l=r[0])?a:l,s<(c=r[1])?s:c,a>l?a:l,s>c?s:c]),i.push(h),n})),i}(i,t.properties);n.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),ct(e)};var Et=i(1787);function Ot(t,e){var i=Mt(t),n=Mt(e);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=i[0][0],r=i[0][1],a=i[1][0],s=i[1][1],l=n[0][0],c=n[0][1],h=n[1][0],u=n[1][1],p=(u-c)*(a-o)-(h-l)*(s-r);if(0===p)return null;var d=((h-l)*(r-c)-(u-c)*(o-l))/p,m=((a-o)*(r-c)-(s-r)*(o-l))/p;return d>=0&&d<=1&&m>=0&&m<=1?st([o+d*(a-o),r+d*(s-r)]):null}const It=function(t,e){var i={},n=[];if("LineString"===t.type&&(t=at(t)),"LineString"===e.type&&(e=at(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var o=Ot(t,e);return o&&n.push(o),ct(n)}var r=Et();return r.load(Dt(e)),Tt(Dt(t),(function(t){Tt(r.search(t),(function(e){var o=Ot(t,e);if(o){var r=Mt(o).join(",");i[r]||(i[r]=!0,n.push(o))}}))})),ct(n)},Bt=function(t,e,i){void 0===i&&(i={});var n=wt(t),o=wt(e),r=ut(o[1]-n[1]),a=ut(o[0]-n[0]),s=ut(n[1]),l=ut(o[1]),c=Math.pow(Math.sin(r/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(l);return function(t,e){void 0===e&&(e="kilometers");var i=rt[e];if(!i)throw new Error(e+" units is invalid");return t*i}(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),i.units)};function Rt(t){var e=[1/0,1/0,-1/0,-1/0];return St(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Rt.default=Rt;const zt=Rt;function Ft(t,e,i){if(void 0===i&&(i={}),!0===i.final)return function(t,e){var i=Ft(e,t);return(i+180)%360}(t,e);var n=wt(t),o=wt(e),r=ut(n[0]),a=ut(o[0]),s=ut(n[1]),l=ut(o[1]),c=Math.sin(a-r)*Math.cos(l),h=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(a-r);return ht(Math.atan2(c,h))}function jt(t,e,i,n){void 0===n&&(n={});var o=wt(t),r=ut(o[0]),a=ut(o[1]),s=ut(i),l=function(t,e){void 0===e&&(e="kilometers");var i=rt[e];if(!i)throw new Error(e+" units is invalid");return t/i}(e,n.units),c=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(s));return st([ht(r+Math.atan2(Math.sin(s)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(c))),ht(c)],n.properties)}function Nt(t,e){var i=[],n=Et();return At(e,(function(e){if(i.forEach((function(t,e){t.id=e})),i.length){var o=n.search(e);if(o.features.length){var r=Gt(e,o);i=i.filter((function(t){return t.id!==r.id})),n.remove(r),Tt(Ut(r,e),(function(t){i.push(t),n.insert(t)}))}}else(i=Ut(t,e).features).forEach((function(t){t.bbox||(t.bbox=function(t){var e=t[0],i=t[1],n=t[2],o=t[3];if(Bt(t.slice(0,2),[n,i])>=Bt(t.slice(0,2),[e,o])){var r=(i+o)/2;return[e,r-(n-e)/2,n,r+(n-e)/2]}var a=(e+n)/2;return[a-(o-i)/2,i,a+(o-i)/2,o]}(zt(t)))})),n.load(ct(i))})),ct(i)}function Ut(t,e){var i=[],n=Mt(t)[0],o=Mt(t)[t.geometry.coordinates.length-1];if(Ht(n,wt(e))||Ht(o,wt(e)))return ct([t]);var r=Et(),a=Dt(t);r.load(a);var s=r.search(e);if(!s.features.length)return ct([t]);var l=Gt(e,s),c=function(t,e,i){var n=i;return Tt(t,(function(t,o){n=0===o&&void 0===i?t:e(n,t,o)})),n}(a,(function(t,n,o){var r=Mt(n)[1],a=wt(e);return o===l.id?(t.push(a),i.push(lt(t)),Ht(a,r)?[a]:[a,r]):(t.push(r),t)}),[n]);return c.length>1&&i.push(lt(c)),ct(i)}function Gt(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var i,n=1/0;return Tt(e,(function(e){var o=function(t,e,i){void 0===i&&(i={});var n=st([1/0,1/0],{dist:1/0}),o=0;return At(t,(function(t){for(var r=Mt(t),a=0;a<r.length-1;a++){var s=st(r[a]);s.properties.dist=Bt(e,s,i);var l=st(r[a+1]);l.properties.dist=Bt(e,l,i);var c=Bt(s,l,i),h=Math.max(s.properties.dist,l.properties.dist),u=Ft(s,l),p=jt(e,h,u+90,i),d=jt(e,h,u-90,i),m=It(lt([p.geometry.coordinates,d.geometry.coordinates]),lt([s.geometry.coordinates,l.geometry.coordinates])),f=null;m.features.length>0&&((f=m.features[0]).properties.dist=Bt(e,f,i),f.properties.location=o+Bt(s,f,i)),s.properties.dist<n.properties.dist&&((n=s).properties.index=a,n.properties.location=o),l.properties.dist<n.properties.dist&&((n=l).properties.index=a+1,n.properties.location=o+c),f&&f.properties.dist<n.properties.dist&&((n=f).properties.index=a),o+=c}})),n}(e,t).properties.dist;o<n&&(i=e,n=o)})),i}function Ht(t,e){return t[0]===e[0]&&t[1]===e[1]}const Zt=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var i=Pt(t),n=Pt(e);if("LineString"!==i)throw new Error("line must be LineString");if("FeatureCollection"===n)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===n)throw new Error("splitter cannot be a GeometryCollection");var o=function(t,e){void 0===e&&(e={});var i=e.precision,n=e.coordinates,o=e.mutate;if(i=null==i||isNaN(i)?6:i,n=null==n||isNaN(n)?3:n,!t)throw new Error("<geojson> is required");if("number"!=typeof i)throw new Error("<precision> must be a number");if("number"!=typeof n)throw new Error("<coordinates> must be a number");!1!==o&&void 0!==o||(t=JSON.parse(JSON.stringify(t)));var r=Math.pow(10,i);return St(t,(function(t){!function(t,e,i){t.length>i&&t.splice(i,t.length);for(var n=0;n<t.length;n++)t[n]=Math.round(t[n]*e)/e}(t,r,n)})),t}(e,{precision:7});switch(n){case"Point":return Ut(t,o);case"MultiPoint":return Nt(t,o);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Nt(t,It(t,o))}};function Vt(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=wt(t),o=Ct(e),r=o.type,a=e.bbox,s=o.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(n,a))return!1;"Polygon"===r&&(s=[s]);for(var l=!1,c=0;c<s.length&&!l;c++)if(Wt(n,s[c][0],i.ignoreBoundary)){for(var h=!1,u=1;u<s[c].length&&!h;)Wt(n,s[c][u],!i.ignoreBoundary)&&(h=!0),u++;h||(l=!0)}return l}function Wt(t,e,i){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var o=0,r=e.length-1;o<e.length;r=o++){var a=e[o][0],s=e[o][1],l=e[r][0],c=e[r][1];if(t[1]*(a-l)+s*(l-t[0])+c*(t[0]-a)==0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!i;s>t[1]!=c>t[1]&&t[0]<(l-a)*(t[1]-s)/(c-s)+a&&(n=!n)}return n}function qt(t,e,i,n,o){var r=i[0],a=i[1],s=t[0],l=t[1],c=e[0],h=e[1],u=c-s,p=h-l,d=(i[0]-s)*p-(i[1]-l)*u;if(null!==o){if(Math.abs(d)>o)return!1}else if(0!==d)return!1;return n?"start"===n?Math.abs(u)>=Math.abs(p)?u>0?s<r&&r<=c:c<=r&&r<s:p>0?l<a&&a<=h:h<=a&&a<l:"end"===n?Math.abs(u)>=Math.abs(p)?u>0?s<=r&&r<c:c<r&&r<=s:p>0?l<=a&&a<h:h<a&&a<=l:"both"===n&&(Math.abs(u)>=Math.abs(p)?u>0?s<r&&r<c:c<r&&r<s:p>0?l<a&&a<h:h<a&&a<l):Math.abs(u)>=Math.abs(p)?u>0?s<=r&&r<=c:c<=r&&r<=s:p>0?l<=a&&a<=h:h<=a&&a<=l}const $t=function(t,e,i){void 0===i&&(i={});for(var n=wt(t),o=Mt(e),r=0;r<o.length-1;r++){var a=!1;if(i.ignoreEndVertices&&(0===r&&(a="start"),r===o.length-2&&(a="end"),0===r&&r+1===o.length-1&&(a="both")),qt(o[r],o[r+1],n,a,void 0===i.epsilon?null:i.epsilon))return!0}return!1};function Yt(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Kt(t,e){return t[0]===e[0]&&t[1]===e[1]}function Jt(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var Xt=i(2676),Qt=i.n(Xt);function te(t){var e={type:"Feature"};return e.geometry=t,e}function ee(t){return"Feature"===t.type?t.geometry:t}function ie(t){return t&&t.geometry&&t.geometry.coordinates?t.geometry.coordinates:t}function ne(t){return te({type:"Polygon",coordinates:t})}function oe(t){return te({type:"MultiPolygon",coordinates:t})}function re(t){return Array.isArray(t)?1+re(t[0]):-1}function ae(t){t instanceof L.Polyline&&(t=t.toGeoJSON(15));var e=ie(t),i=re(e),n=[];return i>1?e.forEach((function(t){n.push(function(t){return te({type:"LineString",coordinates:t})}(t))})):n.push(t),n}function se(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}nt.Cut=nt.Polygon.extend({initialize:function(t){this._map=t,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var t=this;if(this._editedLayers=[],(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var e=this._layer.getLatLngs();if(!(e.length<=2)){var i=L.polygon(e,this.options.pathOptions);i._latlngInfos=this._layer._latlngInfo,this.cut(i),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach((function(e){var i=e.layer,n=e.originalLayer;t._fireCut(n,i,n),t._fireCut(t._map,i,n),n.pm._fireEdit()})),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}}},cut:function(t){var e=this,i=this._map._layers,n=t._latlngInfos||[];Object.keys(i).map((function(t){return i[t]})).filter((function(t){return t.pm})).filter((function(t){return!t._pmTempLayer})).filter((function(t){return!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore})).filter((function(t){return t instanceof L.Polyline})).filter((function(e){return e!==t})).filter((function(t){return t.pm.options.allowCutting})).filter((function(t){return!(e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0)||e.options.layersToCut.indexOf(t)>-1})).filter((function(t){return!e._layerGroup.hasLayer(t)})).filter((function(e){try{var i=!!It(t.toGeoJSON(15),e.toGeoJSON(15)).features.length>0;return i||e instanceof L.Polyline&&!(e instanceof L.Polygon)?i:(n=t.toGeoJSON(15),o=e.toGeoJSON(15),r=ee(n),a=ee(o),!(0===(s=Qt().intersection(r.coordinates,a.coordinates)).length||!(1===s.length?ne(s[0]):oe(s))))}catch(t){return e instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var n,o,r,a,s})).forEach((function(i){var o;if(i instanceof L.Polygon){var r=(o=L.polygon(i.getLatLngs())).getLatLngs();n.forEach((function(t){if(t&&t.snapInfo){var i=t.latlng,n=e._calcClosestLayer(i,[o]);if(n&&n.segment&&n.distance<e.options.snapDistance){var a=n.segment;if(a&&2===a.length){var s=L.PM.Utils._getIndexFromSegment(r,a),l=s.indexPath,c=s.parentPath,h=s.newIndex;(l.length>1?E()(r,c):r).splice(h,0,i)}}}}))}else o=i;var a=e._cutLayer(t,o),s=L.geoJSON(a,i.options);if(1===s.getLayers().length){var l=s.getLayers();s=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r=[],a=!0,s=!1;try{for(i=i.call(t);!(a=(n=i.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return se(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?se(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l,1)[0]}e._setPane(s,"layerPane");var c=s.addTo(e._map.pm._getContainingLayer());if(c.pm.enable(i.pm.options),c.pm.disable(),i._pmTempLayer=!0,t._pmTempLayer=!0,i.remove(),i.removeFrom(e._map.pm._getContainingLayer()),t.remove(),t.removeFrom(e._map.pm._getContainingLayer()),c.getLayers&&0===c.getLayers().length&&e._map.pm.removeLayer({target:c}),c instanceof L.LayerGroup?(c.eachLayer((function(t){e._addDrawnLayerProp(t)})),e._addDrawnLayerProp(c)):e._addDrawnLayerProp(c),e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0){var h=e.options.layersToCut.indexOf(i);h>-1&&e.options.layersToCut.splice(h,1)}e._editedLayers.push({layer:c,originalLayer:i})}))},_cutLayer:function(t,e){var i,n,o,r,a,s,l=L.geoJSON();if(e instanceof L.Polygon)n=e.toGeoJSON(15),o=t.toGeoJSON(15),r=ee(n),a=ee(o),i=0===(s=Qt().difference(r.coordinates,a.coordinates)).length?null:1===s.length?ne(s[0]):oe(s);else{var c=ae(e);c.forEach((function(e){var i=Zt(e,t.toGeoJSON(15));(i&&i.features.length>0?L.geoJSON(i):L.geoJSON(e)).getLayers().forEach((function(e){(function(t,e){var i=Ct(t),n=Ct(e),o=i.type,r=n.type,a=i.coordinates,s=n.coordinates;switch(o){case"Point":if("Point"===r)return Kt(a,s);throw new Error("feature2 "+r+" geometry not supported");case"MultiPoint":switch(r){case"Point":return function(t,e){var i,n=!1;for(i=0;i<t.coordinates.length;i++)if(Kt(t.coordinates[i],e.coordinates)){n=!0;break}return n}(i,n);case"MultiPoint":return function(t,e){for(var i=0,n=e.coordinates;i<n.length;i++){for(var o=n[i],r=!1,a=0,s=t.coordinates;a<s.length;a++)if(Kt(o,s[a])){r=!0;break}if(!r)return!1}return!0}(i,n);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return $t(n,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var i=!1,n=0,o=e.coordinates;n<o.length;n++){var r=o[n];if($t({type:"Point",coordinates:r},t,{ignoreEndVertices:!0})&&(i=!0),!$t({type:"Point",coordinates:r},t,{ignoreEndVertices:!1}))return!1}return i}(i,n);case"MultiPoint":return function(t,e){for(var i=!1,n=0,o=e.coordinates;n<o.length;n++){var r=o[n];if($t(r,t,{ignoreEndVertices:!0})&&(i=!0),!$t(r,t))return!1}return!!i}(i,n);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Vt(n,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var i=!1,n=0;if(!Yt(zt(t),zt(e)))return!1;for(;n<e.coordinates.length-1;n++)if(Vt({type:"Point",coordinates:Jt(e.coordinates[n],e.coordinates[n+1])},t,{ignoreBoundary:!0})){i=!0;break}return i}(i,n);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!Yt(zt(t),zt(e)))return!1;for(var i=0,n=Ct(e).coordinates;i<n.length;i++)for(var o=0,r=n[i];o<r.length;o++)if(!Vt(r[o],t))return!1;return!0}(i,n);case"MultiPoint":return function(t,e){for(var i=0,n=e.coordinates;i<n.length;i++)if(!Vt(n[i],t,{ignoreBoundary:!0}))return!1;return!0}(i,n);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+o+" geometry not supported")}})(t.toGeoJSON(15),e.toGeoJSON(15))||e.addTo(l)}))})),i=c.length>1?function(t){var e=[];return t.eachLayer((function(t){e.push(ie(t.toGeoJSON(15)))})),function(t){return te({type:"MultiLineString",coordinates:t})}(e)}(l):l.toGeoJSON(15)}return i},_change:L.Util.falseFn}),nt.Text=nt.extend({initialize:function(t){this._map=t,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}},_createMarker:function(t){var e;if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var i=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),null!==(e=this.options.textOptions)&&void 0!==e&&e.className){var n,o=this.options.textOptions.className.split(" ");(n=this.textArea.classList).add.apply(n,function(t){return function(t){if(Array.isArray(t))return le(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return le(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?le(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o))}var r=this._createTextIcon(this.textArea),a=new L.Marker(i,{textMarker:!0,_textMarkerOverPM:!0,icon:r});if(this._setPane(a,"markerPane"),this._finishLayer(a),a.pm||(a.options.draggable=!1),a.addTo(this._map.pm._getContainingLayer()),a.pm){var s,l,c,h,u;a.pm.textArea=this.textArea,L.setOptions(a.pm,{removeIfEmpty:null===(s=null===(l=this.options.textOptions)||void 0===l?void 0:l.removeIfEmpty)||void 0===s||s});var p=null===(c=null===(h=this.options.textOptions)||void 0===h?void 0:h.focusAfterDraw)||void 0===c||c;a.pm._createTextMarker(p),null!==(u=this.options.textOptions)&&void 0!==u&&u.text&&a.pm.setText(this.options.textOptions.text)}this._fireCreate(a),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var t=document.createElement("textarea");return t.autofocus=!0,t.readOnly=!0,t.classList.add("pm-textarea","pm-disabled"),t},_createTextIcon:function(t){return L.divIcon({className:"pm-text-marker",html:t})}});const ce={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Z(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var t=this._getDOMElem();t&&(Z(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(t)):L.DomEvent.on(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,Z(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var t=this._getDOMElem();t&&(Z(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(t)):L.DomEvent.off(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(t){var e=t.touches?t.touches[0]:t,i={originalEvent:e,target:this._layer};return i.containerPoint=this._map.mouseEventToContainerPoint(e),i.latlng=this._map.containerPointToLatLng(i.containerPoint),this._dragMixinOnMouseDown(i),!1},_simulateMouseMoveEvent:function(t){var e=t.touches?t.touches[0]:t,i={originalEvent:e,target:this._layer};return i.containerPoint=this._map.mouseEventToContainerPoint(e),i.latlng=this._map.containerPointToLatLng(i.containerPoint),this._dragMixinOnMouseMove(i),!1},_simulateMouseUpEvent:function(t){var e={originalEvent:t.touches?t.touches[0]:t,target:this._layer};return-1===t.type.indexOf("touch")&&(e.containerPoint=this._map.mouseEventToContainerPoint(t),e.latlng=this._map.containerPointToLatLng(e.containerPoint)),this._dragMixinOnMouseUp(e),!1},_dragMixinOnMouseDown:function(t){if(!(t.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(t);var e=t._fromLayerSync,i=this._syncLayers("_dragMixinOnMouseDown",t);this._layer instanceof L.Marker&&(!this.options.snappable||e||i?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||e||i?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=t.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(t){this._overwriteEventIfItComesFromMarker(t);var e=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",t),this._dragging||(this._dragging=!0,L.DomUtil.addClass(e,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=t.latlng),this._onLayerDrag(t),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(t){var e=this,i=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",t),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout((function(){e._dragging=!1,i&&L.DomUtil.removeClass(i,"leaflet-pm-dragging"),e._fireDragEnd(),e._fireEdit(),e._layerEdited=!0}),10),!0)},_onLayerDrag:function(t){var e=t.latlng,i=e.lat-this._tempDragCoord.lat,n=e.lng-this._tempDragCoord.lng,o=function t(e){return e.map((function(e){if(Array.isArray(e))return t(e);var o={lat:e.lat+i,lng:e.lng+n};return(e.alt||0===e.alt)&&(o.alt=e.alt),o}))};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var r=o([this._layer.getLatLng()]);this._layer.setLatLng(r[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var a=this._layer.getLatLng();this._layer._snapped&&(a=this._layer._orgLatLng);var s=o([a]);this._layer.setLatLng(s[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var l=o([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(l),this._fireChange(this._layer.getBounds(),"Edit")}else{var c=o(this._layer.getLatLngs());this._layer.setLatLngs(c),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=e,t.layer=this._layer,this._fireDrag(t)},addDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.addClass(t,"leaflet-pm-draggable")},removeDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.removeClass(t,"leaflet-pm-draggable")},_getDOMElem:function(){var t=null;return this._layer._path?t=this._layer._path:this._layer._renderer&&this._layer._renderer._container?t=this._layer._renderer._container:this._layer._image?t=this._layer._image:this._layer._icon&&(t=this._layer._icon),t},_overwriteEventIfItComesFromMarker:function(t){t.target.getLatLng&&(!t.target._radius||t.target._radius<=10)&&(t.containerPoint=this._map.mouseEventToContainerPoint(t.originalEvent),t.latlng=this._map.containerPointToLatLng(t.containerPoint))},_syncLayers:function(t,e){var i=this;if(this.enabled())return!1;if(!e._fromLayerSync&&this._layer===e.target&&this.options.syncLayersOnDrag){e._fromLayerSync=!0;var n=[];if(L.Util.isArray(this.options.syncLayersOnDrag))n=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach((function(t){t instanceof L.LayerGroup&&(n=n.concat(t.pm.getLayers(!0)))}));else if(!0===this.options.syncLayersOnDrag&&this._parentLayerGroup)for(var o in this._parentLayerGroup){var r=this._parentLayerGroup[o];r.pm&&(n=r.pm.getLayers(!0))}return L.Util.isArray(n)&&n.length>0&&(n=n.filter((function(t){return!!t.pm})).filter((function(t){return!!t.pm.options.draggable}))).forEach((function(n){n!==i._layer&&n.pm[t]&&(n._snapped=!1,n.pm[t](e))})),n.length>0}return!1},_stopDOMImageDrag:function(t){return t.preventDefault(),!1}};function he(t,e,i){var n=i.getMaxZoom();if(n===1/0&&(n=i.getZoom()),L.Util.isArray(t)){var o=[];return t.forEach((function(t){o.push(he(t,e,i))})),o}return t instanceof L.LatLng?function(t,e,i,n){return i.unproject(e.transform(i.project(t,n)),n)}(t,e,i,n):null}function ue(t,e){e instanceof L.Layer&&(e=e.getLatLng());var i=t.getMaxZoom();return i===1/0&&(i=t.getZoom()),t.project(e,i)}function pe(t,e){var i=t.getMaxZoom();return i===1/0&&(i=t.getZoom()),t.unproject(e,i)}var de={_onRotateStart:function(t){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=ue(this._map,this._rotationOriginLatLng),this._rotationStartPoint=ue(this._map,t.target.getLatLng()),this._initialRotateLatLng=G(this._layer),this._startAngle=this.getAngle();var e=G(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,e),this._fireRotationStart(this._map,e)},_onRotate:function(t){var e=ue(this._map,t.target.getLatLng()),i=this._rotationStartPoint,n=this._rotationOriginPoint,o=Math.atan2(e.y-n.y,e.x-n.x)-Math.atan2(i.y-n.y,i.x-n.x);this._layer.setLatLngs(this._rotateLayer(o,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var r=this;!function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(n>-1&&i.push(n),L.Util.isArray(e[0]))e.forEach((function(e,n){return t(e,i.slice(),n)}));else{var o=E()(r._markers,i);e.forEach((function(t,e){o[e].setLatLng(t)}))}}(this._layer.getLatLngs());var a=G(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(o,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var s=180*o/Math.PI,l=(s=s<0?s+360:s)+this._startAngle;this._setAngle(l),this._rotationLayer.pm._setAngle(l),this._fireRotation(this._rotationLayer,s,a),this._fireRotation(this._map,s,a),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var t=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var e=G(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=G(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,t,e),this._fireRotationEnd(this._map,t,e),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(t,e,i,n,o){var r=ue(o,i);return this._matrix=n.clone().rotate(t,r).flip(),he(e,this._matrix,o)},_setAngle:function(t){t=t<0?t+360:t,this._angle=t%360},_getRotationCenter:function(){var t=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),e=t.getCenter();return t.removeFrom(this._layer._map),e},enableRotate:function(){this.options.allowRotation?(this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}).addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly._pmTempLayer=!0,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=G(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(t){var e=this.getAngle(),i=this._layer.getLatLngs(),n=t*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(n,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+t),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(n,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var o=this.getAngle()-e;o=o<0?o+360:o,this._startAngle=e,this._fireRotation(this._layer,o,i,this._layer),this._fireRotation(this._map||this._layer._map,o,i,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(t){var e=t-this.getAngle();this.rotateLayer(e)},getAngle:function(){return this._angle||0},setInitAngle:function(t){this._setAngle(t)}};const me=de,fe=L.Class.extend({includes:[ce,it,me,T],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(t){L.Util.setOptions(this,t)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(t,e){"layerPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":"vertexPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":"markerPane"===e&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(t,e){var i=e.target,n={layer:this._layer,marker:i,event:e},o="";return"move"===t?o="moveVertexValidation":"add"===t?o="addVertexValidation":"remove"===t&&(o="removeVertexValidation"),this.options[o]&&"function"==typeof this.options[o]&&!this.options[o](n)?("move"===t&&(i._cancelDragEventChain=i.getLatLng()),!1):(i._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(t){return!t._cancelDragEventChain||(t._latlng=t._cancelDragEventChain,t.update(),!1)},_vertexValidationDragEnd:function(t){return!t._cancelDragEventChain||(t._cancelDragEventChain=null,!1)}});function ge(t){return function(t){if(Array.isArray(t))return _e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return _e(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_e(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}fe.LayerGroup=L.Class.extend({initialize:function(t){var e=this;this._layerGroup=t,this._layers=this.getLayers(),this._getMap(),this._layers.forEach((function(t){return e._initLayer(t)})),this._layerGroup.on("layeradd",L.Util.throttle((function(t){if(!t.layer._pmTempLayer){e._layers=e.getLayers();var i=e._layers.filter((function(t){return!t.pm._parentLayerGroup||!(e._layerGroup._leaflet_id in t.pm._parentLayerGroup)}));i.forEach((function(t){e._initLayer(t)})),i.length>0&&e._getMap()&&e._getMap().pm.globalEditModeEnabled()&&e.enabled()&&e.enable(e.getOptions())}}),100,this),this),this._layerGroup.on("layerremove",(function(t){e._removeLayerFromGroup(t.target)}),this),this._layerGroup.on("layerremove",L.Util.throttle((function(t){t.target._pmTempLayer||(e._layers=e.getLayers())}),100,this),this)},enable:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===e.length&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach((function(i){i instanceof L.LayerGroup?-1===e.indexOf(i._leaflet_id)&&(e.push(i._leaflet_id),i.pm.enable(t,e)):i.pm.enable(t)}))},disable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];0===t.length&&(this._layers=this.getLayers()),this._layers.forEach((function(e){e instanceof L.LayerGroup?-1===t.indexOf(e._leaflet_id)&&(t.push(e._leaflet_id),e.pm.disable(t)):e.pm.disable()}))},enabled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];0===t.length&&(this._layers=this.getLayers());var e=this._layers.find((function(e){return e instanceof L.LayerGroup?-1===t.indexOf(e._leaflet_id)&&(t.push(e._leaflet_id),e.pm.enabled(t)):e.pm.enabled()}));return!!e},toggleEdit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===e.length&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach((function(i){i instanceof L.LayerGroup?-1===e.indexOf(i._leaflet_id)&&(e.push(i._leaflet_id),i.pm.toggleEdit(t,e)):i.pm.toggleEdit(t)}))},_initLayer:function(t){var e=L.Util.stamp(this._layerGroup);t.pm._parentLayerGroup||(t.pm._parentLayerGroup={}),t.pm._parentLayerGroup[e]=this._layerGroup},_removeLayerFromGroup:function(t){if(t.pm&&t.pm._layerGroup){var e=L.Util.stamp(this._layerGroup);delete t.pm._layerGroup[e]}},dragging:function(){return this._layers=this.getLayers(),!!this._layers&&!!this._layers.find((function(t){return t.pm.dragging()}))},getOptions:function(){return this.options},_getMap:function(){var t;return this._map||(null===(t=this._layers.find((function(t){return!!t._map})))||void 0===t?void 0:t._map)||null},getLayers:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=[];return t?this._layerGroup.getLayers().forEach((function(t){o.push(t),t instanceof L.LayerGroup&&-1===n.indexOf(t._leaflet_id)&&(n.push(t._leaflet_id),o=o.concat(t.pm.getLayers(!0,!0,!0,n)))})):o=this._layerGroup.getLayers(),i&&(o=o.filter((function(t){return!(t instanceof L.LayerGroup)}))),e&&(o=(o=(o=o.filter((function(t){return!!t.pm}))).filter((function(t){return!t._pmTempLayer}))).filter((function(t){return!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore}))),o},setOptions:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===e.length&&(this._layers=this.getLayers()),this.options=t,this._layers.forEach((function(i){i.pm&&(i instanceof L.LayerGroup?-1===e.indexOf(i._leaflet_id)&&(e.push(i._leaflet_id),i.pm.setOptions(t,e)):i.pm.setOptions(t))}))}}),fe.Marker=fe.extend({_shape:"Marker",initialize:function(t){this._layer=t,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{draggable:!0};L.Util.setOptions(this,t),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(t){var e=t.target;e.remove(),this._fireRemove(e),this._fireRemove(this._map,e)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=void 0===this.options.snapSegment||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)}});const ve={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var t=[].concat(ge(this._markerGroup.getLayers()),ge(this.markerCache));this.markerCache=t.filter((function(t,e,i){return i.indexOf(t)===e}))},renderLimits:function(t){var e=this;this.markerCache.forEach((function(i){t.includes(i)?e._markerGroup.addLayer(i):e._markerGroup.removeLayer(i)}))},applyLimitFilters:function(t){var e=t.latlng,i=void 0===e?{lat:0,lng:0}:e;if(!this._preventRenderMarkers){var n=ge(this._filterClosestMarkers(i));this.renderLimits(n)}},_filterClosestMarkers:function(t){var e=ge(this.markerCache),i=this.options.limitMarkersToCount;return-1===i?e:(e.sort((function(e,i){return e._latlng.distanceTo(t)-i._latlng.distanceTo(t)})),e.filter((function(t,e){return!(i>-1)||e<i})))},_preventRenderMarkers:!1,_preventRenderingMarkers:function(t){this._preventRenderMarkers=!!t}};function ye(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function be(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}fe.Line=fe.extend({includes:[ve],_shape:"Line",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:("#f00000ff"!==this._layer.options.color?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this._map.hasLayer(this._layer)&&!this.hasSelfIntersection()||L.DomUtil.removeClass(t,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(t){return this.enabled()?this.disable():this.enable(t),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var t=this,e=this._map,i=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,this._markers=function e(i){if(Array.isArray(i[0]))return i.map(e,t);var n=i.map(t._createMarker,t);return!0!==t.options.hideMiddleMarkers&&i.map((function(e,o){var r=t.isPolygon()?(o+1)%i.length:o+1;return t._createMiddleMarker(n[o],n[r])})),n}(i),this.filterMarkerGroup(),e.addLayer(this._markerGroup)},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this.options.rotate?(e.on("dragstart",this._onRotateStart,this),e.on("drag",this._onRotate,this),e.on("dragend",this._onRotateEnd,this)):(e.on("click",this._onVertexClick,this),e.on("dragstart",this._onMarkerDragStart,this),e.on("move",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||e.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(e),e},_createMiddleMarker:function(t,e){if(!t||!e)return!1;var i=L.PM.Utils.calcMiddleLatLng(this._map,t.getLatLng(),e.getLatLng()),n=this._createMarker(i),o=L.divIcon({className:"marker-icon marker-icon-middle"});return n.setIcon(o),n.leftM=t,n.rightM=e,t._middleMarkerNext=n,e._middleMarkerPrev=n,n.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),n.on("movestart",this._onMiddleMarkerMoveStart,this),n},_onMiddleMarkerClick:function(t){var e=t.target;if(this._vertexValidation("add",t)){var i=L.divIcon({className:"marker-icon"});e.setIcon(i),this._addMarker(e,e.leftM,e.rightM)}},_onMiddleMarkerMoveStart:function(t){var e=t.target;e.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",t)?(e._dragging=!0,this._addMarker(e,e.leftM,e.rightM)):e.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(t){var e=t.target;this._vertexValidationDrag(e)},_onMiddleMarkerMoveEnd:function(t){var e=t.target;if(e.off("move",this._onMiddleMarkerMovePrevent,this),e.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(e)){var i=L.divIcon({className:"marker-icon"});e.setIcon(i),setTimeout((function(){delete e._dragging}),100)}},_addMarker:function(t,e,i){t.off("movestart",this._onMiddleMarkerMoveStart,this),t.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var n=t.getLatLng(),o=this._layer._latlngs;delete t.leftM,delete t.rightM;var r=L.PM.Utils.findDeepMarkerIndex(this._markers,e),a=r.indexPath,s=r.index,l=r.parentPath,c=a.length>1?E()(o,l):o,h=a.length>1?E()(this._markers,l):this._markers;c.splice(s+1,0,n),h.splice(s+1,0,t),this._layer.setLatLngs(o),!0!==this.options.hideMiddleMarkers&&(this._createMiddleMarker(e,t),this._createMiddleMarker(t,i)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(t,L.PM.Utils.findDeepMarkerIndex(this._markers,t).indexPath,n),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return dt(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(t){var e=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;t?this._flashLayer():(e.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(dt(this._layer.toGeoJSON(15)))}else e.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var t=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout((function(){t._layer.setStyle({color:t.cachedColor}),t.isRed=!1}),200)},_updateDisabledMarkerStyle:function(t,e){var i=this;t.forEach((function(t){Array.isArray(t)?i._updateDisabledMarkerStyle(t,e):t._icon&&(e&&!i._checkMarkerAllowedToDrag(t)?L.DomUtil.addClass(t._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(t._icon,"vertexmarker-disabled"))}))},_removeMarker:function(t){var e=t.target;if(this._vertexValidation("remove",t)){this.options.allowSelfIntersection||(this._coordsBeforeEdit=G(this._layer,this._layer.getLatLngs()));var i=this._layer.getLatLngs(),n=L.PM.Utils.findDeepMarkerIndex(this._markers,e),o=n.indexPath,r=n.index,a=n.parentPath;if(o){var s=o.length>1?E()(i,a):i,l=o.length>1?E()(this._markers,a):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(s.length<=2||this.isPolygon()&&s.length<=3)){s.splice(r,1),this._layer.setLatLngs(i),this.isPolygon()&&s.length<=2&&s.splice(0,s.length);var c=!1;if(s.length<=1&&(s.splice(0,s.length),a.length>1&&o.length>1&&(i=z(i)),this._layer.setLatLngs(i),this._initMarkers(),c=!0),R(i)||this._layer.remove(),i=z(i),this._layer.setLatLngs(i),this._markers=z(this._markers),!c&&(l=o.length>1?E()(this._markers,a):this._markers,e._middleMarkerPrev&&this._markerGroup.removeLayer(e._middleMarkerPrev),e._middleMarkerNext&&this._markerGroup.removeLayer(e._middleMarkerNext),this._markerGroup.removeLayer(e),l)){var h,u;if(this.isPolygon()?(h=(r+1)%l.length,u=(r+(l.length-1))%l.length):(u=r-1<0?void 0:r-1,h=r+1>=l.length?void 0:r+1),h!==u){var p=l[u],d=l[h];!0!==this.options.hideMiddleMarkers&&this._createMiddleMarker(p,d)}l.splice(r,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(e,o),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(t){var e=this._layer.getLatLngs(),i=t.getLatLng(),n=L.PM.Utils.findDeepMarkerIndex(this._markers,t),o=n.indexPath,r=n.index,a=n.parentPath;(o.length>1?E()(e,a):e).splice(r,1,i),this._layer.setLatLngs(e)},_getNeighborMarkers:function(t){var e=L.PM.Utils.findDeepMarkerIndex(this._markers,t),i=e.indexPath,n=e.index,o=e.parentPath,r=i.length>1?E()(this._markers,o):this._markers,a=(n+1)%r.length;return{prevMarker:r[(n+(r.length-1))%r.length],nextMarker:r[a]}},_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),i=e.prevMarker,n=e.nextMarker,o=L.polyline([i.getLatLng(),t.getLatLng()]),r=L.polyline([t.getLatLng(),n.getLatLng()]),a=It(this._layer.toGeoJSON(15),o.toGeoJSON(15)).features.length,s=It(this._layer.toGeoJSON(15),r.toGeoJSON(15)).features.length;return t.getLatLng()===this._markers[0][0].getLatLng()?s+=1:t.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(a+=1),!(a<=2&&s<=2)},_onMarkerDragStart:function(t){var e=t.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",t)){var i=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath;this._fireMarkerDragStart(t,i),this.options.allowSelfIntersection||(this._coordsBeforeEdit=G(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(e):this._markerAllowedToDrag=null}},_onMarkerDrag:function(t){var e=t.target;if(this._vertexValidationDrag(e)){var i=L.PM.Utils.findDeepMarkerIndex(this._markers,e),n=i.indexPath,o=i.index,r=i.parentPath;if(n){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&!1===this._markerAllowedToDrag)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(e);var a=n.length>1?E()(this._markers,r):this._markers,s=(o+1)%a.length,l=(o+(a.length-1))%a.length,c=e.getLatLng(),h=a[l].getLatLng(),u=a[s].getLatLng();if(e._middleMarkerNext){var p=L.PM.Utils.calcMiddleLatLng(this._map,c,u);e._middleMarkerNext.setLatLng(p)}if(e._middleMarkerPrev){var d=L.PM.Utils.calcMiddleLatLng(this._map,c,h);e._middleMarkerPrev.setLatLng(d)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(t,n),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(t){var e=t.target;if(this._vertexValidationDragEnd(e)){var i=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath,n=this.hasSelfIntersection();n&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(n=!1);var o=!this.options.allowSelfIntersection&&n;if(this._fireMarkerDragEnd(t,i,o),o)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(t,i);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(t){var e=t.target;if(!e._dragging){var i=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath;this._fireVertexClick(t,i)}}}),fe.Polygon=fe.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),i=e.prevMarker,n=e.nextMarker,o=L.polyline([i.getLatLng(),t.getLatLng()]),r=L.polyline([t.getLatLng(),n.getLatLng()]),a=It(this._layer.toGeoJSON(15),o.toGeoJSON(15)).features.length,s=It(this._layer.toGeoJSON(15),r.toGeoJSON(15)).features.length;return!(a<=2&&s<=2)}}),fe.Rectangle=fe.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var t=this,e=this._map,i=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,e.addLayer(this._markerGroup),this._markers=[],this._markers[0]=i.map(this._createMarker,this);var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r=[],a=!0,s=!1;try{for(i=i.call(t);!(a=(n=i.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ye(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ye(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this._markers,1);this._cornerMarkers=n[0],this._layer.getLatLngs()[0].forEach((function(e,i){var n=t._cornerMarkers.find((function(t){return t._index===i}));n&&n.setLatLng(e)}))},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(i,"vertexPane"),i._origLatLng=t,i._index=e,i._pmTempLayer=!0,this._markerGroup.addLayer(i),i},_addMarkerEvents:function(){var t=this;this._markers[0].forEach((function(e){e.on("dragstart",t._onMarkerDragStart,t),e.on("drag",t._onMarkerDrag,t),e.on("dragend",t._onMarkerDragEnd,t),t.options.preventMarkerRemoval||e.on("contextmenu",t._removeMarker,t)}))},_removeMarker:function(){return null},_onMarkerDragStart:function(t){if(this._vertexValidation("move",t)){var e=t.target,i=this._cornerMarkers;e._oppositeCornerLatLng=i.find((function(t){return t._index===(e._index+2)%4})).getLatLng(),e._snapped=!1,this._fireMarkerDragStart(t)}},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&void 0!==e._index&&(this._adjustRectangleForMarkerMove(e),this._fireMarkerDrag(t),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._cornerMarkers.forEach((function(t){delete t._oppositeCornerLatLng})),this._fireMarkerDragEnd(t),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(t){L.extend(t._origLatLng,t._latlng);var e=L.PM.Utils._getRotatedRectangle(t.getLatLng(),t._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(e),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var t=this,e=this._layer.getLatLngs()[0];e&&4!==e.length&&e.length>0?(e.forEach((function(e,i){t._cornerMarkers[i].setLatLng(e)})),this._cornerMarkers.slice(e.length).forEach((function(t){t.setLatLng(e[0])}))):e&&e.length?this._cornerMarkers.forEach((function(t){t.setLatLng(e[t._index])})):console.error("The layer has no LatLngs")},_findCorners:function(){var t=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(t[0],t[2],this._angle||0,this._map)}}),fe.Circle=fe.extend({_shape:"Circle",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){if(this.enabled()&&!this._dragging){this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),this._layer.off("remove",this.disable,this),this._enabled=!1,this._helperLayers.clearLayers();var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),i=this._layer._radius,n=this._getLatLngOnCircle(e,i);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(n),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(t,e){var i=t.getLatLng(),n=e.getLatLng();this._hintline=L.polyline([i,n],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"),e.on("drag",this._moveCircle,this),e.on("dragstart",this._onCircleDragStart,this),e.on("drag",this._onCircleDrag,this),e.on("dragend",this._onCircleDragEnd,this),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(t){if(!t.target._cancelDragEventChain){var e=t.latlng;this._layer.setLatLng(e);var i=this._layer._radius,n=this._getLatLngOnCircle(e,i);this._outerMarker._latlng=n,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=this._map.distance(t,e);this.options.minRadiusCircle&&i<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(i),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_disableSnapping:function(){var t=this;this._markers.forEach((function(e){e.off("move",t._syncHintLine,t),e.off("move",t._syncCircleRadius,t),e.off("drag",t._handleSnapping,t),e.off("dragend",t._cleanupSnapping,t)})),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(t))},_onCircleDragStart:function(t){this._vertexValidationDrag(t.target)?(delete this._vertexValidationReset,this._fireDragStart()):this._vertexValidationReset=!0},_onCircleDrag:function(t){this._vertexValidationReset||this._fireDrag(t)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var t=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!t).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!t),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(t,e){var i=this._map.project(t),n=L.point(i.x+e,i.y);return this._map.unproject(n)},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=this._map.distance(t,e);return this.options.minRadiusCircle&&i<this.options.minRadiusCircle?e=N(this._map,t,e,this.options.minRadiusCircle):this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle&&(e=N(this._map,t,e,this.options.maxRadiusCircle)),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=this._map.distance(t,e);(this.options.minRadiusCircle&&i<this.options.minRadiusCircle||this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),fe.CircleMarker=fe.extend({_shape:"CircleMarker",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this._dragging||(this._helperLayers&&this._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this._map||(this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this)),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.off("remove",this.disable,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),i=this._layer._radius,n=this._getLatLngOnCircle(e,i);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(n),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(t,e){var i=this._map.project(t),n=L.point(i.x+e,i.y);return this._map.unproject(n)},_createHintLine:function(t,e){var i=t.getLatLng(),n=e.getLatLng();this._hintline=L.polyline([i,n],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return this.options.draggable?L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"):e.dragging.disable(),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_moveCircle:function(){var t=this._centerMarker.getLatLng();this._layer.setLatLng(t);var e=this._layer._radius,i=this._getLatLngOnCircle(t,e);this._outerMarker._latlng=i,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers:function(){var t=this._layer.getLatLng(),e=this._layer._radius,i=this._getLatLngOnCircle(t,e);this._outerMarker.setLatLng(i),this._centerMarker.setLatLng(t),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(i),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;e instanceof L.Marker&&!this._vertexValidationDrag(e)||this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var e=t.target;this._vertexValidationDragEnd(e)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(t))},_initSnappableMarkersDrag:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=void 0===this.options.snapSegment||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var t=this._layer._map||this._map;if(t){var e=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),t,this._layer.getLatLng()),i=L.circle(this._layer.getLatLng(),this._layer.options);i.setRadius(e);var n=t&&t.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(i,200,!n).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(i,200,!n),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));return this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker?e=N(this._map,t,e,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,t)):this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker&&(e=N(this._map,t,e,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,t))),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));(this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),fe.ImageOverlay=fe.extend({_shape:"ImageOverlay",initialize:function(t){this._layer=t,this._enabled=!1},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},enabled:function(){return this._enabled},enable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),fe.Text=fe.extend({_shape:"Text",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var t=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),t.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=void 0===this.options.snapSegment||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var t=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,e=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(t,"px"),this.textArea.style.width="".concat(e,"px"),this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur:function(){var t=this;this._disableOnBlurActive=!0,setTimeout((function(){t.enabled()&&L.DomEvent.on(document,"click",t._documentClick,t)}),100)},_documentClick:function(t){t.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._hasFocus;this._hasFocus="focus"===t.type,!e!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(t){this.textArea.value=t,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var t,e=this.options.className.split(" ");(t=this.textArea.classList).add.apply(t,function(t){return function(t){if(Array.isArray(t))return be(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return be(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?be(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e))}var i=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(i),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),!0===t&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(t){t.preventDefault()}});var xe=function(t,e,i,n,o,r){this._matrix=[t,e,i,n,o,r]};xe.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},xe.prototype={transform:function(t){return this._transform(t.clone())},_transform:function(t){var e=this._matrix,i=t.x,n=t.y;return t.x=e[0]*i+e[1]*n+e[4],t.y=e[2]*i+e[3]*n+e[5],t},untransform:function(t){var e=this._matrix;return new L.Point((t.x/e[0]-e[4])/e[0],(t.y/e[2]-e[5])/e[2])},clone:function(){var t=this._matrix;return new L.PM.Matrix(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(t){return void 0===t?new L.Point(this._matrix[4],this._matrix[5]):("number"==typeof t?(e=t,i=t):(e=t.x,i=t.y),this._add(1,0,0,1,e,i));var e,i},scale:function(t,e){return void 0===t?new L.Point(this._matrix[0],this._matrix[3]):(e=e||L.point(0,0),"number"==typeof t?(i=t,n=t):(i=t.x,n=t.y),this._add(i,0,0,n,e.x,e.y)._add(1,0,0,1,-e.x,-e.y));var i,n},rotate:function(t,e){var i=Math.cos(t),n=Math.sin(t);return e=e||new L.Point(0,0),this._add(i,n,-n,i,e.x,e.y)._add(1,0,0,1,-e.x,-e.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(t,e,i,n,o,r){var a,s=[[],[],[]],l=this._matrix,c=[[l[0],l[2],l[4]],[l[1],l[3],l[5]],[0,0,1]],h=[[t,i,o],[e,n,r],[0,0,1]];t&&t instanceof L.PM.Matrix&&(h=[[(l=t._matrix)[0],l[2],l[4]],[l[1],l[3],l[5]],[0,0,1]]);for(var u=0;u<3;u+=1)for(var p=0;p<3;p+=1){a=0;for(var d=0;d<3;d+=1)a+=c[u][d]*h[d][p];s[u][p]=a}return this._matrix=[s[0][0],s[1][0],s[0][1],s[1][1],s[0][2],s[1][2]],this}};const ke=xe;var Le={calcMiddleLatLng:function(t,e,i){var n=t.project(e),o=t.project(i);return t.unproject(n._add(o)._divideBy(2))},findLayers:function(t){var e=[];return t.eachLayer((function(t){(t instanceof L.Polyline||t instanceof L.Marker||t instanceof L.Circle||t instanceof L.CircleMarker||t instanceof L.ImageOverlay)&&e.push(t)})),e=(e=(e=e.filter((function(t){return!!t.pm}))).filter((function(t){return!t._pmTempLayer}))).filter((function(t){return!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore}))},circleToPolygon:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.getLatLng(),o=t.getRadius(),r=j(n,o,e,0,i),a=[],s=0;s<r.length;s+=1){var l=[r[s].lat,r[s].lng];a.push(l)}return L.polygon(a,t.options)},disablePopup:function(t){t.getPopup()&&(t._tempPopupCopy=t.getPopup(),t.unbindPopup())},enablePopup:function(t){t._tempPopupCopy&&(t.bindPopup(t._tempPopupCopy),delete t._tempPopupCopy)},_fireEvent:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.fire(e,i,n);var o=this.getAllParentGroups(t),r=o.groups;r.forEach((function(t){t.fire(e,i,n)}))},getAllParentGroups:function(t){var e=[],i=[];return!t._pmLastGroupFetch||!t._pmLastGroupFetch.time||(new Date).getTime()-t._pmLastGroupFetch.time>1e3?(function t(n){for(var o in n._eventParents)if(-1===e.indexOf(o)){e.push(o);var r=n._eventParents[o];i.push(r),t(r)}}(t),t._pmLastGroupFetch={time:(new Date).getTime(),groups:i,groupIds:e},{groupIds:e,groups:i}):{groups:t._pmLastGroupFetch.groups,groupIds:t._pmLastGroupFetch.groupIds}},createGeodesicPolygon:j,getTranslation:B,findDeepCoordIndex:function(t,e){var i,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=function t(o){return function(r,a){var s=o.concat(a);if(n){if(r.lat&&r.lat===e.lat&&r.lng===e.lng)return i=s,!0}else if(r.lat&&L.latLng(r).equals(e))return i=s,!0;return Array.isArray(r)&&r.some(t(s))}};t.some(o([]));var r={};return i&&(r={indexPath:i,index:i[i.length-1],parentPath:i.slice(0,i.length-1)}),r},findDeepMarkerIndex:function(t,e){var i;t.some(function t(n){return function(o,r){var a=n.concat(r);return o._leaflet_id===e._leaflet_id?(i=a,!0):Array.isArray(o)&&o.some(t(a))}}([]));var n={};return i&&(n={indexPath:i,index:i[i.length-1],parentPath:i.slice(0,i.length-1)}),n},_getIndexFromSegment:function(t,e){if(e&&2===e.length){var i=this.findDeepCoordIndex(t,e[0]),n=this.findDeepCoordIndex(t,e[1]),o=Math.max(i.index,n.index);return 0!==i.index&&0!==n.index||1===o||(o+=1),{indexA:i,indexB:n,newIndex:o,indexPath:i.indexPath,parentPath:i.parentPath}}return null},_getRotatedRectangle:function(t,e,i,n){var o=ue(n,t),r=ue(n,e),a=i*Math.PI/180,s=Math.cos(a),l=Math.sin(a),c=(r.x-o.x)*s+(r.y-o.y)*l,h=(r.y-o.y)*s-(r.x-o.x)*l,u=c*s+o.x,p=c*l+o.y,d=-h*l+o.x,m=h*s+o.y;return[pe(n,o),pe(n,{x:u,y:p}),pe(n,r),pe(n,{x:d,y:m})]},pxRadiusToMeterRadius:function(t,e,i){var n=e.project(i),o=L.point(n.x+t,n.y);return e.distance(e.unproject(o),i)}};const we=Le;L.PM=L.PM||{version:"2.14.1",Map:V,Toolbar:J,Draw:nt,Edit:fe,Utils:we,Matrix:ke,activeLang:"en",optIn:!1,initialize:function(t){this.addInitHooks(t)},setOptIn:function(t){this.optIn=!!t},addInitHooks:function(){L.Map.addInitHook((function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})})),L.LayerGroup.addInitHook((function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))})),L.Marker.addInitHook((function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))})),L.CircleMarker.addInitHook((function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))})),L.Polyline.addInitHook((function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))})),L.Polygon.addInitHook((function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))})),L.Rectangle.addInitHook((function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))})),L.Circle.addInitHook((function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))})),L.ImageOverlay.addInitHook((function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}))},reInitLayer:function(t){var e=this;t instanceof L.LayerGroup&&t.eachLayer((function(t){e.reInitLayer(t)})),t.pm||L.PM.optIn&&!1!==t.options.pmIgnore||t.options.pmIgnore||(t instanceof L.Map?t.pm=new L.PM.Map(t):t instanceof L.Marker?t.options.textMarker?(t.pm=new L.PM.Edit.Text(t),t.pm._initTextMarker(),t.pm._createTextMarker(!1)):t.pm=new L.PM.Edit.Marker(t):t instanceof L.Circle?t.pm=new L.PM.Edit.Circle(t):t instanceof L.CircleMarker?t.pm=new L.PM.Edit.CircleMarker(t):t instanceof L.Rectangle?t.pm=new L.PM.Edit.Rectangle(t):t instanceof L.Polygon?t.pm=new L.PM.Edit.Polygon(t):t instanceof L.Polyline?t.pm=new L.PM.Edit.Line(t):t instanceof L.LayerGroup?t.pm=new L.PM.Edit.LayerGroup(t):t instanceof L.ImageOverlay&&(t.pm=new L.PM.Edit.ImageOverlay(t)))}},"1.7.1"===L.version&&L.Canvas.include({_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(n)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(i=e);i&&(L.DomEvent.fakeStop(t),this._fireEvent([i],t))}}),L.PM.initialize()},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(t){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),i=e.length>>>0,n=arguments[1],o=0;o<i;o++)if(t.call(n,e[o],o,e))return o;return-1},Array.prototype.find=Array.prototype.find||function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),i=e.length>>>0,n=arguments[1],o=0;o<i;o++){var r=e[o];if(t.call(n,r,o,e))return r}},"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;for(var o,r,a=0|e,s=Math.max(a>=0?a:n-Math.abs(a),0);s<n;){if((o=i[s])===(r=t)||"number"==typeof o&&"number"==typeof r&&isNaN(o)&&isNaN(r))return!0;s++}return!1}})},1787:(t,e,i)=>{var n=i(2582),o=i(4102),r=i(1540),a=i(9705).Z,s=r.featureEach,l=(r.coordEach,o.polygon,o.featureCollection);function c(t){var e=new n(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),n.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),n.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),n.prototype.remove.call(this,t,e)},e.clear=function(){return n.prototype.clear.call(this)},e.search=function(t){var e=n.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return n.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=n.prototype.all.call(this);return l(t)},e.toJSON=function(){return n.prototype.toJSON.call(this)},e.fromJSON=function(t){return n.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=c,t.exports.default=c},1989:(t,e,i)=>{var n=i(1789),o=i(401),r=i(7667),a=i(1327),s=i(1866);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},8407:(t,e,i)=>{var n=i(7040),o=i(4125),r=i(2117),a=i(7518),s=i(4705);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},7071:(t,e,i)=>{var n=i(852)(i(5639),"Map");t.exports=n},3369:(t,e,i)=>{var n=i(4785),o=i(1285),r=i(6e3),a=i(9916),s=i(5265);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},6384:(t,e,i)=>{var n=i(8407),o=i(7465),r=i(3779),a=i(7599),s=i(4758),l=i(4309);function c(t){var e=this.__data__=new n(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},2705:(t,e,i)=>{var n=i(5639).Symbol;t.exports=n},1149:(t,e,i)=>{var n=i(5639).Uint8Array;t.exports=n},6874:t=>{t.exports=function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}},4636:(t,e,i)=>{var n=i(2545),o=i(5694),r=i(1469),a=i(4144),s=i(5776),l=i(6719),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var i=r(t),h=!i&&o(t),u=!i&&!h&&a(t),p=!i&&!h&&!u&&l(t),d=i||h||u||p,m=d?n(t.length,String):[],f=m.length;for(var g in t)!e&&!c.call(t,g)||d&&("length"==g||u&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,f))||m.push(g);return m}},9932:t=>{t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length,o=Array(n);++i<n;)o[i]=e(t[i],i,t);return o}},6556:(t,e,i)=>{var n=i(9465),o=i(7813);t.exports=function(t,e,i){(void 0!==i&&!o(t[e],i)||void 0===i&&!(e in t))&&n(t,e,i)}},4865:(t,e,i)=>{var n=i(9465),o=i(7813),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,i){var a=t[e];r.call(t,e)&&o(a,i)&&(void 0!==i||e in t)||n(t,e,i)}},8470:(t,e,i)=>{var n=i(7813);t.exports=function(t,e){for(var i=t.length;i--;)if(n(t[i][0],e))return i;return-1}},9465:(t,e,i)=>{var n=i(8777);t.exports=function(t,e,i){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}},3118:(t,e,i)=>{var n=i(3218),o=Object.create,r=function(){function t(){}return function(e){if(!n(e))return{};if(o)return o(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();t.exports=r},8483:(t,e,i)=>{var n=i(5063)();t.exports=n},7786:(t,e,i)=>{var n=i(1811),o=i(327);t.exports=function(t,e){for(var i=0,r=(e=n(e,t)).length;null!=t&&i<r;)t=t[o(e[i++])];return i&&i==r?t:void 0}},4239:(t,e,i)=>{var n=i(2705),o=i(9607),r=i(2333),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):r(t)}},8565:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,i){return null!=t&&e.call(t,i)}},9454:(t,e,i)=>{var n=i(4239),o=i(7005);t.exports=function(t){return o(t)&&"[object Arguments]"==n(t)}},8458:(t,e,i)=>{var n=i(3560),o=i(5346),r=i(3218),a=i(346),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,h=l.toString,u=c.hasOwnProperty,p=RegExp("^"+h.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!r(t)||o(t))&&(n(t)?p:s).test(a(t))}},8749:(t,e,i)=>{var n=i(4239),o=i(1780),r=i(7005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return r(t)&&o(t.length)&&!!a[n(t)]}},313:(t,e,i)=>{var n=i(3218),o=i(5726),r=i(3498),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return r(t);var e=o(t),i=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&i.push(s);return i}},2980:(t,e,i)=>{var n=i(6384),o=i(6556),r=i(8483),a=i(9783),s=i(3218),l=i(1704),c=i(6390);t.exports=function t(e,i,h,u,p){e!==i&&r(i,(function(r,l){if(p||(p=new n),s(r))a(e,i,l,h,t,u,p);else{var d=u?u(c(e,l),r,l+"",e,i,p):void 0;void 0===d&&(d=r),o(e,l,d)}}),l)}},9783:(t,e,i)=>{var n=i(6556),o=i(4626),r=i(7133),a=i(278),s=i(8517),l=i(5694),c=i(1469),h=i(9246),u=i(4144),p=i(3560),d=i(3218),m=i(8630),f=i(6719),g=i(6390),_=i(9881);t.exports=function(t,e,i,v,y,b,x){var k=g(t,i),L=g(e,i),w=x.get(L);if(w)n(t,i,w);else{var M=b?b(k,L,i+"",t,e,x):void 0,C=void 0===M;if(C){var P=c(L),S=!P&&u(L),T=!P&&!S&&f(L);M=L,P||S||T?c(k)?M=k:h(k)?M=a(k):S?(C=!1,M=o(L,!0)):T?(C=!1,M=r(L,!0)):M=[]:m(L)||l(L)?(M=k,l(k)?M=_(k):d(k)&&!p(k)||(M=s(L))):C=!1}C&&(x.set(L,M),y(M,L,v,b,x),x.delete(L)),n(t,i,M)}}},5976:(t,e,i)=>{var n=i(6557),o=i(5357),r=i(61);t.exports=function(t,e){return r(o(t,e,n),t+"")}},6560:(t,e,i)=>{var n=i(5703),o=i(8777),r=i(6557),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:r;t.exports=a},2545:t=>{t.exports=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}},531:(t,e,i)=>{var n=i(2705),o=i(9932),r=i(1469),a=i(3448),s=n?n.prototype:void 0,l=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(r(e))return o(e,t)+"";if(a(e))return l?l.call(e):"";var i=e+"";return"0"==i&&1/e==-1/0?"-0":i}},1717:t=>{t.exports=function(t){return function(e){return t(e)}}},1811:(t,e,i)=>{var n=i(1469),o=i(5403),r=i(5514),a=i(9833);t.exports=function(t,e){return n(t)?t:o(t,e)?[t]:r(a(t))}},4318:(t,e,i)=>{var n=i(1149);t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},4626:(t,e,i)=>{t=i.nmd(t);var n=i(5639),o=e&&!e.nodeType&&e,r=o&&t&&!t.nodeType&&t,a=r&&r.exports===o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var i=t.length,n=s?s(i):new t.constructor(i);return t.copy(n),n}},7133:(t,e,i)=>{var n=i(4318);t.exports=function(t,e){var i=e?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}},278:t=>{t.exports=function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}},8363:(t,e,i)=>{var n=i(4865),o=i(9465);t.exports=function(t,e,i,r){var a=!i;i||(i={});for(var s=-1,l=e.length;++s<l;){var c=e[s],h=r?r(i[c],t[c],c,i,t):void 0;void 0===h&&(h=t[c]),a?o(i,c,h):n(i,c,h)}return i}},4429:(t,e,i)=>{var n=i(5639)["__core-js_shared__"];t.exports=n},1463:(t,e,i)=>{var n=i(5976),o=i(6612);t.exports=function(t){return n((function(e,i){var n=-1,r=i.length,a=r>1?i[r-1]:void 0,s=r>2?i[2]:void 0;for(a=t.length>3&&"function"==typeof a?(r--,a):void 0,s&&o(i[0],i[1],s)&&(a=r<3?void 0:a,r=1),e=Object(e);++n<r;){var l=i[n];l&&t(e,l,n,a)}return e}))}},5063:t=>{t.exports=function(t){return function(e,i,n){for(var o=-1,r=Object(e),a=n(e),s=a.length;s--;){var l=a[t?s:++o];if(!1===i(r[l],l,r))break}return e}}},8777:(t,e,i)=>{var n=i(852),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},1957:(t,e,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=n},5050:(t,e,i)=>{var n=i(7019);t.exports=function(t,e){var i=t.__data__;return n(e)?i["string"==typeof e?"string":"hash"]:i.map}},852:(t,e,i)=>{var n=i(8458),o=i(7801);t.exports=function(t,e){var i=o(t,e);return n(i)?i:void 0}},5924:(t,e,i)=>{var n=i(5569)(Object.getPrototypeOf,Object);t.exports=n},9607:(t,e,i)=>{var n=i(2705),o=Object.prototype,r=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=r.call(t,s),i=t[s];try{t[s]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[s]=i:delete t[s]),o}},7801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},222:(t,e,i)=>{var n=i(1811),o=i(5694),r=i(1469),a=i(5776),s=i(1780),l=i(327);t.exports=function(t,e,i){for(var c=-1,h=(e=n(e,t)).length,u=!1;++c<h;){var p=l(e[c]);if(!(u=null!=t&&i(t,p)))break;t=t[p]}return u||++c!=h?u:!!(h=null==t?0:t.length)&&s(h)&&a(p,h)&&(r(t)||o(t))}},1789:(t,e,i)=>{var n=i(4536);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},7667:(t,e,i)=>{var n=i(4536),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return o.call(e,t)?e[t]:void 0}},1327:(t,e,i)=>{var n=i(4536),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:o.call(e,t)}},1866:(t,e,i)=>{var n=i(4536);t.exports=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},8517:(t,e,i)=>{var n=i(3118),o=i(5924),r=i(5726);t.exports=function(t){return"function"!=typeof t.constructor||r(t)?{}:n(o(t))}},5776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,i){var n=typeof t;return!!(i=null==i?9007199254740991:i)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<i}},6612:(t,e,i)=>{var n=i(7813),o=i(8612),r=i(5776),a=i(3218);t.exports=function(t,e,i){if(!a(i))return!1;var s=typeof e;return!!("number"==s?o(i)&&r(e,i.length):"string"==s&&e in i)&&n(i[e],t)}},5403:(t,e,i)=>{var n=i(1469),o=i(3448),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!o(t))||a.test(t)||!r.test(t)||null!=e&&t in Object(e)}},7019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},5346:(t,e,i)=>{var n,o=i(4429),r=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!r&&r in t}},5726:t=>{var e=Object.prototype;t.exports=function(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||e)}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,i)=>{var n=i(8470),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,i=n(e,t);return!(i<0||(i==e.length-1?e.pop():o.call(e,i,1),--this.size,0))}},2117:(t,e,i)=>{var n=i(8470);t.exports=function(t){var e=this.__data__,i=n(e,t);return i<0?void 0:e[i][1]}},7518:(t,e,i)=>{var n=i(8470);t.exports=function(t){return n(this.__data__,t)>-1}},4705:(t,e,i)=>{var n=i(8470);t.exports=function(t,e){var i=this.__data__,o=n(i,t);return o<0?(++this.size,i.push([t,e])):i[o][1]=e,this}},4785:(t,e,i)=>{var n=i(1989),o=i(8407),r=i(7071);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(r||o),string:new n}}},1285:(t,e,i)=>{var n=i(5050);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},6e3:(t,e,i)=>{var n=i(5050);t.exports=function(t){return n(this,t).get(t)}},9916:(t,e,i)=>{var n=i(5050);t.exports=function(t){return n(this,t).has(t)}},5265:(t,e,i)=>{var n=i(5050);t.exports=function(t,e){var i=n(this,t),o=i.size;return i.set(t,e),this.size+=i.size==o?0:1,this}},4523:(t,e,i)=>{var n=i(8306);t.exports=function(t){var e=n(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}},4536:(t,e,i)=>{var n=i(852)(Object,"create");t.exports=n},3498:t=>{t.exports=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}},1167:(t,e,i)=>{t=i.nmd(t);var n=i(1957),o=e&&!e.nodeType&&e,r=o&&t&&!t.nodeType&&t,a=r&&r.exports===o&&n.process,s=function(){try{return r&&r.require&&r.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s},2333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5569:t=>{t.exports=function(t,e){return function(i){return t(e(i))}}},5357:(t,e,i)=>{var n=i(6874),o=Math.max;t.exports=function(t,e,i){return e=o(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,s=o(r.length-e,0),l=Array(s);++a<s;)l[a]=r[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=r[a];return c[e]=i(l),n(t,this,c)}}},5639:(t,e,i)=>{var n=i(1957),o="object"==typeof self&&self&&self.Object===Object&&self,r=n||o||Function("return this")();t.exports=r},6390:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},61:(t,e,i)=>{var n=i(6560),o=i(1275)(n);t.exports=o},1275:t=>{var e=Date.now;t.exports=function(t){var i=0,n=0;return function(){var o=e(),r=16-(o-n);if(n=o,r>0){if(++i>=800)return arguments[0]}else i=0;return t.apply(void 0,arguments)}}},7465:(t,e,i)=>{var n=i(8407);t.exports=function(){this.__data__=new n,this.size=0}},3779:t=>{t.exports=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}},7599:t=>{t.exports=function(t){return this.__data__.get(t)}},4758:t=>{t.exports=function(t){return this.__data__.has(t)}},4309:(t,e,i)=>{var n=i(8407),o=i(7071),r=i(3369);t.exports=function(t,e){var i=this.__data__;if(i instanceof n){var a=i.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++i.size,this;i=this.__data__=new r(a)}return i.set(t,e),this.size=i.size,this}},5514:(t,e,i)=>{var n=i(4523),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=n((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,i,n,o){e.push(n?o.replace(r,"$1"):i||t)})),e}));t.exports=a},327:(t,e,i)=>{var n=i(3448);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},5703:t=>{t.exports=function(t){return function(){return t}}},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},7361:(t,e,i)=>{var n=i(7786);t.exports=function(t,e,i){var o=null==t?void 0:n(t,e);return void 0===o?i:o}},8721:(t,e,i)=>{var n=i(8565),o=i(222);t.exports=function(t,e){return null!=t&&o(t,e,n)}},6557:t=>{t.exports=function(t){return t}},5694:(t,e,i)=>{var n=i(9454),o=i(7005),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},1469:t=>{var e=Array.isArray;t.exports=e},8612:(t,e,i)=>{var n=i(3560),o=i(1780);t.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},9246:(t,e,i)=>{var n=i(8612),o=i(7005);t.exports=function(t){return o(t)&&n(t)}},4144:(t,e,i)=>{t=i.nmd(t);var n=i(5639),o=i(5062),r=e&&!e.nodeType&&e,a=r&&t&&!t.nodeType&&t,s=a&&a.exports===r?n.Buffer:void 0,l=(s?s.isBuffer:void 0)||o;t.exports=l},3560:(t,e,i)=>{var n=i(4239),o=i(3218);t.exports=function(t){if(!o(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},8630:(t,e,i)=>{var n=i(4239),o=i(5924),r=i(7005),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,h=l.call(Object);t.exports=function(t){if(!r(t)||"[object Object]"!=n(t))return!1;var e=o(t);if(null===e)return!0;var i=c.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==h}},3448:(t,e,i)=>{var n=i(4239),o=i(7005);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==n(t)}},6719:(t,e,i)=>{var n=i(8749),o=i(1717),r=i(1167),a=r&&r.isTypedArray,s=a?o(a):n;t.exports=s},1704:(t,e,i)=>{var n=i(4636),o=i(313),r=i(8612);t.exports=function(t){return r(t)?n(t,!0):o(t)}},8306:(t,e,i)=>{var n=i(3369);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var n=arguments,o=e?e.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var a=t.apply(this,n);return i.cache=r.set(o,a)||r,a};return i.cache=new(o.Cache||n),i}o.Cache=n,t.exports=o},2492:(t,e,i)=>{var n=i(2980),o=i(1463)((function(t,e,i){n(t,e,i)}));t.exports=o},5062:t=>{t.exports=function(){return!1}},9881:(t,e,i)=>{var n=i(8363),o=i(1704);t.exports=function(t){return n(t,o(t))}},9833:(t,e,i)=>{var n=i(531);t.exports=function(t){return null==t?"":n(t)}},2676:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}var n=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function o(t,e){return t>e?1:t<e?-1:0}function r(t,e,i){for(var o=new n(null,null),r=o,a=o;;){var s=i(t,e.key);if(s<0){if(null===e.left)break;if(i(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}a.left=e,a=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(i(t,e.right.key)>0&&(l=e.right,e.right=l.left,l.left=e,null===(e=l).right))break;r.right=e,r=e,e=e.right}}return r.right=e.left,a.left=e.right,e.left=o.right,e.right=o.left,e}function a(t,e,i,o){var a=new n(t,e);if(null===i)return a.left=a.right=null,a;var s=o(t,(i=r(t,i,o)).key);return s<0?(a.left=i.left,a.right=i,i.left=null):s>=0&&(a.right=i.right,a.left=i,i.right=null),a}function s(t,e,i){var n=null,o=null;if(e){var a=i((e=r(t,e,i)).key,t);0===a?(n=e.left,o=e.right):a<0?(o=e.right,e.right=null,n=e):(n=e.left,e.left=null,o=e)}return{left:n,right:o}}function l(t,e,i){return null===e?t:(null===t||((e=r(t.key,e,i)).left=t),e)}function c(t,e,i,n,o){if(t){n(e+(i?"└── ":"├── ")+o(t)+"\n");var r=e+(i?"    ":"│   ");t.left&&c(t.left,r,!1,n,o),t.right&&c(t.right,r,!0,n,o)}}var h=function(){function t(t){void 0===t&&(t=o),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var i=new n(t,e);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var o=this._comparator,a=r(t,this._root,o),s=o(t,a.key);return 0===s?this._root=a:(s<0?(i.left=a.left,i.right=a,a.left=null):s>0&&(i.right=a.right,i.left=a,a.right=null),this._size++,this._root=i),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,i){var n;return null===e?null:0===i(t,(e=r(t,e,i)).key)?(null===e.left?n=e.right:(n=r(t,e.left,i)).right=e.right,this._size--,n):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=r(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=r(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var i=this._root,n=[],o=!1;!o;)null!==i?(n.push(i),i=i.left):0!==n.length?(i=n.pop(),t.call(e,i),i=i.right):o=!0;return this},t.prototype.range=function(t,e,i,n){for(var o=[],r=this._comparator,a=this._root;0!==o.length||a;)if(a)o.push(a),a=a.left;else{if(r((a=o.pop()).key,e)>0)break;if(r(a.key,t)>=0&&i.call(n,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var i=e.key;return t.push(i)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var i=e.data;return t.push(i)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,i=!1,n=0,o=[];!i;)if(e)o.push(e),e=e.left;else if(o.length>0){if(e=o.pop(),n===t)return e;n++,e=e.right}else i=!0;return null},t.prototype.next=function(t){var e=this._root,i=null;if(t.right){for(i=t.right;i.left;)i=i.left;return i}for(var n=this._comparator;e;){var o=n(t.key,e.key);if(0===o)break;o<0?(i=e,e=e.left):e=e.right}return i},t.prototype.prev=function(t){var e=this._root,i=null;if(null!==t.left){for(i=t.left;i.right;)i=i.right;return i}for(var n=this._comparator;e;){var o=n(t.key,e.key);if(0===o)break;o<0?e=e.left:(i=e,e=e.right)}return i},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,i=[],o=!1,r=new n(null,null),a=r;!o;)e?(i.push(e),e=e.left):i.length>0?e=(e=a=a.next=i.pop()).right:o=!0;return a.next=null,r.next}(this._root)},t.prototype.load=function(t,e,i){void 0===e&&(e=[]),void 0===i&&(i=!1);var n=t.length,o=this._comparator;if(i&&f(t,e,0,n-1,o),null===this._root)this._root=u(t,e,0,n),this._size=n;else{var r=m(this.toList(),p(t,e),o);n=this._size+n,this._root=d({head:r},0,n)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return c(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,i){var n=this._comparator,o=s(t,this._root,n),r=o.left,c=o.right;n(t,e)<0?c=a(e,i,c,n):r=a(e,i,r,n),this._root=l(r,c,n)},t.prototype.split=function(t){return s(t,this._root,this._comparator)},t}();function u(t,e,i,o){var r=o-i;if(r>0){var a=i+Math.floor(r/2),s=t[a],l=e[a],c=new n(s,l);return c.left=u(t,e,i,a),c.right=u(t,e,a+1,o),c}return null}function p(t,e){for(var i=new n(null,null),o=i,r=0;r<t.length;r++)o=o.next=new n(t[r],e[r]);return o.next=null,i.next}function d(t,e,i){var n=i-e;if(n>0){var o=e+Math.floor(n/2),r=d(t,e,o),a=t.head;return a.left=r,t.head=t.head.next,a.right=d(t,o+1,i),a}return null}function m(t,e,i){for(var o=new n(null,null),r=o,a=t,s=e;null!==a&&null!==s;)i(a.key,s.key)<0?(r.next=a,a=a.next):(r.next=s,s=s.next),r=r.next;return null!==a?r.next=a:null!==s&&(r.next=s),o.next}function f(t,e,i,n,o){if(!(i>=n)){for(var r=t[i+n>>1],a=i-1,s=n+1;;){do{a++}while(o(t[a],r)<0);do{s--}while(o(t[s],r)>0);if(a>=s)break;var l=t[a];t[a]=t[s],t[s]=l,l=e[a],e[a]=e[s],e[s]=l}f(t,e,i,s,o),f(t,e,s+1,n,o)}}var g=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},_=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var i=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:i,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},v=Number.EPSILON;void 0===v&&(v=Math.pow(2,-52));var y=v*v,b=function(t,e){if(-v<t&&t<v&&-v<e&&e<v)return 0;var i=t-e;return i*i<y*t*e?0:t<e?-1:1},x=function(){function e(){t(this,e),this.reset()}return i(e,[{key:"reset",value:function(){this.xRounder=new k,this.yRounder=new k}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),k=function(){function e(){t(this,e),this.tree=new h,this.round(0)}return i(e,[{key:"round",value:function(t){var e=this.tree.add(t),i=this.tree.prev(e);if(null!==i&&0===b(e.key,i.key))return this.tree.remove(t),i.key;var n=this.tree.next(e);return null!==n&&0===b(e.key,n.key)?(this.tree.remove(t),n.key):t}}]),e}(),L=new x,w=function(t,e){return t.x*e.y-t.y*e.x},M=function(t,e){return t.x*e.x+t.y*e.y},C=function(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},o={x:i.x-t.x,y:i.y-t.y},r=w(n,o);return b(r,0)},P=function(t){return Math.sqrt(M(t,t))},S=function(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},o={x:i.x-t.x,y:i.y-t.y};return w(o,n)/P(o)/P(n)},T=function(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},o={x:i.x-t.x,y:i.y-t.y};return M(o,n)/P(o)/P(n)},A=function(t,e,i){return 0===e.y?null:{x:t.x+e.x/e.y*(i-t.y),y:i}},D=function(t,e,i){return 0===e.x?null:{x:i,y:t.y+e.y/e.x*(i-t.x)}},E=function(){function e(i,n){t(this,e),void 0===i.events?i.events=[this]:i.events.push(this),this.point=i,this.isLeft=n}return i(e,null,[{key:"compare",value:function(t,i){var n=e.comparePoints(t.point,i.point);return 0!==n?n:(t.point!==i.point&&t.link(i),t.isLeft!==i.isLeft?t.isLeft?1:-1:I.compare(t.segment,i.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),i(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,i=0,n=e.length;i<n;i++){var o=e[i];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var i=this.point.events[e];if(void 0===i.segment.consumedBy)for(var n=e+1;n<t;n++){var o=this.point.events[n];void 0===o.consumedBy&&i.otherSE.point.events===o.otherSE.point.events&&i.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,i=this.point.events.length;e<i;e++){var n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,i=new Map,n=function(n){var o=n.otherSE;i.set(n,{sine:S(e.point,t.point,o.point),cosine:T(e.point,t.point,o.point)})};return function(t,e){i.has(t)||n(t),i.has(e)||n(e);var o=i.get(t),r=o.sine,a=o.cosine,s=i.get(e),l=s.sine,c=s.cosine;return r>=0&&l>=0?a<c?1:a>c?-1:0:r<0&&l<0?a<c?-1:a>c?1:0:l<r?-1:l>r?1:0}}}]),e}(),O=0,I=function(){function e(i,n,o,r){t(this,e),this.id=++O,this.leftSE=i,i.segment=this,i.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=i,this.rings=o,this.windings=r}return i(e,null,[{key:"compare",value:function(t,e){var i=t.leftSE.point.x,n=e.leftSE.point.x,o=t.rightSE.point.x,r=e.rightSE.point.x;if(r<i)return 1;if(o<n)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,c=e.rightSE.point.y;if(i<n){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var h=t.comparePoint(e.leftSE.point);if(h<0)return 1;if(h>0)return-1;var u=e.comparePoint(t.rightSE.point);return 0!==u?u:-1}if(i>n){if(a<s&&a<c)return-1;if(a>s&&a>c)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(o<r){var m=e.comparePoint(t.rightSE.point);if(0!==m)return m}if(o>r){var f=t.comparePoint(e.rightSE.point);if(f<0)return 1;if(f>0)return-1}if(o!==r){var g=l-a,_=o-i,v=c-s,y=r-n;if(g>_&&v<y)return 1;if(g<_&&v>y)return-1}return o>r?1:o<r||l<c?-1:l>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),i(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,i=this.rightSE.point,n=this.vector();if(e.x===i.x)return t.x===e.x?0:t.x<e.x?1:-1;var o=(t.y-e.y)/n.y,r=e.x+o*n.x;if(t.x===r)return 0;var a=(t.x-e.x)/n.x,s=e.y+a*n.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),i=t.bbox(),n=_(e,i);if(null===n)return null;var o=this.leftSE.point,r=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=g(e,a)&&0===this.comparePoint(a),c=g(i,o)&&0===t.comparePoint(o),h=g(e,s)&&0===this.comparePoint(s),u=g(i,r)&&0===t.comparePoint(r);if(c&&l)return u&&!h?r:!u&&h?s:null;if(c)return h&&o.x===s.x&&o.y===s.y?null:o;if(l)return u&&r.x===a.x&&r.y===a.y?null:a;if(u&&h)return null;if(u)return r;if(h)return s;var p=function(t,e,i,n){if(0===e.x)return D(i,n,t.x);if(0===n.x)return D(t,e,i.x);if(0===e.y)return A(i,n,t.y);if(0===n.y)return A(t,e,i.y);var o=w(e,n);if(0==o)return null;var r={x:i.x-t.x,y:i.y-t.y},a=w(r,e)/o,s=w(r,n)/o;return{x:(t.x+s*e.x+(i.x+a*n.x))/2,y:(t.y+s*e.y+(i.y+a*n.y))/2}}(o,this.vector(),a,t.vector());return null===p?null:g(n,p)?L.round(p.x,p.y):null}},{key:"split",value:function(t){var i=[],n=void 0!==t.events,o=new E(t,!0),r=new E(t,!1),a=this.rightSE;this.replaceRightSE(r),i.push(r),i.push(o);var s=new e(o,a,this.rings.slice(),this.windings.slice());return E.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),E.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(o.checkForConsuming(),r.checkForConsuming()),i}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,i=this.windings.length;e<i;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var i=this,n=t;i.consumedBy;)i=i.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var o=e.compare(i,n);if(0!==o){if(o>0){var r=i;i=n,n=r}if(i.prev===n){var a=i;i=n,n=a}for(var s=0,l=n.rings.length;s<l;s++){var c=n.rings[s],h=n.windings[s],u=i.rings.indexOf(c);-1===u?(i.rings.push(c),i.windings.push(h)):i.windings[u]+=h}n.rings=null,n.windings=null,n.consumedBy=i,n.leftSE.consumedBy=i.leftSE,n.rightSE.consumedBy=i.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,i=this._afterState.windings,n=this._afterState.multiPolys,o=0,r=this.rings.length;o<r;o++){var a=this.rings[o],s=this.windings[o],l=e.indexOf(a);-1===l?(e.push(a),i.push(s)):i[l]+=s}for(var c=[],h=[],u=0,p=e.length;u<p;u++)if(0!==i[u]){var d=e[u],m=d.poly;if(-1===h.indexOf(m))if(d.isExterior)c.push(m);else{-1===h.indexOf(m)&&h.push(m);var f=c.indexOf(d.poly);-1!==f&&c.splice(f,1)}}for(var g=0,_=c.length;g<_;g++){var v=c[g].multiPoly;-1===n.indexOf(v)&&n.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Z.type){case"union":var i=0===t.length,n=0===e.length;this._isInResult=i!==n;break;case"intersection":var o,r;t.length<e.length?(o=t.length,r=e.length):(o=e.length,r=t.length),this._isInResult=r===Z.numMultiPolys&&o<r;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2==1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(Z.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,i,n){var o,r,a,s=E.comparePoints(t,i);if(s<0)o=t,r=i,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));o=i,r=t,a=-1}return new e(new E(o,!0),new E(r,!1),[n],[a])}}]),e}(),B=function(){function e(i,n,o){if(t(this,e),!Array.isArray(i)||0===i.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=o,this.segments=[],"number"!=typeof i[0][0]||"number"!=typeof i[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var r=L.round(i[0][0],i[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};for(var a=r,s=1,l=i.length;s<l;s++){if("number"!=typeof i[s][0]||"number"!=typeof i[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=L.round(i[s][0],i[s][1]);c.x===a.x&&c.y===a.y||(this.segments.push(I.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}r.x===a.x&&r.y===a.y||this.segments.push(I.fromRing(a,r,this))}return i(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,i=this.segments.length;e<i;e++){var n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}}]),e}(),R=function(){function e(i,n){if(t(this,e),!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new B(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var o=1,r=i.length;o<r;o++){var a=new B(i[o],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=n}return i(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,i=this.interiorRings.length;e<i;e++)for(var n=this.interiorRings[e].getSweepEvents(),o=0,r=n.length;o<r;o++)t.push(n[o]);return t}}]),e}(),z=function(){function e(i,n){if(t(this,e),!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof i[0][0][0]&&(i=[i])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var o=0,r=i.length;o<r;o++){var a=new R(i[o],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=n}return i(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,i=this.polys.length;e<i;e++)for(var n=this.polys[e].getSweepEvents(),o=0,r=n.length;o<r;o++)t.push(n[o]);return t}}]),e}(),F=function(){function e(i){t(this,e),this.events=i;for(var n=0,o=i.length;n<o;n++)i[n].segment.ringOut=this;this.poly=null}return i(e,null,[{key:"factory",value:function(t){for(var i=[],n=0,o=t.length;n<o;n++){var r=t[n];if(r.isInResult()&&!r.ringOut){for(var a=null,s=r.leftSE,l=r.rightSE,c=[s],h=s.point,u=[];a=s,s=l,c.push(s),s.point!==h;)for(;;){var p=s.getAvailableLinkedEvents();if(0===p.length){var d=c[0].point,m=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(m.x,", ").concat(m.y,"]."))}if(1===p.length){l=p[0].otherSE;break}for(var f=null,g=0,_=u.length;g<_;g++)if(u[g].point===s.point){f=g;break}if(null===f){u.push({index:c.length,point:s.point});var v=s.getLeftmostComparator(a);l=p.sort(v)[0].otherSE;break}var y=u.splice(f)[0],b=c.splice(y.index);b.unshift(b[0].otherSE),i.push(new e(b.reverse()))}i.push(new e(c))}}return i}}]),i(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],i=1,n=this.events.length-1;i<n;i++){var o=this.events[i].point,r=this.events[i+1].point;0!==C(o,t,r)&&(e.push(o),t=o)}if(1===e.length)return null;var a=e[0],s=e[1];0===C(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,h=this.isExteriorRing()?e.length:-1,u=[],p=c;p!=h;p+=l)u.push([e[p].x,e[p].y]);return u}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,i=this.events.length;e<i;e++){var n=this.events[e];E.compare(t,n)>0&&(t=n)}for(var o=t.segment.prevInResult(),r=o?o.prevInResult():null;;){if(!o)return null;if(!r)return o.ringOut;if(r.ringOut!==o.ringOut)return r.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=r.prevInResult(),r=o?o.prevInResult():null}}}]),e}(),j=function(){function e(i){t(this,e),this.exteriorRing=i,i.poly=this,this.interiorRings=[]}return i(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,i=this.interiorRings.length;e<i;e++){var n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}}]),e}(),N=function(){function e(i){t(this,e),this.rings=i,this.polys=this._composePolys(i)}return i(e,[{key:"getGeom",value:function(){for(var t=[],e=0,i=this.polys.length;e<i;e++){var n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}},{key:"_composePolys",value:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var o=t[i];if(!o.poly)if(o.isExteriorRing())e.push(new j(o));else{var r=o.enclosingRing();r.poly||e.push(new j(r)),r.poly.addInterior(o)}}return e}}]),e}(),U=function(){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.compare;t(this,e),this.queue=i,this.tree=new h(n),this.segments=[]}return i(e,[{key:"process",value:function(t){var e=t.segment,i=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),i;var n=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!n)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=n,r=n,a=void 0,s=void 0;void 0===a;)null===(o=this.tree.prev(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);for(;void 0===s;)null===(r=this.tree.next(r))?s=null:void 0===r.key.consumedBy&&(s=r.key);if(t.isLeft){var l=null;if(a){var c=a.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(l=c),!a.isAnEndpoint(c)))for(var h=this._splitSafely(a,c),u=0,p=h.length;u<p;u++)i.push(h[u])}var d=null;if(s){var m=s.getIntersection(e);if(null!==m&&(e.isAnEndpoint(m)||(d=m),!s.isAnEndpoint(m)))for(var f=this._splitSafely(s,m),g=0,_=f.length;g<_;g++)i.push(f[g])}if(null!==l||null!==d){var v;v=null===l?d:null===d||E.comparePoints(l,d)<=0?l:d,this.queue.remove(e.rightSE),i.push(e.rightSE);for(var y=e.split(v),b=0,x=y.length;b<x;b++)i.push(y[b])}i.length>0?(this.tree.remove(e),i.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var k=a.getIntersection(s);if(null!==k){if(!a.isAnEndpoint(k))for(var L=this._splitSafely(a,k),w=0,M=L.length;w<M;w++)i.push(L[w]);if(!s.isAnEndpoint(k))for(var C=this._splitSafely(s,k),P=0,S=C.length;P<S;P++)i.push(C[P])}}this.tree.remove(e)}return i}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var i=t.rightSE;this.queue.remove(i);var n=t.split(e);return n.push(i),void 0===t.consumedBy&&this.tree.insert(t),n}}]),e}(),G="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,H="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Z=new(function(){function e(){t(this,e)}return i(e,[{key:"run",value:function(t,e,i){Z.type=t,L.reset();for(var n=[new z(e,!0)],o=0,r=i.length;o<r;o++)n.push(new z(i[o],!1));if(Z.numMultiPolys=n.length,"difference"===Z.type)for(var a=n[0],s=1;s<n.length;)null!==_(n[s].bbox,a.bbox)?s++:n.splice(s,1);if("intersection"===Z.type)for(var l=0,c=n.length;l<c;l++)for(var u=n[l],p=l+1,d=n.length;p<d;p++)if(null===_(u.bbox,n[p].bbox))return[];for(var m=new h(E.compare),f=0,g=n.length;f<g;f++)for(var v=n[f].getSweepEvents(),y=0,b=v.length;y<b;y++)if(m.insert(v[y]),m.size>G)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var x=new U(m),k=m.size,w=m.pop();w;){var M=w.key;if(m.size===k){var C=M.segment;throw new Error("Unable to pop() ".concat(M.isLeft?"left":"right"," SweepEvent ")+"[".concat(M.point.x,", ").concat(M.point.y,"] from segment #").concat(C.id," ")+"[".concat(C.leftSE.point.x,", ").concat(C.leftSE.point.y,"] -> ")+"[".concat(C.rightSE.point.x,", ").concat(C.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(m.size>G)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(x.segments.length>H)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var P=x.process(M),S=0,T=P.length;S<T;S++){var A=P[S];void 0===A.consumedBy&&m.insert(A)}k=m.size,w=m.pop()}L.reset();var D=F.factory(x.segments);return new N(D).getGeom()}}]),e}());return{union:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Z.run("union",t,i)},intersection:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Z.run("intersection",t,i)},xor:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Z.run("xor",t,i)},difference:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Z.run("difference",t,i)}}}()},2582:function(t){t.exports=function(){"use strict";function t(t,n,o,r,a){!function t(i,n,o,r,a){for(;r>o;){if(r-o>600){var s=r-o+1,l=n-o+1,c=Math.log(s),h=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*h*(s-h)/s)*(l-s/2<0?-1:1);t(i,n,Math.max(o,Math.floor(n-l*h/s+u)),Math.min(r,Math.floor(n+(s-l)*h/s+u)),a)}var p=i[n],d=o,m=r;for(e(i,o,n),a(i[r],p)>0&&e(i,o,r);d<m;){for(e(i,d,m),d++,m--;a(i[d],p)<0;)d++;for(;a(i[m],p)>0;)m--}0===a(i[o],p)?e(i,o,m):e(i,++m,r),m<=n&&(o=m+1),n<=m&&(r=m-1)}}(t,n,o||0,r||t.length-1,a||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function r(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,o){o||(o=m(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r=e;r<i;r++){var a=t.children[r];s(o,t.leaf?n(a):a)}return o}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function f(e,i,n,o,r){for(var a=[i,n];a.length;)if(!((n=a.pop())-(i=a.pop())<=o)){var s=i+Math.ceil((n-i)/o/2)*o;t(e,s,i,n,r),a.push(i,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!d(t,e))return i;for(var n=this.toBBox,o=[];e;){for(var r=0;r<e.children.length;r++){var a=e.children[r],s=e.leaf?n(a):a;d(t,s)&&(e.leaf?i.push(a):p(t,s)?this._all(a,i):o.push(a))}e=o.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!d(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var o=e.children[n],r=e.leaf?this.toBBox(o):o;if(d(t,r)){if(e.leaf||p(t,r))return!0;i.push(o)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=m([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,r,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],i=c.pop(),r=!0),a.leaf){var h=o(t,a.children,e);if(-1!==h)return a.children.splice(h,1),l.push(a),this._condense(l),this}r||a.leaf||!p(a,s)?n?(i++,a=n.children[i],r=!1):a=null:(l.push(a),c.push(i),i=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var o,a=i-e+1,s=this._maxEntries;if(a<=s)return r(o=m(t.slice(e,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(o=m([])).leaf=!1,o.height=n;var l=Math.ceil(a/s),c=l*Math.ceil(Math.sqrt(s));f(t,e,i,c,this.compareMinX);for(var h=e;h<=i;h+=c){var u=Math.min(h+c-1,i);f(t,h,u,l,this.compareMinY);for(var p=h;p<=u;p+=l){var d=Math.min(p+l-1,u);o.children.push(this._build(t,p,d,n-1))}}return r(o,this.toBBox),o},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var o=1/0,r=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],c=h(l),u=(p=t,d=l,(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-c);u<r?(r=u,o=c<o?c:o,a=l):u===r&&c<o&&(o=c,a=l)}e=a||e.children[0]}var p,d;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),o=[],r=this._chooseSubtree(n,this.data,e,o);for(r.children.push(t),s(r,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var a=this._chooseSplitIndex(i,o,n),s=m(i.children.splice(a,i.children.length-a));s.height=i.height,s.leaf=i.leaf,r(i,this.toBBox),r(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},n.prototype._splitRoot=function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,o,r,s,l,c,u,p=1/0,d=1/0,m=e;m<=i-e;m++){var f=a(t,0,m,this.toBBox),g=a(t,m,i,this.toBBox),_=(o=f,r=g,void 0,void 0,void 0,void 0,s=Math.max(o.minX,r.minX),l=Math.max(o.minY,r.minY),c=Math.min(o.maxX,r.maxX),u=Math.min(o.maxY,r.maxY),Math.max(0,c-s)*Math.max(0,u-l)),v=h(f)+h(g);_<p?(p=_,n=m,d=v<d?v:d):_===p&&v<d&&(d=v,n=m)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:l,o=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,o)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var o=this.toBBox,r=a(t,0,e,o),l=a(t,i-e,i,o),c=u(r)+u(l),h=e;h<i-e;h++){var p=t.children[h];s(r,t.leaf?o(p):p),c+=u(r)}for(var d=i-e-1;d>=e;d--){var m=t.children[d];s(l,t.leaf?o(m):m),c+=u(l)}return c},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():r(t[e],this.toBBox)},n}()}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),i(5975)})()},957:function(t){var e;e=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function e(e){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var s=function(t){return"string"==typeof t?document.querySelector(t):t()},l=function(t,e){var i="string"==typeof t?document.createElement(t):t;for(var n in e){var o=e[n];if("inside"===n)o.append(i);else if("dest"===n)s(o[0]).insertAdjacentElement(o[1],i);else if("around"===n){var r=o;r.parentNode.insertBefore(i,r),i.append(r),null!=r.getAttribute("autofocus")&&r.focus()}else n in i?i[n]=o:i.setAttribute(n,o)}return i},c=function(t,e){return t=String(t).toLowerCase(),e?t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):t},h=function(t,i){return l("mark",e({innerHTML:t},"string"==typeof i&&{class:i})).outerHTML},u=function(t,e){e.input.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e.feedback,cancelable:!0}))},p=function(t,e,i){var n=i||{},o=n.mode,r=n.diacritics,a=n.highlight,s=c(e,r);if(e=String(e),t=c(t,r),"loose"===o){var l=(t=t.replace(/ /g,"")).length,u=0,p=Array.from(e).map((function(e,i){return u<l&&s[i]===t[u]&&(e=a?h(e,a):e,u++),e})).join("");if(u===l)return p}else{var d=s.indexOf(t);if(~d)return t=e.substring(d,d+t.length),a?e.replace(t,h(t,a)):e}},d=function(t,e){return new Promise((function(i,n){var o;return(o=t.data).cache&&o.store?i():new Promise((function(t,i){return"function"==typeof o.src?o.src(e).then(t,i):t(o.src)})).then((function(e){try{return t.feedback=o.store=e,u("response",t),i()}catch(t){return n(t)}}),n)}))},m=function(t,e){var i=e.data,n=e.searchEngine,o=[];i.store.forEach((function(a,s){var l=function(i){var r=i?a[i]:a,s="function"==typeof n?n(t,r):p(t,r,{mode:n,diacritics:e.diacritics,highlight:e.resultItem.highlight});if(s){var l={match:s,value:a};i&&(l.key=i),o.push(l)}};if(i.keys){var c,h=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=r(t))){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw a}}}}(i.keys);try{for(h.s();!(c=h.n()).done;)l(c.value)}catch(t){h.e(t)}finally{h.f()}}else l()})),i.filter&&(o=i.filter(o));var a=o.slice(0,e.resultsList.maxResults);e.feedback={query:t,matches:o,results:a},u("results",e)},f="aria-expanded",g="aria-activedescendant",_="aria-selected",v=function(t,i){t.feedback.selection=e({index:i},t.feedback.results[i])},y=function(t){t.isOpen||((t.wrapper||t.input).setAttribute(f,!0),t.list.removeAttribute("hidden"),t.isOpen=!0,u("open",t))},b=function(t){t.isOpen&&((t.wrapper||t.input).setAttribute(f,!1),t.input.setAttribute(g,""),t.list.setAttribute("hidden",""),t.isOpen=!1,u("close",t))},x=function(t,e){var i=e.resultItem,n=e.list.getElementsByTagName(i.tag),r=!!i.selected&&i.selected.split(" ");if(e.isOpen&&n.length){var a,s,l=e.cursor;t>=n.length&&(t=0),t<0&&(t=n.length-1),e.cursor=t,l>-1&&(n[l].removeAttribute(_),r&&(s=n[l].classList).remove.apply(s,o(r))),n[t].setAttribute(_,!0),r&&(a=n[t].classList).add.apply(a,o(r)),e.input.setAttribute(g,n[e.cursor].id),e.list.scrollTop=n[t].offsetTop-e.list.clientHeight+n[t].clientHeight+5,e.feedback.cursor=e.cursor,v(e,t),u("navigate",e)}},k=function(t){x(t.cursor+1,t)},L=function(t){x(t.cursor-1,t)},w=function(t,e,i){(i=i>=0?i:t.cursor)<0||(t.feedback.event=e,v(t,i),u("selection",t),b(t))};function M(t,i){var n=this;return new Promise((function(o,r){var a,s;return a=i||((s=t.input)instanceof HTMLInputElement||s instanceof HTMLTextAreaElement?s.value:s.innerHTML),function(t,e,i){return e?e(t):t.length>=i}(a=t.query?t.query(a):a,t.trigger,t.threshold)?d(t,a).then((function(i){try{return t.feedback instanceof Error?o():(m(a,t),t.resultsList&&function(t){var i=t.resultsList,n=t.list,o=t.resultItem,r=t.feedback,a=r.matches,s=r.results;if(t.cursor=-1,n.innerHTML="",a.length||i.noResults){var c=new DocumentFragment;s.forEach((function(t,i){var n=l(o.tag,e({id:"".concat(o.id,"_").concat(i),role:"option",innerHTML:t.match,inside:c},o.class&&{class:o.class}));o.element&&o.element(n,t)})),n.append(c),i.element&&i.element(n,r),y(t)}else b(t)}(t),c.call(n))}catch(t){return r(t)}}),r):(b(t),c.call(n));function c(){return o()}}))}var C=function(t,e){for(var i in t)for(var n in t[i])e(i,n)};function P(t){var i=this;return new Promise((function(n,o){var r,a,s;if(r=t.placeHolder,s={role:"combobox","aria-owns":(a=t.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},l(t.input,e(e({"aria-controls":a.id,"aria-autocomplete":"both"},r&&{placeholder:r}),!t.wrapper&&e({},s))),t.wrapper&&(t.wrapper=l("div",e({around:t.input,class:t.name+"_wrapper"},s))),a&&(t.list=l(a.tag,e({dest:[a.destination,a.position],id:a.id,role:"listbox",hidden:"hidden"},a.class&&{class:a.class}))),function(t){var i,n,o,r=t.events,a=(i=function(){return M(t)},n=t.debounce,function(){clearTimeout(o),o=setTimeout((function(){return i()}),n)}),s=t.events=e({input:e({},r&&r.input)},t.resultsList&&{list:r?e({},r.list):{}}),l={input:{input:function(){a()},keydown:function(e){!function(t,e){switch(t.keyCode){case 40:case 38:t.preventDefault(),40===t.keyCode?k(e):L(e);break;case 13:e.submit||t.preventDefault(),e.cursor>=0&&w(e,t);break;case 9:e.resultsList.tabSelect&&e.cursor>=0&&w(e,t);break;case 27:e.input.value="",b(e)}}(e,t)},blur:function(){b(t)}},list:{mousedown:function(t){t.preventDefault()},click:function(e){!function(t,e){var i=e.resultItem.tag.toUpperCase(),n=Array.from(e.list.querySelectorAll(i)),o=t.target.closest(i);o&&o.nodeName===i&&w(e,t,n.indexOf(o))}(e,t)}}};C(l,(function(e,i){(t.resultsList||"input"===i)&&(s[e][i]||(s[e][i]=l[e][i]))})),C(s,(function(e,i){t[e].addEventListener(i,s[e][i])}))}(t),t.data.cache)return d(t).then((function(t){try{return c.call(i)}catch(t){return o(t)}}),o);function c(){return u("init",t),n()}return c.call(i)}))}function S(t){var e=t.prototype;e.init=function(){P(this)},e.start=function(t){M(this,t)},e.unInit=function(){if(this.wrapper){var t=this.wrapper.parentNode;t.insertBefore(this.input,this.wrapper),t.removeChild(this.wrapper)}var e;C((e=this).events,(function(t,i){e[t].removeEventListener(i,e.events[t][i])}))},e.open=function(){y(this)},e.close=function(){b(this)},e.goTo=function(t){x(t,this)},e.next=function(){k(this)},e.previous=function(){L(this)},e.select=function(t){w(this,null,t)},e.search=function(t,e,i){return p(t,e,i)}}return function t(e){this.options=e,this.id=t.instances=(t.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(t){var e=t.name,n=t.options,o=t.resultsList,r=t.resultItem;for(var a in n)if("object"===i(n[a]))for(var l in t[a]||(t[a]={}),n[a])t[a][l]=n[a][l];else t[a]=n[a];t.selector=t.selector||"#"+e,o.destination=o.destination||t.selector,o.id=o.id||e+"_list_"+t.id,r.id=r.id||e+"_result",t.input=s(t.selector)}(this),S.call(this,t),P(this)}},t.exports=e()},568:function(t){t.exports=function(t,e){return!(t[0]>e[2]||t[2]<e[0]||t[3]<e[1]||t[1]>e[3])}},144:function(t,e){var i,n,o;n=[e,t],i=function(t,e){"use strict";var i={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function o(t){try{delete window[t]}catch(e){window[t]=void 0}}function r(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}function a(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t,s=e.timeout||i.timeout,l=e.jsonpCallback||i.jsonpCallback,c=void 0;return new Promise((function(i,h){var u=e.jsonpCallbackFunction||n(),p=l+"_"+u;window[u]=function(t){i({ok:!0,json:function(){return Promise.resolve(t)}}),c&&clearTimeout(c),r(p),o(u)},a+=-1===a.indexOf("?")?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+a+l+"="+u),e.charset&&d.setAttribute("charset",e.charset),e.nonce&&d.setAttribute("nonce",e.nonce),e.referrerPolicy&&d.setAttribute("referrerPolicy",e.referrerPolicy),d.id=p,document.getElementsByTagName("head")[0].appendChild(d),c=setTimeout((function(){h(new Error("JSONP request to "+t+" timed out")),o(u),r(p),window[u]=function(){o(u)}}),s),d.onerror=function(){h(new Error("JSONP request to "+t+" failed")),o(u),r(p),c&&clearTimeout(c)}}))}e.exports=a},void 0===(o="function"==typeof i?i.apply(e,n):i)||(t.exports=o)},895:function(){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var n=function(e){e&&Object.keys(e).forEach((function(i){return t[i]=e[i]}))},o=0,r=e;o<r.length;o++){var a=r[o];n(a)}return t})},977:function(t,e,i){var n=i(243),o=i(144),r=i(568);var a=["Aerial","AerialWithLabels","AerialWithLabelsOnDemand","Road","RoadOnDemand","CanvasLight","CanvasDark","CanvasGray","OrdnanceSurvey"],s=["AerialWithLabelsOnDemand","RoadOnDemand"];n.TileLayer.Bing=n.TileLayer.extend({options:{bingMapsKey:null,imagerySet:"Aerial",culture:"en-US",minZoom:1,minNativeZoom:1,maxNativeZoom:19},statics:{METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}?key={bingMapsKey}&include=ImageryProviders&uriScheme=https&c={culture}",POINT_METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}/{lat},{lng}?zl={z}&key={bingMapsKey}&uriScheme=https&c={culture}"},initialize:function(t){if("string"==typeof t&&(t={bingMapsKey:t}),t&&t.BingMapsKey&&(t.bingMapsKey=t.BingMapsKey,console.warn("use options.bingMapsKey instead of options.BingMapsKey")),!t||!t.bingMapsKey)throw new Error("Must supply options.BingMapsKey");if(t=n.setOptions(this,t),a.indexOf(t.imagerySet)<0)throw new Error("'"+t.imagerySet+"' is an invalid imagerySet, see https://github.com/digidem/leaflet-bing-layer#parameters");t&&t.style&&s.indexOf(t.imagerySet)<0&&console.warn("Dynamic styles will only work with these imagerySet choices: "+s.join(", "));var e=n.Util.template(n.TileLayer.Bing.METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,culture:this.options.culture});this._imageryProviders=[],this._attributions=[],this._fetch=o(e,{jsonpCallback:"jsonp"}).then((function(t){return t.json()})).then(this._metaDataOnLoad.bind(this)).catch(console.error.bind(console)),n.Browser.android||this.on("tileunload",this._onTileRemove)},createTile:function(t,e){var i=document.createElement("img");return n.DomEvent.on(i,"load",n.bind(this._tileOnLoad,this,e,i)),n.DomEvent.on(i,"error",n.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",this._url?i.src=this.getTileUrl(t):this._fetch.then(function(){i.src=this.getTileUrl(t)}.bind(this)).catch((function(t){console.error(t),e(t)})),i},getTileUrl:function(t){var e=function(t,e,i){for(var n="",o=i;o>0;o--){var r=0,a=1<<o-1;0!=(t&a)&&r++,0!=(e&a)&&(r+=2),n+=r.toString()}return n}(t.x,t.y,t.z),i=n.Util.template(this._url,{quadkey:e,subdomain:this._getSubdomain(t),culture:this.options.culture});return"string"==typeof this.options.style&&(i+="&st="+this.options.style),i},onAdd:function(t){t.on("moveend",this._updateAttribution,this),n.TileLayer.prototype.onAdd.call(this,t),this._attributions.forEach((function(e){t.attributionControl.addAttribution(e)}))},onRemove:function(t){t.off("moveend",this._updateAttribution,this),this._attributions.forEach((function(e){t.attributionControl.removeAttribution(e)})),n.TileLayer.prototype.onRemove.call(this,t)},getMetaData:function(t,e){if(!(this._map||t&&e))return Promise.reject(new Error("If layer is not attached to map, you must provide LatLng and zoom"));t=t||this._map.getCenter(),e=e||this._map.getZoom();var i=n.Util.template(n.TileLayer.Bing.POINT_METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,z:e,lat:t.lat,lng:t.lng});return o(i,{jsonpCallback:"jsonp"}).then((function(t){return t.json()})).catch(console.error.bind(console))},_metaDataOnLoad:function(t){if(200!==t.statusCode)throw new Error("Bing Imagery Metadata error: \n"+JSON.stringify(t,null,"  "));var e=t.resourceSets[0].resources[0];return this._url=e.imageUrl,this._imageryProviders=e.imageryProviders||[],this.options.subdomains=e.imageUrlSubdomains,this._updateAttribution(),Promise.resolve()},_updateAttribution:function(){var t=this._map;if(t&&t.attributionControl){var e=t.getZoom(),i=function(t){var e=t.split(",");return[e[1],e[0],e[3],e[2]]}(t.getBounds().toBBoxString());this._fetch.then(function(){var n=this._getAttributions(i,e),o=this._attributions;n.forEach((function(e){o.indexOf(e)>-1||t.attributionControl.addAttribution(e)})),o.filter((function(e){n.indexOf(e)>-1||t.attributionControl.removeAttribution(e)})),this._attributions=n}.bind(this))}},_getAttributions:function(t,e){return this._imageryProviders.reduce((function(i,n){for(var o=0;o<n.coverageAreas.length;o++)if(r(t,n.coverageAreas[o].bbox)&&e>=n.coverageAreas[o].zoomMin&&e<=n.coverageAreas[o].zoomMax)return i.push(n.attribution),i;return i}),[])}}),n.tileLayer.bing=function(t){return new n.TileLayer.Bing(t)},t.exports=n.TileLayer.Bing},810:function(t,e,i){var n,o,r;!function(a,s){o=[i(243)],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r),void 0!==s&&s.L&&!s.L.EdgeBuffer&&a(s.L)}((function(t){t.EdgeBuffer={previousMethods:{getTiledPixelBounds:t.GridLayer.prototype._getTiledPixelBounds}},t.GridLayer.include({_getTiledPixelBounds:function(e,i,n){var o=t.EdgeBuffer.previousMethods.getTiledPixelBounds.call(this,e,i,n),r=1;if(void 0!==this.options.edgeBufferTiles&&null!==this.options.edgeBufferTiles&&(r=this.options.edgeBufferTiles),r>0){var a=t.GridLayer.prototype.getTileSize.call(this).multiplyBy(r);o=new t.Bounds(o.min.subtract(a),o.max.add(a))}return o}})}),window)},292:function(){L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",e),this.link.href="#",this._map=t,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),e},_click:function(t){L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(t){var e=this.getContainer();this.isFullscreen()?t&&t.pseudoFullscreen?this._disablePseudoFullscreen(e):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(e):t&&t.pseudoFullscreen?this._enablePseudoFullscreen(e):e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen?e.msRequestFullscreen():this._enablePseudoFullscreen(e)},_enablePseudoFullscreen:function(t){L.DomUtil.addClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(t){L.DomUtil.removeClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(t){this._isFullscreen=t;var e=this.getContainer();t?L.DomUtil.addClass(e,"leaflet-fullscreen-on"):L.DomUtil.removeClass(e,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(t){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e!==this.getContainer()||this._isFullscreen?e!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook((function(){var t;if(this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),"onfullscreenchange"in document?t="fullscreenchange":"onmozfullscreenchange"in document?t="mozfullscreenchange":"onwebkitfullscreenchange"in document?t="webkitfullscreenchange":"onmsfullscreenchange"in document&&(t="MSFullscreenChange"),t){var e=L.bind(this._onFullscreenChange,this);this.whenReady((function(){L.DomEvent.on(document,t,e)})),this.on("unload",(function(){L.DomEvent.off(document,t,e)}))}})),L.control.fullscreen=function(t){return new L.Control.Fullscreen(t)}},830:function(t,e){!function(t){"use strict";var e={ar:{touch:"استخدم إصبعين لتحريك الخريطة",scroll:"‏استخدم ctrl + scroll لتصغير/تكبير الخريطة",scrollMac:"يمكنك استخدام ⌘ + التمرير لتكبير/تصغير الخريطة"},bg:{touch:"Използвайте два пръста, за да преместите картата",scroll:"Задръжте бутона Ctrl натиснат, докато превъртате, за да промените мащаба на картата",scrollMac:"Задръжте бутона ⌘ натиснат, докато превъртате, за да промените мащаба на картата"},bn:{touch:"মানচিত্রটিকে সরাতে দুটি আঙ্গুল ব্যবহার করুন",scroll:"ম্যাপ জুম করতে ctrl + scroll ব্যবহার করুন",scrollMac:"ম্যাপে জুম করতে ⌘ বোতাম টিপে স্ক্রল করুন"},ca:{touch:"Fes servir dos dits per moure el mapa",scroll:"Prem la tecla Control mentre et desplaces per apropar i allunyar el mapa",scrollMac:"Prem la tecla ⌘ mentre et desplaces per apropar i allunyar el mapa"},cs:{touch:"K posunutí mapy použijte dva prsty",scroll:"Velikost zobrazení mapy změňte podržením klávesy Ctrl a posouváním kolečka myši",scrollMac:"Velikost zobrazení mapy změníte podržením klávesy ⌘ a posunutím kolečka myši / touchpadu"},da:{touch:"Brug to fingre til at flytte kortet",scroll:"Brug ctrl + rullefunktionen til at zoome ind og ud på kortet",scrollMac:"Brug ⌘ + rullefunktionen til at zoome ind og ud på kortet"},de:{touch:"Verschieben der Karte mit zwei Fingern",scroll:"Verwende Strg+Scrollen zum Zoomen der Karte",scrollMac:"⌘"},el:{touch:"Χρησιμοποιήστε δύο δάχτυλα για μετακίνηση στον χάρτη",scroll:"Χρησιμοποιήστε το πλήκτρο Ctrl και κύλιση, για να μεγεθύνετε τον χάρτη",scrollMac:"Χρησιμοποιήστε το πλήκτρο ⌘ + κύλιση για εστίαση στον χάρτη"},en:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-AU":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-GB":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},es:{touch:"Para mover el mapa, utiliza dos dedos",scroll:"Mantén pulsada la tecla Ctrl mientras te desplazas para acercar o alejar el mapa",scrollMac:"Mantén pulsada la tecla ⌘ mientras te desplazas para acercar o alejar el mapa"},eu:{touch:"Erabili bi hatz mapa mugitzeko",scroll:"Mapan zooma aplikatzeko, sakatu Ktrl eta egin gora edo behera",scrollMac:"Eduki sakatuta ⌘ eta egin gora eta behera mapa handitu eta txikitzeko"},fa:{touch:"برای حرکت دادن نقشه از دو انگشت استفاده کنید.",scroll:"‏برای بزرگ‌نمایی نقشه از ctrl + scroll استفاده کنید",scrollMac:"برای بزرگ‌نمایی نقشه، از ⌘ + پیمایش استفاده کنید."},fi:{touch:"Siirrä karttaa kahdella sormella.",scroll:"Zoomaa karttaa painamalla Ctrl-painiketta ja vierittämällä.",scrollMac:"Zoomaa karttaa pitämällä painike ⌘ painettuna ja vierittämällä."},fil:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},fr:{touch:"Utilisez deux doigts pour déplacer la carte",scroll:"Vous pouvez zoomer sur la carte à l'aide de CTRL+Molette de défilement",scrollMac:"Vous pouvez zoomer sur la carte à l'aide de ⌘+Molette de défilement"},gl:{touch:"Utiliza dous dedos para mover o mapa",scroll:"Preme Ctrl mentres te desprazas para ampliar o mapa",scrollMac:"Preme ⌘ e desprázate para ampliar o mapa"},gu:{touch:"નકશો ખસેડવા બે આંગળીઓનો ઉપયોગ કરો",scroll:"નકશાને ઝૂમ કરવા માટે ctrl + સ્ક્રોલનો ઉપયોગ કરો",scrollMac:"નકશાને ઝૂમ કરવા ⌘ + સ્ક્રોલનો ઉપયોગ કરો"},hi:{touch:"मैप एक जगह से दूसरी जगह ले जाने के लिए दो उंगलियों का इस्तेमाल करें",scroll:"मैप को ज़ूम करने के लिए ctrl + स्क्रोल का उपयोग करें",scrollMac:"मैप को ज़ूम करने के लिए ⌘ + स्क्रोल का उपयोग करें"},hr:{touch:"Pomičite kartu pomoću dva prsta",scroll:"Upotrijebite Ctrl i klizač miša da biste zumirali kartu",scrollMac:"Upotrijebite gumb ⌘ dok se pomičete za zumiranje karte"},hu:{touch:"Két ujjal mozgassa a térképet",scroll:"A térkép a ctrl + görgetés használatával nagyítható",scrollMac:"A térkép a ⌘ + görgetés használatával nagyítható"},id:{touch:"Gunakan dua jari untuk menggerakkan peta",scroll:"Gunakan ctrl + scroll untuk memperbesar atau memperkecil peta",scrollMac:"Gunakan ⌘ + scroll untuk memperbesar atau memperkecil peta"},it:{touch:"Utilizza due dita per spostare la mappa",scroll:"Utilizza CTRL + scorrimento per eseguire lo zoom della mappa",scrollMac:"Utilizza ⌘ + scorrimento per eseguire lo zoom della mappa"},iw:{touch:"הזז את המפה באמצעות שתי אצבעות",scroll:"‏אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ctrl וגלילה",scrollMac:"אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ⌘ וגלילה"},ja:{touch:"地図を移動させるには指 2 本で操作します",scroll:"地図をズームするには、Ctrl キーを押しながらスクロールしてください",scrollMac:"地図をズームするには、⌘ キーを押しながらスクロールしてください"},kn:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},ko:{touch:"지도를 움직이려면 두 손가락을 사용하세요.",scroll:"지도를 확대/축소하려면 Ctrl을 누른 채 스크롤하세요.",scrollMac:"지도를 확대하려면 ⌘ + 스크롤 사용"},lt:{touch:"Perkelkite žemėlapį dviem pirštais",scroll:"Slinkite nuspaudę klavišą „Ctrl“, kad pakeistumėte žemėlapio mastelį",scrollMac:"Paspauskite klavišą ⌘ ir slinkite, kad priartintumėte žemėlapį"},lv:{touch:"Lai pārvietotu karti, bīdiet to ar diviem pirkstiem",scroll:"Kartes tālummaiņai izmantojiet ctrl + ritināšanu",scrollMac:"Lai veiktu kartes tālummaiņu, izmantojiet ⌘ + ritināšanu"},ml:{touch:"മാപ്പ് നീക്കാൻ രണ്ട് വിരലുകൾ ഉപയോഗിക്കുക",scroll:"കൺട്രോൾ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക",scrollMac:"⌘ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക"},mr:{touch:"नकाशा हलविण्यासाठी दोन बोटे वापरा",scroll:"नकाशा झूम करण्यासाठी ctrl + scroll वापरा",scrollMac:"नकाशावर झूम करण्यासाठी ⌘ + स्क्रोल वापरा"},nl:{touch:"Gebruik twee vingers om de kaart te verplaatsen",scroll:"Gebruik Ctrl + scrollen om in- en uit te zoomen op de kaart",scrollMac:"Gebruik ⌘ + scrollen om in en uit te zoomen op de kaart"},no:{touch:"Bruk to fingre for å flytte kartet",scroll:"Hold ctrl-tasten inne og rull for å zoome på kartet",scrollMac:"Hold inne ⌘-tasten og rull for å zoome på kartet"},pl:{touch:"Przesuń mapę dwoma palcami",scroll:"Naciśnij CTRL i przewiń, by przybliżyć mapę",scrollMac:"Naciśnij ⌘ i przewiń, by przybliżyć mapę"},pt:{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-BR":{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-PT":{touch:"Utilize dois dedos para mover o mapa",scroll:"Utilizar ctrl + deslocar para aumentar/diminuir zoom do mapa",scrollMac:"Utilize ⌘ + deslocar para aumentar/diminuir o zoom do mapa"},ro:{touch:"Folosiți două degete pentru a deplasa harta",scroll:"Apăsați tasta ctrl și derulați simultan pentru a mări harta",scrollMac:"Folosiți ⌘ și derulați pentru a mări/micșora harta"},ru:{touch:"Чтобы переместить карту, проведите по ней двумя пальцами",scroll:"Чтобы изменить масштаб, прокручивайте карту, удерживая клавишу Ctrl.",scrollMac:"Чтобы изменить масштаб, нажмите ⌘ + прокрутка"},sk:{touch:"Mapu môžete posunúť dvoma prstami",scroll:"Ak chcete priblížiť mapu, stlačte kláves ctrl a posúvajte",scrollMac:"Ak chcete priblížiť mapu, stlačte kláves ⌘ a posúvajte kolieskom myši"},sl:{touch:"Premaknite zemljevid z dvema prstoma",scroll:"Zemljevid povečate tako, da držite tipko Ctrl in vrtite kolesce na miški",scrollMac:"Uporabite ⌘ + funkcijo pomika, da povečate ali pomanjšate zemljevid"},sr:{touch:"Мапу померајте помоћу два прста",scroll:"Притисните ctrl тастер док померате да бисте зумирали мапу",scrollMac:"Притисните тастер ⌘ док померате да бисте зумирали мапу"},sv:{touch:"Använd två fingrar för att flytta kartan",scroll:"Använd ctrl + rulla för att zooma kartan",scrollMac:"Använd ⌘ + rulla för att zooma på kartan"},ta:{touch:"மேப்பை நகர்த்த இரண்டு விரல்களைப் பயன்படுத்தவும்",scroll:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ctrl பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்",scrollMac:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ⌘ பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்"},te:{touch:"మ్యాప్‌ని తరలించడం కోసం రెండు వేళ్లను ఉపయోగించండి",scroll:"మ్యాప్‌ని జూమ్ చేయడానికి ctrl బటన్‌ను నొక్కి ఉంచి, స్క్రోల్ చేయండి",scrollMac:"మ్యాప్ జూమ్ చేయాలంటే ⌘ + స్క్రోల్ ఉపయోగించండి"},th:{touch:"ใช้ 2 นิ้วเพื่อเลื่อนแผนที่",scroll:"กด Ctrl ค้างไว้ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่",scrollMac:"กด ⌘ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่"},tl:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},tr:{touch:"Haritada gezinmek için iki parmağınızı kullanın",scroll:"Haritayı yakınlaştırmak için ctrl + kaydırma kombinasyonunu kullanın",scrollMac:"Haritayı yakınlaştırmak için ⌘ tuşuna basıp ekranı kaydırın"},uk:{touch:"Переміщуйте карту двома пальцями",scroll:"Щоб змінювати масштаб карти, прокручуйте коліщатко миші, утримуючи клавішу Ctrl",scrollMac:"Щоб змінити масштаб карти, використовуйте ⌘ + прокручування"},vi:{touch:"Sử dụng hai ngón tay để di chuyển bản đồ",scroll:"Sử dụng ctrl + cuộn để thu phóng bản đồ",scrollMac:"Sử dụng ⌘ + cuộn để thu phóng bản đồ"},"zh-CN":{touch:"使用双指移动地图",scroll:"按住 Ctrl 并滚动鼠标滚轮才可缩放地图",scrollMac:"按住 ⌘ 并滚动鼠标滚轮才可缩放地图"},"zh-TW":{touch:"同時以兩指移動地圖",scroll:"按住 ctrl 鍵加上捲動滑鼠可以縮放地圖",scrollMac:"按 ⌘ 加上滾動捲軸可以縮放地圖"}};L.Map.mergeOptions({gestureHandlingOptions:{text:{},duration:1e3}});var i=!1,n=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setupPluginOptions(),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.on(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.off(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this)},_handleDragging:function(t){"movestart"==t.type||"move"==t.type?i=!0:"moveend"==t.type&&(i=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setupPluginOptions:function(){this._map.options.gestureHandlingText&&(this._map.options.gestureHandlingOptions.text=this._map.options.gestureHandlingText)},_setLanguageContent:function(){var t;if(this._map.options.gestureHandlingOptions&&this._map.options.gestureHandlingOptions.text&&this._map.options.gestureHandlingOptions.text.touch&&this._map.options.gestureHandlingOptions.text.scroll&&this._map.options.gestureHandlingOptions.text.scrollMac)t=this._map.options.gestureHandlingOptions.text;else{var i=this._getUserLanguage();i||(i="en"),e[i]&&(t=e[i]),t||-1===i.indexOf("-")||(i=i.split("-")[0],t=e[i]),t||(t=e[i="en"])}var n=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(n=!0);var o=t.scroll;n&&(o=t.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",t.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",o)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(t){for(var e=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"],i=!1,n=0;n<e.length;n++)L.DomUtil.hasClass(t.target,e[n])&&(i=!0);i?L.DomUtil.hasClass(t.target,"leaflet-interactive")&&"touchmove"===t.type&&1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning"):"touchmove"===t.type||"touchstart"===t.type?1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):(t.preventDefault(),this._enableInteractions(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")},_isScrolling:!1,_handleScroll:function(t){t.metaKey||t.ctrlKey?(t.preventDefault(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout((function(){for(var t=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),e=0;e<t.length;e++)L.DomUtil.removeClass(t[e],"leaflet-gesture-handling-scroll-warning")}),this._map.options.gestureHandlingOptions.duration))},_handleMouseOver:function(t){this._enableInteractions()},_handleMouseOut:function(t){i||this._disableInteractions()}});L.Map.addInitHook("addHandler","gestureHandling",n),t.GestureHandling=n,t.default=n,Object.defineProperty(t,"__esModule",{value:!0})}(e)},244:function(t,e,i){var n,o,r;!function(a,s){o=[i(243)],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r),void 0!==s&&s.L&&(s.L.Control.MiniMap=a(L),s.L.control.minimap=function(t,e){return new s.L.Control.MiniMap(t,e)})}((function(t){var e=t.Control.extend({includes:t.Evented?t.Evented.prototype:t.Mixin.Events,options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(e,i){t.Util.setOptions(this,i),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=e},onAdd:function(e){this._mainMap=e,this._container=t.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",t.DomEvent.disableClickPropagation(this._container),t.DomEvent.on(this._container,"mousewheel",t.DomEvent.stopPropagation);var i={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:e.options.crs};return i=t.Util.extend(this.options.mapOptions,i),this._miniMap=new t.Map(this._container,i),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(t.Util.bind((function(){this._aimingRect=t.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=t.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)}),this)),this._container},addTo:function(e){t.Control.prototype.addTo.call(this,e);var i=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(i,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(t){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(t){this._miniMap.removeLayer(this._layer),this._layer=t,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(e,i,n,o,r,a){var s=t.DomUtil.create("a",n,o);s.innerHTML=e,s.href="#",s.title=i;var l=t.DomEvent.stopPropagation;return t.DomEvent.on(s,"click",l).on(s,"mousedown",l).on(s,"dblclick",l).on(s,"click",t.DomEvent.preventDefault).on(s,"click",r,a),s},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(t){t!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()},_onMainMapMoved:function(t){if(this._miniMapMoving)this._miniMapMoving=!1;else{var e=this.options.centerFixed||this._mainMap.getCenter();this._mainMapMoving=!0,this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())}this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(t){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(t){if(!this.options.centerFixed){var e=this._aimingRect.getBounds(),i=this._miniMap.latLngToContainerPoint(e.getSouthWest()),n=this._miniMap.latLngToContainerPoint(e.getNorthEast());this._lastAimingRectPosition={sw:i,ne:n}}},_onMiniMapMoving:function(e){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new t.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(t){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var t=this.options.zoomLevelFixed;return this._isDefined(t)&&this._isInteger(t)},_decideZoom:function(t){if(this._isZoomLevelFixed())return t?this.options.zoomLevelFixed:this._mainMap.getZoom();if(t)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var e,i=this._miniMap.getZoom()-this._mainMap.getZoom(),n=this._miniMap.getZoom()-this.options.zoomLevelOffset;return i>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(e=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):e=this._mainMap.getZoom():e=n,this._lastMiniMapZoom=this._miniMap.getZoom(),e},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(t){return"number"==typeof t},_isDefined:function(t){return void 0!==t},_onToggle:function(){t.Util.requestAnimFrame((function(){t.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this),t.Browser.any3d||t.Util.requestAnimFrame(this._fireToggleEvents,this)}),this)},_fireToggleEvents:function(){t.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var e={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",e),this.fire("toggle",e)}});return t.Map.mergeOptions({miniMapControl:!1}),t.Map.addInitHook((function(){this.options.miniMapControl&&(this.miniMapControl=(new e).addTo(this))})),e}),window)},627:function(){!function(){"use strict";var t=Symbol("newer"),e=Symbol("older"),i=function(t,e){"number"!=typeof t&&(e=t,t=0),this.size=0,this.limit=t,this.oldest=this.newest=void 0,this._keymap=new Map,e&&(this.assign(e),t<1&&(this.limit=this.size))};function n(i,n){this.key=i,this.value=n,this[t]=void 0,this[e]=void 0}function o(t){this.entry=t}function r(t){this.entry=t}function a(t){this.entry=t}i.prototype._markEntryAsUsed=function(i){i!==this.newest&&(i[t]&&(i===this.oldest&&(this.oldest=i[t]),i[t][e]=i[e]),i[e]&&(i[e][t]=i[t]),i[t]=void 0,i[e]=this.newest,this.newest&&(this.newest[t]=i),this.newest=i)},i.prototype.assign=function(i){var o,r=this.limit||Number.MAX_VALUE;this._keymap.clear();for(var a=i[Symbol.iterator](),s=a.next();!s.done;s=a.next()){var l=new n(s.value[0],s.value[1]);if(this._keymap.set(l.key,l),o?(o[t]=l,l[e]=o):this.oldest=l,o=l,0==r--)throw new Error("overflow")}this.newest=o,this.size=this._keymap.size},i.prototype.get=function(t){var e=this._keymap.get(t);if(e)return this._markEntryAsUsed(e),e.value},i.prototype.set=function(i,o){var r=this._keymap.get(i);return r?(r.value=o,this._markEntryAsUsed(r),this):(this._keymap.set(i,r=new n(i,o)),this.newest?(this.newest[t]=r,r[e]=this.newest):this.oldest=r,this.newest=r,++this.size,this.size>this.limit&&this.shift(),this)},i.prototype.shift=function(){var i=this.oldest;if(i)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[e]=void 0):(this.oldest=void 0,this.newest=void 0),i[t]=i[e]=void 0,this._keymap.delete(i.key),--this.size,[i.key,i.value]},i.prototype.find=function(t){var e=this._keymap.get(t);return e?e.value:void 0},i.prototype.has=function(t){return this._keymap.has(t)},i.prototype.delete=function(i){var n=this._keymap.get(i);if(n)return this._keymap.delete(n.key),n[t]&&n[e]?(n[e][t]=n[t],n[t][e]=n[e]):n[t]?(n[t][e]=void 0,this.oldest=n[t]):n[e]?(n[e][t]=void 0,this.newest=n[e]):this.oldest=this.newest=void 0,this.size--,n.value},i.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},i.prototype.keys=function(){return new r(this.oldest)},i.prototype.values=function(){return new a(this.oldest)},i.prototype.entries=function(){return this},i.prototype[Symbol.iterator]=function(){return new o(this.oldest)},i.prototype.forEach=function(e,i){"object"!=typeof i&&(i=this);for(var n=this.oldest;n;)e.call(i,n.value,n.key,this),n=n[t]},i.prototype.toJSON=function(){for(var e=new Array(this.size),i=0,n=this.oldest;n;)e[i++]={key:n.key,value:n.value},n=n[t];return e},i.prototype.toString=function(){for(var e="",i=this.oldest;i;)e+=String(i.key)+":"+i.value,(i=i[t])&&(e+=" < ");return e},o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){var e=this.entry;return e?(this.entry=e[t],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},r.prototype[Symbol.iterator]=function(){return this},r.prototype.next=function(){var e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.key}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){var e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.value}):{done:!0,value:void 0}},L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{maxZoom:21,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._tileCallbacks={},this._lru=new i(100),this._imagesPerTile="hybrid"===this.options.type?2:1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(t){var e,i,n,o,r=this;L.GridLayer.prototype.onAdd.call(this,t),this._initMutantContainer(),this._logoContainer&&t._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&t._controlCorners.bottomright.appendChild(this._attributionContainer),e=function(){r._map&&(r._initMutant(),google.maps.event.addListenerOnce(r._mutant,"idle",(function(){r._map&&(r._checkZoomLevels(),r._mutantIsReady=!0)})))},n=0,o=null,o=setInterval((function(){if(n>=20)throw clearInterval(o),new Error("window.google not found after 10 seconds");window.google&&window.google.maps&&window.google.maps.Map&&(clearInterval(o),e.call(i)),++n}),500)},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle")},addGoogleLayer:function(t,e){var i=this;return this._subLayers||(this._subLayers={}),this.whenReady((function(){var n=new(0,google.maps[t])(e);n.setMap(i._mutant),i._subLayers[t]=n})),this},removeGoogleLayer:function(t){var e=this;return this.whenReady((function(){var i=e._subLayers&&e._subLayers[t];i&&(i.setMap(null),delete e._subLayers[t])})),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.pointerEvents="none",this._mutantContainer.style.visibility="hidden",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);var t=this._mutantContainer.style;this._map.options.zoomSnap<1?(t.width="180%",t.height="180%"):(t.width="100%",t.height="100%"),t.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){if(!this._mutant){var t=new google.maps.Map(this._mutantContainer,{center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,styles:this.options.styles||[],backgroundColor:"transparent"});this._mutant=t,this._update(),this.fire("spawned",{mapObject:t}),this._waitControls(),this.once("controls_ready",this._setupAttribution)}},_attachObserver:function(t){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(t,{childList:!0,subtree:!0}),Array.prototype.forEach.call(t.querySelectorAll("img"),this._boundOnMutatedImage)},_waitControls:function(){var t=this,e=setInterval((function(){var i,n=t._mutant.__gm.layoutManager;n&&(clearInterval(e),Object.keys(n).forEach((function(t){var e=n[t];e.get&&e.get(1)instanceof Node&&(i=e)})),t.fire("controls_ready",{positions:i}))}),50)},_setupAttribution:function(t){var e=google.maps.ControlPosition,i=this._attributionContainer=t.positions.get(e.BOTTOM_RIGHT);L.DomUtil.addClass(i,"leaflet-control leaflet-control-attribution"),L.DomEvent.disableClickPropagation(i),i.style.height="14px",this._map._controlCorners.bottomright.appendChild(i),this._logoContainer=t.positions.get(e.BOTTOM_LEFT),this._logoContainer.style.pointerEvents="auto",this._map._controlCorners.bottomleft.appendChild(this._logoContainer)},_onMutations:function(t){for(var e=0;e<t.length;++e)for(var i=t[e],n=0;n<i.addedNodes.length;++n){var o=i.addedNodes[n];o instanceof HTMLImageElement?this._onMutatedImage(o):o instanceof HTMLElement&&Array.prototype.forEach.call(o.querySelectorAll("img"),this._boundOnMutatedImage)}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(t){var e,i=t.src.match(this._roadRegexp),n=0;if(i?(e={z:i[1],x:i[2],y:i[3]},this._imagesPerTile>1&&(t.style.zIndex=1,n=1)):((i=t.src.match(this._satRegexp))&&(e={x:i[1],y:i[2],z:i[3]}),n=0),e){var o=this._tileCoordsToKey(e);t.style.position="absolute";var r=o+"/"+n;this._lru.set(r,t),r in this._tileCallbacks&&this._tileCallbacks[r]&&(this._tileCallbacks[r].forEach((function(e){return e(t)})),delete this._tileCallbacks[r])}},createTile:function(t,e){var i=this._tileCoordsToKey(t),n=L.DomUtil.create("div");n.style.textAlign="left",n.dataset.pending=this._imagesPerTile,e=e.bind(this,null,n);for(var o=0;o<this._imagesPerTile;++o){var r=i+"/"+o,a=this._lru.get(r);a?(n.appendChild(this._clone(a)),--n.dataset.pending):(this._tileCallbacks[r]=this._tileCallbacks[r]||[],this._tileCallbacks[r].push(function(t){return function(i){t.appendChild(this._clone(i)),--t.dataset.pending,parseInt(t.dataset.pending)||e()}.bind(this)}.bind(this)(n)))}return parseInt(n.dataset.pending)||L.Util.requestAnimFrame(e),n},_clone:function(t){var e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){var t=this._map.getZoom(),e=this._mutant.getZoom();t&&e&&(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_update:function(t){if(this._mutant){t=t||this._map.getCenter();var e=new google.maps.LatLng(t.lat,t.lng),i=Math.round(this._map.getZoom()),n=this._mutant.getZoom();this._mutant.setCenter(e),i!==n&&(this._mutant.setZoom(i),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this,t)},whenReady:function(t,e){return this._mutant?t.call(e||this,{target:this}):this.on("spawned",t,e),this}}),L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)}}()},687:function(t,e,i){var n,o,r;
/*!
Copyright (c) 2016 Dominik Moritz

This file is part of the leaflet locate control. It is licensed under the MIT license.
You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
*/!function(a,s){o=[i(243)],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r),void 0!==s&&s.L&&(s.L.Control.Locate=a(L))}((function(t){const e=(e,i,n)=>{(n=n.split(" ")).forEach((function(n){t.DomUtil[e].call(this,i,n)}))},i=(t,i)=>e("addClass",t,i),n=(t,i)=>e("removeClass",t,i),o=t.Marker.extend({initialize(e,i){t.Util.setOptions(this,i),this._latlng=e,this.createIcon()},createIcon(){const e=this.options;let i="";void 0!==e.color&&(i+=`stroke:${e.color};`),void 0!==e.weight&&(i+=`stroke-width:${e.weight};`),void 0!==e.fillColor&&(i+=`fill:${e.fillColor};`),void 0!==e.fillOpacity&&(i+=`fill-opacity:${e.fillOpacity};`),void 0!==e.opacity&&(i+=`opacity:${e.opacity};`);const n=this._getIconSVG(e,i);this._locationIcon=t.divIcon({className:n.className,html:n.svg,iconSize:[n.w,n.h]}),this.setIcon(this._locationIcon)},_getIconSVG(t,e){const i=t.radius,n=i+t.weight,o=2*n;return{className:"leaflet-control-locate-location",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${o}" height="${o}" version="1.1" viewBox="-${n} -${n} ${o} ${o}"><circle r="`+i+'" style="'+e+'" /></svg>',w:o,h:o}},setStyle(e){t.Util.setOptions(this,e),this.createIcon()}}),r=o.extend({initialize(e,i,n){t.Util.setOptions(this,n),this._latlng=e,this._heading=i,this.createIcon()},setHeading(t){this._heading=t},_getIconSVG(t,e){const i=t.radius,n=t.width+t.weight,o=2*(i+t.depth+t.weight),r=`M0,0 l${t.width/2},${t.depth} l-${n},0 z`;return{className:"leaflet-control-locate-heading",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${n}" height="${o}" version="1.1" viewBox="-${n/2} 0 ${n} ${o}" style="${`transform: rotate(${this._heading}deg)`}"><path d="`+r+'" style="'+e+'" /></svg>',w:n,h:o}}}),a=t.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds(t){return t.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:o,compassClass:r,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"leaflet-control-locate-location-arrow",iconLoading:"leaflet-control-locate-spinner",iconElementTag:"span",textElementTag:"small",circlePadding:[0,0],metric:!0,createButtonCallback(e,i){const n=t.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",e);n.title=i.strings.title,n.href="#",n.setAttribute("role","button");const o=t.DomUtil.create(i.iconElementTag,i.icon,n);if(void 0!==i.strings.text){t.DomUtil.create(i.textElementTag,"leaflet-locate-text",n).textContent=i.strings.text,n.classList.add("leaflet-locate-text-active"),n.parentNode.style.display="flex",i.icon.length>0&&o.classList.add("leaflet-locate-icon")}return{link:n,icon:o}},onLocationError(t,e){alert(t.message)},onLocationOutsideMapBounds(t){t.stop(),alert(t.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize(e){for(const i in e)"object"==typeof this.options[i]?t.extend(this.options[i],e[i]):this.options[i]=e[i];this.options.followMarkerStyle=t.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=t.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=t.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd(e){const i=t.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=i,this._map=e,this._layer=this.options.layer||new t.LayerGroup,this._layer.addTo(e),this._event=void 0,this._compassHeading=null,this._prevBounds=null;const n=this.options.createButtonCallback(i,this.options);return this._link=n.link,this._icon=n.icon,t.DomEvent.on(this._link,"click",(function(e){t.DomEvent.stopPropagation(e),t.DomEvent.preventDefault(e),this._onClick()}),this).on(this._link,"dblclick",t.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),i},_onClick(){this._justClicked=!0;const t=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active){const e=this.options.clickBehavior;let i=e.outOfView;switch(this._map.getBounds().contains(this._event.latlng)&&(i=t?e.inView:e.inViewNotFollowing),e[i]&&(i=e[i]),i){case"setView":this.setView();break;case"stop":if(this.stop(),this.options.returnToPrevBounds){(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds)}}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate(){if(!this._active&&this._map&&(this._map.locate(this.options.locateOptions),this._map.fire("locateactivate",this),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),this.options.showCompass)){const e="ondeviceorientationabsolute"in window;if(e||"ondeviceorientation"in window){const i=this,n=function(){t.DomEvent.on(window,e?"deviceorientationabsolute":"deviceorientation",i._onDeviceOrientation,i)};DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(t){"granted"===t&&n()})):n()}}},_deactivate(){this._active&&this._map&&(this._map.stopLocate(),this._map.fire("locatedeactivate",this),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?t.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&t.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this)))},setView(){if(this._drawMarker(),this._isOutsideMapBounds())this._event=void 0,this.options.onLocationOutsideMapBounds(this);else if(this._justClicked&&!1!==this.options.initialZoomLevel)(e=this.options.flyTo?this._map.flyTo:this._map.setView).bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel);else if(this.options.keepCurrentZoomLevel){(e=this.options.flyTo?this._map.flyTo:this._map.panTo).bind(this._map)([this._event.latitude,this._event.longitude])}else{var e=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;this._ignoreEvent=!0,e.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.initialZoomLevel||this.options.locateOptions.maxZoom}),t.Util.requestAnimFrame((function(){this._ignoreEvent=!1}),this)}},_drawCompass(){if(!this._event)return;const t=this._event.latlng;if(this.options.showCompass&&t&&null!==this._compassHeading){const e=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle;this._compass?(this._compass.setLatLng(t),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(e)):this._compass=new this.options.compassClass(t,this._compassHeading,e).addTo(this._layer)}!this._compass||this.options.showCompass&&null!==this._compassHeading||(this._compass.removeFrom(this._layer),this._compass=null)},_drawMarker(){void 0===this._event.accuracy&&(this._event.accuracy=0);const e=this._event.accuracy,i=this._event.latlng;if(this.options.drawCircle){const n=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;this._circle?this._circle.setLatLng(i).setRadius(e).setStyle(n):this._circle=t.circle(i,e,n).addTo(this._layer)}let n,o;if(this.options.metric?(n=e.toFixed(0),o=this.options.strings.metersUnit):(n=(3.2808399*e).toFixed(0),o=this.options.strings.feetUnit),this.options.drawMarker){const t=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;this._marker?(this._marker.setLatLng(i),this._marker.setStyle&&this._marker.setStyle(t)):this._marker=new this.options.markerClass(i,t).addTo(this._layer)}this._drawCompass();const r=this.options.strings.popup;function a(){return"string"==typeof r?t.Util.template(r,{distance:n,unit:o}):"function"==typeof r?r({distance:n,unit:o}):r}this.options.showPopup&&r&&this._marker&&this._marker.bindPopup(a())._popup.setLatLng(i),this.options.showPopup&&r&&this._compass&&this._compass.bindPopup(a())._popup.setLatLng(i)},_removeMarker(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading(e){!isNaN(parseFloat(e))&&isFinite(e)?(e=Math.round(e),this._compassHeading=e,t.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration(){this._setCompassHeading()},_onDeviceOrientation(t){this._active&&(t.webkitCompassHeading?this._setCompassHeading(t.webkitCompassHeading):t.absolute&&t.alpha&&this._setCompassHeading(360-t.alpha))},_onLocationError(t){3==t.code&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(t,this))},_onLocationFound(t){if((!this._event||this._event.latlng.lat!==t.latlng.lat||this._event.latlng.lng!==t.latlng.lng||this._event.accuracy!==t.accuracy)&&this._active){switch(this._event=t,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":this._userPanned||this._userZoomed||this.setView();break;case"always":this.setView()}this._justClicked=!1}},_onDrag(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing(){return!!this._active&&("always"===this.options.setView||("untilPan"===this.options.setView?!this._userPanned:"untilPanOrZoom"===this.options.setView?!this._userPanned&&!this._userZoomed:void 0))},_isOutsideMapBounds(){return void 0!==this._event&&(this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng))},_updateContainerStyle(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses(t){"requesting"==t?(n(this._container,"active following"),i(this._container,"requesting"),n(this._icon,this.options.icon),i(this._icon,this.options.iconLoading)):"active"==t?(n(this._container,"requesting following"),i(this._container,"active"),n(this._icon,this.options.iconLoading),i(this._icon,this.options.icon)):"following"==t&&(n(this._container,"requesting"),i(this._container,"active following"),n(this._icon,this.options.iconLoading),i(this._icon,this.options.icon))},_cleanClasses(){t.DomUtil.removeClass(this._container,"requesting"),t.DomUtil.removeClass(this._container,"active"),t.DomUtil.removeClass(this._container,"following"),n(this._icon,this.options.iconLoading),i(this._icon,this.options.icon)},_resetVariables(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return t.control.locate=e=>new t.Control.Locate(e),a}),window)},732:function(t,e){!function(t){"use strict";var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t}),this):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t}),this)},addLayers:function(t,e){if(!L.Util.isArray(t))return this.addLayer(t);var i,n=this._featureGroup,o=this._nonPointGroup,r=this.options.chunkedLoading,a=this.options.chunkInterval,s=this.options.chunkProgress,l=t.length,c=0,h=!0;if(this._map){var u=(new Date).getTime(),p=L.bind((function(){var d=(new Date).getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();c<l&&!(r&&c%200==0&&(new Date).getTime()-d>a);c++)if((i=t[c])instanceof L.LayerGroup)h&&(t=t.slice(),h=!1),this._extractNonGroupLayers(i,t),l=t.length;else if(i.getLatLng){if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),e||this.fire("layeradd",{layer:i}),i.__parent&&2===i.__parent.getChildCount())){var m=i.__parent.getAllChildMarkers(),f=m[0]===i?m[1]:m[0];n.removeLayer(f)}}else o.addLayer(i),e||this.fire("layeradd",{layer:i});s&&s(c,l,(new Date).getTime()-u),c===l?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(p,this.options.chunkDelay)}),this);p()}else for(var d=this._needsClustering;c<l;c++)(i=t[c])instanceof L.LayerGroup?(h&&(t=t.slice(),h=!1),this._extractNonGroupLayers(i,t),l=t.length):i.getLatLng?this.hasLayer(i)||d.push(i):o.addLayer(i);return this},removeLayers:function(t){var e,i,n=t.length,o=this._featureGroup,r=this._nonPointGroup,a=!0;if(!this._map){for(e=0;e<n;e++)(i=t[e])instanceof L.LayerGroup?(a&&(t=t.slice(),a=!1),this._extractNonGroupLayers(i,t),n=t.length):(this._arraySplice(this._needsClustering,i),r.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var s=t.slice(),l=n;for(e=0;e<l;e++)(i=s[e])instanceof L.LayerGroup?(this._extractNonGroupLayers(i,s),l=s.length):this._unspiderfyLayer(i)}for(e=0;e<n;e++)(i=t[e])instanceof L.LayerGroup?(a&&(t=t.slice(),a=!1),this._extractNonGroupLayers(i,t),n=t.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),o.hasLayer(i)&&(o.removeLayer(i),i.clusterShow&&i.clusterShow())):(r.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer((function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent}),this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i,n,o,r=this._needsClustering.slice(),a=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(r),n=r.length-1;n>=0;n--){for(i=!0,o=a.length-1;o>=0;o--)if(a[o].layer===r[n]){i=!1;break}i&&t.call(e,r[n])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer((function(e){t.push(e)})),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer((function(i){L.stamp(i)===t&&(e=i)})),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(e=(i=this._needsRemoving).length-1;e>=0;e--)if(i[e].layer===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=this._map;"function"!=typeof e&&(e=function(){});var n=function(){!i.hasLayer(t)&&!i.hasLayer(t.__parent)||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),i.hasLayer(t)?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",n,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",n,this),this.on("animationend",n,this),t.__parent.zoomToBounds())},onAdd:function(t){var e,i,n;if(this._map=t,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,i=this._needsRemoving.length;e<i;e++)(n=this._needsRemoving[e]).newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],this._removeLayer(n.layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,e){for(var i=this._map,n=this._gridUnclustered,o=Math.floor(this._map.getMinZoom());e>=o&&n[e].removeObject(t,i.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,i){t._latlng=e,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart,e&&this._moveChild(t.target,e,t.target._latlng)},_removeLayer:function(t,e,i){var n=this._gridClusters,o=this._gridUnclustered,r=this._featureGroup,a=this._map,s=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var l,c=t.__parent,h=c._markers;for(this._arraySplice(h,t);c&&(c._childCount--,c._boundsNeedUpdate=!0,!(c._zoom<s));)e&&c._childCount<=1?(l=c._markers[0]===t?c._markers[1]:c._markers[0],n[c._zoom].removeObject(c,a.project(c._cLatLng,c._zoom)),o[c._zoom].addObject(l,a.project(l.getLatLng(),c._zoom)),this._arraySplice(c.__parent._childClusters,c),c.__parent._markers.push(l),l.__parent=c.__parent,c._icon&&(r.removeLayer(c),i||r.addLayer(l))):c._iconNeedsUpdate=!0,c=c.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return i+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,o=this.options.spiderfyOnEveryZoom;(e||n||o)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){var e=t.layer,i=e;if("clusterkeypress"!==t.type||!t.originalEvent||13===t.originalEvent.keyCode){for(;1===i._childClusters.length;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),this.options.spiderfyOnEveryZoom&&e.spiderfy(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()}},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this.options.spiderfyOnEveryZoom,o=this._map;(t||i||n)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),o.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n=i;"function"!=typeof i&&(n=function(){return i}),null!==this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var o=t;o>=e;o--)this._gridClusters[o]=new L.DistanceGrid(n(o)),this._gridUnclustered[o]=new L.DistanceGrid(n(o));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i,n,o=this._gridClusters,r=this._gridUnclustered,a=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);e>=a;e--){i=this._map.project(t.getLatLng(),e);var s=o[e].getNearObject(i);if(s)return s._addChild(t),void(t.__parent=s);if(s=r[e].getNearObject(i)){var l=s.__parent;l&&this._removeLayer(s,!1);var c=new this._markerCluster(this,e,s,t);o[e].addObject(c,this._map.project(c._cLatLng,e)),s.__parent=c,t.__parent=c;var h=c;for(n=e-1;n>l._zoom;n--)h=new this._markerCluster(this,n,h),o[n].addObject(h,this._map.project(s.getLatLng(),n));return l._addChild(h),void this._removeFromGridUnclustered(s,e)}r[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer((function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()}))},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return void 0!==e&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var i,n=t.getLayers(),o=0;for(e=e||[];o<n.length;o++)(i=n[o])instanceof L.LayerGroup?this._extractNonGroupLayers(i,e):e.push(i);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var i,n=this._getExpandedVisibleBounds(),o=this._featureGroup,r=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(n,t,r,(function(r){var a,s=r._latlng,l=r._markers;for(n.contains(s)||(s=null),r._isSingleParent()&&t+1===e?(o.removeLayer(r),r._recursivelyAddChildrenToMap(null,e,n)):(r.clusterHide(),r._recursivelyAddChildrenToMap(s,e,n)),i=l.length-1;i>=0;i--)a=l[i],n.contains(a._latlng)||o.removeLayer(a)})),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(n,e),o.eachLayer((function(t){t instanceof L.MarkerCluster||!t._icon||t.clusterShow()})),this._topClusterLevel._recursively(n,t,e,(function(t){t._recursivelyRestoreChildPositions(e)})),this._ignoreMove=!1,this._enqueue((function(){this._topClusterLevel._recursively(n,t,r,(function(t){o.removeLayer(t),t.clusterShow()})),this._animationEnd()}))},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue((function(){n.removeLayer(t),t.clusterShow(),i._animationEnd()}))):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,i){var n=this._getExpandedVisibleBounds(),o=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(n,o,e+1,i);var r=this;this._forceLayout(),t._recursivelyBecomeVisible(n,i),this._enqueue((function(){if(1===t._childCount){var a=t._markers[0];this._ignoreMove=!0,a.setLatLng(a.getLatLng()),this._ignoreMove=!1,a.clusterShow&&a.clusterShow()}else t._recursively(n,i,o,(function(t){t._recursivelyRemoveChildrenFromMap(n,o,e+1)}));r._animationEnd()}))},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var i=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i].getAllChildMarkers(t,e);for(var n=this._markers.length-1;n>=0;n--)e&&this._markers[n].__dragStart||t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e,i=this._childClusters.slice(),n=this._group._map,o=n.getBoundsZoom(this._bounds),r=this._zoom+1,a=n.getZoom();i.length>0&&o>r;){r++;var s=[];for(e=0;e<i.length;e++)s=s.concat(i[e]._childClusters);i=s}o>r?this._group._map.setView(this._latlng,r):o<=a?this._group._map.setView(this._latlng,a+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,i,n,o=this._markers,r=this._childClusters,a=0,s=0,l=this._childCount;if(0!==l){for(this._resetBounds(),t=0;t<o.length;t++)i=o[t]._latlng,this._bounds.extend(i),a+=i.lat,s+=i.lng;for(t=0;t<r.length;t++)(e=r[t])._boundsNeedUpdate&&e._recalculateBounds(),this._bounds.extend(e._bounds),i=e._wLatLng,n=e._childCount,a+=i.lat*n,s+=i.lng*n;this._latlng=this._wLatLng=new L.LatLng(a/l,s/l),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,this._group._map.getMinZoom(),i-1,(function(t){var i,n,o=t._markers;for(i=o.length-1;i>=0;i--)(n=o[i])._icon&&(n._setPos(e),n.clusterHide())}),(function(t){var i,n,o=t._childClusters;for(i=o.length-1;i>=0;i--)(n=o[i])._icon&&(n._setPos(e),n.clusterHide())}))},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i,n){this._recursively(t,n,e,(function(o){o._recursivelyAnimateChildrenIn(t,o._group._map.latLngToLayerPoint(o.getLatLng()).round(),i),o._isSingleParent()&&i-1===n?(o.clusterShow(),o._recursivelyRemoveChildrenFromMap(t,e,i)):o.clusterHide(),o._addToMap()}))},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,(function(t){t.clusterShow()}))},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,this._group._map.getMinZoom()-1,e,(function(n){if(e!==n._zoom)for(var o=n._markers.length-1;o>=0;o--){var r=n._markers[o];i.contains(r._latlng)&&(t&&(r._backupLatlng=r.getLatLng(),r.setLatLng(t),r.clusterHide&&r.clusterHide()),n._group._featureGroup.addLayer(r))}}),(function(e){e._addToMap(t)}))},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var o=this._childClusters.length-1;o>=0;o--)this._childClusters[o]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i,n){var o,r;this._recursively(t,e-1,i-1,(function(t){for(r=t._markers.length-1;r>=0;r--)o=t._markers[r],n&&n.contains(o._latlng)||(t._group._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow())}),(function(t){for(r=t._childClusters.length-1;r>=0;r--)o=t._childClusters[r],n&&n.contains(o._latlng)||(t._group._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow())}))},_recursively:function(t,e,i,n,o){var r,a,s=this._childClusters,l=this._zoom;if(e<=l&&(n&&n(this),o&&l===i&&o(this)),l<e||l<i)for(r=s.length-1;r>=0;r--)(a=s[r])._boundsNeedUpdate&&a._recalculateBounds(),t.intersects(a._bounds)&&a._recursively(t,e,i,n,o)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),o=this._grid,r=o[n]=o[n]||{},a=r[i]=r[i]||[],s=L.Util.stamp(t);this._objectPoint[s]=e,a.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,n,o=this._getCoord(e.x),r=this._getCoord(e.y),a=this._grid,s=a[r]=a[r]||{},l=s[o]=s[o]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,n=l.length;i<n;i++)if(l[i]===t)return l.splice(i,1),1===n&&delete s[o],!0},eachObject:function(t,e){var i,n,o,r,a,s,l=this._grid;for(i in l)for(n in a=l[i])for(o=0,r=(s=a[n]).length;o<r;o++)t.call(e,s[o])&&(o--,r--)},getNearObject:function(t){var e,i,n,o,r,a,s,l,c=this._getCoord(t.x),h=this._getCoord(t.y),u=this._objectPoint,p=this._sqCellSize,d=null;for(e=h-1;e<=h+1;e++)if(o=this._grid[e])for(i=c-1;i<=c+1;i++)if(r=o[i])for(n=0,a=r.length;n<a;n++)s=r[n],((l=this._sqDist(u[L.Util.stamp(s)],t))<p||l<=p&&null===d)&&(p=l,d=s);return d},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i,n,o,r=0,a=null,s=[];for(i=e.length-1;i>=0;i--)n=e[i],(o=this.getDistant(n,t))>0&&(s.push(n),o>r&&(r=o,a=n));return{maxPoint:a,newPoints:s}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);return n.maxPoint?i=(i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints))).concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints)):[t[0]]},getConvexHull:function(t){var e,i=!1,n=!1,o=!1,r=!1,a=null,s=null,l=null,c=null,h=null,u=null;for(e=t.length-1;e>=0;e--){var p=t[e];(!1===i||p.lat>i)&&(a=p,i=p.lat),(!1===n||p.lat<n)&&(s=p,n=p.lat),(!1===o||p.lng>o)&&(l=p,o=p.lng),(!1===r||p.lng<r)&&(c=p,r=p.lng)}return n!==i?(u=s,h=a):(u=c,h=l),[].concat(this.buildConvexHull([u,h],t),this.buildConvexHull([h,u],t))}},L.MarkerCluster.include({getConvexHull:function(){var t,e,i=this.getAllChildMarkers(),n=[];for(e=i.length-1;e>=0;e--)t=i[e].getLatLng(),n.push(t);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(null,!0),i=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?t=this._group.options.spiderfyShapePositions(e.length,i):e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,i):(i.y+=10,t=this._generatePointsCircle(e.length,i)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,n,o=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,r=this._2PI/t,a=[];for(o=Math.max(o,35),a.length=t,i=0;i<t;i++)n=this._circleStartAngle+i*r,a[i]=new L.Point(e.x+o*Math.cos(n),e.y+o*Math.sin(n))._round();return a},_generatePointsSpiral:function(t,e){var i,n=this._group.options.spiderfyDistanceMultiplier,o=n*this._spiralLengthStart,r=n*this._spiralFootSeparation,a=n*this._spiralLengthFactor*this._2PI,s=0,l=[];for(l.length=t,i=t;i>=0;i--)i<t&&(l[i]=new L.Point(e.x+o*Math.cos(s),e.y+o*Math.sin(s))._round()),o+=a/(s+=r/o+5e-4*i);return l},_noanimationUnspiderfy:function(){var t,e,i=this._group,n=i._map,o=i._featureGroup,r=this.getAllChildMarkers(null,!0);for(i._ignoreMove=!0,this.setOpacity(1),e=r.length-1;e>=0;e--)t=r[e],o.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(n.removeLayer(t._spiderLeg),delete t._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:r}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i,n,o,r,a=this._group,s=a._map,l=a._featureGroup,c=this._group.options.spiderLegPolylineOptions;for(a._ignoreMove=!0,i=0;i<t.length;i++)r=s.layerPointToLatLng(e[i]),n=t[i],o=new L.Polyline([this._latlng,r],c),s.addLayer(o),n._spiderLeg=o,n._preSpiderfyLatlng=n._latlng,n.setLatLng(r),n.setZIndexOffset&&n.setZIndexOffset(1e6),l.addLayer(n);this.setOpacity(.3),a._ignoreMove=!1,a.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i,n,o,r,a,s,l=this,c=this._group,h=c._map,u=c._featureGroup,p=this._latlng,d=h.latLngToLayerPoint(p),m=L.Path.SVG,f=L.extend({},this._group.options.spiderLegPolylineOptions),g=f.opacity;for(void 0===g&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),m?(f.opacity=0,f.className=(f.className||"")+" leaflet-cluster-spider-leg"):f.opacity=g,c._ignoreMove=!0,i=0;i<t.length;i++)n=t[i],s=h.layerPointToLatLng(e[i]),o=new L.Polyline([p,s],f),h.addLayer(o),n._spiderLeg=o,m&&(a=(r=o._path).getTotalLength()+.1,r.style.strokeDasharray=a,r.style.strokeDashoffset=a),n.setZIndexOffset&&n.setZIndexOffset(1e6),n.clusterHide&&n.clusterHide(),u.addLayer(n),n._setPos&&n._setPos(d);for(c._forceLayout(),c._animationStart(),i=t.length-1;i>=0;i--)s=h.layerPointToLatLng(e[i]),(n=t[i])._preSpiderfyLatlng=n._latlng,n.setLatLng(s),n.clusterShow&&n.clusterShow(),m&&((r=(o=n._spiderLeg)._path).style.strokeDashoffset=0,o.setStyle({opacity:g}));this.setOpacity(.3),c._ignoreMove=!1,setTimeout((function(){c._animationEnd(),c.fire("spiderfied",{cluster:l,markers:t})}),200)},_animationUnspiderfy:function(t){var e,i,n,o,r,a,s=this,l=this._group,c=l._map,h=l._featureGroup,u=t?c._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):c.latLngToLayerPoint(this._latlng),p=this.getAllChildMarkers(null,!0),d=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),i=p.length-1;i>=0;i--)(e=p[i])._preSpiderfyLatlng&&(e.closePopup(),e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,a=!0,e._setPos&&(e._setPos(u),a=!1),e.clusterHide&&(e.clusterHide(),a=!1),a&&h.removeLayer(e),d&&(r=(o=(n=e._spiderLeg)._path).getTotalLength()+.1,o.style.strokeDashoffset=r,n.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout((function(){var t=0;for(i=p.length-1;i>=0;i--)(e=p[i])._spiderLeg&&t++;for(i=p.length-1;i>=0;i--)(e=p[i])._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),t>1&&h.removeLayer(e),c.removeLayer(e._spiderLeg),delete e._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:s,markers:p})}),200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t)for(i=t[e].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t)i=t[e],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=e,t.MarkerCluster=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},728:function(t,e,i){var n,o,r;o=[i(243)],void 0===(r="function"==typeof(n=function(t){var e="polyline-measure-control",i="polyline-measure-unicode-icon";return t.Control.PolylineMeasure=t.Control.extend({options:{position:"topleft",unit:"metres",clearMeasurementsOnStop:!0,showBearings:!1,bearingTextIn:"In",bearingTextOut:"Out",tooltipTextFinish:"Click to <b>finish line</b><br>",tooltipTextDelete:"Press SHIFT-key and click to <b>delete point</b>",tooltipTextMove:"Click and drag to <b>move point</b><br>",tooltipTextResume:"<br>Press CTRL-key and click to <b>resume line</b>",tooltipTextAdd:"Press CTRL-key and click to <b>add point</b>",measureControlTitleOn:"Turn on PolylineMeasure",measureControlTitleOff:"Turn off PolylineMeasure",measureControlLabel:"&#8614;",measureControlClasses:[],showClearControl:!1,clearControlTitle:"Clear Measurements",clearControlLabel:"&times;",clearControlClasses:[],showUnitControl:!1,distanceShowSameUnit:!1,unitControlTitle:{text:"Change Units",metres:"metres",landmiles:"land miles",nauticalmiles:"nautical miles"},unitControlLabel:{metres:"m",kilometres:"km",feet:"ft",landmiles:"mi",nauticalmiles:"nm"},tempLine:{color:"#00f",weight:2},fixedLine:{color:"#006",weight:2},startCircle:{color:"#000",weight:1,fillColor:"#0f0",fillOpacity:1,radius:3},intermedCircle:{color:"#000",weight:1,fillColor:"#ff0",fillOpacity:1,radius:3},currentCircle:{color:"#000",weight:1,fillColor:"#f0f",fillOpacity:1,radius:6},endCircle:{color:"#000",weight:1,fillColor:"#f00",fillOpacity:1,radius:3}},_arcpoints:100,_circleNr:-1,_lineNr:-1,_createControl:function(e,i,n,o,r,a){var s=document.createElement("a");return s.innerHTML=e,s.setAttribute("title",i),n.forEach((function(t){s.classList.add(t)})),t.DomEvent.on(s,"click",r,a),o.appendChild(s),s},onAdd:function(n){var o=this;n.on("movestart ",(function(){o._mapdragging=!0})),this._container=document.createElement("div"),this._container.classList.add("leaflet-bar"),t.DomEvent.disableClickPropagation(this._container);var r=this.options.measureControlTitleOn,a=this.options.measureControlLabel,s=this.options.measureControlClasses;return-1!=a.indexOf("&")&&s.push(i),this._arrPolylines=[],this._measureControl=this._createControl(a,r,s,this._container,this._toggleMeasure,this),this._defaultControlBgColor=this._measureControl.style.backgroundColor,this._measureControl.setAttribute("id",e),this.options.showClearControl&&(r=this.options.clearControlTitle,a=this.options.clearControlLabel,s=this.options.clearControlClasses,-1!=a.indexOf("&")&&s.push(i),this._clearMeasureControl=this._createControl(a,r,s,this._container,this._clearAllMeasurements,this),this._clearMeasureControl.classList.add("polyline-measure-clearControl")),this.options.showUnitControl&&("metres"==this.options.unit?(a=this.options.unitControlLabel.metres,r=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]"):"landmiles"==this.options.unit?(a=this.options.unitControlLabel.landmiles,r=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]"):(a=this.options.unitControlLabel.nauticalmiles,r=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]"),s=[],this._unitControl=this._createControl(a,r,s,this._container,this._changeUnit,this),this._unitControl.setAttribute("id","unitControlId")),this._container},onRemove:function(){this._measuring&&this._toggleMeasure()},_saveNonpolylineEvents:function(){this._nonpolylineTargets=this._map._targets,void 0!==this._polylineTargets?this._map._targets=this._polylineTargets:this._map._targets={}},_savePolylineEvents:function(){this._polylineTargets=this._map._targets,this._map._targets=this._nonpolylineTargets},_toggleMeasure:function(){this._measuring=!this._measuring,this._measuring?(this._mapdragging=!1,this._saveNonpolylineEvents(),this._measureControl.classList.add("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this.options.backgroundColor,this._measureControl.title=this.options.measureControlTitleOff,this._oldCursor=this._map._container.style.cursor,this._map._container.style.cursor="crosshair",this._doubleClickZoom=this._map.doubleClickZoom.enabled(),this._map.doubleClickZoom.disable(),this._layerPaint||(this._layerPaint=t.layerGroup().addTo(this._map)),this._map.on("mousemove",this._mouseMove,this),this._map.on("click",this._mouseClick,this),t.DomEvent.on(document,"keydown",this._onKeyDown,this),this._resetPathVariables()):(this._savePolylineEvents(),this._measureControl.classList.remove("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this._defaultControlBgColor,this._measureControl.title=this.options.measureControlTitleOn,this._map._container.style.cursor=this._oldCursor,this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.off("mouseup",this._dragCircleMouseup,this),t.DomEvent.off(document,"keydown",this._onKeyDown,this),this._doubleClickZoom&&this._map.doubleClickZoom.enable(),this.options.clearMeasurementsOnStop&&this._layerPaint&&this._clearAllMeasurements(),0!==this._cntCircle&&this._finishPolylinePath()),this._map.fire("polylinemeasure:toggle",{sttus:this._measuring})},_clearAllMeasurements:function(){void 0!==this._cntCircle&&0!==this._cntCircle&&this._finishPolylinePath(),this._layerPaint&&this._layerPaint.clearLayers(),this._arrPolylines=[],this._map.fire("polylinemeasure:clear")},_changeUnit:function(){"metres"==this.options.unit?(this.options.unit="landmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.landmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]"):"landmiles"==this.options.unit?(this.options.unit="nauticalmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.nauticalmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]"):(this.options.unit="metres",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.metres,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]"),this._currentLine&&this._computeDistance(this._currentLine),this._arrPolylines.map(this._computeDistance.bind(this))},_computeDistance:function(t){var e=0;t.circleCoords.map(function(i,n){if(n>=1){var o=t.circleCoords[n-1].distanceTo(t.circleCoords[n]);e+=o,this._updateTooltip(t.tooltips[n],t.tooltips[n-1],e,o,t.circleCoords[n-1],t.circleCoords[n])}}.bind(this))},_onKeyDown:function(t){if(27===t.keyCode){if(!0===this._resumeFirstpointFlag){this._resumeFirstpointFlag=!1;var e=this._lineNr;this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._layerPaint.removeLayer(this._tooltipNew),this._arrPolylines[e].circleMarkers[0].setStyle(this.options.startCircle);var i="",n=0;return!0===this.options.showBearings&&(i=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),i+='<div class="polyline-measure-tooltip-difference">+0</div>',i+='<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[e].tooltips[0]._icon.innerHTML=i,this._arrPolylines[e].tooltips.map(function(t,i){if(i>=1){var o=this._arrPolylines[e].circleCoords[i-1].distanceTo(this._arrPolylines[e].circleCoords[i]),r=this._arrPolylines[e].circleCoords[i-1],a=this._arrPolylines[e].circleCoords[i];n+=o;var s=this._arrPolylines[e].tooltips[i-1];this._updateTooltip(t,s,n,o,r,a)}}.bind(this)),void this._map.on("mousemove",this._mouseMove,this)}this._currentLine?this._finishPolylinePath(t):this._toggleMeasure()}},_getDistance:function(t){var e,i=t;return"nauticalmiles"===this.options.unit?(e=this.options.unitControlLabel.nauticalmiles,i>=185200?i=(i/1852).toFixed(0):i>=18520?i=(i/1852).toFixed(1):i>=1852?i=(i/1852).toFixed(2):this.options.distanceShowSameUnit?i=(i/1852).toFixed(3):(i=(i/.3048).toFixed(0),e=this.options.unitControlLabel.feet)):"landmiles"===this.options.unit?(e=this.options.unitControlLabel.landmiles,i>=160934.4?i=(i/1609.344).toFixed(0):i>=16093.44?i=(i/1609.344).toFixed(1):i>=1609.344?i=(i/1609.344).toFixed(2):this.options.distanceShowSameUnit?i=(i/1609.344).toFixed(3):(i=(i/.3048).toFixed(0),e=this.options.unitControlLabel.feet)):(e=this.options.unitControlLabel.kilometres,i>=1e5?i=(i/1e3).toFixed(0):i>=1e4?i=(i/1e3).toFixed(1):i>=1e3?i=(i/1e3).toFixed(2):this.options.distanceShowSameUnit?i=(i/1e3).toFixed(3):(i=i.toFixed(0),e=this.options.unitControlLabel.metres)),{value:i,unit:e}},_polylineArc:function(t,e){function i(t){var e=Math.sin((1-t)*l)/Math.sin(l),i=Math.sin(t*l)/Math.sin(l),n=e*Math.cos(o)*Math.cos(r)+i*Math.cos(a)*Math.cos(s),c=e*Math.cos(o)*Math.sin(r)+i*Math.cos(a)*Math.sin(s),h=e*Math.sin(o)+i*Math.sin(a),u=180/Math.PI*Math.atan2(h,Math.sqrt(Math.pow(n,2)+Math.pow(c,2))),p=180/Math.PI*Math.atan2(c,n),d=p-180*r/Math.PI;function m(t){return Math[t>0?"floor":"ceil"](t)}return[u,p-=d<0?360*m((d-180)/360):360*m((d+180)/360)]}function n(t){for(var e=[],n=1/(t-1),o=0;o<t;o++){var r=i(n*o);e.push(r)}return e}var o=t.lat,r=t.lng,a=e.lat,s=e.lng;o=o*Math.PI/180,r=r*Math.PI/180,a=a*Math.PI/180,s=s*Math.PI/180;var l=2*Math.asin(Math.sqrt(Math.pow(Math.sin((o-a)/2),2)+Math.cos(o)*Math.cos(a)*Math.pow(Math.sin((r-s)/2),2)));return 0===l?[[o,r]]:n(this._arcpoints)},_updateTooltip:function(t,e,i,n,o,r){var a=function(t,e,i){var n=t.lat/180*Math.PI,o=e.lat/180*Math.PI,r=t.lng/180*Math.PI,a=e.lng/180*Math.PI,s=Math.sin(a-r)*Math.cos(o),l=Math.cos(n)*Math.sin(o)-Math.sin(n)*Math.cos(o)*Math.cos(a-r);if("inbound"===i)var c=(180*Math.atan2(s,l)/Math.PI+180).toFixed(0);else c=(180*Math.atan2(s,l)/Math.PI+360).toFixed(0);return c%360},s=a(r,o,"inbound"),l=a(o,r,"outbound"),c=this._getDistance(i),h=this._getDistance(n),u="";if(h.value>0&&(!0===this.options.showBearings&&(u=this.options.bearingTextIn+": "+s+"°<br>"+this.options.bearingTextOut+":---°"),u+='<div class="polyline-measure-tooltip-difference">+'+h.value+"&nbsp;"+h.unit+"</div>"),u+='<div class="polyline-measure-tooltip-total">'+c.value+"&nbsp;"+c.unit+"</div>",t._icon.innerHTML=u,!0===this.options.showBearings&&e){var p=e._icon.innerHTML,d=new RegExp(this.options.bearingTextOut+".*°"),m=p.replace(d,this.options.bearingTextOut+": "+l+"°");e._icon.innerHTML=m}},_drawArrow:function(e){var i=Math.round(e.length/2),n=e[i-1],o=e[i],r=o[1]-n[1],a=o[0]-n[0],s=[n[0]+a/2,n[1]+r/2],l=57.29578*-Math.atan2(a,r),c=t.divIcon({className:"",iconSize:[16,16],iconAnchor:[8,8],html:"<div style = 'font-size: 16px; line-height: 16px; vertical-align:top; transform: rotate("+l+"deg)'>&#x27a4;</div>"}),h=t.marker(s,{icon:c,zIndexOffset:-50}).addTo(this._layerPaint);return this._currentLine||h.bindTooltip(this.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),h.on("click",this._clickedArrow,this),h},_mouseMove:function(t){var e=t.latlng;if(this._map.on("click",this._mouseClick,this),e&&this._currentLine){var i=this._currentLine.circleCoords.last();this._rubberlinePath.setLatLngs(this._polylineArc(i,e));var n=this._currentLine.tooltips.last(),o=this._currentLine.tooltips.slice(-2,-1)[0];n.setLatLng(e);var r=e.distanceTo(i);this._updateTooltip(n,o,this._currentLine.distance+r,r,i,e)}},_startLine:function(e){var i=t.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),n=function(){return this.slice(-1)[0]};this._rubberlinePath=t.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack();var o=this;this._currentLine={id:0,circleCoords:[],circleMarkers:[],arrowMarkers:[],tooltips:[],distance:0,polylinePath:t.polyline([],{color:this.options.fixedLine.color,weight:this.options.fixedLine.weight,interactive:!1}).addTo(this._layerPaint).bringToBack(),handleMarkers:function(e){var i=this.circleMarkers.last();i&&(i.bindTooltip(o.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),i.off("click",o._finishPolylinePath,o),1===this.circleMarkers.length?i.setStyle(o.options.startCircle):i.setStyle(o.options.intermedCircle));var n=new t.CircleMarker(e,o.options.currentCircle).addTo(o._layerPaint);n.bindTooltip(o.options.tooltipTextFinish+o.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),n.cntLine=o._currentLine.id,n.cntCircle=o._cntCircle,o._cntCircle++,n.on("mousedown",o._dragCircle,o),n.on("click",o._finishPolylinePath,o),this.circleMarkers.push(n)},getNewToolTip:function(e){return t.marker(e,{icon:i,interactive:!1})},addPoint:function(t){var e=this.circleCoords.last();if(!e||!e.equals(t)){if(this.circleCoords.push(t),this.circleCoords.length>1){var i=o._polylineArc(e,t);this.circleCoords.length>2&&i.shift(),this.polylinePath.setLatLngs(this.polylinePath.getLatLngs().concat(i));var n=o._drawArrow(i);n.cntLine=o._currentLine.id,n.cntArrow=o._cntCircle-1,o._currentLine.arrowMarkers.push(n);var r=e.distanceTo(t);this.distance+=r;var a=o._currentLine.tooltips.last(),s=o._currentLine.tooltips.slice(-1,-2)[0];o._updateTooltip(a,s,this.distance,r,e,t)}a&&a.setLatLng(t);var l=this.getNewToolTip(t);l.addTo(o._layerPaint),this.tooltips.push(l),this.handleMarkers(t)}},finalize:function(){if(o._layerPaint.removeLayer(this.tooltips.last()),this.tooltips.pop(),o._layerPaint.removeLayer(o._rubberlinePath),this.circleCoords.length>1){this.tooltips.last()._icon.classList.add("polyline-measure-tooltip-end");var t=this.circleMarkers.last();t.setStyle(o.options.endCircle),t.unbindTooltip(),o._currentLine.circleMarkers.map((function(t){t.bindTooltip(o.options.tooltipTextMove+o.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})})),o._currentLine.circleMarkers[0].bindTooltip(o.options.tooltipTextMove+o.options.tooltipTextDelete+o.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),t.bindTooltip(o.options.tooltipTextMove+o.options.tooltipTextDelete+o.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),o._currentLine.arrowMarkers.map((function(t){t.bindTooltip(o.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})})),t.off("click",o._finishPolylinePath,o),t.on("click",o._resumePolylinePath,o),o._arrPolylines.push(this)}else o._layerPaint.removeLayer(this.circleMarkers.last()),o._layerPaint.removeLayer(this.tooltips.last());o._resetPathVariables()}};var r=t.marker(e,{icon:i,interactive:!1});r.addTo(this._layerPaint);var a="";!0===this.options.showBearings&&(a=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),a+='<div class="polyline-measure-tooltip-difference">+0</div>',a+='<div class="polyline-measure-tooltip-total">0</div>',r._icon.innerHTML=a,this._currentLine.tooltips.push(r),this._currentLine.circleCoords.last=n,this._currentLine.tooltips.last=n,this._currentLine.circleMarkers.last=n,this._currentLine.id=this._arrPolylines.length},_mouseClick:function(t){!t.latlng||this._finishCircleScreencoords&&this._finishCircleScreencoords.equals(t.containerPoint)||(this._currentLine||this._mapdragging||(this._startLine(t.latlng),this._map.fire("polylinemeasure:start",this._currentLine)),this._mapdragging?this._mapdragging=!1:(this._currentLine.addPoint(t.latlng),this._map.fire("polylinemeasure:add",t),this._map.fire("polylinemeasure:change",this._currentLine)))},_finishPolylinePath:function(t){this._map.fire("polylinemeasure:finish",this._currentLine),this._currentLine.finalize(),t&&(this._finishCircleScreencoords=t.containerPoint)},_resumePolylinePath:function(e){if(!0===e.originalEvent.ctrlKey){this._currentLine=this._arrPolylines[e.target.cntLine],this._rubberlinePath=t.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._currentLine.tooltips.last()._icon.classList.remove("polyline-measure-tooltip-end");var i=this._currentLine.getNewToolTip(e.latlng);i.addTo(this._layerPaint),this._currentLine.tooltips.push(i),this._currentLine.circleMarkers.last().unbindTooltip(),this._currentLine.circleMarkers.last().bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.last().setStyle(this.options.currentCircle),this._cntCircle=this._currentLine.circleCoords.length,this._map.fire("polylinemeasure:resume",this._currentLine)}},_resetPathVariables:function(){this._cntCircle=0,this._currentLine=null},_clickedArrow:function(e){if(e.originalEvent.ctrlKey){var i=e.target.cntLine,n=e.target.cntArrow;this._arrPolylines[i].arrowMarkers[n].removeFrom(this._layerPaint);var o=new t.CircleMarker(e.latlng,this.options.intermedCircle).addTo(this._layerPaint);o.cntLine=i,o.on("mousedown",this._dragCircle,this),o.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[i].circleMarkers.splice(n+1,0,o),this._arrPolylines[i].circleMarkers.map((function(t,e){t.cntCircle=e})),this._arrPolylines[i].circleCoords.splice(n+1,0,e.latlng),lineCoords=this._arrPolylines[i].polylinePath.getLatLngs();var r=this._polylineArc(this._arrPolylines[i].circleCoords[n],e.latlng);r.pop();var a=this._polylineArc(e.latlng,this._arrPolylines[i].circleCoords[n+2]);Array.prototype.splice.apply(lineCoords,[n*(this._arcpoints-1),this._arcpoints].concat(r,a)),this._arrPolylines[i].polylinePath.setLatLngs(lineCoords);var s=this._drawArrow(r);this._arrPolylines[i].arrowMarkers[n]=s,s=this._drawArrow(a),this._arrPolylines[i].arrowMarkers.splice(n+1,0,s),this._arrPolylines[i].arrowMarkers.map((function(t,e){t.cntLine=i,t.cntArrow=e})),this._tooltipNew=t.marker(e.latlng,{icon:t.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint),this._arrPolylines[i].tooltips.splice(n+1,0,this._tooltipNew);var l=0;this._arrPolylines[i].tooltips.map(function(t,e){if(e>=1){var n=this._arrPolylines[i].circleCoords[e-1].distanceTo(this._arrPolylines[i].circleCoords[e]),o=this._arrPolylines[i].circleCoords[e-1],r=this._arrPolylines[i].circleCoords[e];l+=n;var a=this._arrPolylines[i].tooltips[e-1];this._updateTooltip(t,a,l,n,o,r)}}.bind(this)),this._map.fire("polylinemeasure:insert",e),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])}},_dragCircleMouseup:function(){0===this._circleNr||this._circleNr===this._arrPolylines[this._lineNr].circleCoords.length-1?this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}):this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._resetPathVariables(),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.dragging.enable(),this._map.on("mousemove",this._mouseMove,this),this._map.off("mouseup",this._dragCircleMouseup,this),this._map.fire("polylinemeasure:move",this._e1),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])},_dragCircleMousemove:function(e){var i=e.latlng.lat,n=e.latlng.lng,o=i-this._mouseStartingLat,r=n-this._mouseStartingLng,a=t.latLng(this._circleStartingLat+o,this._circleStartingLng+r),s=this._arcpoints,l=this._e1.target.cntLine;this._lineNr=l;var c=this._e1.target.cntCircle;this._circleNr=c,this._e1.target.setLatLng(a),this._e1.target.unbindTooltip(),this._arrPolylines[l].circleCoords[c]=a;var h=this._arrPolylines[l].polylinePath.getLatLngs();if(c>=1){var u=this._polylineArc(this._arrPolylines[l].circleCoords[c-1],a);Array.prototype.splice.apply(h,[(c-1)*(s-1),s].concat(u));var p=this._drawArrow(u);p.cntLine=l,p.cntArrow=c-1,this._arrPolylines[l].arrowMarkers[c-1].removeFrom(this._layerPaint),this._arrPolylines[l].arrowMarkers[c-1]=p}if(c<this._arrPolylines[l].circleCoords.length-1){var d=this._polylineArc(a,this._arrPolylines[l].circleCoords[c+1]);Array.prototype.splice.apply(h,[c*(s-1),s].concat(d)),(p=this._drawArrow(d)).cntLine=l,p.cntArrow=c,this._arrPolylines[l].arrowMarkers[c].removeFrom(this._layerPaint),this._arrPolylines[l].arrowMarkers[c]=p}this._arrPolylines[l].polylinePath.setLatLngs(h),c>=0&&this._arrPolylines[l].tooltips[c].setLatLng(a);var m=0;this._arrPolylines[l].tooltips.map(function(t,e){if(e>=1){var i=this._arrPolylines[l].circleCoords[e-1].distanceTo(this._arrPolylines[l].circleCoords[e]),n=this._arrPolylines[l].circleCoords[e-1],o=this._arrPolylines[l].circleCoords[e];m+=i,this._arrPolylines[l].distance=m;var r=this._arrPolylines[l].tooltips[e-1];this._updateTooltip(t,r,m,i,n,o)}}.bind(this)),this._map.on("mouseup",this._dragCircleMouseup,this)},_resumeFirstpointMousemove:function(t){var e=this._lineNr;this._map.on("click",this._resumeFirstpointClick,this);var i=t.latlng;this._rubberlinePath2.setLatLngs(this._polylineArc(i,currentCircleCoords)),this._tooltipNew.setLatLng(i);var n=0,o=i.distanceTo(this._arrPolylines[e].circleCoords[0]),r=i,a=this._arrPolylines[e].circleCoords[0];n+=o;var s=this._tooltipNew,l=this._arrPolylines[e].tooltips[0];this._updateTooltip(l,s,n,o,r,a),this._arrPolylines[e].tooltips.map(function(t,i){if(i>=1){var o=this._arrPolylines[e].circleCoords[i-1].distanceTo(this._arrPolylines[e].circleCoords[i]),r=this._arrPolylines[e].circleCoords[i-1],a=this._arrPolylines[e].circleCoords[i];n+=o;var s=this._arrPolylines[e].tooltips[i-1];this._updateTooltip(t,s,n,o,r,a)}}.bind(this))},_resumeFirstpointClick:function(e){var i=this._lineNr;this._resumeFirstpointFlag=!1,this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._arrPolylines[i].circleMarkers[0].setStyle(this.options.intermedCircle),this._arrPolylines[i].circleMarkers[0].unbindTooltip(),this._arrPolylines[i].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"});var n=new t.CircleMarker(e.latlng,this.options.startCircle).addTo(this._layerPaint);n.cntLine=i,n.cntCircle=0,n.on("mousedown",this._dragCircle,this),n.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[i].circleMarkers.unshift(n),this._arrPolylines[i].circleMarkers.map((function(t,e){t.cntCircle=e})),this._arrPolylines[i].circleCoords.unshift(e.latlng);var o=this._polylineArc(e.latlng,currentCircleCoords),r=this._drawArrow(o);this._arrPolylines[i].arrowMarkers.unshift(r),this._arrPolylines[i].arrowMarkers.map((function(t,e){t.cntLine=i,t.cntArrow=e})),o.pop(),this._arrPolylines[i].polylinePath.setLatLngs(o.concat(this._arrPolylines[i].polylinePath.getLatLngs())),this._arrPolylines[i].tooltips.unshift(this._tooltipNew),this._map.on("mousemove",this._mouseMove,this)},_dragCircle:function(e){var i=this._arcpoints;if(e.originalEvent.ctrlKey){if(this._map.off("click",this._mouseClick,this),0===e.target.cntCircle){this._resumeFirstpointFlag=!0,this._lineNr=e.target.cntLine;var n=this._lineNr;this._circleNr=e.target.cntCircle,currentCircleCoords=e.latlng,this._arrPolylines[n].circleMarkers[0].setStyle(this.options.currentCircle),this._rubberlinePath2=t.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._tooltipNew=t.marker(currentCircleCoords,{icon:t.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint);var o="";!0===this.options.showBearings&&(o=o+this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),o+='<div class="polyline-measure-tooltip-difference">+0</div>',o+='<div class="polyline-measure-tooltip-total">0</div>',this._tooltipNew._icon.innerHTML=o,this._map.off("mousemove",this._mouseMove,this),this._map.on("mousemove",this._resumeFirstpointMousemove,this)}}else{if(e.originalEvent.shiftKey){this._lineNr=e.target.cntLine,n=this._lineNr,this._circleNr=e.target.cntCircle;var r=this._circleNr;if(this._arrPolylines[n]){if(2===this._arrPolylines[n].circleMarkers.length)return this._layerPaint.removeLayer(this._arrPolylines[n].circleMarkers[1]),this._layerPaint.removeLayer(this._arrPolylines[n].tooltips[1]),this._layerPaint.removeLayer(this._arrPolylines[n].circleMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[n].tooltips[0]),this._layerPaint.removeLayer(this._arrPolylines[n].arrowMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[n].polylinePath),this._map.fire("polylinemeasure:remove",e),void this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr]);this._arrPolylines[n].circleCoords.splice(r,1),this._arrPolylines[n].circleMarkers[r].removeFrom(this._layerPaint),this._arrPolylines[n].circleMarkers.splice(r,1),this._arrPolylines[n].circleMarkers.map((function(t,e){t.cntCircle=e}));var a=this._arrPolylines[n].polylinePath.getLatLngs();if(this._arrPolylines[n].tooltips[r].removeFrom(this._layerPaint),this._arrPolylines[n].tooltips.splice(r,1),!this._arrPolylines[n].circleMarkers.length)return this._arrPolylines.splice(n,1),void this._arrPolylines.forEach((function(t,e){t.circleMarkers.map((function(t){t.cntLine=e})),t.arrowMarkers.map((function(t){t.cntLine=e}))}));if(0===r)this._arrPolylines[n].circleMarkers[0].setStyle(this.options.startCircle),a.splice(0,i-1),this._arrPolylines[n].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[n].arrowMarkers[r].removeFrom(this._layerPaint),this._arrPolylines[n].arrowMarkers.splice(0,1),o="",!0===this.options.showBearings&&(o=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),o+='<div class="polyline-measure-tooltip-difference">+0</div>',o+='<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[n].tooltips[0]._icon.innerHTML=o;else if(r===this._arrPolylines[n].circleCoords.length)this._arrPolylines[n].circleMarkers[r-1].on("click",this._resumePolylinePath,this),this._arrPolylines[n].circleMarkers[r-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[n].circleMarkers.slice(-1)[0].setStyle(this.options.endCircle),this._arrPolylines[n].tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),a.splice(-(i-1),i-1),this._arrPolylines[n].arrowMarkers[r-1].removeFrom(this._layerPaint),this._arrPolylines[n].arrowMarkers.splice(-1,1);else{newLineSegment=this._polylineArc(this._arrPolylines[n].circleCoords[r-1],this._arrPolylines[n].circleCoords[r]),Array.prototype.splice.apply(a,[(r-1)*(i-1),2*i-1].concat(newLineSegment)),this._arrPolylines[n].arrowMarkers[r-1].removeFrom(this._layerPaint),this._arrPolylines[n].arrowMarkers[r].removeFrom(this._layerPaint);var s=this._drawArrow(newLineSegment);this._arrPolylines[n].arrowMarkers.splice(r-1,2,s)}this._arrPolylines[n].polylinePath.setLatLngs(a),this._arrPolylines[n].arrowMarkers.map((function(t,e){t.cntLine=n,t.cntArrow=e}));var l=0;this._arrPolylines[n].tooltips.map(function(t,e){if(e>=1){var i=this._arrPolylines[n].circleCoords[e-1].distanceTo(this._arrPolylines[n].circleCoords[e]),o=this._arrPolylines[n].circleCoords[e-1],r=this._arrPolylines[n].circleCoords[e];l+=i,this._arrPolylines[n].distance=l;var a=this._arrPolylines[n].tooltips[e-1];this._updateTooltip(t,a,l,i,o,r)}}.bind(this))}else{if(this._cntCircle--,1===this._currentLine.circleMarkers.length)return void this._currentLine.finalize();this._currentLine.circleCoords.splice(r,1),this._currentLine.circleMarkers[r].removeFrom(this._layerPaint),this._currentLine.circleMarkers.splice(r,1),this._currentLine.circleMarkers.map((function(t,e){t.cntCircle=e})),a=this._currentLine.polylinePath.getLatLngs(),this._currentLine.tooltips[r].removeFrom(this._layerPaint),this._currentLine.tooltips.splice(r,1),0===r?(1===this._currentLine.circleMarkers.length?this._currentLine.circleMarkers[0].setStyle(this.options.currentCircle):this._currentLine.circleMarkers[0].setStyle(this.options.startCircle),a.splice(0,i-1),this._currentLine.circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.arrowMarkers[r].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(0,1),o="",!0===this.options.showBearings&&(o=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),o+='<div class="polyline-measure-tooltip-difference">+0</div>',o+='<div class="polyline-measure-tooltip-total">0</div>',this._currentLine.tooltips[0]._icon.innerHTML=o):r===this._currentLine.circleCoords.length?(this._currentLine.circleMarkers[r-1].on("click",this._resumePolylinePath,this),this._currentLine.circleMarkers[r-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.slice(-1)[0].setStyle(this.options.currentCircle),this._currentLine.tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),a.splice(-(i-1),i-1),this._currentLine.arrowMarkers[r-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(-1,1)):(newLineSegment=this._polylineArc(this._currentLine.circleCoords[r-1],this._currentLine.circleCoords[r]),Array.prototype.splice.apply(a,[(r-1)*(i-1),2*i-1].concat(newLineSegment)),this._currentLine.arrowMarkers[r-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers[r].removeFrom(this._layerPaint),s=this._drawArrow(newLineSegment),this._currentLine.arrowMarkers.splice(r-1,2,s)),this._currentLine.polylinePath.setLatLngs(a),this._currentLine.arrowMarkers.map((function(t,e){t.cntLine=n,t.cntArrow=e}));var c=0;this._currentLine.tooltips.map(function(t,i,n){if(i>=1){var o,r,a=this._currentLine.tooltips[i-1],s=this._currentLine.circleCoords[i-1];i===n.length-1?(o=this._currentLine.circleCoords[i-1].distanceTo(e.latlng),r=e.latlng,this._updateTooltip(t,a,c+o,o,s,r)):(o=this._currentLine.circleCoords[i-1].distanceTo(this._currentLine.circleCoords[i]),r=this._currentLine.circleCoords[i],c+=o,this._updateTooltip(t,a,c,o,s,r))}}.bind(this)),this._currentLine.distance=c}return this._map.fire("polylinemeasure:remove",e),void this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])}this._e1=e,this._measuring&&0===this._cntCircle&&(this._map.dragging.disable(),this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._mouseStartingLat=e.latlng.lat,this._mouseStartingLng=e.latlng.lng,this._circleStartingLat=e.target._latlng.lat,this._circleStartingLng=e.target._latlng.lng,this._map.on("mousemove",this._dragCircleMousemove,this))}},seed:function(e){e.forEach((e=>{this._toggleMeasure(),this._startLine(e[0]),e.forEach(((i,n)=>{const o=t.latLng(i);this._mouseMove({latLng:o}),this._currentLine.addPoint(o),n===e.length-1&&(this._finishPolylinePath(),this._toggleMeasure())}))}))}}),t.Map.mergeOptions({PolylineMeasureControl:!1}),t.Map.addInitHook((function(){this.options.polylineMeasureControl&&(this.PMControl=new t.Control.PolylineMeasure,this.addControl(this.PMControl))})),t.control.polylineMeasure=function(e){return new t.Control.PolylineMeasure(e)},t.Control.PolylineMeasure})?n.apply(e,o):n)||(t.exports=r)},243:function(t,e){
/* @preserve
 * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t){"use strict";var e="1.9.3";function i(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++)for(e in o=arguments[i])t[e]=o[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function o(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var r=0;function a(t){return"_leaflet_id"in t||(t._leaflet_id=++r),t._leaflet_id}function s(t,e,i){var n,o,r,a;return a=function(){n=!1,o&&(r.apply(i,o),o=!1)},r=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(a,e),n=!0)},r}function l(t,e,i){var n=e[1],o=e[0],r=n-o;return t===n&&i?t:((t-o)%r+r)%r+o}function c(){return!1}function h(t,e){if(!1===e)return t;var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function p(t){return u(t).split(/\s+/)}function d(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function m(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var f=/\{ *([\w_ -]+) *\}/g;function g(t,e){return t.replace(f,(function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n}))}var _=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function k(t){var e=+new Date,i=Math.max(0,16-(e-x));return x=e+i,window.setTimeout(t,i)}var w=window.requestAnimationFrame||b("RequestAnimationFrame")||k,M=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function C(t,e,i){if(!i||w!==k)return w.call(window,o(t,e));t.call(e)}function P(t){t&&M.call(window,t)}var S={__proto__:null,extend:i,create:n,bind:o,get lastId(){return r},stamp:a,throttle:s,wrapNum:l,falseFn:c,formatNum:h,trim:u,splitWords:p,setOptions:d,getParamString:m,template:g,isArray:_,indexOf:v,emptyImageUrl:y,requestFn:w,cancelFn:M,requestAnimFrame:C,cancelAnimFrame:P};function T(){}function A(t){if("undefined"!=typeof L&&L&&L.Mixin){t=_(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}T.extend=function(t){var e=function(){d(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,r=n(o);for(var a in r.constructor=e,e.prototype=r,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&i(e,t.statics),t.includes&&(A(t.includes),i.apply(null,[r].concat(t.includes))),i(r,t),delete r.statics,delete r.includes,r.options&&(r.options=o.options?n(o.options):{},i(r.options,t.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},T.include=function(t){var e=this.prototype.options;return i(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},T.mergeOptions=function(t){return i(this.prototype.options,t),this},T.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var D={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var o=0,r=(t=p(t)).length;o<r;o++)this._on(t[o],e,i);return this},off:function(t,e,i){if(arguments.length)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else{t=p(t);for(var o=1===arguments.length,r=0,a=t.length;r<a;r++)o?this._off(t[r]):this._off(t[r],e,i)}else delete this._events;return this},_on:function(t,e,i,n){if("function"==typeof e){if(!1===this._listens(t,e,i)){i===this&&(i=void 0);var o={fn:e,ctx:i};n&&(o.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(o)}}else console.warn("wrong listener type: "+typeof e)},_off:function(t,e,i){var n,o,r;if(this._events&&(n=this._events[t]))if(1!==arguments.length)if("function"==typeof e){var a=this._listens(t,e,i);if(!1!==a){var s=n[a];this._firingCount&&(s.fn=c,this._events[t]=n=n.slice()),n.splice(a,1)}}else console.warn("wrong listener type: "+typeof e);else{if(this._firingCount)for(o=0,r=n.length;o<r;o++)n[o].fn=c;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var o=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var a=0,s=r.length;a<s;a++){var l=r[a],c=l.fn;l.once&&this.off(t,c,l.ctx),c.call(l.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(t,e,i,n){"string"!=typeof t&&console.warn('"string" type argument expected');var o=e;"function"!=typeof e&&(n=!!e,o=void 0,i=void 0);var r=this._events&&this._events[t];if(r&&r.length&&!1!==this._listens(t,o,i))return!0;if(n)for(var a in this._eventParents)if(this._eventParents[a].listens(t,e,i,n))return!0;return!1},_listens:function(t,e,i){if(!this._events)return!1;var n=this._events[t]||[];if(!e)return!!n.length;i===this&&(i=void 0);for(var o=0,r=n.length;o<r;o++)if(n[o].fn===e&&n[o].ctx===i)return o;return!1},once:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e,!0);else for(var o=0,r=(t=p(t)).length;o<r;o++)this._on(t[o],e,i,!0);return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({layer:t.target,propagatedFrom:t.target},t),!0)}};D.addEventListener=D.on,D.removeEventListener=D.clearAllEventListeners=D.off,D.addOneTimeEventListener=D.once,D.fireEvent=D.fire,D.hasEventListeners=D.listens;var E=T.extend(D);function O(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var I=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function B(t,e,i){return t instanceof O?t:_(t)?new O(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new O(t.x,t.y):new O(t,e,i)}function R(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function z(t,e){return!t||t instanceof R?t:new R(t,e)}function F(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function j(t,e){return t instanceof F?t:new F(t,e)}function N(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function U(t,e,i){return t instanceof N?t:_(t)&&"object"!=typeof t[0]?3===t.length?new N(t[0],t[1],t[2]):2===t.length?new N(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new N(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new N(t,e,i)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(t){return this.clone()._add(B(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(B(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new O(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new O(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(t){var e=(t=B(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=B(t)).x===this.x&&t.y===this.y},contains:function(t){return t=B(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}},R.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof O||"number"==typeof t[0]||"x"in t)e=i=B(t);else if(e=(t=z(t)).min,i=t.max,!e||!i)return this;return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)):(this.min=e.clone(),this.max=i.clone()),this},getCenter:function(t){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof O?B(t):z(t))instanceof R?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=z(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>=e.x&&n.x<=i.x,a=o.y>=e.y&&n.y<=i.y;return r&&a},overlaps:function(t){t=z(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>e.x&&n.x<i.x,a=o.y>e.y&&n.y<i.y;return r&&a},isValid:function(){return!(!this.min||!this.max)},pad:function(t){var e=this.min,i=this.max,n=Math.abs(e.x-i.x)*t,o=Math.abs(e.y-i.y)*t;return z(B(e.x-n,e.y-o),B(i.x+n,i.y+o))},equals:function(t){return!!t&&(t=z(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},F.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof N)e=t,i=t;else{if(!(t instanceof F))return t?this.extend(U(t)||j(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new N(e.lat,e.lng),this._northEast=new N(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new F(new N(e.lat-n,e.lng-o),new N(i.lat+n,i.lng+o))},getCenter:function(){return new N((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new N(this.getNorth(),this.getWest())},getSouthEast:function(){return new N(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof N||"lat"in t?U(t):j(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof F?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=j(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&n.lat<=i.lat,a=o.lng>=e.lng&&n.lng<=i.lng;return r&&a},overlaps:function(t){t=j(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&n.lat<i.lat,a=o.lng>e.lng&&n.lng<i.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=j(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},N.prototype={equals:function(t,e){return!!t&&(t=U(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+h(this.lat,t)+", "+h(this.lng,t)+")"},distanceTo:function(t){return Z.distance(this,U(t))},wrap:function(){return Z.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new N(this.lat,this.lng,this.alt)}};var G,H={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new R(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new N(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,o=e.lng-i.lng;if(0===n&&0===o)return t;var r=t.getSouthWest(),a=t.getNorthEast();return new F(new N(r.lat-n,r.lng-o),new N(a.lat-n,a.lng-o))}},Z=i({},H,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,r=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lng-t.lng)*i/2),s=r*r+Math.cos(n)*Math.cos(o)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),V=6378137,W={R:V,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new O(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new N((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(G=V*Math.PI,new R([-G,-G],[G,G]))};function q(t,e,i,n){if(_(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function $(t,e,i,n){return new q(t,e,i,n)}q.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new O((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Y=i({},Z,{code:"EPSG:3857",projection:W,transformation:function(){var t=.5/(Math.PI*W.R);return $(t,.5,-t,.5)}()}),K=i({},Y,{code:"EPSG:900913"});function J(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t,e){var i,n,o,r,a,s,l="";for(i=0,o=t.length;i<o;i++){for(n=0,r=(a=t[i]).length;n<r;n++)l+=(n?"L":"M")+(s=a[n]).x+" "+s.y;l+=e?Ft.svg?"z":"x":""}return l||"M0 0"}var Q,tt=document.documentElement.style,et="ActiveXObject"in window,it=et&&!document.addEventListener,nt="msLaunchUri"in navigator&&!("documentMode"in document),ot=zt("webkit"),rt=zt("android"),at=zt("android 2")||zt("android 3"),st=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),lt=rt&&zt("Google")&&st<537&&!("AudioNode"in window),ct=!!window.opera,ht=!nt&&zt("chrome"),ut=zt("gecko")&&!ot&&!ct&&!et,pt=!ht&&zt("safari"),dt=zt("phantom"),mt="OTransition"in tt,ft=0===navigator.platform.indexOf("Win"),gt=et&&"transition"in tt,_t="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!at,vt="MozPerspective"in tt,yt=!window.L_DISABLE_3D&&(gt||_t||vt)&&!mt&&!dt,bt="undefined"!=typeof orientation||zt("mobile"),xt=bt&&ot,kt=bt&&_t,Lt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!Lt),Mt="ontouchstart"in window||!!window.TouchEvent,Ct=!window.L_NO_TOUCH&&(Mt||wt),Pt=bt&&ct,St=bt&&ut,Tt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,At=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(t){}return t}(),Dt=!!document.createElement("canvas").getContext,Et=!(!document.createElementNS||!J("svg").createSVGRect),Ot=!!Et&&((Q=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(Q.firstChild&&Q.firstChild.namespaceURI)),It=!Et&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),Bt=0===navigator.platform.indexOf("Mac"),Rt=0===navigator.platform.indexOf("Linux");function zt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Ft={ie:et,ielt9:it,edge:nt,webkit:ot,android:rt,android23:at,androidStock:lt,opera:ct,chrome:ht,gecko:ut,safari:pt,phantom:dt,opera12:mt,win:ft,ie3d:gt,webkit3d:_t,gecko3d:vt,any3d:yt,mobile:bt,mobileWebkit:xt,mobileWebkit3d:kt,msPointer:Lt,pointer:wt,touch:Ct,touchNative:Mt,mobileOpera:Pt,mobileGecko:St,retina:Tt,passiveEvents:At,canvas:Dt,svg:Et,vml:It,inlineSvg:Ot,mac:Bt,linux:Rt},jt=Ft.msPointer?"MSPointerDown":"pointerdown",Nt=Ft.msPointer?"MSPointerMove":"pointermove",Ut=Ft.msPointer?"MSPointerUp":"pointerup",Gt=Ft.msPointer?"MSPointerCancel":"pointercancel",Ht={touchstart:jt,touchmove:Nt,touchend:Ut,touchcancel:Gt},Zt={touchstart:te,touchmove:Qt,touchend:Qt,touchcancel:Qt},Vt={},Wt=!1;function qt(t,e,i){return"touchstart"===e&&Xt(),Zt[e]?(i=Zt[e].bind(this,i),t.addEventListener(Ht[e],i,!1),i):(console.warn("wrong event specified:",e),c)}function $t(t,e,i){Ht[e]?t.removeEventListener(Ht[e],i,!1):console.warn("wrong event specified:",e)}function Yt(t){Vt[t.pointerId]=t}function Kt(t){Vt[t.pointerId]&&(Vt[t.pointerId]=t)}function Jt(t){delete Vt[t.pointerId]}function Xt(){Wt||(document.addEventListener(jt,Yt,!0),document.addEventListener(Nt,Kt,!0),document.addEventListener(Ut,Jt,!0),document.addEventListener(Gt,Jt,!0),Wt=!0)}function Qt(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var i in e.touches=[],Vt)e.touches.push(Vt[i]);e.changedTouches=[e],t(e)}}function te(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ye(e),Qt(t,e)}function ee(t){var e,i,n={};for(i in t)e=t[i],n[i]=e&&e.bind?e.bind(t):e;return t=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}var ie=200;function ne(t,e){t.addEventListener("dblclick",e);var i,n=0;function o(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var o=Je(t);if(!o.some((function(t){return t instanceof HTMLLabelElement&&t.attributes.for}))||o.some((function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement}))){var r=Date.now();r-n<=ie?2==++i&&e(ee(t)):i=1,n=r}}}else i=t.detail}return t.addEventListener("click",o),{dblclick:e,simDblclick:o}}function oe(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var re,ae,se,le,ce,he=Pe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ue=Pe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pe="webkitTransition"===ue||"OTransition"===ue?ue+"End":"transitionend";function de(t){return"string"==typeof t?document.getElementById(t):t}function me(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function fe(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function ge(t){var e=t.parentNode;e&&e.removeChild(t)}function _e(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ve(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ye(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function be(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=we(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function xe(t,e){if(void 0!==t.classList)for(var i=p(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!be(t,e)){var r=we(t);Le(t,(r?r+" ":"")+e)}}function ke(t,e){void 0!==t.classList?t.classList.remove(e):Le(t,u((" "+we(t)+" ").replace(" "+e+" "," ")))}function Le(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function we(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function Me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Ce(t,e)}function Ce(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}function Pe(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function Se(t,e,i){var n=e||new O(0,0);t.style[he]=(Ft.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function Te(t,e){t._leaflet_pos=e,Ft.any3d?Se(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Ae(t){return t._leaflet_pos||new O(0,0)}if("onselectstart"in document)re=function(){je(window,"selectstart",Ye)},ae=function(){Ue(window,"selectstart",Ye)};else{var De=Pe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);re=function(){if(De){var t=document.documentElement.style;se=t[De],t[De]="none"}},ae=function(){De&&(document.documentElement.style[De]=se,se=void 0)}}function Ee(){je(window,"dragstart",Ye)}function Oe(){Ue(window,"dragstart",Ye)}function Ie(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Be(),le=t,ce=t.style.outline,t.style.outline="none",je(window,"keydown",Be))}function Be(){le&&(le.style.outline=ce,le=void 0,ce=void 0,Ue(window,"keydown",Be))}function Re(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function ze(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Fe={__proto__:null,TRANSFORM:he,TRANSITION:ue,TRANSITION_END:pe,get:de,getStyle:me,create:fe,remove:ge,empty:_e,toFront:ve,toBack:ye,hasClass:be,addClass:xe,removeClass:ke,setClass:Le,getClass:we,setOpacity:Me,testProp:Pe,setTransform:Se,setPosition:Te,getPosition:Ae,get disableTextSelection(){return re},get enableTextSelection(){return ae},disableImageDrag:Ee,enableImageDrag:Oe,preventOutline:Ie,restoreOutline:Be,getSizedParentNode:Re,getScale:ze};function je(t,e,i,n){if(e&&"object"==typeof e)for(var o in e)Ze(t,o,e[o],i);else for(var r=0,a=(e=p(e)).length;r<a;r++)Ze(t,e[r],i,n);return this}var Ne="_leaflet_events";function Ue(t,e,i,n){if(1===arguments.length)Ge(t),delete t[Ne];else if(e&&"object"==typeof e)for(var o in e)Ve(t,o,e[o],i);else if(e=p(e),2===arguments.length)Ge(t,(function(t){return-1!==v(e,t)}));else for(var r=0,a=e.length;r<a;r++)Ve(t,e[r],i,n);return this}function Ge(t,e){for(var i in t[Ne]){var n=i.split(/\d/)[0];e&&!e(n)||Ve(t,n,null,null,i)}}var He={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ze(t,e,i,n){var o=e+a(i)+(n?"_"+a(n):"");if(t[Ne]&&t[Ne][o])return this;var r=function(e){return i.call(n||t,e||window.event)},s=r;!Ft.touchNative&&Ft.pointer&&0===e.indexOf("touch")?r=qt(t,e,r):Ft.touch&&"dblclick"===e?r=ne(t,r):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(He[e]||e,r,!!Ft.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(r=function(e){e=e||window.event,ei(t,e)&&s(e)},t.addEventListener(He[e],r,!1)):t.addEventListener(e,s,!1):t.attachEvent("on"+e,r),t[Ne]=t[Ne]||{},t[Ne][o]=r}function Ve(t,e,i,n,o){o=o||e+a(i)+(n?"_"+a(n):"");var r=t[Ne]&&t[Ne][o];if(!r)return this;!Ft.touchNative&&Ft.pointer&&0===e.indexOf("touch")?$t(t,e,r):Ft.touch&&"dblclick"===e?oe(t,r):"removeEventListener"in t?t.removeEventListener(He[e]||e,r,!1):t.detachEvent("on"+e,r),t[Ne][o]=null}function We(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function qe(t){return Ze(t,"wheel",We),this}function $e(t){return je(t,"mousedown touchstart dblclick contextmenu",We),t._leaflet_disable_click=!0,this}function Ye(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ke(t){return Ye(t),We(t),this}function Je(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function Xe(t,e){if(!e)return new O(t.clientX,t.clientY);var i=ze(e),n=i.boundingClientRect;return new O((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Qe=Ft.linux&&Ft.chrome?window.devicePixelRatio:Ft.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ti(t){return Ft.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Qe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function ei(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var ii={__proto__:null,on:je,off:Ue,stopPropagation:We,disableScrollPropagation:qe,disableClickPropagation:$e,preventDefault:Ye,stop:Ke,getPropagationPath:Je,getMousePosition:Xe,getWheelDelta:ti,isExternalTarget:ei,addListener:je,removeListener:Ue},ni=E.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=Ae(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),Te(this._el,i),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),oi=E.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(U(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ue&&Ft.any3d&&!Ft.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),je(this._proxy,pe,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(U(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=i({animate:n.animate},n.zoom),n.pan=i({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e,n.pan&&n.pan.noMoveStart),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Ft.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Ft.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),r=(t instanceof O?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),a=this.containerPointToLatLng(o.add(r));return this.setView(a,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():j(t);var i=B(e.paddingTopLeft||e.padding||[0,0]),n=B(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var r=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),o),s=this.project(t.getNorthEast(),o);return{center:this.unproject(a.add(s).divideBy(2).add(r),o),zoom:o}},fitBounds:function(t,e){if(!(t=j(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=B(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ni,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){xe(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!Ft.any3d)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),o=this.project(t),r=this.getSize(),a=this._zoom;t=U(t),e=void 0===e?a:e;var s=Math.max(r.x,r.y),l=s*this.getZoomScale(a,e),c=o.distanceTo(n)||1,h=1.42,u=h*h;function p(t){var e=(l*l-s*s+(t?-1:1)*u*u*c*c)/(2*(t?l:s)*u*c),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function m(t){return(Math.exp(t)+Math.exp(-t))/2}function f(t){return d(t)/m(t)}var g=p(0);function _(t){return s*(m(g)/m(g+h*t))}function v(t){return s*(m(g)*f(g+h*t)-d(g))/u}function y(t){return 1-Math.pow(1-t,1.5)}var b=Date.now(),x=(p(1)-g)/h,k=i.duration?1e3*i.duration:1e3*x*.8;function L(){var i=(Date.now()-b)/k,r=y(i)*x;i<=1?(this._flyToFrame=C(L,this),this._move(this.unproject(n.add(o.subtract(n).multiplyBy(v(r)/c)),a),this.getScaleZoom(s/_(r),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),L.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=j(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,j(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=B((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=B(e.paddingBottomRight||e.padding||[0,0]),o=this.project(this.getCenter()),r=this.project(t),a=this.getPixelBounds(),s=z([a.min.add(i),a.max.subtract(n)]),l=s.getSize();if(!s.contains(r)){this._enforcingBounds=!0;var c=r.subtract(s.getCenter()),h=s.extend(r).getSize().subtract(l);o.x+=c.x<0?-h.x:h.x,o.y+=c.y<0?-h.y:h.y,this.panTo(this.unproject(o),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),r=e.divideBy(2).round(),a=n.divideBy(2).round(),s=r.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o(this._handleGeolocationResponse,this),n=o(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new N(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var o=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(o,n.maxZoom):o)}var r={latlng:e,bounds:i,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(r[a]=t.coords[a]);this.fire("locationfound",r)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ge(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ge(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=fe("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new F(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=j(t),i=B(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(i),c=z(this.project(s,n),this.project(a,n)).getSize(),h=Ft.any3d?this.options.zoomSnap:1,u=l.x/c.x,p=l.y/c.y,d=e?Math.max(u,p):Math.min(u,p);return n=this.getScaleZoom(d,n),h&&(n=Math.round(n/(h/100))*(h/100),n=e?Math.ceil(n/h)*h:Math.floor(n/h)*h),Math.max(o,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new R(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(U(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(B(t),e)},layerPointToLatLng:function(t){var e=B(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(U(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(U(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(U(t),U(e))},containerPointToLayerPoint:function(t){return B(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return B(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(B(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(t)))},mouseEventToContainerPoint:function(t){return Xe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=de(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");je(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ft.any3d,xe(t,"leaflet-container"+(Ft.touch?" leaflet-touch":"")+(Ft.retina?" leaflet-retina":"")+(Ft.ielt9?" leaflet-oldie":"")+(Ft.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=me(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Te(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(t.markerPane,"leaflet-zoom-hide"),xe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){Te(this._mapPane,new O(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var o=this._zoom!==e;this._moveStart(o,i)._move(t,e)._moveEnd(o),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,n){void 0===e&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),n?i&&i.pinch&&this.fire("zoom",i):((o||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Te(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Ue:je;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Ft.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=C((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],o="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,s=!1;r;){if((i=this._targets[a(r)])&&("click"===e||"preclick"===e)&&this._draggableMoved(i)){s=!0;break}if(i&&i.listens(e,!0)){if(o&&!ei(r,t))break;if(n.push(i),o)break}if(r===this._container)break;r=r.parentNode}return n.length||s||o||!this.listens(e,!0)||(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var i=t.type;"mousedown"===i&&Ie(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var o=i({},t);o.type="preclick",this._fireDOMEvent(o,o.type,n)}var r=this._findEventTargets(t,e);if(n){for(var a=[],s=0;s<n.length;s++)n[s].listens(e,!0)&&a.push(n[s]);r=a.concat(r)}if(r.length){"contextmenu"===e&&Ye(t);var l=r[0],c={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var h=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=h?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=h?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(s=0;s<r.length;s++)if(r[s].fire(e,c,!0),c.originalEvent._stopped||!1===r[s].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Ae(this._mapPane)||new O(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return z([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),r=new R(n.subtract(o),n.add(o)),a=this._getBoundsOffset(r,i,e);return Math.abs(a.x)<=1&&Math.abs(a.y)<=1?t:this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new R(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=z(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),r=n.max.subtract(t.max);return new O(this._rebound(o.x,-r.x),this._rebound(o.y,-r.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=Ft.any3d?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ke(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))},_createAnimProxy:function(){var t=this._proxy=fe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=he,i=this._proxy.style[e];Se(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ge(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Se(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(o)||(C((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ke(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ri(t,e){return new oi(t,e)}var ai=T.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return xe(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ge(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),si=function(t){return new ai(t)};oi.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=fe("div",e+"control-container",this._container);function n(n,o){var r=e+n+" "+e+o;t[n+o]=fe("div",r,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ge(this._controlCorners[t]);ge(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var li=ai.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in d(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ai.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ke(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ke(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=fe("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),$e(e),qe(e);var n=this._section=fe("section",t+"-list");i&&(this._map.on("click",this.collapse,this),je(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var o=this._layersLink=fe("a",t+"-toggle",e);o.href="#",o.title="Layers",o.setAttribute("role","button"),je(o,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){Ye(t),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=fe("div",t+"-base",n),this._separator=fe("div",t+"-separator",n),this._overlaysList=fe("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(o((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;_e(this._baseLayersList),_e(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+a(this),n),this._layerControlInputs.push(e),e.layerId=a(t.layer),je(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var r=document.createElement("span");return i.appendChild(r),r.appendChild(e),r.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var r=i.length-1;r>=0;r--)t=i[r],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||o.push(e);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])&&this._map.removeLayer(o[r]);for(r=0;r<n.length;r++)this._map.hasLayer(n[r])||this._map.addLayer(n[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;je(t,"click",Ye),this.expand(),setTimeout((function(){Ue(t,"click",Ye)}))}}),ci=function(t,e,i){return new li(t,e,i)},hi=ai.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=fe("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var r=fe("a",i,n);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),$e(r),je(r,"click",Ke),je(r,"click",o,this),je(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ke(this._zoomInButton,e),ke(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(xe(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(xe(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});oi.mergeOptions({zoomControl:!0}),oi.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new hi,this.addControl(this.zoomControl))}));var ui=function(t){return new hi(t)},pi=ai.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=fe("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=fe("div",e,i)),t.imperial&&(this._iScale=fe("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;o>5280?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),di=function(t){return new pi(t)},mi='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fi=ai.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ft.inlineSvg?mi+" ":"")+"Leaflet</a>"},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=fe("div","leaflet-control-attribution"),$e(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",(function(){this.removeAttribution(t.layer.getAttribution())}),this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});oi.mergeOptions({attributionControl:!0}),oi.addInitHook((function(){this.options.attributionControl&&(new fi).addTo(this)}));var gi=function(t){return new fi(t)};ai.Layers=li,ai.Zoom=hi,ai.Scale=pi,ai.Attribution=fi,si.layers=ci,si.zoom=ui,si.scale=di,si.attribution=gi;var _i=T.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_i.addTo=function(t,e){return t.addHandler(e,this),this};var vi,yi={Events:D},bi=Ft.touch?"touchstart mousedown":"mousedown",xi=E.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){d(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(je(this._dragStartTarget,bi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xi._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,bi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!be(this._element,"leaflet-zoom-anim")))if(t.touches&&1!==t.touches.length)xi._dragging===this&&this.finishDrag();else if(!(xi._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(xi._dragging=this,this._preventOutline&&Ie(this._element),Ee(),re(),this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,i=Re(this._element);this._startPoint=new O(e.clientX,e.clientY),this._startPos=Ae(this._element),this._parentScale=ze(i);var n="mousedown"===t.type;je(document,n?"mousemove":"touchmove",this._onMove,this),je(document,n?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(t){if(this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new O(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Ye(t),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Te(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ke(document.body,"leaflet-dragging"),this._lastTarget&&(ke(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),Oe(),ae(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,xi._dragging=!1}});function ki(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=Mi(t=Pi(t,i),i)}function Li(t,e,i){return Math.sqrt(Ei(t,e,i,!0))}function wi(t,e,i){return Ei(t,e,i)}function Mi(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,Ci(t,n,e,0,i-1);var o,r=[];for(o=0;o<i;o++)n[o]&&r.push(t[o]);return r}function Ci(t,e,i,n,o){var r,a,s,l=0;for(a=n+1;a<=o-1;a++)(s=Ei(t[a],t[n],t[o],!0))>l&&(r=a,l=s);l>i&&(e[r]=1,Ci(t,e,i,n,r),Ci(t,e,i,r,o))}function Pi(t,e){for(var i=[t[0]],n=1,o=0,r=t.length;n<r;n++)Di(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<r-1&&i.push(t[r-1]),i}function Si(t,e,i,n,o){var r,a,s,l=n?vi:Ai(t,i),c=Ai(e,i);for(vi=c;;){if(!(l|c))return[t,e];if(l&c)return!1;s=Ai(a=Ti(t,e,r=l||c,i,o),i),r===l?(t=a,l=s):(e=a,c=s)}}function Ti(t,e,i,n,o){var r,a,s=e.x-t.x,l=e.y-t.y,c=n.min,h=n.max;return 8&i?(r=t.x+s*(h.y-t.y)/l,a=h.y):4&i?(r=t.x+s*(c.y-t.y)/l,a=c.y):2&i?(r=h.x,a=t.y+l*(h.x-t.x)/s):1&i&&(r=c.x,a=t.y+l*(c.x-t.x)/s),new O(r,a,o)}function Ai(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function Di(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function Ei(t,e,i,n){var o,r=e.x,a=e.y,s=i.x-r,l=i.y-a,c=s*s+l*l;return c>0&&((o=((t.x-r)*s+(t.y-a)*l)/c)>1?(r=i.x,a=i.y):o>0&&(r+=s*o,a+=l*o)),s=t.x-r,l=t.y-a,n?s*s+l*l:new O(r,a)}function Oi(t){return!_(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function Ii(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Oi(t)}function Bi(t,e){var i,n,o,r,a,s,l,c;if(!t||0===t.length)throw new Error("latlngs not passed");Oi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var h=[];for(var u in t)h.push(e.project(U(t[u])));var p=h.length;for(i=0,n=0;i<p-1;i++)n+=h[i].distanceTo(h[i+1])/2;if(0===n)c=h[0];else for(i=0,r=0;i<p-1;i++)if(a=h[i],s=h[i+1],(r+=o=a.distanceTo(s))>n){l=(r-n)/o,c=[s.x-l*(s.x-a.x),s.y-l*(s.y-a.y)];break}return e.unproject(B(c))}var Ri={__proto__:null,simplify:ki,pointToSegmentDistance:Li,closestPointOnSegment:wi,clipSegment:Si,_getEdgeIntersection:Ti,_getBitCode:Ai,_sqClosestPointOnSegment:Ei,isFlat:Oi,_flat:Ii,polylineCenter:Bi};function zi(t,e,i){var n,o,r,a,s,l,c,h,u,p=[1,4,2,8];for(o=0,c=t.length;o<c;o++)t[o]._code=Ai(t[o],e);for(a=0;a<4;a++){for(h=p[a],n=[],o=0,r=(c=t.length)-1;o<c;r=o++)s=t[o],l=t[r],s._code&h?l._code&h||((u=Ti(l,s,h,e,i))._code=Ai(u,e),n.push(u)):(l._code&h&&((u=Ti(l,s,h,e,i))._code=Ai(u,e),n.push(u)),n.push(s));t=n}return t}function Fi(t,e){var i,n,o,r,a,s,l,c,h;if(!t||0===t.length)throw new Error("latlngs not passed");Oi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var u=[];for(var p in t)u.push(e.project(U(t[p])));var d=u.length;for(s=l=c=0,i=0,n=d-1;i<d;n=i++)o=u[i],r=u[n],a=o.y*r.x-r.y*o.x,l+=(o.x+r.x)*a,c+=(o.y+r.y)*a,s+=3*a;return h=0===s?u[0]:[l/s,c/s],e.unproject(B(h))}var ji={__proto__:null,clipPolygon:zi,polygonCenter:Fi},Ni={project:function(t){return new O(t.lng,t.lat)},unproject:function(t){return new N(t.y,t.x)},bounds:new R([-180,-90],[180,90])},Ui={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),a=r*Math.sin(n),s=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),r/2);return n=-i*Math.log(Math.max(s,1e-10)),new O(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),a=Math.exp(-t.y/n),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new N(s*i,t.x*i/n)}},Gi={__proto__:null,LonLat:Ni,Mercator:Ui,SphericalMercator:W},Hi=i({},Z,{code:"EPSG:3395",projection:Ui,transformation:function(){var t=.5/(Math.PI*Ui.R);return $(t,.5,-t,.5)}()}),Zi=i({},Z,{code:"EPSG:4326",projection:Ni,transformation:$(1/180,1,-1/180,.5)}),Vi=i({},H,{projection:Ni,transformation:$(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});H.Earth=Z,H.EPSG3395=Hi,H.EPSG3857=Y,H.EPSG900913=K,H.EPSG4326=Zi,H.Simple=Vi;var Wi=E.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",(function(){e.off(i,this)}),this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});oi.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return a(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?_(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qi=Wi.extend({initialize:function(t,e){var i,n;if(d(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),$i=function(t,e){return new qi(t,e)},Yi=qi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),qi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),qi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new F;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Ki=function(t,e){return new Yi(t,e)},Ji=T.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var o=B(n),r=B("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Ft.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Xi(t){return new Ji(t)}var Qi=Ji.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof Qi.imagePath&&(Qi.imagePath=this._detectIconPath()),(this.options.imagePath||Qi.imagePath)+Ji.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,i){var n=e.exec(t);return n&&n[i]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=fe("div","leaflet-default-icon-path",document.body),e=me(t,"background-image")||me(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-"leaflet.css".length-1):""}}),tn=_i.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new xi(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ke(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,r=Ae(e._icon),a=i.getPixelBounds(),s=i.getPixelOrigin(),l=z(a.min._subtract(s).add(o),a.max._subtract(s).subtract(o));if(!l.contains(r)){var c=B((Math.max(l.max.x,r.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(n);i.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Te(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=C(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=Ae(e._icon),o=e._map.layerPointToLatLng(n);i&&Te(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),en=Wi.extend({options:{icon:new Qi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=U(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),xe(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(i,"focus",this._panOnFocus,this);var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(xe(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),ge(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ge(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Te(this._icon,t),this._shadow&&Te(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),tn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new tn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Me(this._icon,t),this._shadow&&Me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?B(e.iconSize):B(0,0),n=e.iconAnchor?B(e.iconAnchor):B(0,0);t.panInside(this._latlng,{paddingTopLeft:n,paddingBottomRight:i.subtract(n)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nn(t,e){return new en(t,e)}var on=Wi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),rn=on.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=U(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return on.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new R(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function an(t,e){return new rn(t,e)}var sn=rn.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=i({},n,{radius:e})),d(this,e),this._latlng=U(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:on.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===Z.distance){var o=Math.PI/180,r=this._mRadius/Z.R/o,a=i.project([e+r,t]),s=i.project([e-r,t]),l=a.add(s).divideBy(2),c=i.unproject(l).lat,h=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(c*o))/(Math.cos(e*o)*Math.cos(c*o)))/o;(isNaN(h)||0===h)&&(h=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(h)?0:l.x-i.project([c,t-h]).x,this._radiusY=l.y-a.y}else{var u=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(u).x}this._updateBounds()}});function ln(t,e,i){return new sn(t,e,i)}var cn=on.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,r=Ei,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],c=1,h=l.length;c<h;c++){var u=r(t,e=l[c-1],i=l[c],!0);u<n&&(n=u,o=r(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=U(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new F,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Oi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=Oi(t),n=0,o=t.length;n<o;n++)i?(e[n]=U(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new O(t,t);this._rawPxBounds&&(this._pxBounds=new R([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var n,o,r=t[0]instanceof N,a=t.length;if(r){for(o=[],n=0;n<a;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;n<a;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,o,r,a,s,l=this._parts;for(e=0,n=0,o=this._rings.length;e<o;e++)for(i=0,r=(s=this._rings[e]).length;i<r-1;i++)(a=Si(s[i],s[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(a[0]),a[1]===s[i+1]&&i!==r-2||(l[n].push(a[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=ki(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,o,r,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,r=this._parts.length;i<r;i++)for(n=0,o=(a=(s=this._parts[i]).length)-1;n<a;o=n++)if((e||0!==n)&&Li(t,s[o],s[n])<=l)return!0;return!1}});function hn(t,e){return new cn(t,e)}cn._flat=Ii;var un=cn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fi(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=cn.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof N&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){cn.prototype._setLatLngs.call(this,t),Oi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Oi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new O(e,e);if(t=new R(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,r=this._rings.length;o<r;o++)(n=zi(this._rings[o],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,o,r,a,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,s=this._parts.length;o<s;o++)for(r=0,a=(l=(e=this._parts[o]).length)-1;r<l;a=r++)i=e[r],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c||cn.prototype._containsPoint.call(this,t,!0)}});function pn(t,e){return new un(t,e)}var dn=Yi.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=_(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)((n=o[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=mn(t,r);return a?(a.feature=xn(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=i({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function mn(t,e){var i,n,o,r,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],c=e&&e.pointToLayer,h=e&&e.coordsToLatLng||gn;if(!s&&!a)return null;switch(a.type){case"Point":return fn(c,t,i=h(s),e);case"MultiPoint":for(o=0,r=s.length;o<r;o++)i=h(s[o]),l.push(fn(c,t,i,e));return new Yi(l);case"LineString":case"MultiLineString":return n=_n(s,"LineString"===a.type?0:1,h),new cn(n,e);case"Polygon":case"MultiPolygon":return n=_n(s,"Polygon"===a.type?1:2,h),new un(n,e);case"GeometryCollection":for(o=0,r=a.geometries.length;o<r;o++){var u=mn({geometry:a.geometries[o],type:"Feature",properties:t.properties},e);u&&l.push(u)}return new Yi(l);case"FeatureCollection":for(o=0,r=a.features.length;o<r;o++){var p=mn(a.features[o],e);p&&l.push(p)}return new Yi(l);default:throw new Error("Invalid GeoJSON object.")}}function fn(t,e,i,n){return t?t(e,i):new en(i,n&&n.markersInheritOptions&&n)}function gn(t){return new N(t[1],t[0],t[2])}function _n(t,e,i){for(var n,o=[],r=0,a=t.length;r<a;r++)n=e?_n(t[r],e-1,i):(i||gn)(t[r]),o.push(n);return o}function vn(t,e){return void 0!==(t=U(t)).alt?[h(t.lng,e),h(t.lat,e),h(t.alt,e)]:[h(t.lng,e),h(t.lat,e)]}function yn(t,e,i,n){for(var o=[],r=0,a=t.length;r<a;r++)o.push(e?yn(t[r],Oi(t[r])?0:e-1,i,n):vn(t[r],n));return!e&&i&&o.push(o[0].slice()),o}function bn(t,e){return t.feature?i({},t.feature,{geometry:e}):xn(e)}function xn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var kn={toGeoJSON:function(t){return bn(this,{type:"Point",coordinates:vn(this.getLatLng(),t)})}};function Ln(t,e){return new dn(t,e)}en.include(kn),sn.include(kn),rn.include(kn),cn.include({toGeoJSON:function(t){var e=!Oi(this._latlngs);return bn(this,{type:(e?"Multi":"")+"LineString",coordinates:yn(this._latlngs,e?1:0,!1,t)})}}),un.include({toGeoJSON:function(t){var e=!Oi(this._latlngs),i=e&&!Oi(this._latlngs[0]),n=yn(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),bn(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),qi.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(i){e.push(i.toGeoJSON(t).geometry.coordinates)})),bn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer((function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(i)n.push(o.geometry);else{var r=xn(o);"FeatureCollection"===r.type?n.push.apply(n,r.features):n.push(r)}}})),i?bn(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var wn=Ln,Mn=Wi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=j(e),d(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ge(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ve(this._image),this},bringToBack:function(){return this._map&&ye(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=j(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:fe("img");xe(e,"leaflet-image-layer"),this._zoomAnimated&&xe(e,"leaflet-zoom-animated"),this.options.className&&xe(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=o(this.fire,this,"load"),e.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Se(this._image,i,e)},_reset:function(){var t=this._image,e=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();Te(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){Me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Cn=function(t,e,i){return new Mn(t,e,i)},Pn=Mn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:fe("video");if(xe(e,"leaflet-image-layer"),this._zoomAnimated&&xe(e,"leaflet-zoom-animated"),this.options.className&&xe(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=o(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],r=0;r<i.length;r++)n.push(i[r].src);this._url=i.length>0?n:[e.src]}else{_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var a=0;a<this._url.length;a++){var s=fe("source");s.src=this._url[a],e.appendChild(s)}}}});function Sn(t,e,i){return new Pn(t,e,i)}var Tn=Mn.extend({_initImage:function(){var t=this._image=this._url;xe(t,"leaflet-image-layer"),this._zoomAnimated&&xe(t,"leaflet-zoom-animated"),this.options.className&&xe(t,this.options.className),t.onselectstart=c,t.onmousemove=c}});function An(t,e,i){return new Tn(t,e,i)}var Dn=Wi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof N||_(t))?(this._latlng=U(t),d(this,e)):(d(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Me(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Me(this._container,0),this._removeTimeout=setTimeout(o(ge,void 0,this._container),200)):ge(this._container),this.options.interactive&&(ke(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=U(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ve(this._container),this},bringToBack:function(){return this._map&&ye(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Yi){e=null;var i=this._source._layers;for(var n in i)if(i[n]._map){e=i[n];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.");t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=B(this.options.offset),i=this._getAnchor();this._zoomAnimated?Te(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}});oi.include({_initOverlay:function(t,e,i,n){var o=e;return o instanceof t||(o=new t(n).setContent(e)),i&&o.setLatLng(i),o}}),Wi.include({_initOverlay:function(t,e,i,n){var o=i;return o instanceof t?(d(o,n),o._source=this):(o=e&&!n?e:new t(n,this)).setContent(i),o}});var En=Dn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Dn.prototype.openOn.call(this,t)},onAdd:function(t){Dn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof on||this._source.on("preclick",We))},onRemove:function(t){Dn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof on||this._source.off("preclick",We))},getEvents:function(){var t=Dn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=fe("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=fe("div",t+"-content-wrapper",e);if(this._contentNode=fe("div",t+"-content",i),$e(e),qe(this._contentNode),je(e,"contextmenu",We),this._tipContainer=fe("div",t+"-tip-container",e),this._tip=fe("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=fe("a",t+"-close-button",e);n.setAttribute("role","button"),n.setAttribute("aria-label","Close popup"),n.href="#close",n.innerHTML='<span aria-hidden="true">&#215;</span>',je(n,"click",(function(t){Ye(t),this.close()}),this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&n>o?(e.height=o+"px",xe(t,r)):ke(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();Te(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var t=this._map,e=parseInt(me(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new O(this._containerLeft,-i-this._containerBottom);o._add(Ae(this._container));var r=t.layerPointToContainerPoint(o),a=B(this.options.autoPanPadding),s=B(this.options.autoPanPaddingTopLeft||a),l=B(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),h=0,u=0;r.x+n+l.x>c.x&&(h=r.x+n-c.x+l.x),r.x-h-s.x<0&&(h=r.x-s.x),r.y+i+l.y>c.y&&(u=r.y+i-c.y+l.y),r.y-u-s.y<0&&(u=r.y-s.y),(h||u)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([h,u]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),On=function(t,e){return new En(t,e)};oi.mergeOptions({closePopupOnClick:!0}),oi.include({openPopup:function(t,e,i){return this._initOverlay(En,t,e,i).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),Wi.include({bindPopup:function(t,e){return this._popup=this._initOverlay(En,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Yi||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){Ke(t);var e=t.layer||t.target;this._popup._source!==e||e instanceof on?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var In=Dn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Dn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Dn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Dn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=fe("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,o=this._container,r=n.latLngToContainerPoint(n.getCenter()),a=n.layerPointToContainerPoint(t),s=this.options.direction,l=o.offsetWidth,c=o.offsetHeight,h=B(this.options.offset),u=this._getAnchor();"top"===s?(e=l/2,i=c):"bottom"===s?(e=l/2,i=0):"center"===s?(e=l/2,i=c/2):"right"===s?(e=0,i=c/2):"left"===s?(e=l,i=c/2):a.x<r.x?(s="right",e=0,i=c/2):(s="left",e=l+2*(h.x+u.x),i=c/2),t=t.subtract(B(e,i,!0)).add(h).add(u),ke(o,"leaflet-tooltip-right"),ke(o,"leaflet-tooltip-left"),ke(o,"leaflet-tooltip-top"),ke(o,"leaflet-tooltip-bottom"),xe(o,"leaflet-tooltip-"+s),Te(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Bn=function(t,e){return new In(t,e)};oi.include({openTooltip:function(t,e,i){return this._initOverlay(In,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Wi.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(In,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Yi||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=t.getElement();e&&(je(e,"focus",(function(){this._tooltip._source=t,this.openTooltip()}),this),je(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var Rn=Ji.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(_e(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=B(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function zn(t){return new Rn(t)}Ji.Default=Qi;var Fn=Wi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ft.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ge(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ve(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ye(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof O?t:new O(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),o=0,r=i.length;o<r;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ft.ielt9){Me(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);Me(o.el,r),r<1?e=!0:(o.active?i=!0:this._onOpaqueTile(o),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(P(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=fe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ge(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=fe("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),c(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ge(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),r=Math.floor(e/2),a=i-1,s=new O(+o,+r);s.z=+a;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>n&&this._retainParent(o,r,a,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new O(o,r);a.z=i+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(o,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var o=Math.round(e);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var r=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();Ft.any3d?Se(t.el,o,n):Te(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*n);return new R(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),r=o.getCenter(),a=[],s=this.options.keepBuffer,l=new R(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var h=this._tiles[c].coords;h.z===this._tileZoom&&l.contains(new O(h.x,h.y))||(this._tiles[c].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i);else{for(var u=o.min.y;u<=o.max.y;u++)for(var p=o.min.x;p<=o.max.x;p++){var d=new O(p,u);if(d.z=this._tileZoom,this._isValidTile(d)){var m=this._tiles[this._tileCoordsToKey(d)];m?m.current=!0:a.push(d)}}if(a.sort((function(t,e){return t.distanceTo(r)-e.distanceTo(r)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(p=0;p<a.length;p++)this._addTile(a[p],f);this._level.el.appendChild(f)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i);return[e.unproject(n,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new F(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new O(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(ge(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){xe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,Ft.ielt9&&this.options.opacity<1&&Me(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),o(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&C(o(this._tileReady,this,t,null,r)),Te(r,i),this._tiles[n]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(Me(i.el,0),P(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(xe(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ft.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new O(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new R(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function jn(t){return new Fn(t)}var Nn=Fn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&Ft.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return je(i,"load",o(this._tileOnLoad,this,e,i)),je(i,"error",o(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:Ft.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return g(this._url,i(e,this.options))},_tileOnLoad:function(t,e){Ft.ielt9?setTimeout(o(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,!e.complete)){e.src=y;var i=this._tiles[t].coords;ge(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",y),Fn.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==y))return Fn.prototype._tileReady.call(this,t,e,i)}});function Un(t,e){return new Nn(t,e)}var Gn=Nn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=i({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);var r=(e=d(this,e)).detectRetina&&Ft.retina?2:1,a=this.getTileSize();n.width=a.x*r,n.height=a.y*r,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Nn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=z(i.project(e[0]),i.project(e[1])),o=n.min,r=n.max,a=(this._wmsVersion>=1.3&&this._crs===Zi?[o.y,o.x,r.y,r.x]:[o.x,o.y,r.x,r.y]).join(","),s=Nn.prototype.getTileUrl.call(this,t);return s+m(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});function Hn(t,e){return new Gn(t,e)}Nn.WMS=Gn,Un.wms=Hn;var Zn=Wi.extend({options:{padding:.1},initialize:function(t){d(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),r=n.multiplyBy(-i).add(o).subtract(this._map._getNewPixelOrigin(t,e));Ft.any3d?Se(this._container,r,i):Te(this._container,r)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new R(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vn=Zn.extend({options:{tolerance:0},getEvents:function(){var t=Zn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");je(t,"mousemove",this._onMouseMove,this),je(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),je(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,ge(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Zn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=Ft.retina?2:1;Te(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",Ft.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Zn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),o=[];for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,r,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),i=0;i<s;i++){for(n=0,o=a[i].length;n<o;n++)r=a[i][n],l[n?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(n)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(i=e);this._fireEvent(!!i&&[i],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ke(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,n,r=this._drawFirst;r;r=r.next)(i=r.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(xe(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(o((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function Wn(t){return Ft.canvas?new Vn(t):null}var qn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),$n={_initContainer:function(){this._container=fe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=qn("shape");xe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=qn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ge(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e||(e=t._stroke=qn("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=_(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=qn("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ve(t._container)},_bringToBack:function(t){ye(t._container)}},Yn=Ft.vml?qn:J,Kn=Zn.extend({_initContainer:function(){this._container=Yn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Yn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ge(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Zn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),Te(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Yn("path");t.options.className&&xe(e,t.options.className),t.options.interactive&&xe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ge(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,X(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ve(t._path)},_bringToBack:function(t){ye(t._path)}});function Jn(t){return Ft.svg||Ft.vml?new Kn(t):null}Ft.vml&&Kn.include($n),oi.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Wn(t)||Jn(t)}});var Xn=un.extend({initialize:function(t,e){un.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=j(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Qn(t,e){return new Xn(t,e)}Kn.create=Yn,Kn.pointsToPath=X,dn.geometryToLayer=mn,dn.coordsToLatLng=gn,dn.coordsToLatLngs=_n,dn.latLngToCoords=vn,dn.latLngsToCoords=yn,dn.getFeature=bn,dn.asFeature=xn,oi.mergeOptions({boxZoom:!0});var to=_i.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ge(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),re(),Ee(),this._startPoint=this._map.mouseEventToContainerPoint(t),je(document,{contextmenu:Ke,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=fe("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new R(this._point,this._startPoint),i=e.getSize();Te(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ge(this._box),ke(this._container,"leaflet-crosshair")),ae(),Oe(),Ue(document,{contextmenu:Ke,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var e=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});oi.addInitHook("addHandler","boxZoom",to),oi.mergeOptions({doubleClickZoom:!0});var eo=_i.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});oi.addInitHook("addHandler","doubleClickZoom",eo),oi.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var io=_i.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new xi(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ke(this._map._container,"leaflet-grab"),ke(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=z(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,r=(n+e+i)%t-e-i,a=Math.abs(o+i)<Math.abs(r+i)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,s=o.multiplyBy(a/r),l=s.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,l),h=s.multiplyBy(c/l),u=c/(i.inertiaDeceleration*a),p=h.multiplyBy(-u/2).round();p.x||p.y?(p=e._limitOffset(p,e.options.maxBounds),C((function(){e.panBy(p,{duration:u,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});oi.addInitHook("addHandler","dragging",io),oi.mergeOptions({keyboard:!0,keyboardPanDelta:80});var no=_i.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),je(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){je(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(e=this._panKeys[i],t.shiftKey&&(e=B(e).multiplyBy(3)),n.options.maxBounds&&(e=n._limitOffset(B(e),n.options.maxBounds)),n.options.worldCopyJump){var o=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(e)));n.panTo(o)}else n.panBy(e)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Ke(t)}}});oi.addInitHook("addHandler","keyboard",no),oi.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var oo=_i.extend({addHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=ti(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),n),Ke(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,r=i?Math.ceil(o/i)*i:o,a=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});oi.addInitHook("addHandler","scrollWheelZoom",oo);var ro=600;oi.mergeOptions({tapHold:Ft.touchNative&&Ft.safari&&Ft.mobile,tapTolerance:15});var ao=_i.extend({addHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new O(e.clientX,e.clientY),this._holdTimeout=setTimeout(o((function(){this._cancel(),this._isTapValid()&&(je(document,"touchend",Ye),je(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))}),this),ro),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Ue(document,"touchend",Ye),Ue(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new O(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});oi.addInitHook("addHandler","tapHold",ao),oi.mergeOptions({touchZoom:Ft.touch,bounceAtZoomLimits:!0});var so=_i.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ke(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),Ye(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),r=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&r>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var a=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var s=o(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=C(s,this,!0),Ye(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,P(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});oi.addInitHook("addHandler","touchZoom",so),oi.BoxZoom=to,oi.DoubleClickZoom=eo,oi.Drag=io,oi.Keyboard=no,oi.ScrollWheelZoom=oo,oi.TapHold=ao,oi.TouchZoom=so,t.Bounds=R,t.Browser=Ft,t.CRS=H,t.Canvas=Vn,t.Circle=sn,t.CircleMarker=rn,t.Class=T,t.Control=ai,t.DivIcon=Rn,t.DivOverlay=Dn,t.DomEvent=ii,t.DomUtil=Fe,t.Draggable=xi,t.Evented=E,t.FeatureGroup=Yi,t.GeoJSON=dn,t.GridLayer=Fn,t.Handler=_i,t.Icon=Ji,t.ImageOverlay=Mn,t.LatLng=N,t.LatLngBounds=F,t.Layer=Wi,t.LayerGroup=qi,t.LineUtil=Ri,t.Map=oi,t.Marker=en,t.Mixin=yi,t.Path=on,t.Point=O,t.PolyUtil=ji,t.Polygon=un,t.Polyline=cn,t.Popup=En,t.PosAnimation=ni,t.Projection=Gi,t.Rectangle=Xn,t.Renderer=Zn,t.SVG=Kn,t.SVGOverlay=Tn,t.TileLayer=Nn,t.Tooltip=In,t.Transformation=q,t.Util=S,t.VideoOverlay=Pn,t.bind=o,t.bounds=z,t.canvas=Wn,t.circle=ln,t.circleMarker=an,t.control=si,t.divIcon=zn,t.extend=i,t.featureGroup=Ki,t.geoJSON=Ln,t.geoJson=wn,t.gridLayer=jn,t.icon=Xi,t.imageOverlay=Cn,t.latLng=U,t.latLngBounds=j,t.layerGroup=$i,t.map=ri,t.marker=nn,t.point=B,t.polygon=pn,t.polyline=hn,t.popup=On,t.rectangle=Qn,t.setOptions=d,t.stamp=a,t.svg=Jn,t.svgOverlay=An,t.tileLayer=Un,t.tooltip=Bn,t.transformation=$,t.version=e,t.videoOverlay=Sn;var lo=window.L;t.noConflict=function(){return window.L=lo,this},window.L=t}(e)},192:function(t,e){var i,n,o,r=function(){var t=function(t,e){var i=t,n=h[e],o=null,r=0,a=null,s=[],l={},c=function(t,e){o=function(t){for(var e=new Array(t),i=0;i<t;i+=1){e[i]=new Array(t);for(var n=0;n<t;n+=1)e[i][n]=null}return e}(r=4*i+17),u(0,0),u(r-7,0),u(0,r-7),d(),p(),f(t,e),i>=7&&m(t),null==a&&(a=_(i,n,s)),g(a,e)},u=function(t,e){for(var i=-1;i<=7;i+=1)if(!(t+i<=-1||r<=t+i))for(var n=-1;n<=7;n+=1)e+n<=-1||r<=e+n||(o[t+i][e+n]=0<=i&&i<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=n&&n<=4)},p=function(){for(var t=8;t<r-8;t+=1)null==o[t][6]&&(o[t][6]=t%2==0);for(var e=8;e<r-8;e+=1)null==o[6][e]&&(o[6][e]=e%2==0)},d=function(){for(var t=y.getPatternPosition(i),e=0;e<t.length;e+=1)for(var n=0;n<t.length;n+=1){var r=t[e],a=t[n];if(null==o[r][a])for(var s=-2;s<=2;s+=1)for(var l=-2;l<=2;l+=1)o[r+s][a+l]=-2==s||2==s||-2==l||2==l||0==s&&0==l}},m=function(t){for(var e=y.getBCHTypeNumber(i),n=0;n<18;n+=1){var a=!t&&1==(e>>n&1);o[Math.floor(n/3)][n%3+r-8-3]=a}for(n=0;n<18;n+=1){a=!t&&1==(e>>n&1);o[n%3+r-8-3][Math.floor(n/3)]=a}},f=function(t,e){for(var i=n<<3|e,a=y.getBCHTypeInfo(i),s=0;s<15;s+=1){var l=!t&&1==(a>>s&1);s<6?o[s][8]=l:s<8?o[s+1][8]=l:o[r-15+s][8]=l}for(s=0;s<15;s+=1){l=!t&&1==(a>>s&1);s<8?o[8][r-s-1]=l:s<9?o[8][15-s-1+1]=l:o[8][15-s-1]=l}o[r-8][8]=!t},g=function(t,e){for(var i=-1,n=r-1,a=7,s=0,l=y.getMaskFunction(e),c=r-1;c>0;c-=2)for(6==c&&(c-=1);;){for(var h=0;h<2;h+=1)if(null==o[n][c-h]){var u=!1;s<t.length&&(u=1==(t[s]>>>a&1)),l(n,c-h)&&(u=!u),o[n][c-h]=u,-1==(a-=1)&&(s+=1,a=7)}if((n+=i)<0||r<=n){n-=i,i=-i;break}}},_=function(t,e,i){for(var n=k.getRSBlocks(t,e),o=L(),r=0;r<i.length;r+=1){var a=i[r];o.put(a.getMode(),4),o.put(a.getLength(),y.getLengthInBits(a.getMode(),t)),a.write(o)}var s=0;for(r=0;r<n.length;r+=1)s+=n[r].dataCount;if(o.getLengthInBits()>8*s)throw"code length overflow. ("+o.getLengthInBits()+">"+8*s+")";for(o.getLengthInBits()+4<=8*s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*s||(o.put(236,8),o.getLengthInBits()>=8*s));)o.put(17,8);return function(t,e){for(var i=0,n=0,o=0,r=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s+=1){var l=e[s].dataCount,c=e[s].totalCount-l;n=Math.max(n,l),o=Math.max(o,c),r[s]=new Array(l);for(var h=0;h<r[s].length;h+=1)r[s][h]=255&t.getBuffer()[h+i];i+=l;var u=y.getErrorCorrectPolynomial(c),p=x(r[s],u.getLength()-1).mod(u);for(a[s]=new Array(u.getLength()-1),h=0;h<a[s].length;h+=1){var d=h+p.getLength()-a[s].length;a[s][h]=d>=0?p.getAt(d):0}}var m=0;for(h=0;h<e.length;h+=1)m+=e[h].totalCount;var f=new Array(m),g=0;for(h=0;h<n;h+=1)for(s=0;s<e.length;s+=1)h<r[s].length&&(f[g]=r[s][h],g+=1);for(h=0;h<o;h+=1)for(s=0;s<e.length;s+=1)h<a[s].length&&(f[g]=a[s][h],g+=1);return f}(o,n)};l.addData=function(t,e){var i=null;switch(e=e||"Byte"){case"Numeric":i=w(t);break;case"Alphanumeric":i=M(t);break;case"Byte":i=C(t);break;case"Kanji":i=P(t);break;default:throw"mode:"+e}s.push(i),a=null},l.isDark=function(t,e){if(t<0||r<=t||e<0||r<=e)throw t+","+e;return o[t][e]},l.getModuleCount=function(){return r},l.make=function(){if(i<1){for(var t=1;t<40;t++){for(var e=k.getRSBlocks(t,n),o=L(),r=0;r<s.length;r++){var a=s[r];o.put(a.getMode(),4),o.put(a.getLength(),y.getLengthInBits(a.getMode(),t)),a.write(o)}var h=0;for(r=0;r<e.length;r++)h+=e[r].dataCount;if(o.getLengthInBits()<=8*h)break}i=t}c(!1,function(){for(var t=0,e=0,i=0;i<8;i+=1){c(!0,i);var n=y.getLostPoint(l);(0==i||t>n)&&(t=n,e=i)}return e}())},l.createTableTag=function(t,e){t=t||2;var i="";i+='<table style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",i+='">',i+="<tbody>";for(var n=0;n<l.getModuleCount();n+=1){i+="<tr>";for(var o=0;o<l.getModuleCount();o+=1)i+='<td style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: 0px;",i+=" width: "+t+"px;",i+=" height: "+t+"px;",i+=" background-color: ",i+=l.isDark(n,o)?"#000000":"#ffffff",i+=";",i+='"/>';i+="</tr>"}return i+="</tbody>",i+="</table>"},l.createSvgTag=function(t,e,i,n){var o={};"object"==typeof arguments[0]&&(t=(o=arguments[0]).cellSize,e=o.margin,i=o.alt,n=o.title),t=t||2,e=void 0===e?4*t:e,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var r,a,s,c,h=l.getModuleCount()*t+2*e,u="";for(c="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",u+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',u+=o.scalable?"":' width="'+h+'px" height="'+h+'px"',u+=' viewBox="0 0 '+h+" "+h+'" ',u+=' preserveAspectRatio="xMinYMin meet"',u+=n.text||i.text?' role="img" aria-labelledby="'+v([n.id,i.id].join(" ").trim())+'"':"",u+=">",u+=n.text?'<title id="'+v(n.id)+'">'+v(n.text)+"</title>":"",u+=i.text?'<description id="'+v(i.id)+'">'+v(i.text)+"</description>":"",u+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',u+='<path d="',a=0;a<l.getModuleCount();a+=1)for(s=a*t+e,r=0;r<l.getModuleCount();r+=1)l.isDark(a,r)&&(u+="M"+(r*t+e)+","+s+c);return u+='" stroke="transparent" fill="black"/>',u+="</svg>"},l.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var i=l.getModuleCount()*t+2*e,n=e,o=i-e;return A(i,i,(function(e,i){if(n<=e&&e<o&&n<=i&&i<o){var r=Math.floor((e-n)/t),a=Math.floor((i-n)/t);return l.isDark(a,r)?0:1}return 1}))},l.createImgTag=function(t,e,i){t=t||2,e=void 0===e?4*t:e;var n=l.getModuleCount()*t+2*e,o="";return o+="<img",o+=' src="',o+=l.createDataURL(t,e),o+='"',o+=' width="',o+=n,o+='"',o+=' height="',o+=n,o+='"',i&&(o+=' alt="',o+=v(i),o+='"'),o+="/>"};var v=function(t){for(var e="",i=0;i<t.length;i+=1){var n=t.charAt(i);switch(n){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=n}}return e};return l.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,i,n,o,r,a=1*l.getModuleCount()+2*t,s=t,c=a-t,h={"██":"█","█ ":"▀"," █":"▄","  ":" "},u={"██":"▀","█ ":"▀"," █":" ","  ":" "},p="";for(e=0;e<a;e+=2){for(n=Math.floor((e-s)/1),o=Math.floor((e+1-s)/1),i=0;i<a;i+=1)r="█",s<=i&&i<c&&s<=e&&e<c&&l.isDark(n,Math.floor((i-s)/1))&&(r=" "),s<=i&&i<c&&s<=e+1&&e+1<c&&l.isDark(o,Math.floor((i-s)/1))?r+=" ":r+="█",p+=t<1&&e+1>=c?u[r]:h[r];p+="\n"}return a%2&&t>0?p.substring(0,p.length-a-1)+Array(a+1).join("▀"):p.substring(0,p.length-1)}(e);t-=1,e=void 0===e?2*t:e;var i,n,o,r,a=l.getModuleCount()*t+2*e,s=e,c=a-e,h=Array(t+1).join("██"),u=Array(t+1).join("  "),p="",d="";for(i=0;i<a;i+=1){for(o=Math.floor((i-s)/t),d="",n=0;n<a;n+=1)r=1,s<=n&&n<c&&s<=i&&i<c&&l.isDark(o,Math.floor((n-s)/t))&&(r=0),d+=r?h:u;for(o=0;o<t;o+=1)p+=d+"\n"}return p.substring(0,p.length-1)},l.renderTo2dContext=function(t,e){e=e||2;for(var i=l.getModuleCount(),n=0;n<i;n++)for(var o=0;o<i;o++)t.fillStyle=l.isDark(n,o)?"black":"white",t.fillRect(n*e,o*e,e,e)},l};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],i=0;i<t.length;i+=1){var n=t.charCodeAt(i);e.push(255&n)}return e}}).default,t.createStringToBytes=function(t,e){var i=function(){for(var i=T(t),n=function(){var t=i.read();if(-1==t)throw"eof";return t},o=0,r={};;){var a=i.read();if(-1==a)break;var s=n(),l=n()<<8|n();r[String.fromCharCode(a<<8|s)]=l,o+=1}if(o!=e)throw o+" != "+e;return r}(),n="?".charCodeAt(0);return function(t){for(var e=[],o=0;o<t.length;o+=1){var r=t.charCodeAt(o);if(r<128)e.push(r);else{var a=i[t.charAt(o)];"number"==typeof a?(255&a)==a?e.push(a):(e.push(a>>>8),e.push(255&a)):e.push(n)}}return e}};var e,i,n,o,r,a=1,s=2,l=4,c=8,h={L:1,M:0,Q:3,H:2},u=0,p=1,d=2,m=3,f=4,g=5,_=6,v=7,y=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i=1335,n=7973,r=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(o={}).getBCHTypeInfo=function(t){for(var e=t<<10;r(e)-r(i)>=0;)e^=i<<r(e)-r(i);return 21522^(t<<10|e)},o.getBCHTypeNumber=function(t){for(var e=t<<12;r(e)-r(n)>=0;)e^=n<<r(e)-r(n);return t<<12|e},o.getPatternPosition=function(t){return e[t-1]},o.getMaskFunction=function(t){switch(t){case u:return function(t,e){return(t+e)%2==0};case p:return function(t,e){return t%2==0};case d:return function(t,e){return e%3==0};case m:return function(t,e){return(t+e)%3==0};case f:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case g:return function(t,e){return t*e%2+t*e%3==0};case _:return function(t,e){return(t*e%2+t*e%3)%2==0};case v:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},o.getErrorCorrectPolynomial=function(t){for(var e=x([1],0),i=0;i<t;i+=1)e=e.multiply(x([1,b.gexp(i)],0));return e},o.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case a:return 10;case s:return 9;case l:case c:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case a:return 12;case s:return 11;case l:return 16;case c:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case a:return 14;case s:return 13;case l:return 16;case c:return 12;default:throw"mode:"+t}}},o.getLostPoint=function(t){for(var e=t.getModuleCount(),i=0,n=0;n<e;n+=1)for(var o=0;o<e;o+=1){for(var r=0,a=t.isDark(n,o),s=-1;s<=1;s+=1)if(!(n+s<0||e<=n+s))for(var l=-1;l<=1;l+=1)o+l<0||e<=o+l||0==s&&0==l||a==t.isDark(n+s,o+l)&&(r+=1);r>5&&(i+=3+r-5)}for(n=0;n<e-1;n+=1)for(o=0;o<e-1;o+=1){var c=0;t.isDark(n,o)&&(c+=1),t.isDark(n+1,o)&&(c+=1),t.isDark(n,o+1)&&(c+=1),t.isDark(n+1,o+1)&&(c+=1),0!=c&&4!=c||(i+=3)}for(n=0;n<e;n+=1)for(o=0;o<e-6;o+=1)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(i+=40);for(o=0;o<e;o+=1)for(n=0;n<e-6;n+=1)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(i+=40);var h=0;for(o=0;o<e;o+=1)for(n=0;n<e;n+=1)t.isDark(n,o)&&(h+=1);return i+=Math.abs(100*h/e/e-50)/5*10},o),b=function(){for(var t=new Array(256),e=new Array(256),i=0;i<8;i+=1)t[i]=1<<i;for(i=8;i<256;i+=1)t[i]=t[i-4]^t[i-5]^t[i-6]^t[i-8];for(i=0;i<255;i+=1)e[t[i]]=i;var n={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return n}();function x(t,e){if(void 0===t.length)throw t.length+"/"+e;var i=function(){for(var i=0;i<t.length&&0==t[i];)i+=1;for(var n=new Array(t.length-i+e),o=0;o<t.length-i;o+=1)n[o]=t[o+i];return n}(),n={getAt:function(t){return i[t]},getLength:function(){return i.length},multiply:function(t){for(var e=new Array(n.getLength()+t.getLength()-1),i=0;i<n.getLength();i+=1)for(var o=0;o<t.getLength();o+=1)e[i+o]^=b.gexp(b.glog(n.getAt(i))+b.glog(t.getAt(o)));return x(e,0)},mod:function(t){if(n.getLength()-t.getLength()<0)return n;for(var e=b.glog(n.getAt(0))-b.glog(t.getAt(0)),i=new Array(n.getLength()),o=0;o<n.getLength();o+=1)i[o]=n.getAt(o);for(o=0;o<t.getLength();o+=1)i[o]^=b.gexp(b.glog(t.getAt(o))+e);return x(i,0).mod(t)}};return n}var k=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var i={};return i.totalCount=t,i.dataCount=e,i},i={};return i.getRSBlocks=function(i,n){var o=function(e,i){switch(i){case h.L:return t[4*(e-1)+0];case h.M:return t[4*(e-1)+1];case h.Q:return t[4*(e-1)+2];case h.H:return t[4*(e-1)+3];default:return}}(i,n);if(void 0===o)throw"bad rs block @ typeNumber:"+i+"/errorCorrectionLevel:"+n;for(var r=o.length/3,a=[],s=0;s<r;s+=1)for(var l=o[3*s+0],c=o[3*s+1],u=o[3*s+2],p=0;p<l;p+=1)a.push(e(c,u));return a},i}(),L=function(){var t=[],e=0,i={getBuffer:function(){return t},getAt:function(e){var i=Math.floor(e/8);return 1==(t[i]>>>7-e%8&1)},put:function(t,e){for(var n=0;n<e;n+=1)i.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return e},putBit:function(i){var n=Math.floor(e/8);t.length<=n&&t.push(0),i&&(t[n]|=128>>>e%8),e+=1}};return i},w=function(t){var e=a,i=t,n={getMode:function(){return e},getLength:function(t){return i.length},write:function(t){for(var e=i,n=0;n+2<e.length;)t.put(o(e.substring(n,n+3)),10),n+=3;n<e.length&&(e.length-n==1?t.put(o(e.substring(n,n+1)),4):e.length-n==2&&t.put(o(e.substring(n,n+2)),7))}},o=function(t){for(var e=0,i=0;i<t.length;i+=1)e=10*e+r(t.charAt(i));return e},r=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return n},M=function(t){var e=s,i=t,n={getMode:function(){return e},getLength:function(t){return i.length},write:function(t){for(var e=i,n=0;n+1<e.length;)t.put(45*o(e.charAt(n))+o(e.charAt(n+1)),11),n+=2;n<e.length&&t.put(o(e.charAt(n)),6)}},o=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return n},C=function(e){var i=l,n=t.stringToBytes(e),o={getMode:function(){return i},getLength:function(t){return n.length},write:function(t){for(var e=0;e<n.length;e+=1)t.put(n[e],8)}};return o},P=function(e){var i=c,n=t.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";!function(t,e){var i=n("友");if(2!=i.length||38726!=(i[0]<<8|i[1]))throw"sjis not supported."}();var o=n(e),r={getMode:function(){return i},getLength:function(t){return~~(o.length/2)},write:function(t){for(var e=o,i=0;i+1<e.length;){var n=(255&e[i])<<8|255&e[i+1];if(33088<=n&&n<=40956)n-=33088;else{if(!(57408<=n&&n<=60351))throw"illegal char at "+(i+1)+"/"+n;n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13),i+=2}if(i<e.length)throw"illegal char at "+(i+1)}};return r},S=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,i,n){i=i||0,n=n||t.length;for(var o=0;o<n;o+=1)e.writeByte(t[o+i])},writeString:function(t){for(var i=0;i<t.length;i+=1)e.writeByte(t.charCodeAt(i))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var i=0;i<t.length;i+=1)i>0&&(e+=","),e+=t[i];return e+="]"}};return e},T=function(t){var e=t,i=0,n=0,o=0,r={read:function(){for(;o<8;){if(i>=e.length){if(0==o)return-1;throw"unexpected end of file./"+o}var t=e.charAt(i);if(i+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(n=n<<6|a(t.charCodeAt(0)),o+=6)}var r=n>>>o-8&255;return o-=8,r}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return r},A=function(t,e,i){for(var n=function(t,e){var i=t,n=e,o=new Array(t*e),r={setPixel:function(t,e,n){o[e*i+t]=n},write:function(t){t.writeString("GIF87a"),t.writeShort(i),t.writeShort(n),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(i),t.writeShort(n),t.writeByte(0);var e=a(2);t.writeByte(2);for(var o=0;e.length-o>255;)t.writeByte(255),t.writeBytes(e,o,255),o+=255;t.writeByte(e.length-o),t.writeBytes(e,o,e.length-o),t.writeByte(0),t.writeString(";")}},a=function(t){for(var e=1<<t,i=1+(1<<t),n=t+1,r=s(),a=0;a<e;a+=1)r.add(String.fromCharCode(a));r.add(String.fromCharCode(e)),r.add(String.fromCharCode(i));var l,c,h,u=S(),p=(l=u,c=0,h=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;c+e>=8;)l.writeByte(255&(t<<c|h)),e-=8-c,t>>>=8-c,h=0,c=0;h|=t<<c,c+=e},flush:function(){c>0&&l.writeByte(h)}});p.write(e,n);var d=0,m=String.fromCharCode(o[d]);for(d+=1;d<o.length;){var f=String.fromCharCode(o[d]);d+=1,r.contains(m+f)?m+=f:(p.write(r.indexOf(m),n),r.size()<4095&&(r.size()==1<<n&&(n+=1),r.add(m+f)),m=f)}return p.write(r.indexOf(m),n),p.write(i,n),p.flush(),u.toByteArray()},s=function(){var t={},e=0,i={add:function(n){if(i.contains(n))throw"dup key:"+n;t[n]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return i};return r}(t,e),o=0;o<e;o+=1)for(var r=0;r<t;r+=1)n.setPixel(r,o,i(r,o));var a=S();n.write(a);for(var s=function(){var t=0,e=0,i=0,n="",o={},r=function(t){n+=String.fromCharCode(a(63&t))},a=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return o.writeByte=function(n){for(t=t<<8|255&n,e+=8,i+=1;e>=6;)r(t>>>e-6),e-=6},o.flush=function(){if(e>0&&(r(t<<6-e),t=0,e=0),i%3!=0)for(var o=3-i%3,a=0;a<o;a+=1)n+="="},o.toString=function(){return n},o}(),l=a.toByteArray(),c=0;c<l.length;c+=1)s.writeByte(l[c]);return s.flush(),"data:image/gif;base64,"+s};return t}();r.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(i++,n=65536+((1023&n)<<10|1023&t.charCodeAt(i)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t)},n=[],void 0===(o="function"==typeof(i=function(){return r})?i.apply(e,n):i)||(t.exports=o)},686:function(t,e,i){var n,o,r;
/*!
 * Select2 4.0.13
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */o=[i(311)],n=function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var i,n,o;return e&&e.requirejs||(e?n=e:e={},function(t){var e,r,a,s,l={},c={},h={},u={},p=Object.prototype.hasOwnProperty,d=[].slice,m=/\.js$/;function f(t,e){return p.call(t,e)}function g(t,e){var i,n,o,r,a,s,l,c,u,p,d,f=e&&e.split("/"),g=h.map,_=g&&g["*"]||{};if(t){for(a=(t=t.split("/")).length-1,h.nodeIdCompat&&m.test(t[a])&&(t[a]=t[a].replace(m,"")),"."===t[0].charAt(0)&&f&&(t=f.slice(0,f.length-1).concat(t)),u=0;u<t.length;u++)if("."===(d=t[u]))t.splice(u,1),u-=1;else if(".."===d){if(0===u||1===u&&".."===t[2]||".."===t[u-1])continue;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}if((f||_)&&g){for(u=(i=t.split("/")).length;u>0;u-=1){if(n=i.slice(0,u).join("/"),f)for(p=f.length;p>0;p-=1)if((o=g[f.slice(0,p).join("/")])&&(o=o[n])){r=o,s=u;break}if(r)break;!l&&_&&_[n]&&(l=_[n],c=u)}!r&&l&&(r=l,s=c),r&&(i.splice(0,s,r),t=i.join("/"))}return t}function _(e,i){return function(){var n=d.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),r.apply(t,n.concat([e,i]))}}function v(t){return function(e){return g(e,t)}}function y(t){return function(e){l[t]=e}}function b(i){if(f(c,i)){var n=c[i];delete c[i],u[i]=!0,e.apply(t,n)}if(!f(l,i)&&!f(u,i))throw new Error("No "+i);return l[i]}function x(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function k(t){return t?x(t):[]}function L(t){return function(){return h&&h.config&&h.config[t]||{}}}a=function(t,e){var i,n=x(t),o=n[0],r=e[1];return t=n[1],o&&(i=b(o=g(o,r))),o?t=i&&i.normalize?i.normalize(t,v(r)):g(t,r):(o=(n=x(t=g(t,r)))[0],t=n[1],o&&(i=b(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:i}},s={require:function(t){return _(t)},exports:function(t){var e=l[t];return void 0!==e?e:l[t]={}},module:function(t){return{id:t,uri:"",exports:l[t],config:L(t)}}},e=function(e,i,n,o){var r,h,p,d,m,g,v,x=[],L=typeof n;if(g=k(o=o||e),"undefined"===L||"function"===L){for(i=!i.length&&n.length?["require","exports","module"]:i,m=0;m<i.length;m+=1)if("require"===(h=(d=a(i[m],g)).f))x[m]=s.require(e);else if("exports"===h)x[m]=s.exports(e),v=!0;else if("module"===h)r=x[m]=s.module(e);else if(f(l,h)||f(c,h)||f(u,h))x[m]=b(h);else{if(!d.p)throw new Error(e+" missing "+h);d.p.load(d.n,_(o,!0),y(h),{}),x[m]=l[h]}p=n?n.apply(l[e],x):void 0,e&&(r&&r.exports!==t&&r.exports!==l[e]?l[e]=r.exports:p===t&&v||(l[e]=p))}else e&&(l[e]=n)},i=n=r=function(i,n,o,l,c){if("string"==typeof i)return s[i]?s[i](n):b(a(i,k(n)).f);if(!i.splice){if((h=i).deps&&r(h.deps,h.callback),!n)return;n.splice?(i=n,n=o,o=null):i=t}return n=n||function(){},"function"==typeof o&&(o=l,l=c),l?e(t,i,n,o):setTimeout((function(){e(t,i,n,o)}),4),r},r.config=function(t){return r(t)},i._defined=l,(o=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),f(l,t)||f(c,t)||(c[t]=[t,e,i])}).amd={jQuery:!0}}(),e.requirejs=i,e.require=n,e.define=o),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(t){var e={};function i(t){var e=t.prototype,i=[];for(var n in e)"function"==typeof e[n]&&"constructor"!==n&&i.push(n);return i}e.Extend=function(t,e){var i={}.hasOwnProperty;function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},e.Decorate=function(t,e){var n=i(e),o=i(t);function r(){var i=Array.prototype.unshift,n=e.prototype.constructor.length,o=t.prototype.constructor;n>0&&(i.call(arguments,t.prototype.constructor),o=e.prototype.constructor),o.apply(this,arguments)}function a(){this.constructor=r}e.displayName=t.displayName,r.prototype=new a;for(var s=0;s<o.length;s++){var l=o[s];r.prototype[l]=t.prototype[l]}for(var c=function(t){var i=function(){};t in r.prototype&&(i=r.prototype[t]);var n=e.prototype[t];return function(){return Array.prototype.unshift.call(arguments,i),n.apply(this,arguments)}},h=0;h<n.length;h++){var u=n[h];r.prototype[u]=c(u)}return r};var n=function(){this.listeners={}};n.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},n.prototype.trigger=function(t){var e=Array.prototype.slice,i=e.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),i[0]._type=t,t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(t,e){for(var i=0,n=t.length;i<n;i++)t[i].apply(this,e)},e.Observable=n,e.generateChars=function(t){for(var e="",i=0;i<t;i++)e+=Math.floor(36*Math.random()).toString(36);return e},e.bind=function(t,e){return function(){t.apply(e,arguments)}},e._convertData=function(t){for(var e in t){var i=e.split("-"),n=t;if(1!==i.length){for(var o=0;o<i.length;o++){var r=i[o];(r=r.substring(0,1).toLowerCase()+r.substring(1))in n||(n[r]={}),o==i.length-1&&(n[r]=t[e]),n=n[r]}delete t[e]}}return t},e.hasScroll=function(e,i){var n=t(i),o=i.style.overflowX,r=i.style.overflowY;return(o!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===o||"scroll"===r||n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth)},e.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))},e.appendMany=function(e,i){if("1.7"===t.fn.jquery.substr(0,3)){var n=t();t.map(i,(function(t){n=n.add(t)})),i=n}e.append(i)},e.__cache={};var o=0;return e.GetUniqueElementId=function(t){var e=t.getAttribute("data-select2-id");return null==e&&(t.id?(e=t.id,t.setAttribute("data-select2-id",e)):(t.setAttribute("data-select2-id",++o),e=o.toString())),e},e.StoreData=function(t,i,n){var o=e.GetUniqueElementId(t);e.__cache[o]||(e.__cache[o]={}),e.__cache[o][i]=n},e.GetData=function(i,n){var o=e.GetUniqueElementId(i);return n?e.__cache[o]&&null!=e.__cache[o][n]?e.__cache[o][n]:t(i).data(n):e.__cache[o]},e.RemoveData=function(t){var i=e.GetUniqueElementId(t);null!=e.__cache[i]&&delete e.__cache[i],t.removeAttribute("data-select2-id")},e})),e.define("select2/results",["jquery","./utils"],(function(t,e){function i(t,e,n){this.$element=t,this.data=n,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=t('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(e.message);n.append(i(o(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i],o=this.option(n);e.push(o)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(t,e){e.find(".select2-results").append(t)},i.prototype.sort=function(t){return this.options.get("sorter")(t)},i.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]"),e=t.filter("[aria-selected=true]");e.length>0?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var i=this;this.data.current((function(n){var o=t.map(n,(function(t){return t.id.toString()}));i.$results.find(".select2-results__option[aria-selected]").each((function(){var i=t(this),n=e.GetData(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&t.inArray(r,o)>-1?i.attr("aria-selected","true"):i.attr("aria-selected","false")}))}))},i.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},i=this.option(e);i.className+=" loading-results",this.$results.prepend(i)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(i){var n=document.createElement("li");n.className="select2-results__option";var o={role:"option","aria-selected":"false"},r=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var a in(null!=i.element&&r.call(i.element,":disabled")||null==i.element&&i.disabled)&&(delete o["aria-selected"],o["aria-disabled"]="true"),null==i.id&&delete o["aria-selected"],null!=i._resultId&&(n.id=i._resultId),i.title&&(n.title=i.title),i.children&&(o.role="group",o["aria-label"]=i.text,delete o["aria-selected"]),o){var s=o[a];n.setAttribute(a,s)}if(i.children){var l=t(n),c=document.createElement("strong");c.className="select2-results__group",t(c),this.template(i,c);for(var h=[],u=0;u<i.children.length;u++){var p=i.children[u],d=this.option(p);h.push(d)}var m=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});m.append(h),l.append(c),l.append(m)}else this.template(i,n);return e.StoreData(n,"data",i),n},i.prototype.bind=function(i,n){var o=this,r=i.id+"-results";this.$results.attr("id",r),i.on("results:all",(function(t){o.clear(),o.append(t.data),i.isOpen()&&(o.setClasses(),o.highlightFirstItem())})),i.on("results:append",(function(t){o.append(t.data),i.isOpen()&&o.setClasses()})),i.on("query",(function(t){o.hideMessages(),o.showLoading(t)})),i.on("select",(function(){i.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),i.on("unselect",(function(){i.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),i.on("open",(function(){o.$results.attr("aria-expanded","true"),o.$results.attr("aria-hidden","false"),o.setClasses(),o.ensureHighlightVisible()})),i.on("close",(function(){o.$results.attr("aria-expanded","false"),o.$results.attr("aria-hidden","true"),o.$results.removeAttr("aria-activedescendant")})),i.on("results:toggle",(function(){var t=o.getHighlightedResults();0!==t.length&&t.trigger("mouseup")})),i.on("results:select",(function(){var t=o.getHighlightedResults();if(0!==t.length){var i=e.GetData(t[0],"data");"true"==t.attr("aria-selected")?o.trigger("close",{}):o.trigger("select",{data:i})}})),i.on("results:previous",(function(){var t=o.getHighlightedResults(),e=o.$results.find("[aria-selected]"),i=e.index(t);if(!(i<=0)){var n=i-1;0===t.length&&(n=0);var r=e.eq(n);r.trigger("mouseenter");var a=o.$results.offset().top,s=r.offset().top,l=o.$results.scrollTop()+(s-a);0===n?o.$results.scrollTop(0):s-a<0&&o.$results.scrollTop(l)}})),i.on("results:next",(function(){var t=o.getHighlightedResults(),e=o.$results.find("[aria-selected]"),i=e.index(t)+1;if(!(i>=e.length)){var n=e.eq(i);n.trigger("mouseenter");var r=o.$results.offset().top+o.$results.outerHeight(!1),a=n.offset().top+n.outerHeight(!1),s=o.$results.scrollTop()+a-r;0===i?o.$results.scrollTop(0):a>r&&o.$results.scrollTop(s)}})),i.on("results:focus",(function(t){t.element.addClass("select2-results__option--highlighted")})),i.on("results:message",(function(t){o.displayMessage(t)})),t.fn.mousewheel&&this.$results.on("mousewheel",(function(t){var e=o.$results.scrollTop(),i=o.$results.get(0).scrollHeight-e+t.deltaY,n=t.deltaY>0&&e-t.deltaY<=0,r=t.deltaY<0&&i<=o.$results.height();n?(o.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):r&&(o.$results.scrollTop(o.$results.get(0).scrollHeight-o.$results.height()),t.preventDefault(),t.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(i){var n=t(this),r=e.GetData(this,"data");"true"!==n.attr("aria-selected")?o.trigger("select",{originalEvent:i,data:r}):o.options.get("multiple")?o.trigger("unselect",{originalEvent:i,data:r}):o.trigger("close",{})})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(i){var n=e.GetData(this,"data");o.getHighlightedResults().removeClass("select2-results__option--highlighted"),o.trigger("results:focus",{data:n,element:t(this)})}))},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]").index(t),i=this.$results.offset().top,n=t.offset().top,o=this.$results.scrollTop()+(n-i),r=n-i;o-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(o)}},i.prototype.template=function(e,i){var n=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),r=n(e,i);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=o(r):t(i).append(r)},i})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var i=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=e.GetData(this.$element[0],"old-tabindex")?this._tabindex=e.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),i.attr("title",this.$element.attr("title")),i.attr("tabindex",this._tabindex),i.attr("aria-disabled","false"),this.$selection=i,i},n.prototype.bind=function(t,e){var n=this,o=t.id+"-results";this.container=t,this.$selection.on("focus",(function(t){n.trigger("focus",t)})),this.$selection.on("blur",(function(t){n._handleBlur(t)})),this.$selection.on("keydown",(function(t){n.trigger("keypress",t),t.which===i.SPACE&&t.preventDefault()})),t.on("results:focus",(function(t){n.$selection.attr("aria-activedescendant",t.data._resultId)})),t.on("selection:update",(function(t){n.update(t.data)})),t.on("open",(function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",o),n._attachCloseHandler(t)})),t.on("close",(function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(t)})),t.on("enable",(function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")})),t.on("disable",(function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")}))},n.prototype._handleBlur=function(e){var i=this;window.setTimeout((function(){document.activeElement==i.$selection[0]||t.contains(i.$selection[0],document.activeElement)||i.trigger("blur",e)}),1)},n.prototype._attachCloseHandler=function(i){t(document.body).on("mousedown.select2."+i.id,(function(i){var n=t(i.target).closest(".select2");t(".select2.select2-container--open").each((function(){this!=n[0]&&e.GetData(this,"element").select2("close")}))}))},n.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},n.prototype.position=function(t,e){e.find(".selection").append(t)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},n.prototype.isEnabled=function(){return!this.isDisabled()},n.prototype.isDisabled=function(){return this.options.get("disabled")},n})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(t,e,i,n){function o(){o.__super__.constructor.apply(this,arguments)}return i.Extend(o,e),o.prototype.render=function(){var t=o.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},o.prototype.bind=function(t,e){var i=this;o.__super__.bind.apply(this,arguments);var n=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",(function(t){1===t.which&&i.trigger("toggle",{originalEvent:t})})),this.$selection.on("focus",(function(t){})),this.$selection.on("blur",(function(t){})),t.on("focus",(function(e){t.isOpen()||i.$selection.trigger("focus")}))},o.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},o.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},o.prototype.selectionContainer=function(){return t("<span></span>")},o.prototype.update=function(t){if(0!==t.length){var e=t[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(e,i);i.empty().append(n);var o=e.title||e.text;o?i.attr("title",o):i.removeAttr("title")}else this.clear()},o})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(t,e,i){function n(t,e){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},n.prototype.bind=function(e,o){var r=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(t){r.trigger("toggle",{originalEvent:t})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!r.isDisabled()){var n=t(this).parent(),o=i.GetData(n[0],"data");r.trigger("unselect",{originalEvent:e,data:o})}}))},n.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},n.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},n.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],n=0;n<t.length;n++){var o=t[n],r=this.selectionContainer(),a=this.display(o,r);r.append(a);var s=o.title||o.text;s&&r.attr("title",s),i.StoreData(r[0],"data",o),e.push(r)}var l=this.$selection.find(".select2-selection__rendered");i.appendMany(l,e)}},n})),e.define("select2/selection/placeholder",["../utils"],(function(t){function e(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i)}return e.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},e.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();return i.html(this.display(e)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},e.prototype.update=function(t,e){var i=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||i)return t.call(this,e);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},e})),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(t,e,i){function n(){}return n.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(t){n._handleClear(t)})),e.on("keypress",(function(t){n._handleKeyboardClear(t,e)}))},n.prototype._handleClear=function(t,e){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){e.stopPropagation();var o=i.GetData(n[0],"data"),r=this.$element.val();this.$element.val(this.placeholder.id);var a={data:o};if(this.trigger("clear",a),a.prevented)this.$element.val(r);else{for(var s=0;s<o.length;s++)if(a={data:o[s]},this.trigger("unselect",a),a.prevented)return void this.$element.val(r);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},n.prototype._handleKeyboardClear=function(t,i,n){n.isOpen()||i.which!=e.DELETE&&i.which!=e.BACKSPACE||this._handleClear(i)},n.prototype.update=function(e,n){if(e.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var o=this.options.get("translations").get("removeAllItems"),r=t('<span class="select2-selection__clear" title="'+o()+'">&times;</span>');i.StoreData(r[0],"data",n),this.$selection.find(".select2-selection__rendered").prepend(r)}},n})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(t,e,i){function n(t,e,i){t.call(this,e,i)}return n.prototype.render=function(e){var i=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></li>');this.$searchContainer=i,this.$search=i.find("input");var n=e.call(this);return this._transferTabIndex(),n},n.prototype.bind=function(t,n,o){var r=this,a=n.id+"-results";t.call(this,n,o),n.on("open",(function(){r.$search.attr("aria-controls",a),r.$search.trigger("focus")})),n.on("close",(function(){r.$search.val(""),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")})),n.on("enable",(function(){r.$search.prop("disabled",!1),r._transferTabIndex()})),n.on("disable",(function(){r.$search.prop("disabled",!0)})),n.on("focus",(function(t){r.$search.trigger("focus")})),n.on("results:focus",(function(t){t.data._resultId?r.$search.attr("aria-activedescendant",t.data._resultId):r.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(t){r.trigger("focus",t)})),this.$selection.on("focusout",".select2-search--inline",(function(t){r._handleBlur(t)})),this.$selection.on("keydown",".select2-search--inline",(function(t){if(t.stopPropagation(),r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented(),t.which===i.BACKSPACE&&""===r.$search.val()){var n=r.$searchContainer.prev(".select2-selection__choice");if(n.length>0){var o=e.GetData(n[0],"data");r.searchRemoveChoice(o),t.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(t){r.$search.val()&&t.stopPropagation()}));var s=document.documentMode,l=s&&s<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(t){l?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(t){if(l&&"input"===t.type)r.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=i.SHIFT&&e!=i.CTRL&&e!=i.ALT&&e!=i.TAB&&r.handleSearch(t)}}))},n.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},n.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},n.prototype.update=function(t,e){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.trigger("focus")},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";t=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").width():.75*(this.$search.val().length+1)+"em",this.$search.css("width",t)},n})),e.define("select2/selection/eventRelay",["jquery"],(function(t){function e(){}return e.prototype.bind=function(e,i,n){var o=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],a=["opening","closing","selecting","unselecting","clearing"];e.call(this,i,n),i.on("*",(function(e,i){if(-1!==t.inArray(e,r)){i=i||{};var n=t.Event("select2:"+e,{params:i});o.$element.trigger(n),-1!==t.inArray(e,a)&&(i.prevented=n.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,e){function i(t){this.dict=t||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(t){return this.dict[t]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(t){if(!(t in i._cache)){var n=e(t);i._cache[t]=n}return new i(i._cache[t])},i})),e.define("select2/diacritics",[],(function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"}})),e.define("select2/data/base",["../utils"],(function(t){function e(t,i){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,i){var n=e.id+"-result-";return n+=t.generateChars(4),null!=i.id?n+="-"+i.id.toString():n+="-"+t.generateChars(4),n},e})),e.define("select2/data/select",["./base","../utils","jquery"],(function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,t),n.prototype.current=function(t){var e=[],n=this;this.$element.find(":selected").each((function(){var t=i(this),o=n.item(t);e.push(o)})),t(e)},n.prototype.select=function(t){var e=this;if(t.selected=!0,i(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current((function(n){var o=[];(t=[t]).push.apply(t,n);for(var r=0;r<t.length;r++){var a=t[r].id;-1===i.inArray(a,o)&&o.push(a)}e.$element.val(o),e.$element.trigger("input").trigger("change")}));else{var n=t.id;this.$element.val(n),this.$element.trigger("input").trigger("change")}},n.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,i(t.element).is("option"))return t.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current((function(n){for(var o=[],r=0;r<n.length;r++){var a=n[r].id;a!==t.id&&-1===i.inArray(a,o)&&o.push(a)}e.$element.val(o),e.$element.trigger("input").trigger("change")}))}},n.prototype.bind=function(t,e){var i=this;this.container=t,t.on("select",(function(t){i.select(t.data)})),t.on("unselect",(function(t){i.unselect(t.data)}))},n.prototype.destroy=function(){this.$element.find("*").each((function(){e.RemoveData(this)}))},n.prototype.query=function(t,e){var n=[],o=this;this.$element.children().each((function(){var e=i(this);if(e.is("option")||e.is("optgroup")){var r=o.item(e),a=o.matches(t,r);null!==a&&n.push(a)}})),e({results:n})},n.prototype.addOptions=function(t){e.appendMany(this.$element,t)},n.prototype.option=function(t){var n;t.children?(n=document.createElement("optgroup")).label=t.text:void 0!==(n=document.createElement("option")).textContent?n.textContent=t.text:n.innerText=t.text,void 0!==t.id&&(n.value=t.id),t.disabled&&(n.disabled=!0),t.selected&&(n.selected=!0),t.title&&(n.title=t.title);var o=i(n),r=this._normalizeItem(t);return r.element=n,e.StoreData(n,"data",r),o},n.prototype.item=function(t){var n={};if(null!=(n=e.GetData(t[0],"data")))return n;if(t.is("option"))n={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){n={text:t.prop("label"),children:[],title:t.prop("title")};for(var o=t.children("option"),r=[],a=0;a<o.length;a++){var s=i(o[a]),l=this.item(s);r.push(l)}n.children=r}return(n=this._normalizeItem(n)).element=t[0],e.StoreData(t[0],"data",n),n},n.prototype._normalizeItem=function(t){t!==Object(t)&&(t={id:t,text:t});var e={selected:!1,disabled:!1};return null!=(t=i.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),i.extend({},e,t)},n.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},n})),e.define("select2/data/array",["./select","../utils","jquery"],(function(t,e,i){function n(t,e){this._dataToConvert=e.get("data")||[],n.__super__.constructor.call(this,t,e)}return e.Extend(n,t),n.prototype.bind=function(t,e){n.__super__.bind.call(this,t,e),this.addOptions(this.convertToOptions(this._dataToConvert))},n.prototype.select=function(t){var e=this.$element.find("option").filter((function(e,i){return i.value==t.id.toString()}));0===e.length&&(e=this.option(t),this.addOptions(e)),n.__super__.select.call(this,t)},n.prototype.convertToOptions=function(t){var n=this,o=this.$element.find("option"),r=o.map((function(){return n.item(i(this)).id})).get(),a=[];function s(t){return function(){return i(this).val()==t.id}}for(var l=0;l<t.length;l++){var c=this._normalizeItem(t[l]);if(i.inArray(c.id,r)>=0){var h=o.filter(s(c)),u=this.item(h),p=i.extend(!0,{},c,u),d=this.option(p);h.replaceWith(d)}else{var m=this.option(c);if(c.children){var f=this.convertToOptions(c.children);e.appendMany(m,f)}a.push(m)}}return a},n})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(t,e,i){function n(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,t,e)}return e.Extend(n,t),n.prototype._applyDefaults=function(t){var e={data:function(t){return i.extend({},t,{q:t.term})},transport:function(t,e,n){var o=i.ajax(t);return o.then(e),o.fail(n),o}};return i.extend({},e,t,!0)},n.prototype.processResults=function(t){return t},n.prototype.query=function(t,e){var n=this;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=i.extend({type:"GET"},this.ajaxOptions);function r(){var r=o.transport(o,(function(o){var r=n.processResults(o,t);n.options.get("debug")&&window.console&&console.error&&(r&&r.results&&i.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(r)}),(function(){(!("status"in r)||0!==r.status&&"0"!==r.status)&&n.trigger("results:message",{message:"errorLoading"})}));n._request=r}"function"==typeof o.url&&(o.url=o.url.call(this.$element,t)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(r,this.ajaxOptions.delay)):r()},n})),e.define("select2/data/tags",["jquery"],(function(t){function e(e,i,n){var o=n.get("tags"),r=n.get("createTag");void 0!==r&&(this.createTag=r);var a=n.get("insertTag");if(void 0!==a&&(this.insertTag=a),e.call(this,i,n),t.isArray(o))for(var s=0;s<o.length;s++){var l=o[s],c=this._normalizeItem(l),h=this.option(c);this.$element.append(h)}}return e.prototype.query=function(t,e,i){var n=this;function o(t,r){for(var a=t.results,s=0;s<a.length;s++){var l=a[s],c=null!=l.children&&!o({results:l.children},!0);if((l.text||"").toUpperCase()===(e.term||"").toUpperCase()||c)return!r&&(t.data=a,void i(t))}if(r)return!0;var h=n.createTag(e);if(null!=h){var u=n.option(h);u.attr("data-select2-tag",!0),n.addOptions([u]),n.insertTag(a,h)}t.results=a,i(t)}this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,o):t.call(this,e,i)},e.prototype.createTag=function(e,i){var n=t.trim(i.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,i){e.unshift(i)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each((function(){this.selected||t(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(t){function e(t,e,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),t.call(this,e,i)}return e.prototype.bind=function(t,e,i){t.call(this,e,i),this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(e,i,n){var o=this;function r(e){var i=o._normalizeItem(e);if(!o.$element.find("option").filter((function(){return t(this).val()===i.id})).length){var n=o.option(i);n.attr("data-select2-tag",!0),o._removeOldTags(),o.addOptions([n])}a(i)}function a(t){o.trigger("select",{data:t})}i.term=i.term||"";var s=this.tokenizer(i,this.options,r);s.term!==i.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.trigger("focus")),i.term=s.term),e.call(this,i,n)},e.prototype.tokenizer=function(e,i,n,o){for(var r=n.get("tokenSeparators")||[],a=i.term,s=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};s<a.length;){var c=a[s];if(-1!==t.inArray(c,r)){var h=a.substr(0,s),u=l(t.extend({},i,{term:h}));null!=u?(o(u),a=a.substr(s+1)||"",s=0):s++}else s++}return{term:a}},e})),e.define("select2/data/minimumInputLength",[],(function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t})),e.define("select2/data/maximumInputLength",[],(function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t})),e.define("select2/data/maximumSelectionLength",[],(function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),t.call(this,e,i)}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",(function(){n._checkIfMaximumSelected()}))},t.prototype.query=function(t,e,i){var n=this;this._checkIfMaximumSelected((function(){t.call(n,e,i)}))},t.prototype._checkIfMaximumSelected=function(t,e){var i=this;this.current((function(t){var n=null!=t?t.length:0;i.maximumSelectionLength>0&&n>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):e&&e()}))},t})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},i.prototype.bind=function(){},i.prototype.position=function(t,e){},i.prototype.destroy=function(){this.$dropdown.remove()},i})),e.define("select2/dropdown/search",["jquery","../utils"],(function(t,e){function i(){}return i.prototype.render=function(e){var i=e.call(this),n=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),i.prepend(n),i},i.prototype.bind=function(e,i,n){var o=this,r=i.id+"-results";e.call(this,i,n),this.$search.on("keydown",(function(t){o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented()})),this.$search.on("input",(function(e){t(this).off("keyup")})),this.$search.on("keyup input",(function(t){o.handleSearch(t)})),i.on("open",(function(){o.$search.attr("tabindex",0),o.$search.attr("aria-controls",r),o.$search.trigger("focus"),window.setTimeout((function(){o.$search.trigger("focus")}),0)})),i.on("close",(function(){o.$search.attr("tabindex",-1),o.$search.removeAttr("aria-controls"),o.$search.removeAttr("aria-activedescendant"),o.$search.val(""),o.$search.trigger("blur")})),i.on("focus",(function(){i.isOpen()||o.$search.trigger("focus")})),i.on("results:all",(function(t){null!=t.query.term&&""!==t.query.term||(o.showSearch(t)?o.$searchContainer.removeClass("select2-search--hide"):o.$searchContainer.addClass("select2-search--hide"))})),i.on("results:focus",(function(t){t.data._resultId?o.$search.attr("aria-activedescendant",t.data._resultId):o.$search.removeAttr("aria-activedescendant")}))},i.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.showSearch=function(t,e){return!0},i})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i,n)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var i=e.slice(0),n=e.length-1;n>=0;n--){var o=e[n];this.placeholder.id===o.id&&i.splice(n,1)}return i},t})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(t){function e(t,e,i,n){this.lastParams={},t.call(this,e,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("query",(function(t){n.lastParams=t,n.loading=!0})),e.on("query:append",(function(t){n.lastParams=t,n.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=t.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&e&&this.$results.offset().top+this.$results.outerHeight(!1)+50>=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)&&this.loadMore()},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),i=this.options.get("translations").get("loadingMore");return e.html(i(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(t,e){function i(e,i,n){this.$dropdownParent=t(n.get("dropdownParent")||document.body),e.call(this,i,n)}return i.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("open",(function(){n._showDropdown(),n._attachPositioningHandler(e),n._bindContainerResultHandlers(e)})),e.on("close",(function(){n._hideDropdown(),n._detachPositioningHandler(e)})),this.$dropdownContainer.on("mousedown",(function(t){t.stopPropagation()}))},i.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},i.prototype.position=function(t,e,i){e.attr("class",i.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(e){var i=t("<span></span>"),n=e.call(this);return i.append(n),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},i.prototype._bindContainerResultHandlers=function(t,e){if(!this._containerResultsHandlersBound){var i=this;e.on("results:all",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("results:append",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("results:message",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("select",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("unselect",(function(){i._positionDropdown(),i._resizeDropdown()})),this._containerResultsHandlersBound=!0}},i.prototype._attachPositioningHandler=function(i,n){var o=this,r="scroll.select2."+n.id,a="resize.select2."+n.id,s="orientationchange.select2."+n.id,l=this.$container.parents().filter(e.hasScroll);l.each((function(){e.StoreData(this,"select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})})),l.on(r,(function(i){var n=e.GetData(this,"select2-scroll-position");t(this).scrollTop(n.y)})),t(window).on(r+" "+a+" "+s,(function(t){o._positionDropdown(),o._resizeDropdown()}))},i.prototype._detachPositioningHandler=function(i,n){var o="scroll.select2."+n.id,r="resize.select2."+n.id,a="orientationchange.select2."+n.id;this.$container.parents().filter(e.hasScroll).off(o),t(window).off(o+" "+r+" "+a)},i.prototype._positionDropdown=function(){var e=t(window),i=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),o=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=r.top,a.bottom=r.top+a.height;var s={height:this.$dropdown.outerHeight(!1)},l={top:e.scrollTop(),bottom:e.scrollTop()+e.height()},c=l.top<r.top-s.height,h=l.bottom>r.bottom+s.height,u={left:r.left,top:a.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var d={top:0,left:0};(t.contains(document.body,p[0])||p[0].isConnected)&&(d=p.offset()),u.top-=d.top,u.left-=d.left,i||n||(o="below"),h||!c||i?!c&&h&&i&&(o="below"):o="above",("above"==o||i&&"below"!==o)&&(u.top=a.top-d.top-s.height),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(u)},i.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},i.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function t(e){for(var i=0,n=0;n<e.length;n++){var o=e[n];o.children?i+=t(o.children):i++}return i}function e(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,i,n)}return e.prototype.showSearch=function(e,i){return!(t(i.data.results)<this.minimumResultsForSearch)&&e.call(this,i)},e})),e.define("select2/dropdown/selectOnClose",["../utils"],(function(t){function e(){}return e.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("close",(function(t){n._handleSelectOnClose(t)}))},e.prototype._handleSelectOnClose=function(e,i){if(i&&null!=i.originalSelect2Event){var n=i.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var o=this.getHighlightedResults();if(!(o.length<1)){var r=t.GetData(o[0],"data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},e})),e.define("select2/dropdown/closeOnSelect",[],(function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",(function(t){n._selectTriggered(t)})),e.on("unselect",(function(t){n._selectTriggered(t)}))},t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;i&&(i.ctrlKey||i.metaKey)||this.trigger("close",{originalEvent:i,originalSelect2Event:e})},t})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Please delete "+e+" character";return 1!=e&&(i+="s"),i},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"}}})),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(t,e,i,n,o,r,a,s,l,c,h,u,p,d,m,f,g,_,v,y,b,x,k,L,w,M,C,P,S){function T(){this.reset()}return T.prototype.apply=function(h){if(null==(h=t.extend(!0,{},this.defaults,h)).dataAdapter){if(null!=h.ajax?h.dataAdapter=m:null!=h.data?h.dataAdapter=d:h.dataAdapter=p,h.minimumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,_)),h.maximumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,v)),h.maximumSelectionLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,y)),h.tags&&(h.dataAdapter=c.Decorate(h.dataAdapter,f)),null==h.tokenSeparators&&null==h.tokenizer||(h.dataAdapter=c.Decorate(h.dataAdapter,g)),null!=h.query){var u=e(h.amdBase+"compat/query");h.dataAdapter=c.Decorate(h.dataAdapter,u)}if(null!=h.initSelection){var S=e(h.amdBase+"compat/initSelection");h.dataAdapter=c.Decorate(h.dataAdapter,S)}}if(null==h.resultsAdapter&&(h.resultsAdapter=i,null!=h.ajax&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,L)),null!=h.placeholder&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,k)),h.selectOnClose&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,C))),null==h.dropdownAdapter){if(h.multiple)h.dropdownAdapter=b;else{var T=c.Decorate(b,x);h.dropdownAdapter=T}if(0!==h.minimumResultsForSearch&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,M)),h.closeOnSelect&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,P)),null!=h.dropdownCssClass||null!=h.dropdownCss||null!=h.adaptDropdownCssClass){var A=e(h.amdBase+"compat/dropdownCss");h.dropdownAdapter=c.Decorate(h.dropdownAdapter,A)}h.dropdownAdapter=c.Decorate(h.dropdownAdapter,w)}if(null==h.selectionAdapter){if(h.multiple?h.selectionAdapter=o:h.selectionAdapter=n,null!=h.placeholder&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,r)),h.allowClear&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,a)),h.multiple&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,s)),null!=h.containerCssClass||null!=h.containerCss||null!=h.adaptContainerCssClass){var D=e(h.amdBase+"compat/containerCss");h.selectionAdapter=c.Decorate(h.selectionAdapter,D)}h.selectionAdapter=c.Decorate(h.selectionAdapter,l)}h.language=this._resolveLanguage(h.language),h.language.push("en");for(var E=[],O=0;O<h.language.length;O++){var I=h.language[O];-1===E.indexOf(I)&&E.push(I)}return h.language=E,h.translations=this._processTranslations(h.language,h.debug),h},T.prototype.reset=function(){function e(t){function e(t){return u[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function i(n,o){if(""===t.trim(n.term))return o;if(o.children&&o.children.length>0){for(var r=t.extend(!0,{},o),a=o.children.length-1;a>=0;a--)null==i(n,o.children[a])&&r.children.splice(a,1);return r.children.length>0?r:i(n,r)}var s=e(o.text).toUpperCase(),l=e(n.term).toUpperCase();return s.indexOf(l)>-1?o:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:{},matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},T.prototype.applyFromElement=function(t,e){var i=t.language,n=this.defaults.language,o=e.prop("lang"),r=e.closest("[lang]").prop("lang"),a=Array.prototype.concat.call(this._resolveLanguage(o),this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(r));return t.language=a,t},T.prototype._resolveLanguage=function(e){if(!e)return[];if(t.isEmptyObject(e))return[];if(t.isPlainObject(e))return[e];var i;i=t.isArray(e)?e:[e];for(var n=[],o=0;o<i.length;o++)if(n.push(i[o]),"string"==typeof i[o]&&i[o].indexOf("-")>0){var r=i[o].split("-")[0];n.push(r)}return n},T.prototype._processTranslations=function(e,i){for(var n=new h,o=0;o<e.length;o++){var r=new h,a=e[o];if("string"==typeof a)try{r=h.loadPath(a)}catch(t){try{a=this.defaults.amdLanguageBase+a,r=h.loadPath(a)}catch(t){i&&window.console&&console.warn&&console.warn('Select2: The language file for "'+a+'" could not be automatically loaded. A fallback will be used instead.')}}else r=t.isPlainObject(a)?new h(a):a;n.extend(r)}return n},T.prototype.set=function(e,i){var n={};n[t.camelCase(e)]=i;var o=c._convertData(n);t.extend(!0,this.defaults,o)},new T})),e.define("select2/options",["require","jquery","./defaults","./utils"],(function(t,e,i,n){function o(e,o){if(this.options=e,null!=o&&this.fromElement(o),null!=o&&(this.options=i.applyFromElement(this.options,o)),this.options=i.apply(this.options),o&&o.is("input")){var r=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,r)}}return o.prototype.fromElement=function(t){var i=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),n.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.StoreData(t[0],"data",n.GetData(t[0],"select2Tags")),n.StoreData(t[0],"tags",!0)),n.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",n.GetData(t[0],"ajaxUrl")),n.StoreData(t[0],"ajax-Url",n.GetData(t[0],"ajaxUrl")));var o={};function r(t,e){return e.toUpperCase()}for(var a=0;a<t[0].attributes.length;a++){var s=t[0].attributes[a].name,l="data-";if(s.substr(0,l.length)==l){var c=s.substring(l.length),h=n.GetData(t[0],c);o[c.replace(/-([a-z])/g,r)]=h}}e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset&&(o=e.extend(!0,{},t[0].dataset,o));var u=e.extend(!0,{},n.GetData(t[0]),o);for(var p in u=n._convertData(u))e.inArray(p,i)>-1||(e.isPlainObject(this.options[p])?e.extend(this.options[p],u[p]):this.options[p]=u[p]);return this},o.prototype.get=function(t){return this.options[t]},o.prototype.set=function(t,e){this.options[t]=e},o})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(t,e,i,n){var o=function(t,n){null!=i.GetData(t[0],"select2")&&i.GetData(t[0],"select2").destroy(),this.$element=t,this.id=this._generateId(t),n=n||{},this.options=new e(n,t),o.__super__.constructor.call(this);var r=t.attr("tabindex")||0;i.StoreData(t[0],"old-tabindex",r),t.attr("tabindex","-1");var a=this.options.get("dataAdapter");this.dataAdapter=new a(t,this.options);var s=this.render();this._placeContainer(s);var l=this.options.get("selectionAdapter");this.selection=new l(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var c=this.options.get("dropdownAdapter");this.dropdown=new c(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var h=this.options.get("resultsAdapter");this.results=new h(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(t){u.trigger("selection:update",{data:t})})),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),i.StoreData(t[0],"select2",this),t.data("select2",this)};return i.Extend(o,i.Observable),o.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},o.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var n=this._resolveWidth(t,"style");return null!=n?n:this._resolveWidth(t,"element")}if("element"==e){var o=t.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"==e){var r=t.attr("style");if("string"!=typeof r)return null;for(var a=r.split(";"),s=0,l=a.length;s<l;s+=1){var c=a[s].replace(/\s/g,"").match(i);if(null!==c&&c.length>=1)return c[1]}return null}return"computedstyle"==e?window.getComputedStyle(t[0]).width:e},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",(function(){t.dataAdapter.current((function(e){t.trigger("selection:update",{data:e})}))})),this.$element.on("focus.select2",(function(e){t.trigger("focus",e)})),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e((function(e){t._syncA(),t._syncS(null,e)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},o.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",(function(e,i){t.trigger(e,i)}))},o.prototype._registerSelectionEvents=function(){var e=this,i=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("focus",(function(t){e.focus(t)})),this.selection.on("*",(function(n,o){-1===t.inArray(n,i)&&e.trigger(n,o)}))},o.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",(function(e,i){t.trigger(e,i)}))},o.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",(function(e,i){t.trigger(e,i)}))},o.prototype._registerEvents=function(){var t=this;this.on("open",(function(){t.$container.addClass("select2-container--open")})),this.on("close",(function(){t.$container.removeClass("select2-container--open")})),this.on("enable",(function(){t.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){t.$container.addClass("select2-container--disabled")})),this.on("blur",(function(){t.$container.removeClass("select2-container--focus")})),this.on("query",(function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,(function(i){t.trigger("results:all",{data:i,query:e})}))})),this.on("query:append",(function(e){this.dataAdapter.query(e,(function(i){t.trigger("results:append",{data:i,query:e})}))})),this.on("keypress",(function(e){var i=e.which;t.isOpen()?i===n.ESC||i===n.TAB||i===n.UP&&e.altKey?(t.close(e),e.preventDefault()):i===n.ENTER?(t.trigger("results:select",{}),e.preventDefault()):i===n.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):i===n.UP?(t.trigger("results:previous",{}),e.preventDefault()):i===n.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(i===n.ENTER||i===n.SPACE||i===n.DOWN&&e.altKey)&&(t.open(),e.preventDefault())}))},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(e,i){var n=!1,o=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(i)if(i.addedNodes&&i.addedNodes.length>0)for(var r=0;r<i.addedNodes.length;r++)i.addedNodes[r].selected&&(n=!0);else i.removedNodes&&i.removedNodes.length>0?n=!0:t.isArray(i)&&t.each(i,(function(t,e){if(o._isChangeMutation(t,e))return n=!0,!1}));else n=!0;return n}},o.prototype._syncSubtree=function(t,e){var i=this._isChangeMutation(t,e),n=this;i&&this.dataAdapter.current((function(t){n.trigger("selection:update",{data:t})}))},o.prototype.trigger=function(t,e){var i=o.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===e&&(e={}),t in n){var r=n[t],a={prevented:!1,name:t,args:e};if(i.call(this,r,a),a.prevented)return void(e.prevented=!0)}i.call(this,t,e)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(t){this.isOpen()&&this.trigger("close",{originalEvent:t})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},o.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},o.prototype.focus=function(t){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var i=e[0];t.isArray(i)&&(i=t.map(i,(function(t){return t.toString()}))),this.$element.val(i).trigger("input").trigger("change")},o.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),i.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),i.StoreData(e[0],"element",this.$element),e},o})),e.define("jquery-mousewheel",["jquery"],(function(t){return t})),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(t,e,i,n,o){if(null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each((function(){var n=t.extend(!0,{},e);new i(t(this),n)})),this;if("string"==typeof e){var n,a=Array.prototype.slice.call(arguments,1);return this.each((function(){var t=o.GetData(this,"select2");null==t&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),n=t[e].apply(t,a)})),t.inArray(e,r)>-1?this:n}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=n),i})),{define:e.define,require:e.require}}(),i=e.require("jquery.select2");return t.fn.select2.amd=e,i},void 0===(r="function"==typeof n?n.apply(e,o):n)||(t.exports=r)},911:function(t,e,i){var n,o,r;!function(a){"use strict";o=[i(311)],n=function(t,e){var i={beforeShow:d,move:d,change:d,show:d,hide:d,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},n=[],o=!!/msie/i.exec(window.navigator.userAgent),r=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div").style;return e.cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")}(),a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),s=function(){var t="";if(o)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function l(e,i,n,o){for(var a=[],s=0;s<e.length;s++){var l=e[s];if(l){var c=tinycolor(l),h=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";h+=tinycolor.equals(i,l)?" sp-thumb-active":"";var u=c.toString(o.preferredFormat||"rgb"),p=r?"background-color:"+c.toRgbString():"filter:"+c.toFilter();a.push('<span title="'+u+'" data-color="'+c.toRgbString()+'" class="'+h+'"><span class="sp-thumb-inner" style="'+p+';"></span></span>')}else{var d="sp-clear-display";a.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+d+'"></span>').attr("title",o.noColorSelectedText)).html())}}return"<div class='sp-cf "+n+"'>"+a.join("")+"</div>"}function c(){for(var t=0;t<n.length;t++)n[t]&&n[t].hide()}function h(e,n){var o=t.extend({},i,e);return o.callbacks={move:f(o.move,n),change:f(o.change,n),show:f(o.show,n),hide:f(o.hide,n),beforeShow:f(o.beforeShow,n)},o}function u(i,u){var d=h(u,i),f=d.flat,y=d.showSelectionPalette,b=d.localStorageKey,x=d.theme,k=d.callbacks,L=_(Zt,10),w=!1,M=!1,C=0,P=0,S=0,T=0,A=0,D=0,E=0,O=0,I=0,B=0,R=1,z=[],F=[],j={},N=d.selectionPalette.slice(0),U=d.maxSelectionSize,G="sp-dragging",H=null,Z=i.ownerDocument,V=(Z.body,t(i)),W=!1,q=t(s,Z).addClass(x),$=q.find(".sp-picker-container"),Y=q.find(".sp-color"),K=q.find(".sp-dragger"),J=q.find(".sp-hue"),X=q.find(".sp-slider"),Q=q.find(".sp-alpha-inner"),tt=q.find(".sp-alpha"),et=q.find(".sp-alpha-handle"),it=q.find(".sp-input"),nt=q.find(".sp-palette"),ot=q.find(".sp-initial"),rt=q.find(".sp-cancel"),at=q.find(".sp-clear"),st=q.find(".sp-choose"),lt=q.find(".sp-palette-toggle"),ct=V.is("input"),ht=ct&&"color"===V.attr("type")&&v(),ut=ct&&!f,pt=ut?t(a).addClass(x).addClass(d.className).addClass(d.replacerClassName):t([]),dt=ut?pt:V,mt=pt.find(".sp-preview-inner"),ft=d.color||ct&&V.val(),gt=!1,_t=d.preferredFormat,vt=!d.showButtons||d.clickoutFiresChange,yt=!ft,bt=d.allowEmpty&&!ht;function xt(){if(d.showPaletteOnly&&(d.showPalette=!0),lt.text(d.showPaletteOnly?d.togglePaletteMoreText:d.togglePaletteLessText),d.palette){z=d.palette.slice(0),F=t.isArray(z[0])?z:[z],j={};for(var e=0;e<F.length;e++)for(var i=0;i<F[e].length;i++){var n=tinycolor(F[e][i]).toRgbString();j[n]=!0}}q.toggleClass("sp-flat",f),q.toggleClass("sp-input-disabled",!d.showInput),q.toggleClass("sp-alpha-enabled",d.showAlpha),q.toggleClass("sp-clear-enabled",bt),q.toggleClass("sp-buttons-disabled",!d.showButtons),q.toggleClass("sp-palette-buttons-disabled",!d.togglePaletteOnly),q.toggleClass("sp-palette-disabled",!d.showPalette),q.toggleClass("sp-palette-only",d.showPaletteOnly),q.toggleClass("sp-initial-disabled",!d.showInitial),q.addClass(d.className).addClass(d.containerClassName),Zt()}function kt(){if(o&&q.find("*:not(input)").attr("unselectable","on"),xt(),ut&&V.after(pt).hide(),bt||at.hide(),f)V.after(q).hide();else{var e="parent"===d.appendTo?V.parent():t(d.appendTo);1!==e.length&&(e=t("body")),e.append(q)}function i(e){return e.data&&e.data.ignore?(zt(t(e.target).closest(".sp-thumb-el").data("color")),Nt()):(zt(t(e.target).closest(".sp-thumb-el").data("color")),Nt(),d.hideAfterPaletteSelect?(Ht(!0),Bt()):Ht()),!1}Lt(),dt.on("click.spectrum touchstart.spectrum",(function(e){W||Dt(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()})),(V.is(":disabled")||!0===d.disabled)&&$t(),q.click(m),it.change(At),it.on("paste",(function(){setTimeout(At,1)})),it.keydown((function(t){13==t.keyCode&&At()})),rt.text(d.cancelText),rt.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),Rt(),Bt()})),at.attr("title",d.clearText),at.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),yt=!0,Nt(),f&&Ht(!0)})),st.text(d.chooseText),st.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),o&&it.is(":focus")&&it.trigger("change"),jt()&&(Ht(!0),Bt())})),lt.text(d.showPaletteOnly?d.togglePaletteMoreText:d.togglePaletteLessText),lt.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),d.showPaletteOnly=!d.showPaletteOnly,d.showPaletteOnly||f||q.css("left","-="+($.outerWidth(!0)+5)),xt()})),g(tt,(function(t,e,i){R=t/A,yt=!1,i.shiftKey&&(R=Math.round(10*R)/10),Nt()}),St,Tt),g(J,(function(t,e){O=parseFloat(e/T),yt=!1,d.showAlpha||(R=1),Nt()}),St,Tt),g(Y,(function(t,e,i){if(i.shiftKey){if(!H){var n=I*C,o=P-B*P,r=Math.abs(t-n)>Math.abs(e-o);H=r?"x":"y"}}else H=null;var a=!H||"y"===H;(!H||"x"===H)&&(I=parseFloat(t/C)),a&&(B=parseFloat((P-e)/P)),yt=!1,d.showAlpha||(R=1),Nt()}),St,Tt),ft?(zt(ft),Ut(),_t=d.preferredFormat||tinycolor(ft).format,wt(ft)):Ut(),f&&Et();var n=o?"mousedown.spectrum":"click.spectrum touchstart.spectrum";nt.on(n,".sp-thumb-el",i),ot.on(n,".sp-thumb-el:nth-child(1)",{ignore:!0},i)}function Lt(){if(b&&window.localStorage){try{var e=window.localStorage[b].split(",#");e.length>1&&(delete window.localStorage[b],t.each(e,(function(t,e){wt(e)})))}catch(t){}try{N=window.localStorage[b].split(";")}catch(t){}}}function wt(e){if(y){var i=tinycolor(e).toRgbString();if(!j[i]&&-1===t.inArray(i,N))for(N.push(i);N.length>U;)N.shift();if(b&&window.localStorage)try{window.localStorage[b]=N.join(";")}catch(t){}}}function Mt(){var t=[];if(d.showPalette)for(var e=0;e<N.length;e++){var i=tinycolor(N[e]).toRgbString();j[i]||t.push(N[e])}return t.reverse().slice(0,d.maxSelectionSize)}function Ct(){var e=Ft(),i=t.map(F,(function(t,i){return l(t,e,"sp-palette-row sp-palette-row-"+i,d)}));Lt(),N&&i.push(l(Mt(),e,"sp-palette-row sp-palette-row-selection",d)),nt.html(i.join(""))}function Pt(){if(d.showInitial){var t=gt,e=Ft();ot.html(l([t,e],e,"sp-palette-row-initial",d))}}function St(){(P<=0||C<=0||T<=0)&&Zt(),M=!0,q.addClass(G),H=null,V.trigger("dragstart.spectrum",[Ft()])}function Tt(){M=!1,q.removeClass(G),V.trigger("dragstop.spectrum",[Ft()])}function At(){var t=it.val();if(null!==t&&""!==t||!bt){var e=tinycolor(t);e.isValid()?(zt(e),Nt(),Ht()):it.addClass("sp-validation-error")}else zt(null),Nt(),Ht()}function Dt(){w?Bt():Et()}function Et(){var e=t.Event("beforeShow.spectrum");w?Zt():(V.trigger(e,[Ft()]),!1===k.beforeShow(Ft())||e.isDefaultPrevented()||(c(),w=!0,t(Z).on("keydown.spectrum",Ot),t(Z).on("click.spectrum",It),t(window).on("resize.spectrum",L),pt.addClass("sp-active"),q.removeClass("sp-hidden"),Zt(),Ut(),gt=Ft(),Pt(),k.show(gt),V.trigger("show.spectrum",[gt])))}function Ot(t){27===t.keyCode&&Bt()}function It(t){2!=t.button&&(M||(vt?Ht(!0):Rt(),Bt()))}function Bt(){w&&!f&&(w=!1,t(Z).off("keydown.spectrum",Ot),t(Z).off("click.spectrum",It),t(window).off("resize.spectrum",L),pt.removeClass("sp-active"),q.addClass("sp-hidden"),k.hide(Ft()),V.trigger("hide.spectrum",[Ft()]))}function Rt(){zt(gt,!0),Ht(!0)}function zt(t,e){var i,n;tinycolor.equals(t,Ft())?Ut():(!t&&bt?yt=!0:(yt=!1,n=(i=tinycolor(t)).toHsv(),O=n.h%360/360,I=n.s,B=n.v,R=n.a),Ut(),i&&i.isValid()&&!e&&(_t=d.preferredFormat||i.getFormat()))}function Ft(t){return t=t||{},bt&&yt?null:tinycolor.fromRatio({h:O,s:I,v:B,a:Math.round(1e3*R)/1e3},{format:t.format||_t})}function jt(){return!it.hasClass("sp-validation-error")}function Nt(){Ut(),k.move(Ft()),V.trigger("move.spectrum",[Ft()])}function Ut(){it.removeClass("sp-validation-error"),Gt();var t=tinycolor.fromRatio({h:O,s:1,v:1});Y.css("background-color",t.toHexString());var e=_t;R<1&&(0!==R||"name"!==e)&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var i=Ft({format:e}),n="";if(mt.removeClass("sp-clear-display"),mt.css("background-color","transparent"),!i&&bt)mt.addClass("sp-clear-display");else{var a=i.toHexString(),s=i.toRgbString();if(r||1===i.alpha?mt.css("background-color",s):(mt.css("background-color","transparent"),mt.css("filter",i.toFilter())),d.showAlpha){var l=i.toRgb();l.a=0;var c=tinycolor(l).toRgbString(),h="linear-gradient(left, "+c+", "+a+")";o?Q.css("filter",tinycolor(c).toFilter({gradientType:1},a)):(Q.css("background","-webkit-"+h),Q.css("background","-moz-"+h),Q.css("background","-ms-"+h),Q.css("background","linear-gradient(to right, "+c+", "+a+")"))}n=i.toString(e)}d.showInput&&it.val(n),d.showPalette&&Ct(),Pt()}function Gt(){var t=I,e=B;if(bt&&yt)et.hide(),X.hide(),K.hide();else{et.show(),X.show(),K.show();var i=t*C,n=P-e*P;i=Math.max(-S,Math.min(C-S,i-S)),n=Math.max(-S,Math.min(P-S,n-S)),K.css({top:n+"px",left:i+"px"});var o=R*A;et.css({left:o-D/2+"px"});var r=O*T;X.css({top:r-E+"px"})}}function Ht(t){var e=Ft(),i="",n=!tinycolor.equals(e,gt);e&&(i=e.toString(_t),wt(e)),ct&&V.val(i),t&&n&&(k.change(e),V.trigger("change",[e]))}function Zt(){w&&(C=Y.width(),P=Y.height(),S=K.height(),J.width(),T=J.height(),E=X.height(),A=tt.width(),D=et.width(),f||(q.css("position","absolute"),d.offset?q.offset(d.offset):q.offset(p(q,dt))),Gt(),d.showPalette&&Ct(),V.trigger("reflow.spectrum"))}function Vt(){V.show(),dt.off("click.spectrum touchstart.spectrum"),q.remove(),pt.remove(),n[Kt.id]=null}function Wt(i,n){return i===e?t.extend({},d):n===e?d[i]:(d[i]=n,"preferredFormat"===i&&(_t=d.preferredFormat),void xt())}function qt(){W=!1,V.attr("disabled",!1),dt.removeClass("sp-disabled")}function $t(){Bt(),W=!0,V.attr("disabled",!0),dt.addClass("sp-disabled")}function Yt(t){d.offset=t,Zt()}kt();var Kt={show:Et,hide:Bt,toggle:Dt,reflow:Zt,option:Wt,enable:qt,disable:$t,offset:Yt,set:function(t){zt(t),Ht()},get:Ft,destroy:Vt,container:q};return Kt.id=n.push(Kt)-1,Kt}function p(e,i){var n=0,o=e.outerWidth(),r=e.outerHeight(),a=i.outerHeight(),s=e[0].ownerDocument,l=s.documentElement,c=l.clientWidth+t(s).scrollLeft(),h=l.clientHeight+t(s).scrollTop(),u=i.offset(),p=u.left,d=u.top;return d+=a,p-=Math.min(p,p+o>c&&c>o?Math.abs(p+o-c):0),{top:d-=Math.min(d,d+r>h&&h>r?Math.abs(r+a-n):n),bottom:u.bottom,left:p,right:u.right,width:u.width,height:u.height}}function d(){}function m(t){t.stopPropagation()}function f(t,e){var i=Array.prototype.slice,n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}function g(e,i,n,r){i=i||function(){},n=n||function(){},r=r||function(){};var a=document,s=!1,l={},c=0,h=0,u="ontouchstart"in window,p={};function d(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function m(t){if(s){if(o&&a.documentMode<9&&!t.button)return g();var n=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],r=n&&n.pageX||t.pageX,p=n&&n.pageY||t.pageY,m=Math.max(0,Math.min(r-l.left,h)),f=Math.max(0,Math.min(p-l.top,c));u&&d(t),i.apply(e,[m,f,t])}}function f(i){(i.which?3==i.which:2==i.button)||s||!1!==n.apply(e,arguments)&&(s=!0,c=t(e).height(),h=t(e).width(),l=t(e).offset(),t(a).on(p),t(a.body).addClass("sp-dragging"),m(i),d(i))}function g(){s&&(t(a).off(p),t(a.body).removeClass("sp-dragging"),setTimeout((function(){r.apply(e,arguments)}),0)),s=!1}p.selectstart=d,p.dragstart=d,p["touchmove mousemove"]=m,p["touchend mouseup"]=g,t(e).on("touchstart mousedown",f)}function _(t,e,i){var n;return function(){var o=this,r=arguments,a=function(){n=null,t.apply(o,r)};i&&clearTimeout(n),!i&&n||(n=setTimeout(a,e))}}function v(){return t.fn.spectrum.inputTypeColorSupport()}var y="spectrum.id";t.fn.spectrum=function(e,i){if("string"==typeof e){var o=this,r=Array.prototype.slice.call(arguments,1);return this.each((function(){var i=n[t(this).data(y)];if(i){var a=i[e];if(!a)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?o=i.get():"container"==e?o=i.container:"option"==e?o=i.option.apply(i,r):"destroy"==e?(i.destroy(),t(this).removeData(y)):a.apply(i,r)}})),o}return this.spectrum("destroy").each((function(){var i=u(this,t.extend({},t(this).data(),e));t(this).data(y,i.id)}))},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=g,t.fn.spectrum.defaults=i,t.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var i=t("<input type='color'/>")[0];e._cachedResult="color"===i.type&&""!==i.value}return e._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("input[type=color]");e.length&&!v()&&e.spectrum({preferredFormat:"hex6"})},function(){var t=/^[\s,#]+/,e=/\s+$/,i=0,n=Math,o=n.round,r=n.min,a=n.max,s=n.random,l=function(t,e){if(e=e||{},(t=t||"")instanceof l)return t;if(!(this instanceof l))return new l(t,e);var n=c(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=o(1e3*this._a)/1e3,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=n.ok,this._tc_id=i++};function c(t){var e={r:0,g:0,b:0},i=1,n=!1,o=!1;return"string"==typeof t&&(t=q(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=h(t.r,t.g,t.b),n=!0,o="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=N(t.s),t.v=N(t.v),e=m(t.h,t.s,t.v),n=!0,o="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=N(t.s),t.l=N(t.l),e=p(t.h,t.s,t.l),n=!0,o="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=O(i),{ok:n,format:t.format||o,r:r(255,a(e.r,0)),g:r(255,a(e.g,0)),b:r(255,a(e.b,0)),a:i}}function h(t,e,i){return{r:255*I(t,255),g:255*I(e,255),b:255*I(i,255)}}function u(t,e,i){t=I(t,255),e=I(e,255),i=I(i,255);var n,o,s=a(t,e,i),l=r(t,e,i),c=(s+l)/2;if(s==l)n=o=0;else{var h=s-l;switch(o=c>.5?h/(2-s-l):h/(s+l),s){case t:n=(e-i)/h+(e<i?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return{h:n,s:o,l:c}}function p(t,e,i){var n,o,r;function a(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=I(t,360),e=I(e,100),i=I(i,100),0===e)n=o=r=i;else{var s=i<.5?i*(1+e):i+e-i*e,l=2*i-s;n=a(l,s,t+1/3),o=a(l,s,t),r=a(l,s,t-1/3)}return{r:255*n,g:255*o,b:255*r}}function d(t,e,i){t=I(t,255),e=I(e,255),i=I(i,255);var n,o,s=a(t,e,i),l=r(t,e,i),c=s,h=s-l;if(o=0===s?0:h/s,s==l)n=0;else{switch(s){case t:n=(e-i)/h+(e<i?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return{h:n,s:o,v:c}}function m(t,e,i){t=6*I(t,360),e=I(e,100),i=I(i,100);var o=n.floor(t),r=t-o,a=i*(1-e),s=i*(1-r*e),l=i*(1-(1-r)*e),c=o%6;return{r:255*[i,s,a,a,l,i][c],g:255*[l,i,i,s,a,a][c],b:255*[a,a,l,i,i,s][c]}}function f(t,e,i,n){var r=[j(o(t).toString(16)),j(o(e).toString(16)),j(o(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function g(t,e,i,n){return[j(U(n)),j(o(t).toString(16)),j(o(e).toString(16)),j(o(i).toString(16))].join("")}function _(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.s-=e/100,i.s=B(i.s),l(i)}function v(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.s+=e/100,i.s=B(i.s),l(i)}function y(t){return l(t).desaturate(100)}function b(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.l+=e/100,i.l=B(i.l),l(i)}function x(t,e){e=0===e?0:e||10;var i=l(t).toRgb();return i.r=a(0,r(255,i.r-o(-e/100*255))),i.g=a(0,r(255,i.g-o(-e/100*255))),i.b=a(0,r(255,i.b-o(-e/100*255))),l(i)}function k(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.l-=e/100,i.l=B(i.l),l(i)}function L(t,e){var i=l(t).toHsl(),n=(o(i.h)+e)%360;return i.h=n<0?360+n:n,l(i)}function w(t){var e=l(t).toHsl();return e.h=(e.h+180)%360,l(e)}function M(t){var e=l(t).toHsl(),i=e.h;return[l(t),l({h:(i+120)%360,s:e.s,l:e.l}),l({h:(i+240)%360,s:e.s,l:e.l})]}function C(t){var e=l(t).toHsl(),i=e.h;return[l(t),l({h:(i+90)%360,s:e.s,l:e.l}),l({h:(i+180)%360,s:e.s,l:e.l}),l({h:(i+270)%360,s:e.s,l:e.l})]}function P(t){var e=l(t).toHsl(),i=e.h;return[l(t),l({h:(i+72)%360,s:e.s,l:e.l}),l({h:(i+216)%360,s:e.s,l:e.l})]}function S(t,e,i){e=e||6,i=i||30;var n=l(t).toHsl(),o=360/i,r=[l(t)];for(n.h=(n.h-(o*e>>1)+720)%360;--e;)n.h=(n.h+o)%360,r.push(l(n));return r}function T(t,e){e=e||6;for(var i=l(t).toHsv(),n=i.h,o=i.s,r=i.v,a=[],s=1/e;e--;)a.push(l({h:n,s:o,v:r})),r=(r+s)%1;return a}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=O(t),this._roundA=o(1e3*this._a)/1e3,this},toHsv:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=d(this._r,this._g,this._b),e=o(360*t.h),i=o(100*t.s),n=o(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=o(360*t.h),i=o(100*t.s),n=o(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return f(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return g(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*I(this._r,255))+"%",g:o(100*I(this._g,255))+"%",b:o(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*I(this._r,255))+"%, "+o(100*I(this._g,255))+"%, "+o(100*I(this._b,255))+"%)":"rgba("+o(100*I(this._r,255))+"%, "+o(100*I(this._g,255))+"%, "+o(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(D[f(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+g(this._r,this._g,this._b,this._a),i=e,n=this._gradientType?"GradientType = 1, ":"";t&&(i=l(t).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(L,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},l.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]="a"===n?t[n]:N(t[n]));t=i}return l(t,e)},l.equals=function(t,e){return!(!t||!e)&&l(t).toRgbString()==l(e).toRgbString()},l.random=function(){return l.fromRatio({r:s(),g:s(),b:s()})},l.mix=function(t,e,i){i=0===i?0:i||50;var n,o=l(t).toRgb(),r=l(e).toRgb(),a=i/100,s=2*a-1,c=r.a-o.a,h=1-(n=((n=s*c==-1?s:(s+c)/(1+s*c))+1)/2),u={r:r.r*n+o.r*h,g:r.g*n+o.g*h,b:r.b*n+o.b*h,a:r.a*a+o.a*(1-a)};return l(u)},l.readability=function(t,e){var i=l(t),n=l(e),o=i.toRgb(),r=n.toRgb(),a=i.getBrightness(),s=n.getBrightness(),c=Math.max(o.r,r.r)-Math.min(o.r,r.r)+Math.max(o.g,r.g)-Math.min(o.g,r.g)+Math.max(o.b,r.b)-Math.min(o.b,r.b);return{brightness:Math.abs(a-s),color:c}},l.isReadable=function(t,e){var i=l.readability(t,e);return i.brightness>125&&i.color>500},l.mostReadable=function(t,e){for(var i=null,n=0,o=!1,r=0;r<e.length;r++){var a=l.readability(t,e[r]),s=a.brightness>125&&a.color>500,c=a.brightness/125*3+a.color/500;(s&&!o||s&&o&&c>n||!s&&!o&&c>n)&&(o=s,n=c,i=l(e[r]))}return i};var A=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=l.hexNames=E(A);function E(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function O(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function I(t,e){z(t)&&(t="100%");var i=F(t);return t=r(e,a(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),n.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function B(t){return r(1,a(0,t))}function R(t){return parseInt(t,16)}function z(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function F(t){return"string"==typeof t&&-1!=t.indexOf("%")}function j(t){return 1==t.length?"0"+t:""+t}function N(t){return t<=1&&(t=100*t+"%"),t}function U(t){return Math.round(255*parseFloat(t)).toString(16)}function G(t){return R(t)/255}var H,Z,V,W=(Z="[\\s|\\(]+("+(H="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",V="[\\s|\\(]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",{rgb:new RegExp("rgb"+Z),rgba:new RegExp("rgba"+V),hsl:new RegExp("hsl"+Z),hsla:new RegExp("hsla"+V),hsv:new RegExp("hsv"+Z),hsva:new RegExp("hsva"+V),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function q(i){i=i.replace(t,"").replace(e,"").toLowerCase();var n,o=!1;if(A[i])i=A[i],o=!0;else if("transparent"==i)return{r:0,g:0,b:0,a:0,format:"name"};return(n=W.rgb.exec(i))?{r:n[1],g:n[2],b:n[3]}:(n=W.rgba.exec(i))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=W.hsl.exec(i))?{h:n[1],s:n[2],l:n[3]}:(n=W.hsla.exec(i))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=W.hsv.exec(i))?{h:n[1],s:n[2],v:n[3]}:(n=W.hsva.exec(i))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=W.hex8.exec(i))?{a:G(n[1]),r:R(n[2]),g:R(n[3]),b:R(n[4]),format:o?"name":"hex8"}:(n=W.hex6.exec(i))?{r:R(n[1]),g:R(n[2]),b:R(n[3]),format:o?"name":"hex"}:!!(n=W.hex3.exec(i))&&{r:R(n[1]+""+n[1]),g:R(n[2]+""+n[2]),b:R(n[3]+""+n[3]),format:o?"name":"hex"}}window.tinycolor=l}(),t((function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()}))},void 0===(r="function"==typeof n?n.apply(e,o):n)||(t.exports=r)}()},311:function(t){"use strict";t.exports=jQuery}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";function t(t){t=t||{},this.settings={timeMovingThreshold:t.timeMovingThreshold||15e3,eleGainThreshold:t.eleGainThreshold||5},this.xml=null,this.metadata={},this.waypoints=[],this.routes=[],this.tracks=[]}t.prototype.parse=function(t){var e=this,i=new DOMParser;this.xml=i.parseFromString(t,"text/xml");var n=this.xml.querySelector("metadata");null!==n&&(this.metadata=this.parseMetadataType(n));for(var o=[].slice.call(this.xml.querySelectorAll("wpt")),r=0;r<o.length;r++){var a=o[r],s=e.parseWptType(a,!0);e.waypoints.push(s)}for(var l=[].slice.call(this.xml.querySelectorAll("rte")),c=0;c<l.length;c++){var h=l[c],u=e.parseRteType(h);if(!u.points.length)return;u.time=e.calcTime(u.points),u.distance=e.calcDistance(u.points),u.elevation=e.calcElevation(u.points),u.heartRate=e.calcHeartRate(u.points),e.routes.push(u)}for(var p=[].slice.call(this.xml.querySelectorAll("trk")),d=0;d<p.length;d++){var m=p[d],f=e.parseTrkType(m);if(!f.points.length)return;f.time=e.calcTime(f.points),f.distance=e.calcDistance(f.points),f.elevation=e.calcElevation(f.points),f.heartRate=e.calcHeartRate(f.points),e.tracks.push(f)}},t.prototype.getFirstTagValue=function(t,e){var i=t.querySelectorAll(e);return i.length?i[0].textContent:null},t.prototype.getFirstTagValueNs=function(t,e,i){var n=t.getElementsByTagNameNS(e,i);return n.length?n[0].textContent:null},t.prototype.getTpxValue=function(t,e){var i=this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v1",e);return null===i&&(i=this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v2",e)),i},t.prototype.parseLinks=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("link")),n=0;n<i.length;n++){var o=i[n],r=this.parseLinkType(o);e.push(r)}return e},t.prototype.parseRtepts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("rtept")),n=0;n<i.length;n++){var o=i[n],r=this.parseWptType(o,!1);e.push(r)}return e},t.prototype.parseTrkpts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("trkpt")),n=0;n<i.length;n++){var o=i[n],r=this.parseWptType(o,!1);e.push(r)}return e},t.prototype.parseTrksegs=function(t){for(var e=this,i=[],n=[].slice.call(t.querySelectorAll("trkseg")),o=0;o<n.length;o++){var r=n[o],a=e.parseTrksegType(r,!1);a.time=e.calcTime(a.points),a.distance=e.calcDistance(a.points),a.elevation=e.calcElevation(a.points),a.heartRate=e.calcHeartRate(a.points),i.push(a)}return i},t.prototype.parseWptTypeExtensions=function(t){return{tpx:this.parseTrackPointExtensionType(t)}},t.prototype.parseLinkType=function(t){return{href:t.getAttribute("href"),text:this.getFirstTagValue(t,"text"),type:this.getFirstTagValue(t,"type")}},t.prototype.parseMetadataType=function(t){return{name:this.getFirstTagValue(t,"name"),desc:this.getFirstTagValue(t,"desc"),time:Date.parse(this.getFirstTagValue(t,"time")),links:this.parseLinks(t)}},t.prototype.parseWptType=function(t,e){var i={lat:parseFloat(t.getAttribute("lat")),lon:parseFloat(t.getAttribute("lon")),ele:parseFloat(this.getFirstTagValue(t,"ele")),time:Date.parse(this.getFirstTagValue(t,"time")),extension:this.parseWptTypeExtensions(t)};return e&&(i.name=this.getFirstTagValue(t,"name"),i.cmt=this.getFirstTagValue(t,"cmt"),i.desc=this.getFirstTagValue(t,"desc"),i.links=this.parseLinks(t)),i},t.prototype.parseRteType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseRtepts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},t.prototype.parseTrkType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseTrkpts(t),segments:this.parseTrksegs(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},t.prototype.parseTrksegType=function(t){return{points:this.parseTrkpts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},t.prototype.parseMmpExtensionType=function(t,e){var i=t.querySelector("extensions");if(null===i||i.parentNode!==t)return{};for(var n={},o=0;o<e.length;o++){var r=e[o];n[r]=this.getFirstTagValueNs(i,"https://www.mapsmarker.com/GPX/1/",r)}return n},t.prototype.parseTrackPointExtensionType=function(t){var e=t.querySelector("TrackPointExtension");return null===e?{}:{atemp:parseFloat(this.getTpxValue(e,"atemp")),wtemp:parseFloat(this.getTpxValue(e,"wtemp")),depth:parseFloat(this.getTpxValue(e,"depth")),hr:parseInt(this.getTpxValue(e,"hr")),cad:parseInt(this.getTpxValue(e,"cad")),speed:parseFloat(this.getTpxValue(e,"speed")),course:parseFloat(this.getTpxValue(e,"course")),bearing:parseFloat(this.getTpxValue(e,"bearing"))}},t.prototype.calcTime=function(t){var e=0,i=0;t[0].elapsed=e;for(var n=0;n<t.length-1;n++){var o=t[n+1].time-t[n].time;isNaN(o)||(e+=o,o<this.settings.timeMovingThreshold&&(i+=o)),t[n+1].elapsed=e}return{start:t[0].time,end:t[t.length-1].time,total:e,moving:i}},t.prototype.calcDistance=function(t){var e=0;t[0].dist=e;for(var i=0;i<t.length-1;i++){e+=this.calcDistanceBetween(t[i],t[i+1]),t[i+1].dist=e}return{total:e}},t.prototype.calcDistanceBetween=function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,r=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lon-t.lon)*i/2),s=r*r+Math.cos(n)*Math.cos(o)*a*a;return 6371e3*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))},t.prototype.calcElevation=function(t){for(var e=[],i=0,n=0,o=null,r=0;r<t.length;r++){var a=t[r].ele;if(isNaN(a))t[r].gain=Math.abs(i),t[r].loss=Math.abs(n);else if(null!==o){var s=a-o;Math.abs(s)>=5&&(s>0?i+=s:s<0&&(n+=s),o=a,e.push(a)),t[r].gain=Math.abs(i),t[r].loss=Math.abs(n)}else e.push(a),o=a,t[r].gain=Math.abs(i),t[r].loss=Math.abs(n)}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),gain:Math.abs(i),loss:Math.abs(n),avg:e.reduce((function(t,e){return t+e}),0)/e.length}},t.prototype.calcHeartRate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i].extension;void 0!==n.tpx&&n.tpx.hr&&e.push(n.tpx.hr)}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),avg:e.reduce((function(t,e){return t+e}),0)/e.length}};var e=t;
/*!
 * @kurkle/color v0.3.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */
function n(t){return t+.5|0}const o=(t,e,i)=>Math.max(Math.min(t,i),e);function r(t){return o(n(2.55*t),0,255)}function a(t){return o(n(255*t),0,255)}function s(t){return o(n(t/2.55)/100,0,1)}function l(t){return o(n(100*t),0,100)}const c={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},h=[..."0123456789ABCDEF"],u=t=>h[15&t],p=t=>h[(240&t)>>4]+h[15&t],d=t=>(240&t)>>4==(15&t);function m(t){var e=(t=>d(t.r)&&d(t.g)&&d(t.b)&&d(t.a))(t)?u:p;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const f=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function g(t,e,i){const n=e*Math.min(i,1-i),o=(e,o=(e+t/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[o(0),o(8),o(4)]}function _(t,e,i){const n=(n,o=(n+t/60)%6)=>i-i*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function v(t,e,i){const n=g(t,1,.5);let o;for(e+i>1&&(o=1/(e+i),e*=o,i*=o),o=0;o<3;o++)n[o]*=1-e-i,n[o]+=e;return n}function y(t){const e=t.r/255,i=t.g/255,n=t.b/255,o=Math.max(e,i,n),r=Math.min(e,i,n),a=(o+r)/2;let s,l,c;return o!==r&&(c=o-r,l=a>.5?c/(2-o-r):c/(o+r),s=function(t,e,i,n,o){return t===o?(e-i)/n+(e<i?6:0):e===o?(i-t)/n+2:(t-e)/n+4}(e,i,n,c,o),s=60*s+.5),[0|s,l||0,a]}function b(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(a)}function x(t,e,i){return b(g,t,e,i)}function k(t){return(t%360+360)%360}function L(t){const e=f.exec(t);let i,n=255;if(!e)return;e[5]!==i&&(n=e[6]?r(+e[5]):a(+e[5]));const o=k(+e[2]),s=+e[3]/100,l=+e[4]/100;return i="hwb"===e[1]?function(t,e,i){return b(v,t,e,i)}(o,s,l):"hsv"===e[1]?function(t,e,i){return b(_,t,e,i)}(o,s,l):x(o,s,l),{r:i[0],g:i[1],b:i[2],a:n}}const w={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},M={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let C;function P(t){C||(C=function(){const t={},e=Object.keys(M),i=Object.keys(w);let n,o,r,a,s;for(n=0;n<e.length;n++){for(a=s=e[n],o=0;o<i.length;o++)r=i[o],s=s.replace(r,w[r]);r=parseInt(M[a],16),t[s]=[r>>16&255,r>>8&255,255&r]}return t}(),C.transparent=[0,0,0,0]);const e=C[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const S=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const T=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,A=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function D(t,e,i){if(t){let n=y(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,0===e?360:1)),n=x(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function E(t,e){return t?Object.assign(e||{},t):t}function O(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=a(t[3]))):(e=E(t,{r:0,g:0,b:0,a:1})).a=a(e.a),e}function I(t){return"r"===t.charAt(0)?function(t){const e=S.exec(t);let i,n,a,s=255;if(e){if(e[7]!==i){const t=+e[7];s=e[8]?r(t):o(255*t,0,255)}return i=+e[1],n=+e[3],a=+e[5],i=255&(e[2]?r(i):o(i,0,255)),n=255&(e[4]?r(n):o(n,0,255)),a=255&(e[6]?r(a):o(a,0,255)),{r:i,g:n,b:a,a:s}}}(t):L(t)}class B{constructor(t){if(t instanceof B)return t;const e=typeof t;let i;var n,o,r;"object"===e?i=O(t):"string"===e&&(r=(n=t).length,"#"===n[0]&&(4===r||5===r?o={r:255&17*c[n[1]],g:255&17*c[n[2]],b:255&17*c[n[3]],a:5===r?17*c[n[4]]:255}:7!==r&&9!==r||(o={r:c[n[1]]<<4|c[n[2]],g:c[n[3]]<<4|c[n[4]],b:c[n[5]]<<4|c[n[6]],a:9===r?c[n[7]]<<4|c[n[8]]:255})),i=o||P(t)||I(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=E(this._rgb);return t&&(t.a=s(t.a)),t}set rgb(t){this._rgb=O(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${s(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?m(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=y(t),i=e[0],n=l(e[1]),o=l(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${o}%, ${s(t.a)})`:`hsl(${i}, ${n}%, ${o}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,n=t.rgb;let o;const r=e===o?.5:e,a=2*r-1,s=i.a-n.a,l=((a*s==-1?a:(a+s)/(1+a*s))+1)/2;o=1-l,i.r=255&l*i.r+o*n.r+.5,i.g=255&l*i.g+o*n.g+.5,i.b=255&l*i.b+o*n.b+.5,i.a=r*i.a+(1-r)*n.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,i){const n=A(s(t.r)),o=A(s(t.g)),r=A(s(t.b));return{r:a(T(n+i*(A(s(e.r))-n))),g:a(T(o+i*(A(s(e.g))-o))),b:a(T(r+i*(A(s(e.b))-r))),a:t.a+i*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new B(this.rgb)}alpha(t){return this._rgb.a=a(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=n(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return D(this._rgb,2,t),this}darken(t){return D(this._rgb,2,-t),this}saturate(t){return D(this._rgb,1,t),this}desaturate(t){return D(this._rgb,1,-t),this}rotate(t){return function(t,e){var i=y(t);i[0]=k(i[0]+e),i=x(i),t.r=i[0],t.g=i[1],t.b=i[2]}(this._rgb,t),this}}
/*!
 * Chart.js v4.2.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
function R(){}const z=(()=>{let t=0;return()=>t++})();function F(t){return null==t}function j(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function N(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function U(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function G(t,e){return U(t)?t:e}function H(t,e){return void 0===t?e:t}const Z=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function V(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function W(t,e,i,n){let o,r,a;if(j(t))if(r=t.length,n)for(o=r-1;o>=0;o--)e.call(i,t[o],o);else for(o=0;o<r;o++)e.call(i,t[o],o);else if(N(t))for(a=Object.keys(t),r=a.length,o=0;o<r;o++)e.call(i,t[a[o]],a[o])}function q(t,e){let i,n,o,r;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(o=t[i],r=e[i],o.datasetIndex!==r.datasetIndex||o.index!==r.index)return!1;return!0}function $(t){if(j(t))return t.map($);if(N(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let o=0;for(;o<n;++o)e[i[o]]=$(t[i[o]]);return e}return t}function Y(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function K(t,e,i,n){if(!Y(t))return;const o=e[t],r=i[t];N(o)&&N(r)?J(o,r,n):e[t]=$(r)}function J(t,e,i){const n=j(e)?e:[e],o=n.length;if(!N(t))return t;const r=(i=i||{}).merger||K;let a;for(let e=0;e<o;++e){if(a=n[e],!N(a))continue;const o=Object.keys(a);for(let e=0,n=o.length;e<n;++e)r(o[e],t,a,i)}return t}function X(t,e){return J(t,e,{merger:Q})}function Q(t,e,i){if(!Y(t))return;const n=e[t],o=i[t];N(n)&&N(o)?X(n,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=$(o))}const tt={"":t=>t,x:t=>t.x,y:t=>t.y};function et(t,e){const i=tt[e]||(tt[e]=function(t){const e=function(t){const e=t.split("."),i=[];let n="";for(const t of e)n+=t,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}(t);return t=>{for(const i of e){if(""===i)break;t=t&&t[i]}return t}}(e));return i(t)}function it(t){return t.charAt(0).toUpperCase()+t.slice(1)}const nt=t=>void 0!==t,ot=t=>"function"==typeof t,rt=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};const at=Math.PI,st=2*at,lt=st+at,ct=Number.POSITIVE_INFINITY,ht=at/180,ut=at/2,pt=at/4,dt=2*at/3,mt=Math.log10,ft=Math.sign;function gt(t,e,i){return Math.abs(t-e)<i}function _t(t){const e=Math.round(t);t=gt(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(mt(t))),n=t/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function vt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function yt(t,e,i){let n,o,r;for(n=0,o=t.length;n<o;n++)r=t[n][i],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function bt(t){return t*(at/180)}function xt(t){return t*(180/at)}function kt(t){if(!U(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function Lt(t,e){const i=e.x-t.x,n=e.y-t.y,o=Math.sqrt(i*i+n*n);let r=Math.atan2(n,i);return r<-.5*at&&(r+=st),{angle:r,distance:o}}function wt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Mt(t,e){return(t-e+lt)%st-at}function Ct(t){return(t%st+st)%st}function Pt(t,e,i,n){const o=Ct(t),r=Ct(e),a=Ct(i),s=Ct(r-o),l=Ct(a-o),c=Ct(o-r),h=Ct(o-a);return o===r||o===a||n&&r===a||s>l&&c<h}function St(t,e,i){return Math.max(e,Math.min(i,t))}function Tt(t,e,i,n=1e-6){return t>=Math.min(e,i)-n&&t<=Math.max(e,i)+n}function At(t,e,i){i=i||(i=>t[i]<e);let n,o=t.length-1,r=0;for(;o-r>1;)n=r+o>>1,i(n)?r=n:o=n;return{lo:r,hi:o}}const Dt=(t,e,i,n)=>At(t,i,n?n=>{const o=t[n][e];return o<i||o===i&&t[n+1][e]===i}:n=>t[n][e]<i),Et=(t,e,i)=>At(t,i,(n=>t[n][e]>=i));const Ot=["push","pop","shift","splice","unshift"];function It(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,o=n.indexOf(e);-1!==o&&n.splice(o,1),n.length>0||(Ot.forEach((e=>{delete t[e]})),delete t._chartjs)}const Bt="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function Rt(t,e){let i=[],n=!1;return function(...o){i=o,n||(n=!0,Bt.call(window,(()=>{n=!1,t.apply(e,i)})))}}const zt=t=>"start"===t?"left":"end"===t?"right":"center",Ft=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2;function jt(t,e,i){const n=e.length;let o=0,r=n;if(t._sorted){const{iScale:a,_parsed:s}=t,l=a.axis,{min:c,max:h,minDefined:u,maxDefined:p}=a.getUserBounds();u&&(o=St(Math.min(Dt(s,a.axis,c).lo,i?n:Dt(e,l,a.getPixelForValue(c)).lo),0,n-1)),r=p?St(Math.max(Dt(s,a.axis,h,!0).hi+1,i?0:Dt(e,l,a.getPixelForValue(h),!0).hi+1),o,n)-o:n-o}return{start:o,count:r}}function Nt(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,o={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=o,!0;const r=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,o),r}const Ut=t=>0===t||1===t,Gt=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*st/i),Ht=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*st/i)+1,Zt={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*ut),easeOutSine:t=>Math.sin(t*ut),easeInOutSine:t=>-.5*(Math.cos(at*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Ut(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ut(t)?t:Gt(t,.075,.3),easeOutElastic:t=>Ut(t)?t:Ht(t,.075,.3),easeInOutElastic(t){const e=.1125;return Ut(t)?t:t<.5?.5*Gt(2*t,e,.45):.5+.5*Ht(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Zt.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*Zt.easeInBounce(2*t):.5*Zt.easeOutBounce(2*t-1)+.5};function Vt(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Wt(t){return Vt(t)?t:new B(t)}function qt(t){return Vt(t)?t:new B(t).saturate(.5).darken(.1).hexString()}const $t=["x","y","borderWidth","radius","tension"],Yt=["color","borderColor","backgroundColor"];const Kt=new Map;function Jt(t,e,i){return function(t,e){e=e||{};const i=t+JSON.stringify(e);let n=Kt.get(i);return n||(n=new Intl.NumberFormat(t,e),Kt.set(i,n)),n}(e,i).format(t)}const Xt={values(t){return j(t)?t:""+t},numeric(t,e,i){if(0===t)return"0";const n=this.chart.options.locale;let o,r=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(o="scientific"),r=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t));return i}(t,i)}const a=mt(Math.abs(r)),s=Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:o,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),Jt(t,n,l)},logarithmic(t,e,i){if(0===t)return"0";const n=i[e].significand||t/Math.pow(10,Math.floor(mt(t)));return[1,2,3,5,10,15].includes(n)||e>.8*i.length?Xt.numeric.call(this,t,e,i):""}};var Qt={formatters:Xt};const te=Object.create(null),ee=Object.create(null);function ie(t,e){if(!e)return t;const i=e.split(".");for(let e=0,n=i.length;e<n;++e){const n=i[e];t=t[n]||(t[n]=Object.create(null))}return t}function ne(t,e,i){return"string"==typeof e?J(ie(t,e),i):J(ie(t,""),e)}class oe{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>qt(e.backgroundColor),this.hoverBorderColor=(t,e)=>qt(e.borderColor),this.hoverColor=(t,e)=>qt(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ne(this,t,e)}get(t){return ie(this,t)}describe(t,e){return ne(ee,t,e)}override(t,e){return ne(te,t,e)}route(t,e,i,n){const o=ie(this,t),r=ie(this,i),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=r[n];return N(t)?Object.assign({},e,t):H(t,e)},set(t){this[a]=t}}})}apply(t){t.forEach((t=>t(this)))}}var re=new oe({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Yt},numbers:{type:"number",properties:$t}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Qt.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function ae(t,e,i,n,o){let r=e[o];return r||(r=e[o]=t.measureText(o).width,i.push(o)),r>n&&(n=r),n}function se(t,e,i){const n=t.currentDevicePixelRatio,o=0!==i?Math.max(i/2,.5):0;return Math.round((e-o)*n)/n+o}function le(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function ce(t,e,i,n){he(t,e,i,n,null)}function he(t,e,i,n,o){let r,a,s,l,c,h,u,p;const d=e.pointStyle,m=e.rotation,f=e.radius;let g=(m||0)*ht;if(d&&"object"==typeof d&&(r=d.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(i,n),t.rotate(g),t.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),void t.restore();if(!(isNaN(f)||f<=0)){switch(t.beginPath(),d){default:o?t.ellipse(i,n,o/2,f,0,0,st):t.arc(i,n,f,0,st),t.closePath();break;case"triangle":h=o?o/2:f,t.moveTo(i+Math.sin(g)*h,n-Math.cos(g)*f),g+=dt,t.lineTo(i+Math.sin(g)*h,n-Math.cos(g)*f),g+=dt,t.lineTo(i+Math.sin(g)*h,n-Math.cos(g)*f),t.closePath();break;case"rectRounded":c=.516*f,l=f-c,a=Math.cos(g+pt)*l,u=Math.cos(g+pt)*(o?o/2-c:l),s=Math.sin(g+pt)*l,p=Math.sin(g+pt)*(o?o/2-c:l),t.arc(i-u,n-s,c,g-at,g-ut),t.arc(i+p,n-a,c,g-ut,g),t.arc(i+u,n+s,c,g,g+ut),t.arc(i-p,n+a,c,g+ut,g+at),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*f,h=o?o/2:l,t.rect(i-h,n-l,2*h,2*l);break}g+=pt;case"rectRot":u=Math.cos(g)*(o?o/2:f),a=Math.cos(g)*f,s=Math.sin(g)*f,p=Math.sin(g)*(o?o/2:f),t.moveTo(i-u,n-s),t.lineTo(i+p,n-a),t.lineTo(i+u,n+s),t.lineTo(i-p,n+a),t.closePath();break;case"crossRot":g+=pt;case"cross":u=Math.cos(g)*(o?o/2:f),a=Math.cos(g)*f,s=Math.sin(g)*f,p=Math.sin(g)*(o?o/2:f),t.moveTo(i-u,n-s),t.lineTo(i+u,n+s),t.moveTo(i+p,n-a),t.lineTo(i-p,n+a);break;case"star":u=Math.cos(g)*(o?o/2:f),a=Math.cos(g)*f,s=Math.sin(g)*f,p=Math.sin(g)*(o?o/2:f),t.moveTo(i-u,n-s),t.lineTo(i+u,n+s),t.moveTo(i+p,n-a),t.lineTo(i-p,n+a),g+=pt,u=Math.cos(g)*(o?o/2:f),a=Math.cos(g)*f,s=Math.sin(g)*f,p=Math.sin(g)*(o?o/2:f),t.moveTo(i-u,n-s),t.lineTo(i+u,n+s),t.moveTo(i+p,n-a),t.lineTo(i-p,n+a);break;case"line":a=o?o/2:Math.cos(g)*f,s=Math.sin(g)*f,t.moveTo(i-a,n-s),t.lineTo(i+a,n+s);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(g)*(o?o/2:f),n+Math.sin(g)*f);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function ue(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function pe(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function de(t){t.restore()}function me(t,e,i,n,o){if(!e)return t.lineTo(i.x,i.y);if("middle"===o){const n=(e.x+i.x)/2;t.lineTo(n,e.y),t.lineTo(n,i.y)}else"after"===o!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function fe(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function ge(t,e,i,n,o,r={}){const a=j(e)?e:[e],s=r.strokeWidth>0&&""!==r.strokeColor;let l,c;for(t.save(),t.font=o.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);F(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,r),l=0;l<a.length;++l)c=a[l],r.backdrop&&ve(t,r.backdrop),s&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),F(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,i,n,r.maxWidth)),t.fillText(c,i,n,r.maxWidth),_e(t,i,n,c,r),n+=o.lineHeight;t.restore()}function _e(t,e,i,n,o){if(o.strikethrough||o.underline){const r=t.measureText(n),a=e-r.actualBoundingBoxLeft,s=e+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,c=i+r.actualBoundingBoxDescent,h=o.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(a,h),t.lineTo(s,h),t.stroke()}}function ve(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function ye(t,e){const{x:i,y:n,w:o,h:r,radius:a}=e;t.arc(i+a.topLeft,n+a.topLeft,a.topLeft,-ut,at,!0),t.lineTo(i,n+r-a.bottomLeft),t.arc(i+a.bottomLeft,n+r-a.bottomLeft,a.bottomLeft,at,ut,!0),t.lineTo(i+o-a.bottomRight,n+r),t.arc(i+o-a.bottomRight,n+r-a.bottomRight,a.bottomRight,ut,0,!0),t.lineTo(i+o,n+a.topRight),t.arc(i+o-a.topRight,n+a.topRight,a.topRight,0,-ut,!0),t.lineTo(i+a.topLeft,n)}const be=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ke(t,e){const i=(""+t).match(be);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}function Le(t,e){const i={},n=N(e),o=n?Object.keys(e):e,r=N(t)?n?i=>H(t[i],t[e[i]]):e=>t[e]:()=>t;for(const t of o)i[t]=+r(t)||0;return i}function we(t){return Le(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Me(t){return Le(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ce(t){const e=we(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Pe(t,e){t=t||{},e=e||re.font;let i=H(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let n=H(t.style,e.style);n&&!(""+n).match(xe)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const o={family:H(t.family,e.family),lineHeight:ke(H(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:H(t.weight,e.weight),string:""};return o.string=function(t){return!t||F(t.size)||F(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(o),o}function Se(t,e,i,n){let o,r,a,s=!0;for(o=0,r=t.length;o<r;++o)if(a=t[o],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),s=!1),void 0!==i&&j(a)&&(a=a[i%a.length],s=!1),void 0!==a))return n&&!s&&(n.cacheable=!1),a}function Te(t,e){return Object.assign(Object.create(t),e)}function Ae(t,e=[""],i=t,n,o=(()=>t[0])){nt(n)||(n=Ue("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:o,override:o=>Ae([o,...t],e,i,n)};return new Proxy(r,{deleteProperty(e,i){return delete e[i],delete e._keys,delete t[0][i],!0},get(i,n){return Be(i,n,(()=>function(t,e,i,n){let o;for(const r of e)if(o=Ue(Oe(r,t),i),nt(o))return Ie(t,o)?je(i,n,t,o):o}(n,e,t,i)))},getOwnPropertyDescriptor(t,e){return Reflect.getOwnPropertyDescriptor(t._scopes[0],e)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(t,e){return Ge(t).includes(e)},ownKeys(t){return Ge(t)},set(t,e,i){const n=t._storage||(t._storage=o());return t[e]=n[e]=i,delete t._keys,!0}})}function De(t,e,i,n){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:Ee(t,n),setContext:e=>De(t,e,i,n),override:o=>De(t.override(o),e,i,n)};return new Proxy(o,{deleteProperty(e,i){return delete e[i],delete t[i],!0},get(t,e,i){return Be(t,e,(()=>function(t,e,i){const{_proxy:n,_context:o,_subProxy:r,_descriptors:a}=t;let s=n[e];ot(s)&&a.isScriptable(e)&&(s=function(t,e,i,n){const{_proxy:o,_context:r,_subProxy:a,_stack:s}=i;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);s.add(t),e=e(r,a||n),s.delete(t),Ie(t,e)&&(e=je(o._scopes,o,t,e));return e}(e,s,t,i));j(s)&&s.length&&(s=function(t,e,i,n){const{_proxy:o,_context:r,_subProxy:a,_descriptors:s}=i;if(nt(r.index)&&n(t))e=e[r.index%e.length];else if(N(e[0])){const i=e,n=o._scopes.filter((t=>t!==i));e=[];for(const l of i){const i=je(n,o,t,l);e.push(De(i,r,a&&a[t],s))}}return e}(e,s,t,a.isIndexable));Ie(e,s)&&(s=De(s,o,r&&r[e],a));return s}(t,e,i)))},getOwnPropertyDescriptor(e,i){return e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(e,i){return Reflect.has(t,i)},ownKeys(){return Reflect.ownKeys(t)},set(e,i,n){return t[i]=n,delete e[i],!0}})}function Ee(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:i,indexable:n,isScriptable:ot(i)?i:()=>i,isIndexable:ot(n)?n:()=>n}}const Oe=(t,e)=>t?t+it(e):e,Ie=(t,e)=>N(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Be(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const n=i();return t[e]=n,n}function Re(t,e,i){return ot(t)?t(e,i):t}const ze=(t,e)=>!0===t?e:"string"==typeof t?et(e,t):void 0;function Fe(t,e,i,n,o){for(const r of e){const e=ze(i,r);if(e){t.add(e);const r=Re(e._fallback,i,o);if(nt(r)&&r!==i&&r!==n)return r}else if(!1===e&&nt(n)&&i!==n)return null}return!1}function je(t,e,i,n){const o=e._rootScopes,r=Re(e._fallback,i,n),a=[...t,...o],s=new Set;s.add(n);let l=Ne(s,a,i,r||i,n);return null!==l&&((!nt(r)||r===i||(l=Ne(s,a,r,l,n),null!==l))&&Ae(Array.from(s),[""],o,r,(()=>function(t,e,i){const n=t._getTarget();e in n||(n[e]={});const o=n[e];if(j(o)&&N(i))return i;return o||{}}(e,i,n))))}function Ne(t,e,i,n,o){for(;i;)i=Fe(t,e,i,n,o);return i}function Ue(t,e){for(const i of e){if(!i)continue;const e=i[t];if(nt(e))return e}}function Ge(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}const He=Number.EPSILON||1e-14,Ze=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ve=t=>"x"===t?"y":"x";function We(t,e,i,n){const o=t.skip?e:t,r=e,a=i.skip?e:i,s=wt(r,o),l=wt(a,r);let c=s/(s+l),h=l/(s+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=n*c,p=n*h;return{previous:{x:r.x-u*(a.x-o.x),y:r.y-u*(a.y-o.y)},next:{x:r.x+p*(a.x-o.x),y:r.y+p*(a.y-o.y)}}}function qe(t,e="x"){const i=Ve(e),n=t.length,o=Array(n).fill(0),r=Array(n);let a,s,l,c=Ze(t,0);for(a=0;a<n;++a)if(s=l,l=c,c=Ze(t,a+1),l){if(c){const t=c[e]-l[e];o[a]=0!==t?(c[i]-l[i])/t:0}r[a]=s?c?ft(o[a-1])!==ft(o[a])?0:(o[a-1]+o[a])/2:o[a-1]:o[a]}!function(t,e,i){const n=t.length;let o,r,a,s,l,c=Ze(t,0);for(let h=0;h<n-1;++h)l=c,c=Ze(t,h+1),l&&c&&(gt(e[h],0,He)?i[h]=i[h+1]=0:(o=i[h]/e[h],r=i[h+1]/e[h],s=Math.pow(o,2)+Math.pow(r,2),s<=9||(a=3/Math.sqrt(s),i[h]=o*a*e[h],i[h+1]=r*a*e[h])))}(t,o,r),function(t,e,i="x"){const n=Ve(i),o=t.length;let r,a,s,l=Ze(t,0);for(let c=0;c<o;++c){if(a=s,s=l,l=Ze(t,c+1),!s)continue;const o=s[i],h=s[n];a&&(r=(o-a[i])/3,s[`cp1${i}`]=o-r,s[`cp1${n}`]=h-r*e[c]),l&&(r=(l[i]-o)/3,s[`cp2${i}`]=o+r,s[`cp2${n}`]=h+r*e[c])}}(t,r,e)}function $e(t,e,i){return Math.max(Math.min(t,i),e)}function Ye(t,e,i,n,o){let r,a,s,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)qe(t,o);else{let i=n?t[t.length-1]:t[0];for(r=0,a=t.length;r<a;++r)s=t[r],l=We(i,s,t[Math.min(r+1,a-(n?0:1))%a],e.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,i=s}e.capBezierPoints&&function(t,e){let i,n,o,r,a,s=ue(t[0],e);for(i=0,n=t.length;i<n;++i)a=r,r=s,s=i<n-1&&ue(t[i+1],e),r&&(o=t[i],a&&(o.cp1x=$e(o.cp1x,e.left,e.right),o.cp1y=$e(o.cp1y,e.top,e.bottom)),s&&(o.cp2x=$e(o.cp2x,e.left,e.right),o.cp2y=$e(o.cp2y,e.top,e.bottom)))}(t,i)}function Ke(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Je(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Xe(t,e,i){let n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}const Qe=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const ti=["top","right","bottom","left"];function ei(t,e,i){const n={};i=i?"-"+i:"";for(let o=0;o<4;o++){const r=ti[o];n[r]=parseFloat(t[e+"-"+r+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function ii(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:n}=e,o=Qe(i),r="border-box"===o.boxSizing,a=ei(o,"padding"),s=ei(o,"border","width"),{x:l,y:c,box:h}=function(t,e){const i=t.touches,n=i&&i.length?i[0]:t,{offsetX:o,offsetY:r}=n;let a,s,l=!1;if(((t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot))(o,r,t.target))a=o,s=r;else{const t=e.getBoundingClientRect();a=n.clientX-t.left,s=n.clientY-t.top,l=!0}return{x:a,y:s,box:l}}(t,i),u=a.left+(h&&s.left),p=a.top+(h&&s.top);let{width:d,height:m}=e;return r&&(d-=a.width+s.width,m-=a.height+s.height),{x:Math.round((l-u)/d*i.width/n),y:Math.round((c-p)/m*i.height/n)}}const ni=t=>Math.round(10*t)/10;function oi(t,e,i,n){const o=Qe(t),r=ei(o,"margin"),a=Xe(o.maxWidth,t,"clientWidth")||ct,s=Xe(o.maxHeight,t,"clientHeight")||ct,l=function(t,e,i){let n,o;if(void 0===e||void 0===i){const r=Je(t);if(r){const t=r.getBoundingClientRect(),a=Qe(r),s=ei(a,"border","width"),l=ei(a,"padding");e=t.width-l.width-s.width,i=t.height-l.height-s.height,n=Xe(a.maxWidth,r,"clientWidth"),o=Xe(a.maxHeight,r,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:n||ct,maxHeight:o||ct}}(t,e,i);let{width:c,height:h}=l;if("content-box"===o.boxSizing){const t=ei(o,"border","width"),e=ei(o,"padding");c-=e.width+t.width,h-=e.height+t.height}c=Math.max(0,c-r.width),h=Math.max(0,n?c/n:h-r.height),c=ni(Math.min(c,a,l.maxWidth)),h=ni(Math.min(h,s,l.maxHeight)),c&&!h&&(h=ni(c/2));return(void 0!==e||void 0!==i)&&n&&l.height&&h>l.height&&(h=l.height,c=ni(Math.floor(h*n))),{width:c,height:h}}function ri(t,e,i){const n=e||1,o=Math.floor(t.height*n),r=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(i||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==n||a.height!==o||a.width!==r)&&(t.currentDevicePixelRatio=n,a.height=o,a.width=r,t.ctx.setTransform(n,0,0,n,0,0),!0)}const ai=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function si(t,e){const i=function(t,e){return Qe(t).getPropertyValue(e)}(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function li(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function ci(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:"middle"===n?i<.5?t.y:e.y:"after"===n?i<1?t.y:e.y:i>0?e.y:t.y}}function hi(t,e,i,n){const o={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},a=li(t,o,i),s=li(o,r,i),l=li(r,e,i),c=li(a,s,i),h=li(s,l,i);return li(c,h,i)}function ui(t,e,i){return t?function(t,e){return{x(i){return t+t+e-i},setWidth(t){e=t},textAlign(t){return"center"===t?t:"right"===t?"left":"right"},xPlus(t,e){return t-e},leftForLtr(t,e){return t-e}}}(e,i):{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}}function pi(t,e){let i,n;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function di(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function mi(t){return"angle"===t?{between:Pt,compare:Mt,normalize:Ct}:{between:Tt,compare:(t,e)=>t-e,normalize:t=>t}}function fi({start:t,end:e,count:i,loop:n,style:o}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i==0,style:o}}function gi(t,e,i){if(!i)return[t];const{property:n,start:o,end:r}=i,a=e.length,{compare:s,between:l,normalize:c}=mi(n),{start:h,end:u,loop:p,style:d}=function(t,e,i){const{property:n,start:o,end:r}=i,{between:a,normalize:s}=mi(n),l=e.length;let c,h,{start:u,end:p,loop:d}=t;if(d){for(u+=l,p+=l,c=0,h=l;c<h&&a(s(e[u%l][n]),o,r);++c)u--,p--;u%=l,p%=l}return p<u&&(p+=l),{start:u,end:p,loop:d,style:t.style}}(t,e,i),m=[];let f,g,_,v=!1,y=null;const b=()=>v||l(o,_,f)&&0!==s(o,_),x=()=>!v||0===s(r,f)||l(r,_,f);for(let t=h,i=h;t<=u;++t)g=e[t%a],g.skip||(f=c(g[n]),f!==_&&(v=l(f,o,r),null===y&&b()&&(y=0===s(f,o)?t:i),null!==y&&x()&&(m.push(fi({start:y,end:t,loop:p,count:a,style:d})),y=null),i=t,_=f));return null!==y&&m.push(fi({start:y,end:u,loop:p,count:a,style:d})),m}function _i(t,e){const i=[],n=t.segments;for(let o=0;o<n.length;o++){const r=gi(n[o],t.points,e);r.length&&i.push(...r)}return i}function vi(t,e,i,n){return n&&n.setContext&&i?function(t,e,i,n){const o=t._chart.getContext(),r=yi(t.options),{_datasetIndex:a,options:{spanGaps:s}}=t,l=i.length,c=[];let h=r,u=e[0].start,p=u;function d(t,e,n,o){const r=s?-1:1;if(t!==e){for(t+=l;i[t%l].skip;)t-=r;for(;i[e%l].skip;)e+=r;t%l!=e%l&&(c.push({start:t%l,end:e%l,loop:n,style:o}),h=o,u=e%l)}}for(const t of e){u=s?u:t.start;let e,r=i[u%l];for(p=u+1;p<=t.end;p++){const s=i[p%l];e=yi(n.setContext(Te(o,{type:"segment",p0:r,p1:s,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:a}))),bi(e,h)&&d(u,p-1,t.loop,h),r=s,h=e}u<p-1&&d(u,p-1,t.loop,h)}return c}(t,e,i,n):e}function yi(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function bi(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}
/*!
 * Chart.js v4.2.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
class xi{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const o=e.listeners[n],r=e.duration;o.forEach((n=>n({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(i-e.start,r)})))}_refresh(){this._request||(this._running=!0,this._request=Bt.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((i,n)=>{if(!i.running||!i.items.length)return;const o=i.items;let r,a=o.length-1,s=!1;for(;a>=0;--a)r=o[a],r._active?(r._total>i.duration&&(i.duration=r._total),r.tick(t),s=!0):(o[a]=o[o.length-1],o.pop());s&&(n.draw(),this._notify(n,i,t,"progress")),o.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),e+=o.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ki=new xi;const Li="transparent",wi={boolean(t,e,i){return i>.5?e:t},color(t,e,i){const n=Wt(t||Li),o=n.valid&&Wt(e||Li);return o&&o.valid?o.mix(n,i).hexString():e},number(t,e,i){return t+(e-t)*i}};class Mi{constructor(t,e,i,n){const o=e[i];n=Se([t.to,n,o,t.from]);const r=Se([t.from,o,n]);this._active=!0,this._fn=t.fn||wi[t.type||typeof r],this._easing=Zt[t.easing]||Zt.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=r,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const n=this._target[this._prop],o=i-this._start,r=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Se([t.to,e,n,t.from]),this._from=Se([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,n=this._prop,o=this._from,r=this._loop,a=this._to;let s;if(this._active=o!==a&&(r||e<i),!this._active)return this._target[n]=a,void this._notify(!0);e<0?this._target[n]=o:(s=e/i%2,s=r&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[n]=this._fn(o,a,s))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}class Ci{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!N(t))return;const e=Object.keys(re.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach((n=>{const o=t[n];if(!N(o))return;const r={};for(const t of e)r[t]=o[t];(j(o.properties)&&o.properties||[n]).forEach((t=>{t!==n&&i.has(t)||i.set(t,r)}))}))}_animateOptions(t,e){const i=e.options,n=function(t,e){if(!e)return;let i=t.options;if(!i)return void(t.options=e);i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(t,i);if(!n)return[];const o=this._createAnimations(n,i);return i.$shared&&function(t,e){const i=[],n=Object.keys(e);for(let e=0;e<n.length;e++){const o=t[n[e]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),o}_createAnimations(t,e){const i=this._properties,n=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),a=Date.now();let s;for(s=r.length-1;s>=0;--s){const l=r[s];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(t,e));continue}const c=e[l];let h=o[l];const u=i.get(l);if(h){if(u&&h.active()){h.update(u,c,a);continue}h.cancel()}u&&u.duration?(o[l]=h=new Mi(u,t,l,c),n.push(h)):t[l]=c}return n}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(ki.add(this._chart,i),!0):void 0}}function Pi(t,e){const i=t&&t.options||{},n=i.reverse,o=void 0===i.min?e:0,r=void 0===i.max?e:0;return{start:n?r:o,end:n?o:r}}function Si(t,e){const i=[],n=t._getSortedDatasetMetas(e);let o,r;for(o=0,r=n.length;o<r;++o)i.push(n[o].index);return i}function Ti(t,e,i,n={}){const o=t.keys,r="single"===n.mode;let a,s,l,c;if(null!==e){for(a=0,s=o.length;a<s;++a){if(l=+o[a],l===i){if(n.all)continue;break}c=t.values[l],U(c)&&(r||0===e||ft(e)===ft(c))&&(e+=c)}return e}}function Ai(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function Di(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function Ei(t,e,i,n){for(const o of e.getMatchingVisibleMetas(n).reverse()){const e=t[o.index];if(i&&e>0||!i&&e<0)return o.index}return null}function Oi(t,e){const{chart:i,_cachedMeta:n}=t,o=i._stacks||(i._stacks={}),{iScale:r,vScale:a,index:s}=n,l=r.axis,c=a.axis,h=function(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}(r,a,n),u=e.length;let p;for(let t=0;t<u;++t){const i=e[t],{[l]:r,[c]:u}=i;p=(i._stacks||(i._stacks={}))[c]=Di(o,h,r),p[s]=u,p._top=Ei(p,a,!0,n.type),p._bottom=Ei(p,a,!1,n.type);(p._visualValues||(p._visualValues={}))[s]=u}}function Ii(t,e){const i=t.scales;return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function Bi(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[n]||void 0===e[n][i])return;delete e[n][i],void 0!==e[n]._visualValues&&void 0!==e[n]._visualValues[i]&&delete e[n]._visualValues[i]}}}const Ri=t=>"reset"===t||"none"===t,zi=(t,e)=>e?t:Object.assign({},t);class Fi{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ai(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Bi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),n=(t,e,i,n)=>"x"===t?e:"r"===t?n:i,o=e.xAxisID=H(i.xAxisID,Ii(t,"x")),r=e.yAxisID=H(i.yAxisID,Ii(t,"y")),a=e.rAxisID=H(i.rAxisID,Ii(t,"r")),s=e.indexAxis,l=e.iAxisID=n(s,o,r,a),c=e.vAxisID=n(s,r,o,a);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&It(this._data,this),t._stacked&&Bi(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(N(e))this._data=function(t){const e=Object.keys(t),i=new Array(e.length);let n,o,r;for(n=0,o=e.length;n<o;++n)r=e[n],i[n]={x:r,y:t[r]};return i}(e);else if(i!==e){if(i){It(i,this);const t=this._cachedMeta;Bi(t),t._parsed=[]}e&&Object.isExtensible(e)&&(o=this,(n=e)._chartjs?n._chartjs.listeners.push(o):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[o]}}),Ot.forEach((t=>{const e="_onData"+it(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...t){const o=i.apply(this,t);return n._chartjs.listeners.forEach((i=>{"function"==typeof i[e]&&i[e](...t)})),o}})})))),this._syncList=[],this._data=e}var n,o}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const o=e._stacked;e._stacked=Ai(e.vScale,e),e.stack!==i.stack&&(n=!0,Bi(e),e.stack=i.stack),this._resyncElements(t),(n||o!==e._stacked)&&Oi(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:n}=this,{iScale:o,_stacked:r}=i,a=o.axis;let s,l,c,h=0===t&&e===n.length||i._sorted,u=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=n,i._sorted=!0,c=n;else{c=j(n[t])?this.parseArrayData(i,n,t,e):N(n[t])?this.parseObjectData(i,n,t,e):this.parsePrimitiveData(i,n,t,e);const o=()=>null===l[a]||u&&l[a]<u[a];for(s=0;s<e;++s)i._parsed[s+t]=l=c[s],h&&(o()&&(h=!1),u=l);i._sorted=h}r&&Oi(this,c)}parsePrimitiveData(t,e,i,n){const{iScale:o,vScale:r}=t,a=o.axis,s=r.axis,l=o.getLabels(),c=o===r,h=new Array(n);let u,p,d;for(u=0,p=n;u<p;++u)d=u+i,h[u]={[a]:c||o.parse(l[d],d),[s]:r.parse(e[d],d)};return h}parseArrayData(t,e,i,n){const{xScale:o,yScale:r}=t,a=new Array(n);let s,l,c,h;for(s=0,l=n;s<l;++s)c=s+i,h=e[c],a[s]={x:o.parse(h[0],c),y:r.parse(h[1],c)};return a}parseObjectData(t,e,i,n){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l=new Array(n);let c,h,u,p;for(c=0,h=n;c<h;++c)u=c+i,p=e[u],l[c]={x:o.parse(et(p,a),u),y:r.parse(et(p,s),u)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const n=this.chart,o=this._cachedMeta,r=e[t.axis];return Ti({keys:Si(n,!0),values:e._stacks[t.axis]._visualValues},r,o.index,{mode:i})}updateRangeFromParsed(t,e,i,n){const o=i[e.axis];let r=null===o?NaN:o;const a=n&&i._stacks[e.axis];n&&a&&(n.values=a,r=Ti(n,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const i=this._cachedMeta,n=i._parsed,o=i._sorted&&t===i.iScale,r=n.length,a=this._getOtherScale(t),s=((t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:Si(i,!0),values:null})(e,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=function(t){const{min:e,max:i,minDefined:n,maxDefined:o}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:o?i:Number.POSITIVE_INFINITY}}(a);let u,p;function d(){p=n[u];const e=p[a.axis];return!U(p[t.axis])||c>e||h<e}for(u=0;u<r&&(d()||(this.updateRangeFromParsed(l,t,p,s),!o));++u);if(o)for(u=r-1;u>=0;--u)if(!d()){this.updateRangeFromParsed(l,t,p,s);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let n,o,r;for(n=0,o=e.length;n<o;++n)r=e[n][t.axis],U(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,n=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,i,n,o;return N(t)?(e=t.top,i=t.right,n=t.bottom,o=t.left):e=i=n=o=t,{top:e,right:i,bottom:n,left:o,disabled:!1===t}}(H(this.options.clip,function(t,e,i){if(!1===i)return!1;const n=Pi(t,i),o=Pi(e,i);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,n=i.data||[],o=e.chartArea,r=[],a=this._drawStart||0,s=this._drawCount||n.length-a,l=this.options.drawActiveElementsOnTop;let c;for(i.dataset&&i.dataset.draw(t,o,a,s),c=a;c<a+s;++c){const e=n[c];e.hidden||(e.active&&l?r.push(e):e.draw(t,o))}for(c=0;c<r.length;++c)r[c].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const n=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];o=e.$context||(e.$context=function(t,e,i){return Te(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),o.parsed=this.getParsed(t),o.raw=n.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function(t,e){return Te(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const n="active"===e,o=this._cachedDataOpts,r=t+"-"+e,a=o[r],s=this.enableOptionSharing&&nt(i);if(a)return zi(a,s);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),h=n?[`${t}Hover`,"hover",t,""]:[t,""],u=l.getOptionScopes(this.getDataset(),c),p=Object.keys(re.elements[t]),d=l.resolveNamedOptions(u,p,(()=>this.getContext(i,n,e)),h);return d.$shared&&(d.$shared=s,o[r]=Object.freeze(zi(d,s))),d}_resolveAnimations(t,e,i){const n=this.chart,o=this._cachedDataOpts,r=`animation-${e}`,a=o[r];if(a)return a;let s;if(!1!==n.options.animation){const n=this.chart.config,o=n.datasetAnimationScopeKeys(this._type,e),r=n.getOptionScopes(this.getDataset(),o);s=n.createResolver(r,this.getContext(t,i,e))}const l=new Ci(n,s&&s.animations);return s&&s._cacheable&&(o[r]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ri(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),n=this._sharedOptions,o=this.getSharedOptions(i),r=this.includeOptions(e,o)||o!==n;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:r}}updateElement(t,e,i,n){Ri(n)?Object.assign(t,i):this._resolveAnimations(e,n).update(t,i)}updateSharedOptions(t,e,i){t&&!Ri(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,n){t.active=n;const o=this.getStyle(e,n);this._resolveAnimations(e,i,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];const n=i.length,o=e.length,r=Math.min(o,n);r&&this.parse(0,r),o>n?this._insertElements(n,o-n,t):o<n&&this._removeElements(o,n-o)}_insertElements(t,e,i=!0){const n=this._cachedMeta,o=n.data,r=t+e;let a;const s=t=>{for(t.length+=e,a=t.length-1;a>=r;a--)t[a]=t[a-e]};for(s(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&s(n._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,n){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,e);i._stacked&&Bi(i,n)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,n]=t;this[e](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class ji extends Fi{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:o}=e,r=this.getParsed(t),a=n.getLabelForValue(r.x),s=o.getLabelForValue(r.y);return{label:i[t]||"",value:"("+a+", "+s+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,n=this.chart._animationsDisabled;let{start:o,count:r}=jt(e,i,n);if(this._drawStart=o,this._drawCount=r,Nt(e)&&(o=0,r=i.length),this.options.showLine){const{dataset:o,_dataset:r}=e;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!r._decimated,o.points=i;const a=this.resolveDatasetElementOptions(t);a.segment=this.options.segment,this.updateElement(o,void 0,{animated:!n,options:a},t)}this.updateElements(i,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,n){const o="reset"===n,{iScale:r,vScale:a,_stacked:s,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,n),h=this.getSharedOptions(c),u=this.includeOptions(n,h),p=r.axis,d=a.axis,{spanGaps:m,segment:f}=this.options,g=vt(m)?m:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||o||"none"===n;let v=e>0&&this.getParsed(e-1);for(let c=e;c<e+i;++c){const e=t[c],i=this.getParsed(c),m=_?e:{},y=F(i[d]),b=m[p]=r.getPixelForValue(i[p],c),x=m[d]=o||y?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,i,s):i[d],c);m.skip=isNaN(b)||isNaN(x)||y,m.stop=c>0&&Math.abs(i[p]-v[p])>g,f&&(m.parsed=i,m.raw=l.data[c]),u&&(m.options=h||this.resolveDataElementOptions(c,e.active?"active":n)),_||this.updateElement(e,c,m,n),v=i}this.updateSharedOptions(h,n,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}const i=t.dataset,n=i.options&&i.options.borderWidth||0;if(!e.length)return n;const o=e[0].size(this.resolveDataElementOptions(0)),r=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(n,o,r)/2}}function Ni(t,e,i,n){const{controller:o,data:r,_sorted:a}=t,s=o._cachedMeta.iScale;if(s&&e===s.axis&&"r"!==e&&a&&r.length){const t=s._reversePixels?Et:Dt;if(!n)return t(r,e,i);if(o._sharedOptions){const n=r[0],o="function"==typeof n.getRange&&n.getRange(e);if(o){const n=t(r,e,i-o),a=t(r,e,i+o);return{lo:n.lo,hi:a.hi}}}}return{lo:0,hi:r.length-1}}function Ui(t,e,i,n,o){const r=t.getSortedVisibleDatasetMetas(),a=i[e];for(let t=0,i=r.length;t<i;++t){const{index:i,data:s}=r[t],{lo:l,hi:c}=Ni(r[t],e,a,o);for(let t=l;t<=c;++t){const e=s[t];e.skip||n(e,i,t)}}}function Gi(t,e,i,n,o){const r=[];if(!o&&!t.isPointInArea(e))return r;return Ui(t,i,e,(function(i,a,s){(o||ue(i,t.chartArea,0))&&i.inRange(e.x,e.y,n)&&r.push({element:i,datasetIndex:a,index:s})}),!0),r}function Hi(t,e,i,n,o,r){let a=[];const s=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){const o=e?Math.abs(t.x-n.x):0,r=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}(i);let l=Number.POSITIVE_INFINITY;return Ui(t,i,e,(function(i,c,h){const u=i.inRange(e.x,e.y,o);if(n&&!u)return;const p=i.getCenterPoint(o);if(!(!!r||t.isPointInArea(p))&&!u)return;const d=s(e,p);d<l?(a=[{element:i,datasetIndex:c,index:h}],l=d):d===l&&a.push({element:i,datasetIndex:c,index:h})})),a}function Zi(t,e,i,n,o,r){return r||t.isPointInArea(e)?"r"!==i||n?Hi(t,e,i,n,o,r):function(t,e,i,n){let o=[];return Ui(t,i,e,(function(t,i,r){const{startAngle:a,endAngle:s}=t.getProps(["startAngle","endAngle"],n),{angle:l}=Lt(t,{x:e.x,y:e.y});Pt(l,a,s)&&o.push({element:t,datasetIndex:i,index:r})})),o}(t,e,i,o):[]}function Vi(t,e,i,n,o){const r=[],a="x"===i?"inXRange":"inYRange";let s=!1;return Ui(t,i,e,((t,n,l)=>{t[a](e[i],o)&&(r.push({element:t,datasetIndex:n,index:l}),s=s||t.inRange(e.x,e.y,o))})),n&&!s?[]:r}var Wi={evaluateInteractionItems:Ui,modes:{index(t,e,i,n){const o=ii(e,t),r=i.axis||"x",a=i.includeInvisible||!1,s=i.intersect?Gi(t,o,r,n,a):Zi(t,o,r,!1,n,a),l=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=s[0].index,i=t.data[e];i&&!i.skip&&l.push({element:i,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,i,n){const o=ii(e,t),r=i.axis||"xy",a=i.includeInvisible||!1;let s=i.intersect?Gi(t,o,r,n,a):Zi(t,o,r,!1,n,a);if(s.length>0){const e=s[0].datasetIndex,i=t.getDatasetMeta(e).data;s=[];for(let t=0;t<i.length;++t)s.push({element:i[t],datasetIndex:e,index:t})}return s},point(t,e,i,n){return Gi(t,ii(e,t),i.axis||"xy",n,i.includeInvisible||!1)},nearest(t,e,i,n){const o=ii(e,t),r=i.axis||"xy",a=i.includeInvisible||!1;return Zi(t,o,r,i.intersect,n,a)},x(t,e,i,n){return Vi(t,ii(e,t),"x",i.intersect,n)},y(t,e,i,n){return Vi(t,ii(e,t),"y",i.intersect,n)}}};const qi=["left","top","right","bottom"];function $i(t,e){return t.filter((t=>t.pos===e))}function Yi(t,e){return t.filter((t=>-1===qi.indexOf(t.pos)&&t.box.axis===e))}function Ki(t,e){return t.sort(((t,i)=>{const n=e?i:t,o=e?t:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight}))}function Ji(t,e){const i=function(t){const e={};for(const i of t){const{stack:t,pos:n,stackWeight:o}=i;if(!t||!qi.includes(n))continue;const r=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}(t),{vBoxMaxWidth:n,hBoxMaxHeight:o}=e;let r,a,s;for(r=0,a=t.length;r<a;++r){s=t[r];const{fullSize:a}=s.box,l=i[s.stack],c=l&&s.stackWeight/l.weight;s.horizontal?(s.width=c?c*n:a&&e.availableWidth,s.height=o):(s.width=n,s.height=c?c*o:a&&e.availableHeight)}return i}function Xi(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function Qi(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function tn(t,e,i,n){const{pos:o,box:r}=i,a=t.maxPadding;if(!N(o)){i.size&&(t[o]-=i.size);const e=n[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?r.height:r.width),i.size=e.size/e.count,t[o]+=i.size}r.getPadding&&Qi(a,r.getPadding());const s=Math.max(0,e.outerWidth-Xi(a,t,"left","right")),l=Math.max(0,e.outerHeight-Xi(a,t,"top","bottom")),c=s!==t.w,h=l!==t.h;return t.w=s,t.h=l,i.horizontal?{same:c,other:h}:{same:h,other:c}}function en(t,e){const i=e.maxPadding;function n(t){const n={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{n[t]=Math.max(e[t],i[t])})),n}return n(t?["left","right"]:["top","bottom"])}function nn(t,e,i,n){const o=[];let r,a,s,l,c,h;for(r=0,a=t.length,c=0;r<a;++r){s=t[r],l=s.box,l.update(s.width||e.w,s.height||e.h,en(s.horizontal,e));const{same:a,other:u}=tn(e,i,s,n);c|=a&&o.length,h=h||u,l.fullSize||o.push(s)}return c&&nn(o,e,i,n)||h}function on(t,e,i,n,o){t.top=i,t.left=e,t.right=e+n,t.bottom=i+o,t.width=n,t.height=o}function rn(t,e,i,n){const o=i.padding;let{x:r,y:a}=e;for(const s of t){const t=s.box,l=n[s.stack]||{count:1,placed:0,weight:1},c=s.stackWeight/l.weight||1;if(s.horizontal){const n=e.w*c,r=l.size||t.height;nt(l.start)&&(a=l.start),t.fullSize?on(t,o.left,a,i.outerWidth-o.right-o.left,r):on(t,e.left+l.placed,a,n,r),l.start=a,l.placed+=n,a=t.bottom}else{const n=e.h*c,a=l.size||t.width;nt(l.start)&&(r=l.start),t.fullSize?on(t,r,o.top,a,i.outerHeight-o.bottom-o.top):on(t,r,e.top+l.placed,a,n),l.start=r,l.placed+=n,r=t.right}}e.x=r,e.y=a}var an={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const o=Ce(t.options.layout.padding),r=Math.max(e-o.width,0),a=Math.max(i-o.height,0),s=function(t){const e=function(t){const e=[];let i,n,o,r,a,s;for(i=0,n=(t||[]).length;i<n;++i)o=t[i],({position:r,options:{stack:a,stackWeight:s=1}}=o),e.push({index:i,box:o,pos:r,horizontal:o.isHorizontal(),weight:o.weight,stack:a&&r+a,stackWeight:s});return e}(t),i=Ki(e.filter((t=>t.box.fullSize)),!0),n=Ki($i(e,"left"),!0),o=Ki($i(e,"right")),r=Ki($i(e,"top"),!0),a=Ki($i(e,"bottom")),s=Yi(e,"x"),l=Yi(e,"y");return{fullSize:i,leftAndTop:n.concat(r),rightAndBottom:o.concat(l).concat(a).concat(s),chartArea:$i(e,"chartArea"),vertical:n.concat(o).concat(l),horizontal:r.concat(a).concat(s)}}(t.boxes),l=s.vertical,c=s.horizontal;W(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const h=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,u=Object.freeze({outerWidth:e,outerHeight:i,padding:o,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/h,hBoxMaxHeight:a/2}),p=Object.assign({},o);Qi(p,Ce(n));const d=Object.assign({maxPadding:p,w:r,h:a,x:o.left,y:o.top},o),m=Ji(l.concat(c),u);nn(s.fullSize,d,u,m),nn(l,d,u,m),nn(c,d,u,m)&&nn(l,d,u,m),function(t){const e=t.maxPadding;function i(i){const n=Math.max(e[i]-t[i],0);return t[i]+=n,n}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(d),rn(s.leftAndTop,d,u,m),d.x+=d.w,d.y+=d.h,rn(s.rightAndBottom,d,u,m),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},W(s.chartArea,(e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})}))}};class sn{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}updateConfig(t){}}class ln extends sn{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const cn={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hn=t=>null===t||""===t;const un=!!ai&&{passive:!0};function pn(t,e,i){t.canvas.removeEventListener(e,i,un)}function dn(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function mn(t,e,i){const n=t.canvas,o=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||dn(i.addedNodes,n),e=e&&!dn(i.removedNodes,n);e&&i()}));return o.observe(document,{childList:!0,subtree:!0}),o}function fn(t,e,i){const n=t.canvas,o=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||dn(i.removedNodes,n),e=e&&!dn(i.addedNodes,n);e&&i()}));return o.observe(document,{childList:!0,subtree:!0}),o}const gn=new Map;let _n=0;function vn(){const t=window.devicePixelRatio;t!==_n&&(_n=t,gn.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function yn(t,e,i){const n=t.canvas,o=n&&Je(n);if(!o)return;const r=Rt(((t,e)=>{const n=o.clientWidth;i(t,e),n<o.clientWidth&&i()}),window),a=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,n=e.contentRect.height;0===i&&0===n||r(i,n)}));return a.observe(o),function(t,e){gn.size||window.addEventListener("resize",vn),gn.set(t,e)}(t,r),a}function bn(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){gn.delete(t),gn.size||window.removeEventListener("resize",vn)}(t)}function xn(t,e,i){const n=t.canvas,o=Rt((e=>{null!==t.ctx&&i(function(t,e){const i=cn[t.type]||t.type,{x:n,y:o}=ii(t,e);return{type:i,chart:e,native:t,x:void 0!==n?n:null,y:void 0!==o?o:null}}(e,t))}),t);return function(t,e,i){t.addEventListener(e,i,un)}(n,e,o),o}class kn extends sn{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){const i=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t.$chartjs={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",hn(o)){const e=si(t,"width");void 0!==e&&(t.width=e)}if(hn(n))if(""===t.style.height)t.height=t.width/(e||2);else{const e=si(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const i=e.$chartjs.initial;["height","width"].forEach((t=>{const n=i[t];F(n)?e.removeAttribute(t):e.setAttribute(t,n)}));const n=i.style||{};return Object.keys(n).forEach((t=>{e.style[t]=n[t]})),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,i){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),o={attach:mn,detach:fn,resize:yn}[e]||xn;n[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e];if(!n)return;({attach:bn,detach:bn,resize:bn}[e]||pn)(t,e,n),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,n){return oi(t,e,i,n)}isAttached(t){const e=Je(t);return!(!e||!e.isConnected)}}class Ln{static defaults={};static defaultRoutes=void 0;active=!1;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return vt(this.x)&&vt(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const n={};return t.forEach((t=>{n[t]=i[t]&&i[t].active()?i[t]._to:this[t]})),n}}function wn(t,e){const i=t.options.ticks,n=function(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),o=t._maxLength/i;return Math.floor(Math.min(n,o))}(t),o=Math.min(i.maxTicksLimit||n,n),r=i.major.enabled?function(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}(e):[],a=r.length,s=r[0],l=r[a-1],c=[];if(a>o)return function(t,e,i,n){let o,r=0,a=i[0];for(n=Math.ceil(n),o=0;o<t.length;o++)o===a&&(e.push(t[o]),r++,a=i[r*n])}(e,c,r,a/o),c;const h=function(t,e,i){const n=function(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}(t),o=e.length/i;if(!n)return Math.max(o,1);const r=function(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n==0&&(e.push(n),e.push(t/n));return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e}(n);for(let t=0,e=r.length-1;t<e;t++){const e=r[t];if(e>o)return e}return Math.max(o,1)}(r,e,o);if(a>0){let t,i;const n=a>1?Math.round((l-s)/(a-1)):null;for(Mn(e,c,h,F(n)?0:s-n,s),t=0,i=a-1;t<i;t++)Mn(e,c,h,r[t],r[t+1]);return Mn(e,c,h,l,F(n)?e.length:l+n),c}return Mn(e,c,h),c}function Mn(t,e,i,n,o){const r=H(n,0),a=Math.min(H(o,t.length),t.length);let s,l,c,h=0;for(i=Math.ceil(i),o&&(s=o-n,i=s/Math.floor(s/i)),c=r;c<0;)h++,c=Math.round(r+h*i);for(l=Math.max(r,0);l<a;l++)l===c&&(e.push(t[l]),h++,c=Math.round(r+h*i))}const Cn=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i;function Pn(t,e){const i=[],n=t.length/e,o=t.length;let r=0;for(;r<o;r+=n)i.push(t[Math.floor(r)]);return i}function Sn(t,e,i){const n=t.ticks.length,o=Math.min(e,n-1),r=t._startPixel,a=t._endPixel,s=1e-6;let l,c=t.getPixelForTick(o);if(!(i&&(l=1===n?Math.max(c-r,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(o-1))/2,c+=o<e?l:-l,c<r-s||c>a+s)))return c}function Tn(t){return t.drawTicks?t.tickLength:0}function An(t,e){if(!t.display)return 0;const i=Pe(t.font,e),n=Ce(t.padding);return(j(t.text)?t.text.length:1)*i.lineHeight+n.height}function Dn(t,e,i){let n=zt(t);return(i&&"right"!==e||!i&&"right"===e)&&(n=(t=>"left"===t?"right":"right"===t?"left":t)(n)),n}class En extends Ln{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:n}=this;return t=G(t,Number.POSITIVE_INFINITY),e=G(e,Number.NEGATIVE_INFINITY),i=G(i,Number.POSITIVE_INFINITY),n=G(n,Number.NEGATIVE_INFINITY),{min:G(t,i),max:G(e,n),minDefined:U(t),maxDefined:U(e)}}getMinMax(t){let e,{min:i,max:n,minDefined:o,maxDefined:r}=this.getUserBounds();if(o&&r)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let s=0,l=a.length;s<l;++s)e=a[s].controller.getMinMax(this,t),o||(i=Math.min(i,e.min)),r||(n=Math.max(n,e.max));return i=r&&i>n?n:i,n=o&&i>n?i:n,{min:G(i,G(n,i)),max:G(n,G(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){V(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:n,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,i){const{min:n,max:o}=t,r=Z(e,(o-n)/2),a=(t,e)=>i&&0===t?0:t+e;return{min:a(n,-Math.abs(r)),max:a(o,r)}}(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=a<this.ticks.length;this._convertTicksToLabels(s?Pn(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=wn(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){V(this.options.afterUpdate,[this])}beforeSetDimensions(){V(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){V(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),V(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){V(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,n,o;for(i=0,n=t.length;i<n;i++)o=t[i],o.label=V(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){V(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){V(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=this.ticks.length,n=e.minRotation||0,o=e.maxRotation;let r,a,s,l=n;if(!this._isVisible()||!e.display||n>=o||i<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),h=c.widest.width,u=c.highest.height,p=St(this.chart.width-h,0,this.maxWidth);r=t.offset?this.maxWidth/i:p/(i-1),h+6>r&&(r=p/(i-(t.offset?.5:1)),a=this.maxHeight-Tn(t.grid)-e.padding-An(t.title,this.chart.options.font),s=Math.sqrt(h*h+u*u),l=xt(Math.min(Math.asin(St((c.highest.height+6)/r,-1,1)),Math.asin(St(a/s,-1,1))-Math.asin(St(u/s,-1,1)))),l=Math.max(n,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){V(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){V(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:n,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const r=An(n,e.options.font);if(a?(t.width=this.maxWidth,t.height=Tn(o)+r):(t.height=this.maxHeight,t.width=Tn(o)+r),i.display&&this.ticks.length){const{first:e,last:n,widest:o,highest:r}=this._getLabelSizes(),s=2*i.padding,l=bt(this.labelRotation),c=Math.cos(l),h=Math.sin(l);if(a){const e=i.mirror?0:h*o.width+c*r.height;t.height=Math.min(this.maxHeight,t.height+e+s)}else{const e=i.mirror?0:c*o.width+h*r.height;t.width=Math.min(this.maxWidth,t.width+e+s)}this._calculatePadding(e,n,h,c)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,n){const{ticks:{align:o,padding:r},position:a}=this.options,s=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,u=0;s?l?(h=n*t.width,u=i*e.height):(h=i*t.height,u=n*e.width):"start"===o?u=e.width:"end"===o?h=t.width:"inner"!==o&&(h=t.width/2,u=e.width/2),this.paddingLeft=Math.max((h-a+r)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-c+r)*this.width/(this.width-c),0)}else{let i=e.height/2,n=t.height/2;"start"===o?(i=0,n=t.height):"end"===o&&(i=e.height,n=0),this.paddingTop=i+r,this.paddingBottom=n+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){V(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)F(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Pn(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length)}return t}_computeLabelSizes(t,e){const{ctx:i,_longestTextCache:n}=this,o=[],r=[];let a,s,l,c,h,u,p,d,m,f,g,_=0,v=0;for(a=0;a<e;++a){if(c=t[a].label,h=this._resolveTickFontOptions(a),i.font=u=h.string,p=n[u]=n[u]||{data:{},gc:[]},d=h.lineHeight,m=f=0,F(c)||j(c)){if(j(c))for(s=0,l=c.length;s<l;++s)g=c[s],F(g)||j(g)||(m=ae(i,p.data,p.gc,m,g),f+=d)}else m=ae(i,p.data,p.gc,m,c),f=d;o.push(m),r.push(f),_=Math.max(m,_),v=Math.max(f,v)}!function(t,e){W(t,(t=>{const i=t.gc,n=i.length/2;let o;if(n>e){for(o=0;o<n;++o)delete t.data[i[o]];i.splice(0,n)}}))}(n,e);const y=o.indexOf(_),b=r.indexOf(v),x=t=>({width:o[t]||0,height:r[t]||0});return{first:x(0),last:x(e-1),widest:x(y),highest:x(b),widths:o,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return St(this._alignToPixels?se(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function(t,e,i){return Te(t,{tick:i,index:e,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=Te(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=bt(this.labelRotation),i=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,s=o?o.highest.height+r:0;return this.isHorizontal()?s*i>a*n?a/i:s/n:s*n<a*i?s/i:a/n}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,n=this.options,{grid:o,position:r,border:a}=n,s=o.offset,l=this.isHorizontal(),c=this.ticks.length+(s?1:0),h=Tn(o),u=[],p=a.setContext(this.getContext()),d=p.display?p.width:0,m=d/2,f=function(t){return se(i,t,d)};let g,_,v,y,b,x,k,L,w,M,C,P;if("top"===r)g=f(this.bottom),x=this.bottom-h,L=g-m,M=f(t.top)+m,P=t.bottom;else if("bottom"===r)g=f(this.top),M=t.top,P=f(t.bottom)-m,x=g+m,L=this.top+h;else if("left"===r)g=f(this.right),b=this.right-h,k=g-m,w=f(t.left)+m,C=t.right;else if("right"===r)g=f(this.left),w=t.left,C=f(t.right)-m,b=g+m,k=this.left+h;else if("x"===e){if("center"===r)g=f((t.top+t.bottom)/2+.5);else if(N(r)){const t=Object.keys(r)[0],e=r[t];g=f(this.chart.scales[t].getPixelForValue(e))}M=t.top,P=t.bottom,x=g+m,L=x+h}else if("y"===e){if("center"===r)g=f((t.left+t.right)/2);else if(N(r)){const t=Object.keys(r)[0],e=r[t];g=f(this.chart.scales[t].getPixelForValue(e))}b=g-m,k=b-h,w=t.left,C=t.right}const S=H(n.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/S));for(_=0;_<c;_+=T){const t=this.getContext(_),e=o.setContext(t),n=a.setContext(t),r=e.lineWidth,c=e.color,h=n.dash||[],p=n.dashOffset,d=e.tickWidth,m=e.tickColor,f=e.tickBorderDash||[],g=e.tickBorderDashOffset;v=Sn(this,_,s),void 0!==v&&(y=se(i,v,r),l?b=k=w=C=y:x=L=M=P=y,u.push({tx1:b,ty1:x,tx2:k,ty2:L,x1:w,y1:M,x2:C,y2:P,width:r,color:c,borderDash:h,borderDashOffset:p,tickWidth:d,tickColor:m,tickBorderDash:f,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(t){const e=this.axis,i=this.options,{position:n,ticks:o}=i,r=this.isHorizontal(),a=this.ticks,{align:s,crossAlign:l,padding:c,mirror:h}=o,u=Tn(i.grid),p=u+c,d=h?-c:p,m=-bt(this.labelRotation),f=[];let g,_,v,y,b,x,k,L,w,M,C,P,S="middle";if("top"===n)x=this.bottom-d,k=this._getXAxisLabelAlignment();else if("bottom"===n)x=this.top+d,k=this._getXAxisLabelAlignment();else if("left"===n){const t=this._getYAxisLabelAlignment(u);k=t.textAlign,b=t.x}else if("right"===n){const t=this._getYAxisLabelAlignment(u);k=t.textAlign,b=t.x}else if("x"===e){if("center"===n)x=(t.top+t.bottom)/2+p;else if(N(n)){const t=Object.keys(n)[0],e=n[t];x=this.chart.scales[t].getPixelForValue(e)+p}k=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===n)b=(t.left+t.right)/2-p;else if(N(n)){const t=Object.keys(n)[0],e=n[t];b=this.chart.scales[t].getPixelForValue(e)}k=this._getYAxisLabelAlignment(u).textAlign}"y"===e&&("start"===s?S="top":"end"===s&&(S="bottom"));const T=this._getLabelSizes();for(g=0,_=a.length;g<_;++g){v=a[g],y=v.label;const t=o.setContext(this.getContext(g));L=this.getPixelForTick(g)+o.labelOffset,w=this._resolveTickFontOptions(g),M=w.lineHeight,C=j(y)?y.length:1;const e=C/2,i=t.color,s=t.textStrokeColor,c=t.textStrokeWidth;let u,p=k;if(r?(b=L,"inner"===k&&(p=g===_-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),P="top"===n?"near"===l||0!==m?-C*M+M/2:"center"===l?-T.highest.height/2-e*M+M:-T.highest.height+M/2:"near"===l||0!==m?M/2:"center"===l?T.highest.height/2-e*M:T.highest.height-C*M,h&&(P*=-1),0===m||t.showLabelBackdrop||(b+=M/2*Math.sin(m))):(x=L,P=(1-C)*M/2),t.showLabelBackdrop){const e=Ce(t.backdropPadding),i=T.heights[g],n=T.widths[g];let o=P-e.top,r=0-e.left;switch(S){case"middle":o-=i/2;break;case"bottom":o-=i}switch(k){case"center":r-=n/2;break;case"right":r-=n}u={left:r,top:o,width:n+e.width,height:i+e.height,color:t.backdropColor}}f.push({label:y,font:w,textOffset:P,options:{rotation:m,color:i,strokeColor:s,strokeWidth:c,textAlign:p,textBaseline:S,translation:[b,x],backdrop:u}})}return f}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-bt(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:n,padding:o}}=this.options,r=t+o,a=this._getLabelSizes().widest.width;let s,l;return"left"===e?n?(l=this.right+o,"near"===i?s="left":"center"===i?(s="center",l+=a/2):(s="right",l+=a)):(l=this.right-r,"near"===i?s="right":"center"===i?(s="center",l-=a/2):(s="left",l=this.left)):"right"===e?n?(l=this.left+o,"near"===i?s="right":"center"===i?(s="center",l-=a/2):(s="left",l-=a)):(l=this.left+r,"near"===i?s="left":"center"===i?(s="center",l+=a/2):(s="right",l=this.right)):s="right",{textAlign:s,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,o,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex((e=>e.value===t));if(i>=0){return e.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(t,e,n)=>{n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(e.display)for(o=0,r=n.length;o<r;++o){const t=n[o];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:n}}=this,o=i.setContext(this.getContext()),r=i.display?o.width:0;if(!r)return;const a=n.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let l,c,h,u;this.isHorizontal()?(l=se(t,this.left,r)-r/2,c=se(t,this.right,a)+a/2,h=u=s):(h=se(t,this.top,r)-r/2,u=se(t,this.bottom,a)+a/2,l=c=s),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(l,h),e.lineTo(c,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,i=this._computeLabelArea();i&&pe(e,i);const n=this.getLabelItems(t);for(const t of n){const i=t.options,n=t.font;ge(e,t.label,0,t.textOffset,n,i)}i&&de(e)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:n}}=this;if(!i.display)return;const o=Pe(i.font),r=Ce(i.padding),a=i.align;let s=o.lineHeight/2;"bottom"===e||"center"===e||N(e)?(s+=r.bottom,j(i.text)&&(s+=o.lineHeight*(i.text.length-1))):s+=r.top;const{titleX:l,titleY:c,maxWidth:h,rotation:u}=function(t,e,i,n){const{top:o,left:r,bottom:a,right:s,chart:l}=t,{chartArea:c,scales:h}=l;let u,p,d,m=0;const f=a-o,g=s-r;if(t.isHorizontal()){if(p=Ft(n,r,s),N(i)){const t=Object.keys(i)[0],n=i[t];d=h[t].getPixelForValue(n)+f-e}else d="center"===i?(c.bottom+c.top)/2+f-e:Cn(t,i,e);u=s-r}else{if(N(i)){const t=Object.keys(i)[0],n=i[t];p=h[t].getPixelForValue(n)-g+e}else p="center"===i?(c.left+c.right)/2-g+e:Cn(t,i,e);d=Ft(n,a,o),m="left"===i?-ut:ut}return{titleX:p,titleY:d,maxWidth:u,rotation:m}}(this,s,e,a);ge(t,i.text,0,0,o,{color:i.color,maxWidth:h,rotation:u,textAlign:Dn(a,e,n),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=H(t.grid&&t.grid.z,-1),n=H(t.border&&t.border.z,0);return this._isVisible()&&this.draw===En.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let o,r;for(o=0,r=e.length;o<r;++o){const r=e[o];r[i]!==this.id||t&&r.type!==t||n.push(r)}return n}_resolveTickFontOptions(t){return Pe(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class On{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function(t){return"id"in t&&"defaults"in t})(e)&&(i=this.register(e));const n=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in n||(n[o]=t,function(t,e,i){const n=J(Object.create(null),[i?re.get(i):{},re.get(e),t.defaults]);re.set(e,n),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((i=>{const n=i.split("."),o=n.pop(),r=[t].concat(n).join("."),a=e[i].split("."),s=a.pop(),l=a.join(".");re.route(r,o,l,s)}))}(e,t.defaultRoutes);t.descriptors&&re.describe(e,t.descriptors)}(t,r,i),this.override&&re.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,n=this.scope;i in e&&delete e[i],n&&i in re[n]&&(delete re[n][i],this.override&&delete te[i])}}class In{constructor(){this.controllers=new On(Fi,"datasets",!0),this.elements=new On(Ln,"elements"),this.plugins=new On(Object,"plugins"),this.scales=new On(En,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach((e=>{const n=i||this._getRegistryForType(e);i||n.isForType(e)||n===this.plugins&&e.id?this._exec(t,n,e):W(e,(e=>{const n=i||this._getRegistryForType(e);this._exec(t,n,e)}))}))}_exec(t,e,i){const n=it(t);V(i["before"+n],[],i),e[t](i),V(i["after"+n],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t);if(void 0===n)throw new Error('"'+t+'" is not a registered '+i+".");return n}}var Bn=new In;class Rn{constructor(){this._init=[]}notify(t,e,i,n){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=n?this._descriptors(t).filter(n):this._descriptors(t),r=this._notify(o,t,e,i);return"afterDestroy"===e&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,i,n){n=n||{};for(const o of t){const t=o.plugin;if(!1===V(t[i],[e,n,o.options],t)&&n.cancelable)return!1}return!0}invalidate(){F(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,n=H(i.options&&i.options.plugins,{}),o=function(t){const e={},i=[],n=Object.keys(Bn.plugins.items);for(let t=0;t<n.length;t++)i.push(Bn.getPlugin(n[t]));const o=t.plugins||[];for(let t=0;t<o.length;t++){const n=o[t];-1===i.indexOf(n)&&(i.push(n),e[n.id]=!0)}return{plugins:i,localIds:e}}(i);return!1!==n||e?function(t,{plugins:e,localIds:i},n,o){const r=[],a=t.getContext();for(const s of e){const e=s.id,l=zn(n[e],o);null!==l&&r.push({plugin:s,options:Fn(t.config,{plugin:s,local:i[e]},l,a)})}return r}(t,o,n,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function zn(t,e){return e||!1!==t?!0===t?{}:t:null}function Fn(t,{plugin:e,local:i},n,o){const r=t.pluginScopeKeys(e),a=t.getOptionScopes(n,r);return i&&e.defaults&&a.push(e.defaults),t.createResolver(a,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jn(t,e){const i=re.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function Nn(t,e){if("x"===t||"y"===t||"r"===t)return t;var i;if(t=e.axis||("top"===(i=e.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.length>1&&Nn(t[0].toLowerCase(),e))return t;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function Un(t){const e=t.options||(t.options={});e.plugins=H(e.plugins,{}),e.scales=function(t,e){const i=te[t.type]||{scales:{}},n=e.scales||{},o=jn(t.type,e),r=Object.create(null);return Object.keys(n).forEach((t=>{const e=n[t];if(!N(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const a=Nn(t,e),s=function(t,e){return t===e?"_index_":"_value_"}(a,o),l=i.scales||{};r[t]=X(Object.create(null),[{axis:a},e,l[a],l[s]])})),t.data.datasets.forEach((i=>{const o=i.type||t.type,a=i.indexAxis||jn(o,e),s=(te[o]||{}).scales||{};Object.keys(s).forEach((t=>{const e=function(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}(t,a),o=i[e+"AxisID"]||e;r[o]=r[o]||Object.create(null),X(r[o],[{axis:e},n[o],s[t]])}))})),Object.keys(r).forEach((t=>{const e=r[t];X(e,[re.scales[e.type],re.scale])})),r}(t,e)}function Gn(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Hn=new Map,Zn=new Set;function Vn(t,e){let i=Hn.get(t);return i||(i=e(),Hn.set(t,i),Zn.add(i)),i}const Wn=(t,e,i)=>{const n=et(e,i);void 0!==n&&t.add(n)};class qn{constructor(t){this._config=function(t){return(t=t||{}).data=Gn(t.data),Un(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Gn(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Un(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Vn(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Vn(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Vn(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Vn(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache;let n=i.get(t);return n&&!e||(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:n,type:o}=this,r=this._cachedScopes(t,i),a=r.get(e);if(a)return a;const s=new Set;e.forEach((e=>{t&&(s.add(t),e.forEach((e=>Wn(s,t,e)))),e.forEach((t=>Wn(s,n,t))),e.forEach((t=>Wn(s,te[o]||{},t))),e.forEach((t=>Wn(s,re,t))),e.forEach((t=>Wn(s,ee,t)))}));const l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),Zn.has(e)&&r.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,te[e]||{},re.datasets[e]||{},{type:e},re,ee]}resolveNamedOptions(t,e,i,n=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=$n(this._resolverCache,t,n);let s=r;if(function(t,e){const{isScriptable:i,isIndexable:n}=Ee(t);for(const o of e){const e=i(o),r=n(o),a=(r||e)&&t[o];if(e&&(ot(a)||Yn(a))||r&&j(a))return!0}return!1}(r,e)){o.$shared=!1;s=De(r,i=ot(i)?i():i,this.createResolver(t,i,a))}for(const t of e)o[t]=s[t];return o}createResolver(t,e,i=[""],n){const{resolver:o}=$n(this._resolverCache,t,i);return N(e)?De(o,e,void 0,n):o}}function $n(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const o=i.join();let r=n.get(o);if(!r){r={resolver:Ae(e,i),subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},n.set(o,r)}return r}const Yn=t=>N(t)&&Object.getOwnPropertyNames(t).reduce(((e,i)=>e||ot(t[i])),!1);const Kn=["top","bottom","left","right","chartArea"];function Jn(t,e){return"top"===t||"bottom"===t||-1===Kn.indexOf(t)&&"x"===e}function Xn(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function Qn(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),V(i&&i.onComplete,[t],e)}function to(t){const e=t.chart,i=e.options.animation;V(i&&i.onProgress,[t],e)}function eo(t){return Ke()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const io={},no=t=>{const e=eo(t);return Object.values(io).filter((t=>t.canvas===e)).pop()};function oo(t,e,i){const n=Object.keys(t);for(const o of n){const n=+o;if(n>=e){const r=t[o];delete t[o],(i>0||n>e)&&(t[n+i]=r)}}}class ro{static defaults=re;static instances=io;static overrides=te;static registry=Bn;static version="4.2.0";static getChart=no;static register(...t){Bn.add(...t),ao()}static unregister(...t){Bn.remove(...t),ao()}constructor(t,e){const i=this.config=new qn(e),n=eo(t),o=no(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(t){return!Ke()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?ln:kn}(n)),this.platform.updateConfig(i);const a=this.platform.acquireContext(n,r.aspectRatio),s=a&&a.canvas,l=s&&s.height,c=s&&s.width;this.id=z(),this.ctx=a,this.canvas=s,this.width=c,this.height=l,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Rn,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let i;return function(...n){return e?(clearTimeout(i),i=setTimeout(t,e,n)):t.apply(this,n),e}}((t=>this.update(t)),r.resizeDelay||0),this._dataChanges=[],io[this.id]=this,a&&s?(ki.listen(this,"complete",Qn),ki.listen(this,"progress",to),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:n,_aspectRatio:o}=this;return F(t)?e&&o?o:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Bn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ri(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return le(this.canvas,this.ctx),this}stop(){return ki.stop(this),this}resize(t,e){ki.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,n=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(n,t,e,o),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,ri(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),V(i.onResize,[this,r],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){W(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,n=Object.keys(i).reduce(((t,e)=>(t[e]=!1,t)),{});let o=[];e&&(o=o.concat(Object.keys(e).map((t=>{const i=e[t],n=Nn(t,i),o="r"===n,r="x"===n;return{options:i,dposition:o?"chartArea":r?"bottom":"left",dtype:o?"radialLinear":r?"category":"linear"}})))),W(o,(e=>{const o=e.options,r=o.id,a=Nn(r,o),s=H(o.type,e.dtype);void 0!==o.position&&Jn(o.position,a)===Jn(e.dposition)||(o.position=e.dposition),n[r]=!0;let l=null;if(r in i&&i[r].type===s)l=i[r];else{l=new(Bn.getScale(s))({id:r,type:s,ctx:this.ctx,chart:this}),i[l.id]=l}l.init(o,t)})),W(n,((t,e)=>{t||delete i[e]})),W(i,(t=>{an.configure(this,t,t.options),an.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort(((t,e)=>t.index-e.index)),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(Xn("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,i)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=e.length;i<n;i++){const n=e[i];let o=this.getDatasetMeta(i);const r=n.type||this.config.type;if(o.type&&o.type!==r&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=r,o.indexAxis=n.indexAxis||jn(r,this.options),o.order=n.order||0,o.index=i,o.label=""+n.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const e=Bn.getController(r),{datasetElementType:n,dataElementType:a}=re.datasets[r];Object.assign(e,{dataElementType:Bn.getElement(a),datasetElementType:n&&Bn.getElement(n)}),o.controller=new e(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){W(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),i=!n&&-1===o.indexOf(e);e.buildOrUpdateElements(i),r=Math.max(+e.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),n||W(o,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Xn("z","_idx"));const{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){W(this.scales,(t=>{an.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);rt(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:o}of e){oo(t,n,"_removeElements"===i?-o:o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),n=i(0);for(let t=1;t<e;t++)if(!rt(n,i(t)))return;return Array.from(n).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;an.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],W(this.boxes,(t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,ot(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(i.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ki.has(this)?this.attached&&!ki.running(this)&&ki.start(this):(this.draw(),Qn({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let n,o;for(n=0,o=e.length;n<o;++n){const o=e[n];t&&!o.visible||i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,n=!i.disabled,o=function(t){const{xScale:e,yScale:i}=t;if(e&&i)return{left:e.left,right:e.right,top:i.top,bottom:i.bottom}}(t)||this.chartArea,r={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(n&&pe(e,{left:!1===i.left?0:o.left-i.left,right:!1===i.right?this.width:o.right+i.right,top:!1===i.top?0:o.top-i.top,bottom:!1===i.bottom?this.height:o.bottom+i.bottom}),t.controller.draw(),n&&de(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return ue(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,n){const o=Wi.modes[e];return"function"==typeof o?o(this,t,i,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let n=i.filter((t=>t&&t._dataset===e)).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=Te(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const n=i?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,n);nt(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),r.update(o,{visible:i}),this.update((e=>e.datasetIndex===t?n:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),ki.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),le(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete io[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},n=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};W(this.options.events,(t=>i(t,n)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},n=(i,n)=>{t[i]&&(e.removeEventListener(this,i,n),delete t[i])},o=(t,e)=>{this.canvas&&this.resize(t,e)};let r;const a=()=>{n("attach",a),this.attached=!0,this.resize(),i("resize",o),i("detach",r)};r=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():r()}unbindEvents(){W(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},W(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const n=i?"set":"remove";let o,r,a,s;for("dataset"===e&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),a=0,s=t.length;a<s;++a){r=t[a];const e=r&&this.getDatasetMeta(r.datasetIndex).controller;e&&e[n+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map((({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}));!q(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,i){const n=this.options.hover,o=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),r=o(e,t),a=i?t:o(t,e);r.length&&this.updateHoverStyle(r,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,n))return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:n=[],options:o}=this,r=e,a=this._getActiveElements(t,n,i,r),s=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,i,n){return i&&"mouseout"!==t.type?n?e:t:null}(t,this._lastEvent,i,s);i&&(this._lastEvent=null,V(o.onHover,[t,a,this],this),s&&V(o.onClick,[t,a,this],this));const c=!q(a,n);return(c||e)&&(this._active=a,this._updateHoverStyles(a,n,e)),this._lastEvent=l,c}_getActiveElements(t,e,i,n){if("mouseout"===t.type)return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,n)}}function ao(){return W(ro.instances,(t=>t._plugins.invalidate()))}function so(t,e,i=e){t.lineCap=H(i.borderCapStyle,e.borderCapStyle),t.setLineDash(H(i.borderDash,e.borderDash)),t.lineDashOffset=H(i.borderDashOffset,e.borderDashOffset),t.lineJoin=H(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=H(i.borderWidth,e.borderWidth),t.strokeStyle=H(i.borderColor,e.borderColor)}function lo(t,e,i){t.lineTo(i.x,i.y)}function co(t,e,i={}){const n=t.length,{start:o=0,end:r=n-1}=i,{start:a,end:s}=e,l=Math.max(o,a),c=Math.min(r,s),h=o<a&&r<a||o>s&&r>s;return{count:n,start:l,loop:e.loop,ilen:c<l&&!h?n+c-l:c-l}}function ho(t,e,i,n){const{points:o,options:r}=e,{count:a,start:s,loop:l,ilen:c}=co(o,i,n),h=function(t){return t.stepped?me:t.tension||"monotone"===t.cubicInterpolationMode?fe:lo}(r);let u,p,d,{move:m=!0,reverse:f}=n||{};for(u=0;u<=c;++u)p=o[(s+(f?c-u:u))%a],p.skip||(m?(t.moveTo(p.x,p.y),m=!1):h(t,d,p,f,r.stepped),d=p);return l&&(p=o[(s+(f?c:0))%a],h(t,d,p,f,r.stepped)),!!l}function uo(t,e,i,n){const o=e.points,{count:r,start:a,ilen:s}=co(o,i,n),{move:l=!0,reverse:c}=n||{};let h,u,p,d,m,f,g=0,_=0;const v=t=>(a+(c?s-t:t))%r,y=()=>{d!==m&&(t.lineTo(g,m),t.lineTo(g,d),t.lineTo(g,f))};for(l&&(u=o[v(0)],t.moveTo(u.x,u.y)),h=0;h<=s;++h){if(u=o[v(h)],u.skip)continue;const e=u.x,i=u.y,n=0|e;n===p?(i<d?d=i:i>m&&(m=i),g=(_*g+e)/++_):(y(),t.lineTo(e,i),p=n,_=0,d=m=i),f=i}y()}function po(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i)?uo:ho}const mo="function"==typeof Path2D;function fo(t,e,i,n){mo&&!e.options.segment?function(t,e,i,n){let o=e._path;o||(o=e._path=new Path2D,e.path(o,i,n)&&o.closePath()),so(t,e.options),t.stroke(o)}(t,e,i,n):function(t,e,i,n){const{segments:o,options:r}=e,a=po(e);for(const s of o)so(t,r,s.style),t.beginPath(),a(t,e,s,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}(t,e,i,n)}class go extends Ln{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;Ye(this._points,i,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const i=t.points,n=t.options.spanGaps,o=i.length;if(!o)return[];const r=!!t._loop,{start:a,end:s}=function(t,e,i,n){let o=0,r=e-1;if(i&&!n)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,i&&(r+=o);r>o&&t[r%e].skip;)r--;return r%=e,{start:o,end:r}}(i,o,r,n);return vi(t,!0===n?[{start:a,end:s,loop:r}]:function(t,e,i,n){const o=t.length,r=[];let a,s=e,l=t[e];for(a=e+1;a<=i;++a){const i=t[a%o];i.skip||i.stop?l.skip||(n=!1,r.push({start:e%o,end:(a-1)%o,loop:n}),e=s=i.stop?a:null):(s=a,l.skip&&(e=a)),l=i}return null!==s&&r.push({start:e%o,end:s%o,loop:n}),r}(i,a,s<a?s+o:s,!!t._fullLoop&&0===a&&s===o-1),i,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,n=t[e],o=this.points,r=_i(this,{property:e,start:n,end:n});if(!r.length)return;const a=[],s=function(t){return t.stepped?ci:t.tension||"monotone"===t.cubicInterpolationMode?hi:li}(i);let l,c;for(l=0,c=r.length;l<c;++l){const{start:c,end:h}=r[l],u=o[c],p=o[h];if(u===p){a.push(u);continue}const d=s(u,p,Math.abs((n-u[e])/(p[e]-u[e])),i.stepped);d[e]=t[e],a.push(d)}return 1===a.length?a[0]:a}pathSegment(t,e,i){return po(this)(t,this,e,i)}path(t,e,i){const n=this.segments,o=po(this);let r=this._loop;e=e||0,i=i||this.points.length-e;for(const a of n)r&=o(t,this,a,{start:e,end:e+i-1});return!!r}draw(t,e,i,n){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),fo(t,this,i,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function _o(t,e,i,n){const o=t.options,{[i]:r}=t.getProps([i],n);return Math.abs(e-r)<o.radius+o.hitRadius}class vo extends Ln{static id="point";static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.options,{x:o,y:r}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(e-r,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,e){return _o(this,t,"x",e)}inYRange(t,e){return _o(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const i=this.options;this.skip||i.radius<.1||!ue(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,ce(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function yo(t,e,i,n){if(n)return;let o=e[t],r=i[t];return"angle"===t&&(o=Ct(o),r=Ct(r)),{property:t,start:o,end:r}}function bo(t,e,i){for(;e>t;e--){const t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function xo(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function ko(t,e){let i=[],n=!1;return j(t)?(n=!0,i=t):i=function(t,e){const{x:i=null,y:n=null}=t||{},o=e.points,r=[];return e.segments.forEach((({start:t,end:e})=>{e=bo(t,e,o);const a=o[t],s=o[e];null!==n?(r.push({x:a.x,y:n}),r.push({x:s.x,y:n})):null!==i&&(r.push({x:i,y:a.y}),r.push({x:i,y:s.y}))})),r}(t,e),i.length?new go({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function Lo(t){return t&&!1!==t.fill}function wo(t,e,i){let n=t[e].fill;const o=[e];let r;if(!i)return n;for(;!1!==n&&-1===o.indexOf(n);){if(!U(n))return n;if(r=t[n],!r)return!1;if(r.visible)return n;o.push(n),n=r.fill}return!1}function Mo(t,e,i){const n=function(t){const e=t.options,i=e.fill;let n=H(i&&i.target,i);void 0===n&&(n=!!e.backgroundColor);if(!1===n||null===n)return!1;if(!0===n)return"origin";return n}(t);if(N(n))return!isNaN(n.value)&&n;let o=parseFloat(n);return U(o)&&Math.floor(o)===o?function(t,e,i,n){"-"!==t&&"+"!==t||(i=e+i);if(i===e||i<0||i>=n)return!1;return i}(n[0],e,o,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Co(t,e,i){const n=[];for(let o=0;o<i.length;o++){const r=i[o],{first:a,last:s,point:l}=Po(r,e,"x");if(!(!l||a&&s))if(a)n.unshift(l);else if(t.push(l),!s)break}t.push(...n)}function Po(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const o=n[i],r=t.segments,a=t.points;let s=!1,l=!1;for(let t=0;t<r.length;t++){const e=r[t],n=a[e.start][i],c=a[e.end][i];if(Tt(o,n,c)){s=o===n,l=o===c;break}}return{first:s,last:l,point:n}}class So{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:n,y:o,radius:r}=this;return e=e||{start:0,end:st},t.arc(n,o,r,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:n}=this,o=t.angle;return{x:e+Math.cos(o)*n,y:i+Math.sin(o)*n,angle:o}}}function To(t){const{chart:e,fill:i,line:n}=t;if(U(i))return function(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}(e,i);if("stack"===i)return function(t){const{scale:e,index:i,line:n}=t,o=[],r=n.segments,a=n.points,s=function(t,e){const i=[],n=t.getMatchingVisibleMetas("line");for(let t=0;t<n.length;t++){const o=n[t];if(o.index===e)break;o.hidden||i.unshift(o.dataset)}return i}(e,i);s.push(ko({x:null,y:e.bottom},n));for(let t=0;t<r.length;t++){const e=r[t];for(let t=e.start;t<=e.end;t++)Co(o,a[t],s)}return new go({points:o,options:{}})}(t);if("shape"===i)return!0;const o=function(t){if((t.scale||{}).getPointPositionForValue)return function(t){const{scale:e,fill:i}=t,n=e.options,o=e.getLabels().length,r=n.reverse?e.max:e.min,a=function(t,e,i){let n;return n="start"===t?i:"end"===t?e.options.reverse?e.min:e.max:N(t)?t.value:e.getBaseValue(),n}(i,e,r),s=[];if(n.grid.circular){const t=e.getPointPositionForValue(0,r);return new So({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(a)})}for(let t=0;t<o;++t)s.push(e.getPointPositionForValue(t,a));return s}(t);return function(t){const{scale:e={},fill:i}=t,n=function(t,e){let i=null;return"start"===t?i=e.bottom:"end"===t?i=e.top:N(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}(i,e);if(U(n)){const t=e.isHorizontal();return{x:t?n:null,y:t?null:n}}return null}(t)}(t);return o instanceof So?o:ko(o,n)}function Ao(t,e,i){const n=To(e),{line:o,scale:r,axis:a}=e,s=o.options,l=s.fill,c=s.backgroundColor,{above:h=c,below:u=c}=l||{};n&&o.points.length&&(pe(t,i),function(t,e){const{line:i,target:n,above:o,below:r,area:a,scale:s}=e,l=i._loop?"angle":e.axis;t.save(),"x"===l&&r!==o&&(Do(t,n,a.top),Eo(t,{line:i,target:n,color:o,scale:s,property:l}),t.restore(),t.save(),Do(t,n,a.bottom));Eo(t,{line:i,target:n,color:r,scale:s,property:l}),t.restore()}(t,{line:o,target:n,above:h,below:u,area:i,scale:r,axis:a}),de(t))}function Do(t,e,i){const{segments:n,points:o}=e;let r=!0,a=!1;t.beginPath();for(const s of n){const{start:n,end:l}=s,c=o[n],h=o[bo(n,l,o)];r?(t.moveTo(c.x,c.y),r=!1):(t.lineTo(c.x,i),t.lineTo(c.x,c.y)),a=!!e.pathSegment(t,s,{move:a}),a?t.closePath():t.lineTo(h.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function Eo(t,e){const{line:i,target:n,property:o,color:r,scale:a}=e,s=function(t,e,i){const n=t.segments,o=t.points,r=e.points,a=[];for(const t of n){let{start:n,end:s}=t;s=bo(n,s,o);const l=yo(i,o[n],o[s],t.loop);if(!e.segments){a.push({source:t,target:l,start:o[n],end:o[s]});continue}const c=_i(e,l);for(const e of c){const n=yo(i,r[e.start],r[e.end],e.loop),s=gi(t,o,n);for(const t of s)a.push({source:t,target:e,start:{[i]:xo(l,n,"start",Math.max)},end:{[i]:xo(l,n,"end",Math.min)}})}}return a}(i,n,o);for(const{source:e,target:l,start:c,end:h}of s){const{style:{backgroundColor:s=r}={}}=e,u=!0!==n;t.save(),t.fillStyle=s,Oo(t,a,u&&yo(o,c,h)),t.beginPath();const p=!!i.pathSegment(t,e);let d;if(u){p?t.closePath():Io(t,n,h,o);const e=!!n.pathSegment(t,l,{move:p,reverse:!0});d=p&&e,d||Io(t,n,c,o)}t.closePath(),t.fill(d?"evenodd":"nonzero"),t.restore()}}function Oo(t,e,i){const{top:n,bottom:o}=e.chart.chartArea,{property:r,start:a,end:s}=i||{};"x"===r&&(t.beginPath(),t.rect(a,n,s-a,o-n),t.clip())}function Io(t,e,i,n){const o=e.interpolate(i,n);o&&t.lineTo(o.x,o.y)}var Bo={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,o=[];let r,a,s,l;for(a=0;a<n;++a)r=t.getDatasetMeta(a),s=r.dataset,l=null,s&&s.options&&s instanceof go&&(l={visible:t.isDatasetVisible(a),index:a,fill:Mo(s,a,n),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:s}),r.$filler=l,o.push(l);for(a=0;a<n;++a)l=o[a],l&&!1!==l.fill&&(l.fill=wo(o,a,i.propagate))},beforeDraw(t,e,i){const n="beforeDraw"===i.drawTime,o=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let e=o.length-1;e>=0;--e){const i=o[e].$filler;i&&(i.line.updateControlPoints(r,i.axis),n&&i.fill&&Ao(t.ctx,i,r))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;const n=t.getSortedVisibleDatasetMetas();for(let e=n.length-1;e>=0;--e){const i=n[e].$filler;Lo(i)&&Ao(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;Lo(n)&&"beforeDatasetDraw"===i.drawTime&&Ao(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};new WeakMap;const Ro={average(t){if(!t.length)return!1;let e,i,n=0,o=0,r=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();n+=t.x,o+=t.y,++r}}return{x:n/r,y:o/r}},nearest(t,e){if(!t.length)return!1;let i,n,o,r=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){const n=t[i].element;if(n&&n.hasValue()){const t=wt(e,n.getCenterPoint());t<s&&(s=t,o=n)}}if(o){const t=o.tooltipPosition();r=t.x,a=t.y}return{x:r,y:a}}};function zo(t,e){return e&&(j(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Fo(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function jo(t,e){const{element:i,datasetIndex:n,index:o}=e,r=t.getDatasetMeta(n).controller,{label:a,value:s}=r.getLabelAndValue(o);return{chart:t,label:a,parsed:r.getParsed(o),raw:t.data.datasets[n].data[o],formattedValue:s,dataset:r.getDataset(),dataIndex:o,datasetIndex:n,element:i}}function No(t,e){const i=t.chart.ctx,{body:n,footer:o,title:r}=t,{boxWidth:a,boxHeight:s}=e,l=Pe(e.bodyFont),c=Pe(e.titleFont),h=Pe(e.footerFont),u=r.length,p=o.length,d=n.length,m=Ce(e.padding);let f=m.height,g=0,_=n.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(_+=t.beforeBody.length+t.afterBody.length,u&&(f+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),_){f+=d*(e.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(_-d)*l.lineHeight+(_-1)*e.bodySpacing}p&&(f+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let v=0;const y=function(t){g=Math.max(g,i.measureText(t).width+v)};return i.save(),i.font=c.string,W(t.title,y),i.font=l.string,W(t.beforeBody.concat(t.afterBody),y),v=e.displayColors?a+2+e.boxPadding:0,W(n,(t=>{W(t.before,y),W(t.lines,y),W(t.after,y)})),v=0,i.font=h.string,W(t.footer,y),i.restore(),g+=m.width,{width:g,height:f}}function Uo(t,e,i,n){const{x:o,width:r}=i,{width:a,chartArea:{left:s,right:l}}=t;let c="center";return"center"===n?c=o<=(s+l)/2?"left":"right":o<=r/2?c="left":o>=a-r/2&&(c="right"),function(t,e,i,n){const{x:o,width:r}=n,a=i.caretSize+i.caretPadding;return"left"===t&&o+r+a>e.width||"right"===t&&o-r-a<0||void 0}(c,t,e,i)&&(c="center"),c}function Go(t,e,i){const n=i.yAlign||e.yAlign||function(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}(t,i);return{xAlign:i.xAlign||e.xAlign||Uo(t,e,i,n),yAlign:n}}function Ho(t,e,i,n){const{caretSize:o,caretPadding:r,cornerRadius:a}=t,{xAlign:s,yAlign:l}=i,c=o+r,{topLeft:h,topRight:u,bottomLeft:p,bottomRight:d}=Me(a);let m=function(t,e){let{x:i,width:n}=t;return"right"===e?i-=n:"center"===e&&(i-=n/2),i}(e,s);const f=function(t,e,i){let{y:n,height:o}=t;return"top"===e?n+=i:n-="bottom"===e?o+i:o/2,n}(e,l,c);return"center"===l?"left"===s?m+=c:"right"===s&&(m-=c):"left"===s?m-=Math.max(h,p)+o:"right"===s&&(m+=Math.max(u,d)+o),{x:St(m,0,n.width-e.width),y:St(f,0,n.height-e.height)}}function Zo(t,e,i){const n=Ce(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-n.right:t.x+n.left}function Vo(t){return zo([],Fo(t))}function Wo(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const qo={beforeTitle:R,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:R,beforeBody:R,beforeLabel:R,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return F(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:R,afterBody:R,beforeFooter:R,footer:R,afterFooter:R};function $o(t,e,i,n){const o=t[e].call(i,n);return void 0===o?qo[e].call(i,n):o}class Yo extends Ln{static positioners=Ro;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&e.options.animation&&i.animations,o=new Ci(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,i=this._tooltipItems,Te(t,{tooltip:e,tooltipItems:i,type:"tooltip"})));var t,e,i}getTitle(t,e){const{callbacks:i}=e,n=$o(i,"beforeTitle",this,t),o=$o(i,"title",this,t),r=$o(i,"afterTitle",this,t);let a=[];return a=zo(a,Fo(n)),a=zo(a,Fo(o)),a=zo(a,Fo(r)),a}getBeforeBody(t,e){return Vo($o(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,n=[];return W(t,(t=>{const e={before:[],lines:[],after:[]},o=Wo(i,t);zo(e.before,Fo($o(o,"beforeLabel",this,t))),zo(e.lines,$o(o,"label",this,t)),zo(e.after,Fo($o(o,"afterLabel",this,t))),n.push(e)})),n}getAfterBody(t,e){return Vo($o(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,n=$o(i,"beforeFooter",this,t),o=$o(i,"footer",this,t),r=$o(i,"afterFooter",this,t);let a=[];return a=zo(a,Fo(n)),a=zo(a,Fo(o)),a=zo(a,Fo(r)),a}_createItems(t){const e=this._active,i=this.chart.data,n=[],o=[],r=[];let a,s,l=[];for(a=0,s=e.length;a<s;++a)l.push(jo(this.chart,e[a]));return t.filter&&(l=l.filter(((e,n,o)=>t.filter(e,n,o,i)))),t.itemSort&&(l=l.sort(((e,n)=>t.itemSort(e,n,i)))),W(l,(e=>{const i=Wo(t.callbacks,e);n.push($o(i,"labelColor",this,e)),o.push($o(i,"labelPointStyle",this,e)),r.push($o(i,"labelTextColor",this,e))})),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=l,l}update(t,e){const i=this.options.setContext(this.getContext()),n=this._active;let o,r=[];if(n.length){const t=Ro[i.position].call(this,n,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const e=this._size=No(this,i),a=Object.assign({},t,e),s=Go(this.chart,i,a),l=Ho(i,a,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,o={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,n){const o=this.getCaretPosition(t,i,n);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:n,yAlign:o}=this,{caretSize:r,cornerRadius:a}=i,{topLeft:s,topRight:l,bottomLeft:c,bottomRight:h}=Me(a),{x:u,y:p}=t,{width:d,height:m}=e;let f,g,_,v,y,b;return"center"===o?(y=p+m/2,"left"===n?(f=u,g=f-r,v=y+r,b=y-r):(f=u+d,g=f+r,v=y-r,b=y+r),_=f):(g="left"===n?u+Math.max(s,c)+r:"right"===n?u+d-Math.max(l,h)-r:this.caretX,"top"===o?(v=p,y=v-r,f=g-r,_=g+r):(v=p+m,y=v+r,f=g+r,_=g-r),b=v),{x1:f,x2:g,x3:_,y1:v,y2:y,y3:b}}drawTitle(t,e,i){const n=this.title,o=n.length;let r,a,s;if(o){const l=ui(i.rtl,this.x,this.width);for(t.x=Zo(this,i.titleAlign,i),e.textAlign=l.textAlign(i.titleAlign),e.textBaseline="middle",r=Pe(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=r.string,s=0;s<o;++s)e.fillText(n[s],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,s+1===o&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,n,o){const r=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:s,boxWidth:l,boxPadding:c}=o,h=Pe(o.bodyFont),u=Zo(this,"left",o),p=n.x(u),d=s<h.lineHeight?(h.lineHeight-s)/2:0,m=e.y+d;if(o.usePointStyle){const e={radius:Math.min(l,s)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},i=n.leftForLtr(p,l)+l/2,c=m+s/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,ce(t,e,i,c),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,ce(t,e,i,c)}else{t.lineWidth=N(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const e=n.leftForLtr(p,l-c),i=n.leftForLtr(n.xPlus(p,1),l-c-2),a=Me(r.borderRadius);Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ye(t,{x:e,y:m,w:l,h:s,radius:a}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),ye(t,{x:i,y:m+1,w:l-2,h:s-2,radius:a}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(e,m,l,s),t.strokeRect(e,m,l,s),t.fillStyle=r.backgroundColor,t.fillRect(i,m+1,l-2,s-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:n}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:s,boxWidth:l,boxPadding:c}=i,h=Pe(i.bodyFont);let u=h.lineHeight,p=0;const d=ui(i.rtl,this.x,this.width),m=function(i){e.fillText(i,d.x(t.x+p),t.y+u/2),t.y+=u+o},f=d.textAlign(r);let g,_,v,y,b,x,k;for(e.textAlign=r,e.textBaseline="middle",e.font=h.string,t.x=Zo(this,f,i),e.fillStyle=i.bodyColor,W(this.beforeBody,m),p=a&&"right"!==f?"center"===r?l/2+c:l+2+c:0,y=0,x=n.length;y<x;++y){for(g=n[y],_=this.labelTextColors[y],e.fillStyle=_,W(g.before,m),v=g.lines,a&&v.length&&(this._drawColorBox(e,t,y,d,i),u=Math.max(h.lineHeight,s)),b=0,k=v.length;b<k;++b)m(v[b]),u=h.lineHeight;W(g.after,m)}p=0,u=h.lineHeight,W(this.afterBody,m),t.y-=o}drawFooter(t,e,i){const n=this.footer,o=n.length;let r,a;if(o){const s=ui(i.rtl,this.x,this.width);for(t.x=Zo(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=s.textAlign(i.footerAlign),e.textBaseline="middle",r=Pe(i.footerFont),e.fillStyle=i.footerColor,e.font=r.string,a=0;a<o;++a)e.fillText(n[a],s.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+i.footerSpacing}}drawBackground(t,e,i,n){const{xAlign:o,yAlign:r}=this,{x:a,y:s}=t,{width:l,height:c}=i,{topLeft:h,topRight:u,bottomLeft:p,bottomRight:d}=Me(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(a+h,s),"top"===r&&this.drawCaret(t,e,i,n),e.lineTo(a+l-u,s),e.quadraticCurveTo(a+l,s,a+l,s+u),"center"===r&&"right"===o&&this.drawCaret(t,e,i,n),e.lineTo(a+l,s+c-d),e.quadraticCurveTo(a+l,s+c,a+l-d,s+c),"bottom"===r&&this.drawCaret(t,e,i,n),e.lineTo(a+p,s+c),e.quadraticCurveTo(a,s+c,a,s+c-p),"center"===r&&"left"===o&&this.drawCaret(t,e,i,n),e.lineTo(a,s+h),e.quadraticCurveTo(a,s,a+h,s),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,n=i&&i.x,o=i&&i.y;if(n||o){const i=Ro[t.position].call(this,this._active,this._eventPosition);if(!i)return;const r=this._size=No(this,t),a=Object.assign({},i,this._size),s=Go(e,t,a),l=Ho(t,a,s,e);n._to===l.x&&o._to===l.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=r.width,this.height=r.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=Ce(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,n,e),pi(t,e.textDirection),o.y+=r.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),di(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,n=t.map((({datasetIndex:t,index:e})=>{const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}})),o=!q(i,n),r=this._positionChanged(n,e);(o||r)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],r=this._getActiveElements(t,o,e,i),a=this._positionChanged(r,t),s=e||!q(r,o)||a;return s&&(this._active=r,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}_getActiveElements(t,e,i,n){const o=this.options;if("mouseout"===t.type)return[];if(!n)return e;const r=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:i,caretY:n,options:o}=this,r=Ro[o.position].call(this,t,e);return!1!==r&&(i!==r.x||n!==r.y)}}var Ko={id:"tooltip",_element:Yo,positioners:Ro,afterInit(t,e,i){i&&(t.tooltip=new Yo({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qo},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Jo(t,e){const i=[],{bounds:n,step:o,min:r,max:a,precision:s,count:l,maxTicks:c,maxDigits:h,includeBounds:u}=t,p=o||1,d=c-1,{min:m,max:f}=e,g=!F(r),_=!F(a),v=!F(l),y=(f-m)/(h+1);let b,x,k,L,w=_t((f-m)/d/p)*p;if(w<1e-14&&!g&&!_)return[{value:m},{value:f}];L=Math.ceil(f/w)-Math.floor(m/w),L>d&&(w=_t(L*w/d/p)*p),F(s)||(b=Math.pow(10,s),w=Math.ceil(w*b)/b),"ticks"===n?(x=Math.floor(m/w)*w,k=Math.ceil(f/w)*w):(x=m,k=f),g&&_&&o&&function(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}((a-r)/o,w/1e3)?(L=Math.round(Math.min((a-r)/w,c)),w=(a-r)/L,x=r,k=a):v?(x=g?r:x,k=_?a:k,L=l-1,w=(k-x)/L):(L=(k-x)/w,L=gt(L,Math.round(L),w/1e3)?Math.round(L):Math.ceil(L));const M=Math.max(kt(w),kt(x));b=Math.pow(10,F(s)?M:s),x=Math.round(x*b)/b,k=Math.round(k*b)/b;let C=0;for(g&&(u&&x!==r?(i.push({value:r}),x<r&&C++,gt(Math.round((x+C*w)*b)/b,r,Xo(r,y,t))&&C++):x<r&&C++);C<L;++C)i.push({value:Math.round((x+C*w)*b)/b});return _&&u&&k!==a?i.length&&gt(i[i.length-1].value,a,Xo(a,y,t))?i[i.length-1].value=a:i.push({value:a}):_&&k!==a||i.push({value:k}),i}function Xo(t,e,{horizontal:i,minRotation:n}){const o=bt(n),r=(i?Math.sin(o):Math.cos(o))||.001,a=.75*e*(""+t).length;return Math.min(e/r,a)}class Qo extends En{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return F(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this;const r=t=>n=e?n:t,a=t=>o=i?o:t;if(t){const t=ft(n),e=ft(o);t<0&&e<0?a(0):t>0&&e>0&&r(0)}if(n===o){let e=0===o?1:Math.abs(.05*o);a(o+e),t||r(n-e)}this.min=n,this.max=o}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:i,stepSize:n}=t;return n?(e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n=Jo({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&yt(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const n=(i-e)/Math.max(t.length-1,1)/2;e-=n,i+=n}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Jt(t,this.chart.options.locale,this.options.ticks.format)}}class tr extends Qo{static id="linear";static defaults={ticks:{callback:Qt.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=U(t)?t:0,this.max=U(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=bt(this.options.ticks.minRotation),n=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/n))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}class er extends En{static id="logarithmic";static defaults={ticks:{callback:Qt.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Qo.prototype.parse.apply(this,[t,e]);if(0!==i)return U(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=U(t)?Math.max(0,t):null,this.max=U(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!U(this._userMin)&&(this.min=t===changeExponent(this.min,0)?changeExponent(this.min,-1):changeExponent(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,n=this.max;const o=e=>t?i:e,r=t=>e?n:t;i===n&&(i<=0?(o(1),r(10)):(o(changeExponent(i,-1)),r(changeExponent(n,1)))),i<=0&&o(changeExponent(n,-1)),n<=0&&r(changeExponent(i,1)),this.min=i,this.max=n}buildTicks(){const t=this.options,e=generateTicks({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&yt(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Jt(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=mt(t),this._valueRange=mt(this.max)-mt(t)}getPixelForValue(t){return void 0!==t&&0!==t||this.min,null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(mt(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}class ir extends Qo{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Qt.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ce(getTickBackdropHeight(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=U(t)&&!isNaN(t)?t:0,this.max=U(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(t){Qo.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const i=V(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,n))}getIndexAngle(t){return Ct(t*(st/(this._pointLabels.length||1))+bt(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(F(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(F(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function(t,e,i){return Te(t,{label:i,index:e,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const n=this.getIndexAngle(t)-ut+i;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:n,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:n,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:n,border:o}=e,r=this._pointLabels.length;let a,s,l;if(e.pointLabels.display&&function(t,e){const{ctx:i,options:{pointLabels:n}}=t;for(let o=e-1;o>=0;o--){const e=n.setContext(t.getPointLabelContext(o)),r=Pe(e.font),{x:a,y:s,textAlign:l,left:c,top:h,right:u,bottom:p}=t._pointLabelItems[o],{backdropColor:d}=e;if(!F(d)){const t=Me(e.borderRadius),n=Ce(e.backdropPadding);i.fillStyle=d;const o=c-n.left,r=h-n.top,a=u-c+n.width,s=p-h+n.height;Object.values(t).some((t=>0!==t))?(i.beginPath(),ye(i,{x:o,y:r,w:a,h:s,radius:t}),i.fill()):i.fillRect(o,r,a,s)}ge(i,t._pointLabels[o],a,s+r.lineHeight/2,r,{color:e.color,textAlign:l,textBaseline:"middle"})}}(this,r),n.display&&this.ticks.forEach(((t,e)=>{if(0!==e){this.getDistanceFromCenterForValue(t.value);const i=this.getContext(e),a=n.setContext(i),l=o.setContext(i);!function(t,e,i,n,o){const r=t.ctx,a=e.circular,{color:s,lineWidth:l}=e;!a&&!n||!s||!l||i<0||(r.save(),r.strokeStyle=s,r.lineWidth=l,r.setLineDash(o.dash),r.lineDashOffset=o.dashOffset,r.beginPath(),pathRadiusLine(t,i,a,n),r.closePath(),r.stroke(),r.restore())}(this,a,s,r,l)}})),i.display){for(t.save(),r-1;a>=0;a--){const n=i.setContext(this.getPointLabelContext(a)),{color:o,lineWidth:r}=n;r&&o&&(t.lineWidth=r,t.strokeStyle=o,t.setLineDash(n.borderDash),t.lineDashOffset=n.borderDashOffset,this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),this.getPointPosition(a,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((n,a)=>{if(0===a&&!e.reverse)return;const s=i.setContext(this.getContext(a)),l=Pe(s.font);if(this.getDistanceFromCenterForValue(this.ticks[a].value),s.showLabelBackdrop){t.font=l.string,t.measureText(n.label).width,t.fillStyle=s.backdropColor;const e=Ce(s.backdropPadding);t.fillRect(-r/2-e.left,-o-l.size/2-e.top,r+e.width,l.size+e.height)}ge(t,n.label,0,-o,l,{color:s.color})})),t.restore()}drawTitle(){}}var nr=i(243),or=i.n(nr),rr=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,ar=""===document.documentElement.style.pointerEvents,sr={cors:rr,pointerEvents:ar},lr={attributionWidthOffset:55},cr=0;function hr(t){var e="";for(var i in t.f=t.f||"json",t)if(Object.prototype.hasOwnProperty.call(t,i)){var n,o=t[i],r=Object.prototype.toString.call(o);e.length&&(e+="&"),n="[object Array]"===r?"[object Object]"===Object.prototype.toString.call(o[0])?JSON.stringify(o):o.join(","):"[object Object]"===r?JSON.stringify(o):"[object Date]"===r?o.valueOf():o,e+=encodeURIComponent(i)+"="+encodeURIComponent(n)}return e}function ur(t,e){var i=new window.XMLHttpRequest;return i.onerror=function(n){i.onreadystatechange=nr.Util.falseFn,t.call(e,{error:{code:500,message:"XMLHttpRequest error"}},null)},i.onreadystatechange=function(){var n,o;if(4===i.readyState){try{n=JSON.parse(i.responseText)}catch(t){n=null,o={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!o&&n.error&&(o=n.error,n=null),i.onerror=nr.Util.falseFn,t.call(e,o,n)}},i.ontimeout=function(){this.onerror()},i}function pr(t,e,i,n){var o=ur(i,n);return o.open("GET",t+"?"+hr(e),!0),null!=n&&void 0!==n.options&&(o.timeout=n.options.timeout,n.options.withCredentials&&(o.withCredentials=!0)),o.send(null),o}function dr(t,e,i,n){var o=hr(e),r=ur(i,n),a=(t+"?"+o).length;if(a<=2e3&&sr.cors?r.open("GET",t+"?"+o):a>2e3&&sr.cors&&(r.open("POST",t),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=n&&void 0!==n.options&&(r.timeout=n.options.timeout,n.options.withCredentials&&(r.withCredentials=!0)),a<=2e3&&sr.cors)r.send(null);else{if(!(a>2e3&&sr.cors))return a<=2e3&&!sr.cors?mr(t,e,i,n):void gr("a request to "+t+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy https://developers.arcgis.com/esri-leaflet/api-reference/request/");r.send(o)}return r}function mr(t,e,i,n){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var o="c"+cr;e.callback="window._EsriLeafletCallbacks."+o,window._EsriLeafletCallbacks[o]=function(t){if(!0!==window._EsriLeafletCallbacks[o]){var e,r=Object.prototype.toString.call(t);"[object Object]"!==r&&"[object Array]"!==r&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),i.call(n,e,t),window._EsriLeafletCallbacks[o]=!0}};var r=nr.DomUtil.create("script",null,document.body);return r.type="text/javascript",r.src=t+"?"+hr(e),r.id=o,r.onerror=function(t){if(t&&!0!==window._EsriLeafletCallbacks[o]){i.call(n,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[o]=!0}},nr.DomUtil.addClass(r,"esri-leaflet-jsonp"),cr++,{id:o,url:r.src,abort:function(){window._EsriLeafletCallbacks._callback[o]({code:0,message:"Request aborted."})}}}var fr=sr.cors?pr:mr;function gr(){console&&console.warn&&console.warn.apply(console,arguments)}fr.CORS=pr,fr.JSONP=mr;var _r={request:dr,get:fr,post:function(t,e,i,n){var o=ur(i,n);return o.open("POST",t),null!=n&&void 0!==n.options&&(o.timeout=n.options.timeout),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.send(hr(e)),o}},vr=_r,yr=function(t,e,i,n){var o=(n[0]-i[0])*(t[1]-i[1])-(n[1]-i[1])*(t[0]-i[0]),r=(e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]),a=(n[1]-i[1])*(e[0]-t[0])-(n[0]-i[0])*(e[1]-t[1]);if(0!==a){var s=o/a,l=r/a;if(s>=0&&s<=1&&l>=0&&l<=1)return!0}return!1},br=function(t,e){for(var i=0;i<t.length-1;i++)for(var n=0;n<e.length-1;n++)if(yr(t[i],t[i+1],e[n],e[n+1]))return!0;return!1},xr=function(t){return function(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t},kr=function(t){for(var e,i=0,n=0,o=t.length,r=t[n];n<o-1;n++)i+=((e=t[n+1])[0]-r[0])*(e[1]+r[1]),r=e;return i>=0},Lr=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},wr=function(t,e){var i=br(t,e),n=function(t,e){for(var i=!1,n=-1,o=t.length,r=o-1;++n<o;r=n)(t[n][1]<=e[1]&&e[1]<t[r][1]||t[r][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[r][0]-t[n][0])*(e[1]-t[n][1])/(t[r][1]-t[n][1])+t[n][0]&&(i=!i);return i}(t,e[0]);return!(i||!n)},Mr=function t(e,i){var n={};if(e.features){n.type="FeatureCollection",n.features=[];for(var o=0;o<e.features.length;o++)n.features.push(t(e.features[o],i))}if("number"==typeof e.x&&"number"==typeof e.y&&(n.type="Point",n.coordinates=[e.x,e.y],"number"==typeof e.z&&n.coordinates.push(e.z)),e.points&&(n.type="MultiPoint",n.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(n.type="LineString",n.coordinates=e.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=e.paths.slice(0))),e.rings&&(n=function(t){for(var e,i,n,o=[],r=[],a=0;a<t.length;a++){var s=xr(t[a].slice(0));if(!(s.length<4))if(kr(s)){var l=[s.slice().reverse()];o.push(l)}else r.push(s.slice().reverse())}for(var c=[];r.length;){n=r.pop();var h=!1;for(e=o.length-1;e>=0;e--)if(i=o[e][0],wr(i,n)){o[e].push(n),h=!0;break}h||c.push(n)}for(;c.length;){n=c.pop();var u=!1;for(e=o.length-1;e>=0;e--)if(i=o[e][0],br(i,n)){o[e].push(n),u=!0;break}u||o.push([n.reverse()])}return 1===o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(n.type="Polygon",n.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(n.type="Feature",n.geometry=e.geometry?t(e.geometry):null,n.properties=e.attributes?Lr(e.attributes):null,e.attributes))try{n.id=function(t,e){for(var i=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],n=0;n<i.length;n++){var o=i[n];if(o in t&&("string"==typeof t[o]||"number"==typeof t[o]))return t[o]}throw Error("No valid id attribute found")}(e.attributes,i)}catch(t){}return JSON.stringify(n.geometry)===JSON.stringify({})&&(n.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),n},Cr=function(t){var e=[],i=t.slice(0),n=xr(i.shift().slice(0));if(n.length>=4){kr(n)||n.reverse(),e.push(n);for(var o=0;o<i.length;o++){var r=xr(i[o].slice(0));r.length>=4&&(kr(r)&&r.reverse(),e.push(r))}}return e},Pr=function t(e,i){i=i||"OBJECTID";var n,o={wkid:4326},r={};switch(e.type){case"Point":r.x=e.coordinates[0],r.y=e.coordinates[1],null!=e.coordinates[2]&&(r.z=e.coordinates[2]),r.spatialReference=o;break;case"MultiPoint":r.points=e.coordinates.slice(0),null!=e.coordinates[0][2]&&(r.hasZ=!0),r.spatialReference=o;break;case"LineString":r.paths=[e.coordinates.slice(0)],null!=e.coordinates[0][2]&&(r.hasZ=!0),r.spatialReference=o;break;case"MultiLineString":r.paths=e.coordinates.slice(0),null!=e.coordinates[0][0][2]&&(r.hasZ=!0),r.spatialReference=o;break;case"Polygon":r.rings=Cr(e.coordinates.slice(0)),null!=e.coordinates[0][0][2]&&(r.hasZ=!0),r.spatialReference=o;break;case"MultiPolygon":r.rings=function(t){for(var e=[],i=0;i<t.length;i++)for(var n=Cr(t[i]),o=n.length-1;o>=0;o--){var r=n[o].slice(0);e.push(r)}return e}(e.coordinates.slice(0)),null!=e.coordinates[0][0][0][2]&&(r.hasZ=!0),r.spatialReference=o;break;case"Feature":e.geometry&&(r.geometry=t(e.geometry,i)),r.attributes=e.properties?Lr(e.properties):{},e.id&&(r.attributes[i]=e.id);break;case"FeatureCollection":for(r=[],n=0;n<e.features.length;n++)r.push(t(e.features[n],i));break;case"GeometryCollection":for(r=[],n=0;n<e.geometries.length;n++)r.push(t(e.geometries[n],i))}return r},Sr='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>';function Tr(t,e){return Pr(t,e)}function Ar(t,e){return Mr(t,e)}function Dr(t){if("NaN"!==t.xmin&&"NaN"!==t.ymin&&"NaN"!==t.xmax&&"NaN"!==t.ymax){var e=(0,nr.latLng)(t.ymin,t.xmin),i=(0,nr.latLng)(t.ymax,t.xmax);return(0,nr.latLngBounds)(e,i)}return null}function Er(t){return{xmin:(t=(0,nr.latLngBounds)(t)).getSouthWest().lng,ymin:t.getSouthWest().lat,xmax:t.getNorthEast().lng,ymax:t.getNorthEast().lat,spatialReference:{wkid:4326}}}var Or=/^(OBJECTID|FID|OID|ID)$/i;function Ir(t){var e;if(t.objectIdFieldName)e=t.objectIdFieldName;else if(t.fields){for(var i=0;i<=t.fields.length-1;i++)if("esriFieldTypeOID"===t.fields[i].type){e=t.fields[i].name;break}if(!e)for(i=0;i<=t.fields.length-1;i++)if(t.fields[i].name.match(Or)){e=t.fields[i].name;break}}return e}function Br(t){for(var e in t.attributes)if(e.match(Or))return e}function Rr(t,e){var i,n=t.features||t.results,o=n&&n.length;i=e||Ir(t);var r={type:"FeatureCollection",features:[]};if(o)for(var a=n.length-1;a>=0;a--){var s=Ar(n[a],i||Br(n[a]));r.features.push(s)}return r}function zr(t){return"/"!==(t=nr.Util.trim(t))[t.length-1]&&(t+="/"),t}function Fr(t){if(-1!==t.url.indexOf("?")){t.requestParams=t.requestParams||{};var e=t.url.substring(t.url.indexOf("?")+1);t.url=t.url.split("?")[0],t.requestParams=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return t.url=zr(t.url.split("?")[0]),t}function jr(t){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(t)}function Nr(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":e="esriGeometryPolygon"}return e}function Ur(t){return t.getSize().x-lr.attributionWidthOffset+"px"}function Gr(t){if(t.attributionControl){if(t.attributionControl._esriAttributionLayerCount||(t.attributionControl._esriAttributionLayerCount=0),0===t.attributionControl._esriAttributionLayerCount){if(!t.attributionControl._esriAttributionAddedOnce){var e=document.createElement("style");e.type="text/css",e.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(e);var i=document.createElement("style");i.type="text/css",i.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+Ur(t)+";}",document.getElementsByTagName("head")[0].appendChild(i),t.on("resize",(function(e){t.attributionControl&&(t.attributionControl._container.style.maxWidth=Ur(e.target))})),t.attributionControl._esriAttributionAddedOnce=!0}t.attributionControl.setPrefix(Sr+' | Powered by <a href="https://www.esri.com">Esri</a>'),nr.DomUtil.addClass(t.attributionControl._container,"esri-truncated-attribution:hover"),nr.DomUtil.addClass(t.attributionControl._container,"esri-truncated-attribution")}t.attributionControl._esriAttributionLayerCount=t.attributionControl._esriAttributionLayerCount+1}}function Hr(t){t.attributionControl&&(t.attributionControl._esriAttributionLayerCount&&1===t.attributionControl._esriAttributionLayerCount&&(t.attributionControl.setPrefix(Sr),nr.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution:hover"),nr.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution")),t.attributionControl._esriAttributionLayerCount=t.attributionControl._esriAttributionLayerCount-1)}function Zr(t){var e={geometry:null,geometryType:null};return t instanceof nr.LatLngBounds?(e.geometry=Er(t),e.geometryType="esriGeometryEnvelope",e):(t.getLatLng&&(t=t.getLatLng()),t instanceof nr.LatLng&&(t={type:"Point",coordinates:[t.lng,t.lat]}),t instanceof nr.GeoJSON&&(t=t.getLayers()[0].feature.geometry,e.geometry=Tr(t),e.geometryType=Nr(t.type)),t.toGeoJSON&&(t=t.toGeoJSON()),"Feature"===t.type&&(t=t.geometry),"Point"===t.type||"LineString"===t.type||"Polygon"===t.type||"MultiPolygon"===t.type?(e.geometry=Tr(t),e.geometryType=Nr(t.type),e):void gr("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function Vr(t,e){sr.cors&&dr(t,{},nr.Util.bind((function(t,i){if(!t){e._esriAttributions=[];for(var n=0;n<i.contributors.length;n++)for(var o=i.contributors[n],r=0;r<o.coverageAreas.length;r++){var a=o.coverageAreas[r],s=(0,nr.latLng)(a.bbox[0],a.bbox[1]),l=(0,nr.latLng)(a.bbox[2],a.bbox[3]);e._esriAttributions.push({attribution:o.attribution,score:a.score,bounds:(0,nr.latLngBounds)(s,l),minZoom:a.zoomMin,maxZoom:a.zoomMax})}e._esriAttributions.sort((function(t,e){return e.score-t.score})),Wr({target:e})}}),this))}function Wr(t){var e=t.target,i=e._esriAttributions;if(e&&e.attributionControl){var n=e.attributionControl._container.querySelector(".esri-dynamic-attribution");if(n&&i){for(var o="",r=e.getBounds(),a=(0,nr.latLngBounds)(r.getSouthWest().wrap(),r.getNorthEast().wrap()),s=e.getZoom(),l=0;l<i.length;l++){var c=i[l],h=c.attribution;!o.match(h)&&c.bounds.intersects(a)&&s>=c.minZoom&&s<=c.maxZoom&&(o+=", "+h)}o=o.substr(2),n.innerHTML=o,n.style.maxWidth=Ur(e),e.fire("attributionupdated",{attribution:o})}}}var qr={warn:gr,cleanUrl:zr,getUrlParams:Fr,isArcgisOnline:jr,geojsonTypeToArcGIS:Nr,responseToFeatureCollection:Rr,geojsonToArcGIS:Tr,arcgisToGeoJSON:Ar,boundsToExtent:Er,extentToBounds:Dr,calcAttributionWidth:Ur,setEsriAttribution:Gr,_setGeometry:Zr,_getAttributionData:Vr,_updateMapAttribution:Wr,_findIdAttributeFromFeature:Br,_findIdAttributeFromResponse:Ir},$r=nr.Class.extend({options:{proxy:!1,useCors:rr},generateSetter:function(t,e){return nr.Util.bind((function(e){return this.params[t]=e,this}),e)},initialize:function(t){if(t.request&&t.options?(this._service=t,nr.Util.setOptions(this,t.options)):(nr.Util.setOptions(this,t),this.options.url=zr(t.url)),this.params=nr.Util.extend({},this.params||{}),this.setters)for(var e in this.setters){var i=this.setters[e];this[e]=this.generateSetter(i,this)}},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},apikey:function(t){return this.token(t)},format:function(t){return this.params.returnUnformattedValues=!t,this},request:function(t,e){return this.options.requestParams&&nr.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,e,i,n,o){var r=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?vr[t](r,i,n,o):vr.get.JSONP(r,i,n,o)}});var Yr=$r.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(t,e){return t=(0,nr.latLng)(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=e,this.params.inSR=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(t,e){return this._cleanParams(),this.options.isModern||jr(this.options.url)&&void 0===this.options.isModern?(this.params.f="geojson",this.request((function(i,n){this._trapSQLerrors(i),t.call(e,i,n,n)}),this)):this.request((function(i,n){this._trapSQLerrors(i),t.call(e,i,n&&Rr(n),n)}),this)},count:function(t,e){return this._cleanParams(),this.params.returnCountOnly=!0,this.request((function(e,i){t.call(this,e,i&&i.count,i)}),e)},ids:function(t,e){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request((function(e,i){t.call(this,e,i&&i.objectIds,i)}),e)},bounds:function(t,e){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request((function(i,n){n&&n.extent&&Dr(n.extent)?t.call(e,i,Dr(n.extent),n):(i={message:"Invalid Bounds"},t.call(e,i,null,n))}),e)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(t){var e=(0,nr.point)(t);return this.params.pixelSize=[e.x,e.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&gr("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(t){this.params.inSR=4326;var e=Zr(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});var Kr=function(t){return new Yr(t)},Jr=$r.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(t,e){return this.request((function(i,n){t.call(e,i,n&&Rr(n),n)}),e)}});var Xr=function(t){return new Jr(t)},Qr=$r.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}});var ta=Qr.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var e=Er(t.getBounds()),i=t.getSize();return this.params.imageDisplay=[i.x,i.y,96],this.params.mapExtent=[e.xmin,e.ymin,e.xmax,e.ymax],this},at:function(t){return 2===t.length&&(t=(0,nr.latLng)(t)),this._setGeometryParams(t),this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(t,e){return this.request((function(i,n){if(i)t.call(e,i,void 0,n);else{var o=Rr(n);n.results=n.results.reverse();for(var r=0;r<o.features.length;r++){o.features[r].layerId=n.results[r].layerId}t.call(e,void 0,o,n)}}))},_setGeometryParams:function(t){var e=Zr(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});var ea=function(t){return new ta(t)},ia=Qr.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(t){return t=(0,nr.latLng)(t),this.params.geometry=JSON.stringify({x:t.lng,y:t.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(t,e){return this.request((function(i,n){t.call(e,i,n&&this._responseToGeoJSON(n),n)}),this)},_responseToGeoJSON:function(t){var e=t.location,i=t.catalogItems,n=t.catalogItemVisibilities,o={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},crs:{type:"EPSG",properties:{code:e.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(o.pixel.properties.values=t.properties.Values),i&&i.features&&(o.catalogItems=Rr(i),n&&n.length===o.catalogItems.features.length))for(var r=n.length-1;r>=0;r--)o.catalogItems.features[r].properties.catalogItemVisibility=n[r];return o}});var na=function(t){return new ia(t)},oa=nr.Evented.extend({options:{proxy:!1,useCors:rr,timeout:0},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,nr.Util.setOptions(this,t),this.options.url=zr(this.options.url)},get:function(t,e,i,n){return this._request("get",t,e,i,n)},post:function(t,e,i,n){return this._request("post",t,e,i,n)},request:function(t,e,i,n){return this._request("request",t,e,i,n)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(t){this.options.timeout=t},_request:function(t,e,i,n,o){this.fire("requeststart",{url:this.options.url+e,params:i,method:t},!0);var r=this._createServiceCallback(t,e,i,n,o);if(this.options.token&&(i.token=this.options.token),this.options.requestParams&&nr.Util.extend(i,this.options.requestParams),!this._authenticating){var a=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?vr[t](a,i,r,o):vr.get.JSONP(a,i,r,o)}this._requestQueue.push([t,e,i,n,o])},_createServiceCallback:function(t,e,i,n,o){return nr.Util.bind((function(r,a){!r||499!==r.code&&498!==r.code||(this._authenticating=!0,this._requestQueue.push([t,e,i,n,o]),this.fire("authenticationrequired",{authenticate:nr.Util.bind(this.authenticate,this)},!0),r.authenticate=nr.Util.bind(this.authenticate,this)),n.call(o,r,a),r?this.fire("requesterror",{url:this.options.url+e,params:i,message:r.message,code:r.code,method:t},!0):this.fire("requestsuccess",{url:this.options.url+e,params:i,response:a,method:t},!0),this.fire("requestend",{url:this.options.url+e,params:i,method:t},!0)}),this)},_runQueue:function(){for(var t=this._requestQueue.length-1;t>=0;t--){var e=this._requestQueue[t];this[e.shift()].apply(this,e)}this._requestQueue=[]}});var ra=oa.extend({identify:function(){return ea(this)},find:function(){return Xr(this)},query:function(){return Kr(this)}});var aa=function(t){return new ra(t)},sa=oa.extend({query:function(){return Kr(this)},identify:function(){return na(this)}});var la=function(t){return new sa(t)},ca=oa.extend({options:{idAttribute:"OBJECTID"},query:function(){return Kr(this)},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(t,e,i){for(var n=t.features?t.features:[t],o=n.length-1;o>=0;o--)delete n[o].id;return t=Tr(t),t=n.length>1?t:[t],this.post("addFeatures",{features:t},(function(t,n){var o=n&&n.addResults?n.addResults.length>1?n.addResults:n.addResults[0]:void 0;e&&e.call(i,t||n.addResults[0].error,o)}),i)},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,e,i){var n=t.features?t.features:[t];return t=Tr(t,this.options.idAttribute),t=n.length>1?t:[t],this.post("updateFeatures",{features:t},(function(t,n){var o=n&&n.updateResults?n.updateResults.length>1?n.updateResults:n.updateResults[0]:void 0;e&&e.call(i,t||n.updateResults[0].error,o)}),i)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,e,i){return this.post("deleteFeatures",{objectIds:t},(function(t,n){var o=n&&n.deleteResults?n.deleteResults.length>1?n.deleteResults:n.deleteResults[0]:void 0;e&&e.call(i,t||n.deleteResults[0].error,o)}),i)}});var ha=function(t){return new ca(t)},ua="https:"!==window.location.protocol?"http:":"https:",pa=nr.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:ua+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:ua+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:ar?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:ar?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:ar?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:ar?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:ar?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:ar?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:ar?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:ua+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:ua+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:ua+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:ua+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(t,e){var i;if("object"==typeof t&&t.urlTemplate&&t.options)i=t;else{if("string"!=typeof t||!pa.TILES[t])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');i=pa.TILES[t]}var n=nr.Util.extend(i.options,e);nr.Util.setOptions(this,n),this.options.ignoreDeprecationWarning||console.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&-1===i.urlTemplate.indexOf("token=")&&(i.urlTemplate+="?token="+this.options.token),this.options.proxy&&(i.urlTemplate=this.options.proxy+"?"+i.urlTemplate),nr.TileLayer.prototype.initialize.call(this,i.urlTemplate,n)},onAdd:function(t){Gr(t),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&Vr((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,t),t.on("moveend",Wr),nr.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){Hr(t),t.off("moveend",Wr),nr.TileLayer.prototype.onRemove.call(this,t)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var t=this._map.createPane(this.options.pane);t.style.pointerEvents="none",t.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var t='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return t}});function da(t,e){return new pa(t,e)}var ma=nr.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(t){t=Fr(t=nr.Util.setOptions(this,t)),this.tileUrl=(t.proxy?t.proxy+"?":"")+t.url+"tile/{z}/{y}/{x}"+(t.requestParams&&Object.keys(t.requestParams).length>0?nr.Util.getParamString(t.requestParams):""),-1!==t.url.indexOf("{s}")&&t.subdomains&&(t.url=t.url.replace("{s}",t.subdomains[0])),this.service=aa(t),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(t.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),t.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),nr.TileLayer.prototype.initialize.call(this,this.tileUrl,t)},getTileUrl:function(t){var e=this._getZoomForUrl();return nr.Util.template(this.tileUrl,nr.Util.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:this._lodMap&&this._lodMap[e]?this._lodMap[e]:e},this.options))},createTile:function(t,e){var i=document.createElement("img");return nr.DomEvent.on(i,"load",nr.Util.bind(this._tileOnLoad,this,e,i)),nr.DomEvent.on(i,"error",nr.Util.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?i.src=this.getTileUrl(t):this.once("lodmap",(function(){i.src=this.getTileUrl(t)}),this),i},onAdd:function(t){Gr(t),this._lodMap||this.metadata((function(e,i){if(!e&&i.spatialReference){var n=i.spatialReference.latestWkid||i.spatialReference.wkid;if(!this.options.attribution&&t.attributionControl&&i.copyrightText&&(this.options.attribution=i.copyrightText,t.attributionControl.addAttribution(this.getAttribution())),t.options.crs!==nr.CRS.EPSG3857||102100!==n&&3857!==n)t.options.crs&&t.options.crs.code&&t.options.crs.code.indexOf(n)>-1||gr("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet https://developers.arcgis.com/esri-leaflet/samples/non-mercator-projection/");else{this._lodMap={};for(var o=i.tileInfo.lods,r=ma.MercatorZoomLevels,a=0;a<o.length;a++){var s=o[a];for(var l in r){var c=r[l];if(this._withinPercentage(s.resolution,c,this.options.zoomOffsetAllowance)){this._lodMap[l]=s.level;break}}}this.fire("lodmap")}}}),this),nr.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){Hr(t),nr.TileLayer.prototype.onRemove.call(this,t)},metadata:function(t,e){return this.service.metadata(t,e),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this.service.authenticate(t),this},_withinPercentage:function(t,e,i){return Math.abs(t/e-1)<i}});var fa=nr.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,nr.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===nr.CRS.EPSG3857?nr.ImageOverlay.prototype._reset.call(this):nr.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),ga=nr.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:rr,attribution:null,interactive:!1,alt:""},onAdd:function(t){Gr(t),this.options.zIndex&&(this.options.position=null),this._update=nr.Util.throttle(this._update,this.options.updateInterval,this),t.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?t.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata((function(e,i){!e&&!this.options.attribution&&t.attributionControl&&i.copyrightText&&(this.options.attribution=i.copyrightText,t.attributionControl.addAttribution(this.getAttribution()))}),this)},onRemove:function(t){Hr(t),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(t,e){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=(0,nr.popup)(e),this._popupFunction=t,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(t){return this.options.zIndex=t,this._currentImage&&this._currentImage.setZIndex(t),this},_setAutoZIndex:function(t){if(this._currentImage){for(var e,i=this._currentImage.getPane().children,n=-t(-1/0,1/0),o=0,r=i.length;o<r;o++)e=i[o].style.zIndex,i[o]!==this._currentImage._image&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this.service.metadata(t,e),this},authenticate:function(t){return this.service.authenticate(t),this},redraw:function(){this._update()},_renderImage:function(t,e,i){if(this._map){if(i&&(t="data:"+i+";base64,"+t),!t)return;var n=new fa(t,e,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),o=function(){this._map.removeLayer(n),this.fire("error"),n.off("load",r,this)},r=function(t){if(n.off("error",o,this),this._map){var i=t.target,r=this._currentImage;i._bounds.equals(e)&&i._bounds.equals(this._map.getBounds())?(this._currentImage=i,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),r&&this._map&&this._map.removeLayer(r),r&&r._map&&r._map.removeLayer(r)):this._map.removeLayer(i)}this.fire("load",{bounds:e})};n.once("error",o,this),n.once("load",r,this)}},_update:function(){if(this._map){var t=this._map.getZoom(),e=this._map.getBounds();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress))if(t>this.options.maxZoom||t<this.options.minZoom)this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var i=this._buildExportParams();nr.Util.extend(i,this.options.requestParams),i?(this._requestExport(i,e),this.fire("loading",{bounds:e})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(t,e,i,n){if(t=(0,nr.latLng)(t),this._shouldRenderPopup&&this._lastClick.equals(t)){var o=this._popupFunction(e,i,n);o&&this._popup.setLatLng(t).setContent(o).openOn(this._map)}},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},_calculateBbox:function(){var t=this._map.getPixelBounds(),e=this._map.unproject(t.getBottomLeft()),i=this._map.unproject(t.getTopRight()),n=this._map.options.crs.project(i),o=this._map.options.crs.project(e),r=(0,nr.bounds)(n,o);return[r.getBottomLeft().x,r.getBottomLeft().y,r.getTopRight().x,r.getTopRight().y].join(",")},_calculateImageSize:function(){var t=this._map.getPixelBounds(),e=this._map.getSize(),i=this._map.unproject(t.getBottomLeft()),n=this._map.unproject(t.getTopRight()),o=this._map.latLngToLayerPoint(n).y,r=this._map.latLngToLayerPoint(i).y;return(o>0||r<e.y)&&(e.y=r-o),e.x+","+e.y}});ga.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(t){t=Fr(t),this.service=la(t),this.service.addEventParent(this),nr.Util.setOptions(this,t)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(t){return nr.Util.isArray(t)?this.options.bandIds=t.join(","):this.options.bandIds=t.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(t,e){return nr.Util.isArray(t)?this.options.noData=t.join(","):this.options.noData=t.toString(),e&&(this.options.noDataInterpretation=e),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(t){var e=nr.Util.bind((function(e,i,n){e||setTimeout(nr.Util.bind((function(){this._renderPopup(t.latlng,e,i,n)}),this),300)}),this),i=this.identify().at(t.latlng);this.options.mosaicRule&&i.setMosaicRule(this.options.mosaicRule),i.run(e),this._shouldRenderPopup=!0,this._lastClick=t.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};return this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(e.pixelType=this.options.pixelType),this.options.interpolation&&(e.interpolation=this.options.interpolation),this.options.compressionQuality&&(e.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(e.bandIds=this.options.bandIds),(0===this.options.noData||this.options.noData)&&(e.noData=this.options.noData),this.options.noDataInterpretation&&(e.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(e.token=this.service.options.token),this.options.renderingRule&&(e.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(e.mosaicRule=JSON.stringify(this.options.mosaicRule)),e},_requestExport:function(t,e){if("json"===this.options.f)this.service.request("exportImage",t,(function(t,i){t||(this.options.token&&(i.href+="?token="+this.options.token),this.options.proxy&&(i.href=this.options.proxy+"?"+i.href),this._renderImage(i.href,e))}),this);else{t.f="image";var i=this.options.url+"exportImage"+nr.Util.getParamString(t);this.options.proxy&&(i=this.options.proxy+"?"+i),this._renderImage(i,e)}}});ga.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(t){t=Fr(t),this.service=aa(t),this.service.addEventParent(this),nr.Util.setOptions(this,t)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(t){var e,i=nr.Util.bind((function(e,i,n){e||setTimeout(nr.Util.bind((function(){this._renderPopup(t.latlng,e,i,n)}),this),300)}),this);if((e=this.options.popup?this.options.popup.on(this._map).at(t.latlng):this.identify().on(this._map).at(t.latlng)).params.maxAllowableOffset||e.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?e.layers("visible:"+this.options.layers.join(",")):e.layers("visible")),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!e.params.layerDefs)for(var n in this.options.layerDefs)Object.prototype.hasOwnProperty.call(this.options.layerDefs,n)&&e.layerDef(n,this.options.layerDefs[n]);e.run(i),this._shouldRenderPopup=!0,this._lastClick=t.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};if(this.options.dynamicLayers&&(e.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;e.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(e.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(e.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(e.token=this.service.options.token),this.options.proxy&&(e.proxy=this.options.proxy),this.options.disableCache&&(e._ts=Date.now()),e},_requestExport:function(t,e){if("json"===this.options.f)this.service.request("export",t,(function(t,i){t||(this.options.token&&i.href&&(i.href+="?token="+this.options.token),this.options.proxy&&i.href&&(i.href=this.options.proxy+"?"+i.href),i.href?this._renderImage(i.href,e):this._renderImage(i.imageData,e,i.contentType))}),this);else{t.f="image";var i=this.options.url+"export"+nr.Util.getParamString(t);this.options.proxy&&(i=this.options.proxy+"?"+i),this._renderImage(i,e)}}});var _a=nr.Layer.extend({options:{cellSize:512,updateWhenIdle:nr.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(t){nr.Util.setOptions(this,t)},onAdd:function(t){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(t){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=nr.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),t},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var t=this.options.cellSize;return t instanceof nr.Point?t:new nr.Point(t,t)},_pruneCells:function(){if(this._map){var t,e;for(t in this._cells)(e=this._cells[t]).retain=e.current;for(t in this._cells)if((e=this._cells[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._cells)this._cells[t].retain||this._removeCell(t)}},_removeAllCells:function(){for(var t in this._cells)this._removeCell(t)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),r=Math.floor(e/2),a=i-1,s=new nr.Point(+o,+r);s.z=+a;var l=this._cellCoordsToKey(s),c=this._cells[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>n&&this._retainParent(o,r,a,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new nr.Point(o,r);a.z=i+1;var s=this._cellCoordsToKey(a),l=this._cells[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(o,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);e||this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_setView:function(t,e,i,n){var o=Math.round(e);n||(this._cellZoom=o,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneCells(),this._noPrune=!!i)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._cellSize=this.getCellSize(),n=this._cellZoom,o=this._map.getPixelWorldBounds(this._cellZoom);o&&(this._globalCellRange=this._pxBoundsToCellRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(t){t&&(t.pinch||t.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._cellZoom),o=e.project(t,this._cellZoom).floor(),r=e.getSize().divideBy(2*n);return new nr.Bounds(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var i=Math.round(e.getZoom());void 0===t&&(t=e.getCenter());var n=this._getCelldPixelBounds(t),o=this._pxBoundsToCellRange(n),r=o.getCenter(),a=[],s=this.options.keepBuffer,l=new nr.Bounds(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var c in this._cells){var h=this._cells[c].coords;h.z===this._cellZoom&&l.contains(new nr.Point(h.x,h.y))||(this._cells[c].current=!1)}if(Math.abs(i-this._cellZoom)>1)this._setView(t,i);else{for(var u=o.min.y;u<=o.max.y;u++)for(var p=o.min.x;p<=o.max.x;p++){var d=new nr.Point(p,u);if(d.z=this._cellZoom,this._isValidCell(d)){var m=this._cells[this._cellCoordsToKey(d)];m?m.current=!0:a.push(d)}}if(a.sort((function(t,e){return t.distanceTo(r)-e.distanceTo(r)})),0!==a.length)for(this._loading||(this._loading=!0),p=0;p<a.length;p++){var f=this._cellCoordsToKey(a[p]),g=this._keyToCellCoords(f);this._activeCells[g]?this._reuseCell(a[p]):this._createCell(a[p])}}}},_isValidCell:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalCellRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._cellCoordsToBounds(t);return(0,nr.toLatLngBounds)(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._cellCoordsToBounds(this._keyToCellCoords(t))},_cellCoordsToNwSe:function(t){var e=this._map,i=this.getCellSize(),n=t.scaleBy(i),o=n.add(i);return[e.unproject(n,t.z),e.unproject(o,t.z)]},_cellCoordsToBounds:function(t){var e=this._cellCoordsToNwSe(t),i=new nr.LatLngBounds(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_cellCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToCellCoords:function(t){var e=t.split(":"),i=new nr.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeCell:function(t){var e=this._cells[t];if(e){var i=this._keyToCellCoords(t),n=this._wrapCoords(i),o=this._cellCoordsToBounds(this._wrapCoords(i));e.current=!1,delete this._cells[t],this._activeCells[t]=e,this.cellLeave(o,n,t),this.fire("cellleave",{key:t,coords:n,bounds:o})}},_reuseCell:function(t){var e=this._cellCoordsToKey(t);this._cells[e]=this._activeCells[e],this._cells[e].current=!0;var i=this._wrapCoords(t),n=this._cellCoordsToBounds(this._wrapCoords(t));this.cellEnter(n,i,e),this.fire("cellenter",{key:e,coords:i,bounds:n})},_createCell:function(t){var e=this._cellCoordsToKey(t),i=this._wrapCoords(t),n=this._cellCoordsToBounds(this._wrapCoords(t));this.createCell(n,i,e),this.fire("cellcreate",{key:e,coords:i,bounds:n}),this._cells[e]={coords:t,current:!0},nr.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(t,e,i){var n=this._cellCoordsToKey(t);(i=this._cells[n])&&(i.loaded=+new Date,i.active=!0)},_getCellPos:function(t){return t.scaleBy(this.getCellSize())},_wrapCoords:function(t){var e=new nr.Point(this._wrapX?nr.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?nr.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToCellRange:function(t){var e=this.getCellSize();return new nr.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))}});function va(t){this.values=[].concat(t||[])}va.prototype.query=function(t){var e=this.getIndex(t);return this.values[e]},va.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e,i,n=0,o=this.values.length-1;n<=o;)if(e=(n+o)/2|0,+(i=this.values[Math.round(e)]).value<+t)n=e+1;else{if(!(+i.value>+t))return e;o=e-1}return Math.abs(~o)},va.prototype.between=function(t,e){var i=this.getIndex(t),n=this.getIndex(e);if(0===i&&0===n)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[n+1]&&this.values[n+1].value===e;)n++;return this.values[n]&&this.values[n].value===e&&this.values[n+1]&&n++,this.values.slice(i,n)},va.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this},va.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this},va.prototype.sort=function(){return this.values.sort((function(t,e){return+e.value-+t.value})).reverse(),this.dirty=!1,this};var ya=va,ba=_a.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(t){if(_a.prototype.initialize.call(this,t),t=Fr(t),t=nr.Util.setOptions(this,t),this.service=ha(t),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var e=!1,i=0;i<this.options.fields.length;i++)this.options.fields[i].match(/^(OBJECTID|FID|OID|ID)$/i)&&(e=!0);!1===e&&gr("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new ya,this._endTimeIndex=new ya):this.options.timeField&&(this._timeIndex=new ya),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(t){return Gr(t),this.service.metadata((function(e,i){if(!e){var n=i.supportedQueryFormats,o=!1;(!1===this.service.options.isModern||this.options.fetchAllFeatures)&&(o=!0),!o&&n&&-1!==n.indexOf("geoJSON")&&(this.service.options.isModern=!0),i.objectIdField&&(this.service.options.idAttribute=i.objectIdField),!this.options.attribution&&t.attributionControl&&i.copyrightText&&(this.options.attribution=i.copyrightText,t.attributionControl.addAttribution(this.getAttribution()))}}),this),t.on("zoomend",this._handleZoomChange,this),_a.prototype.onAdd.call(this,t)},onRemove:function(t){return Hr(t),t.off("zoomend",this._handleZoomChange,this),_a.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._visibleZoom()&&this._requestFeatures(t,e)},_requestFeatures:function(t,e,i,n){this._activeRequests++,n=n||0;var o=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:t},!0),this._buildQuery(t,n).run((function(r,a,s){s&&s.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===o&&(!r&&a&&a.features.length&&nr.Util.requestAnimFrame(nr.Util.bind((function(){this._addFeatures(a.features,e),this._postProcessFeatures(t)}),this)),r||!a||a.features.length||this._postProcessFeatures(t),r&&this._postProcessFeatures(t),i&&i.call(this,r,a),s&&(s.exceededTransferLimit||s.properties&&s.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(t,e,i,n+a.features.length))}),this)},_postProcessFeatures:function(t){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){if(e){var i=this._cacheKey(e);this._cache[i]=this._cache[i]||[]}for(var n=t.length-1;n>=0;n--){var o=t[n].id;-1===this._currentSnapshot.indexOf(o)&&this._currentSnapshot.push(o),void 0!==i&&-1===this._cache[i].indexOf(o)&&this._cache[i].push(o)}this.options.timeField&&this._buildTimeIndexes(t),this.createLayers(t)},_buildQuery:function(t,e){var i=this.service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(e))&&(i=i.offset(e)),i.params.resultType="tile",this.options.requestParams&&nr.Util.extend(i.params,this.options.requestParams),this.options.simplifyFactor&&i.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&i.between(this.options.from,this.options.to),i},setWhere:function(t,e,i){this.options.where=t&&t.length?t:"1=1";for(var n=[],o=[],r=0,a=null,s=nr.Util.bind((function(s,l){if(s&&(a=s),l)for(var c=l.features.length-1;c>=0;c--)o.push(l.features[c].id);--r<=0&&this._visibleZoom()&&t===this.options.where&&(this._currentSnapshot=o,nr.Util.requestAnimFrame(nr.Util.bind((function(){this.removeLayers(n),this.addLayers(o),e&&e.call(i,a)}),this)))}),this),l=this._currentSnapshot.length-1;l>=0;l--)n.push(this._currentSnapshot[l]);for(var c in this._cache={},this._cells){r++;var h=this._keyToCellCoords(c),u=this._cellCoordsToBounds(h);this._requestFeatures(u,h,s)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e,i,n){var o=this.options.from,r=this.options.to,a=0,s=null,l=nr.Util.bind((function(l){l&&(s=l),this._filterExistingFeatures(o,r,t,e),a--,i&&a<=0&&i.call(n,s)}),this);if(this.options.from=t,this.options.to=e,this._filterExistingFeatures(o,r,t,e),"server"===this.options.timeFilterMode)for(var c in this._cells){a++;var h=this._keyToCellCoords(c),u=this._cellCoordsToBounds(h);this._requestFeatures(u,h,l)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(t,e,i,n){var o=t&&e?this._getFeaturesInTimeRange(t,e):this._currentSnapshot,r=this._getFeaturesInTimeRange(i,n);if(r.indexOf)for(var a=0;a<r.length;a++){var s=o.indexOf(r[a]);s>=0&&o.splice(s,1)}nr.Util.requestAnimFrame(nr.Util.bind((function(){this.removeLayers(o),this.addLayers(r)}),this))},_getFeaturesInTimeRange:function(t,e){var i,n=[];if(this.options.timeField.start&&this.options.timeField.end){var o=this._startTimeIndex.between(t,e),r=this._endTimeIndex.between(t,e);i=o.concat(r)}else{if(!this._timeIndex)return gr("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];i=this._timeIndex.between(t,e)}for(var a=i.length-1;a>=0;a--)n.push(i[a].id);return n},_buildTimeIndexes:function(t){var e,i;if(this.options.timeField.start&&this.options.timeField.end){var n=[],o=[];for(e=t.length-1;e>=0;e--)i=t[e],n.push({id:i.id,value:new Date(i.properties[this.options.timeField.start])}),o.push({id:i.id,value:new Date(i.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(n),this._endTimeIndex.bulkAdd(o)}else{var r=[];for(e=t.length-1;e>=0;e--)i=t[e],r.push({id:i.id,value:new Date(i.properties[this.options.timeField])});this._timeIndex.bulkAdd(r)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),i=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var n=+t.properties[this.options.timeField];return n>=e&&n<=i}if(this.options.timeField.start&&this.options.timeField.end){var o=+t.properties[this.options.timeField.start],r=+t.properties[this.options.timeField.end];return o>=e&&o<=i||r>=e&&r<=i||o<=e&&r>=i}},_visibleZoom:function(){if(!this._map)return!1;var t=this._map.getZoom();return!(t>this.options.maxZoom||t<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var t in this._cells){var e=this._cells[t].coords,i=this._cacheKey(e);this._cache[i]&&this.addLayers(this._cache[i])}else this.removeLayers(this._currentSnapshot),this._currentSnapshot=[]},authenticate:function(t){return this.service.authenticate(t),this},metadata:function(t,e){return this.service.metadata(t,e),this},query:function(){return this.service.query()},_getMetadata:function(t){this._metadata?t(undefined,this._metadata):this.metadata(nr.Util.bind((function(e,i){this._metadata=i,t(e,this._metadata)}),this))},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(t,e,i){this._getMetadata(nr.Util.bind((function(n,o){if(n)e&&e.call(this,n,null);else{var r=t.features?t.features:[t];this.service.addFeatures(t,nr.Util.bind((function(t,n){if(!t){for(var a=r.length-1;a>=0;a--)r[a].properties[o.objectIdField]=r.length>1?n[a].objectId:n.objectId,r[a].id=r.length>1?n[a].objectId:n.objectId;this._addFeatures(r)}e&&e.call(i,t,n)}),this))}}),this))},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,e,i){var n=t.features?t.features:[t];this.service.updateFeatures(t,(function(t,o){if(!t){for(var r=n.length-1;r>=0;r--)this.removeLayers([n[r].id],!0);this._addFeatures(n)}e&&e.call(i,t,o)}),this)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,e,i){return this.service.deleteFeatures(t,(function(t,n){var o=n.length?n:[n];if(!t&&o.length>0)for(var r=o.length-1;r>=0;r--)this.removeLayers([o[r].objectId],!0);e&&e.call(i,t,n)}),this)}});ba.extend({options:{cacheLayers:!0},initialize:function(t){t.apikey&&(t.token=t.apikey),ba.prototype.initialize.call(this,t),this._originalStyle=this.options.style,this._layers={}},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e]),this.fire("removefeature",{feature:this._layers[e].feature,permanent:!1},!0);return ba.prototype.onRemove.call(this,t)},createNewLayer:function(t){var e=nr.GeoJSON.geometryToLayer(t,this.options);return e&&(e.defaultOptions=e.options),e},_updateLayer:function(t,e){var i=[],n=this.options.coordsToLatLng||nr.GeoJSON.coordsToLatLng;switch(e.properties&&(t.feature.properties=e.properties),e.geometry.type){case"Point":i=nr.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(i);break;case"LineString":i=nr.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0,n),t.setLatLngs(i);break;case"MultiLineString":case"Polygon":i=nr.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1,n),t.setLatLngs(i);break;case"MultiPolygon":i=nr.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2,n),t.setLatLngs(i)}this.redraw(t.feature.id)},createLayers:function(t){for(var e=t.length-1;e>=0;e--){var i,n=t[e],o=this._layers[n.id];!this._visibleZoom()||!o||this._map.hasLayer(o)||this.options.timeField&&!this._featureWithinTimeRange(n)||(this._map.addLayer(o),this.fire("addfeature",{feature:o.feature},!0)),o&&(o.setLatLngs||o.setLatLng)&&this._updateLayer(o,n),o||((i=this.createNewLayer(n))?(i.feature=n,i.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(i.feature,i),this._layers[i.feature.id]=i,this.setFeatureStyle(i.feature.id,this.options.style),this.fire("createfeature",{feature:i.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(n))&&this._map.addLayer(i)):gr("invalid GeoJSON encountered"))}},addLayers:function(t){for(var e=t.length-1;e>=0;e--){var i=this._layers[t[e]];!i||this.options.timeField&&!this._featureWithinTimeRange(i.feature)||(this._map.addLayer(i),this.fire("addfeature",{feature:i.feature},!0))}},removeLayers:function(t,e){for(var i=t.length-1;i>=0;i--){var n=t[i],o=this._layers[n];o&&(this.fire("removefeature",{feature:o.feature,permanent:e},!0),this._map.removeLayer(o)),o&&e&&delete this._layers[n]}},cellEnter:function(t,e){this._visibleZoom()&&!this._zooming&&this._map&&nr.Util.requestAnimFrame(nr.Util.bind((function(){var t=this._cacheKey(e),i=this._cellCoordsToKey(e),n=this._cache[t];this._activeCells[i]&&n&&this.addLayers(n)}),this))},cellLeave:function(t,e){this._zooming||nr.Util.requestAnimFrame(nr.Util.bind((function(){if(this._map){var t=this._cacheKey(e),i=this._cellCoordsToKey(e),n=this._cache[t],o=this._map.getBounds();if(!this._activeCells[i]&&n){for(var r=!0,a=0;a<n.length;a++){var s=this._layers[n[a]];s&&s.getBounds&&o.intersects(s.getBounds())&&(r=!1)}r&&this.removeLayers(n,!this.options.cacheLayers),!this.options.cacheLayers&&r&&(delete this._cache[t],delete this._cells[i],delete this._activeCells[i])}}}),this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature((function(t){this.resetFeatureStyle(t.feature.id)}),this),this},setStyle:function(t){return this.options.style=t,this.eachFeature((function(e){this.setFeatureStyle(e.feature.id,t)}),this),this},resetFeatureStyle:function(t){var e=this._layers[t],i=this._originalStyle||nr.Path.prototype.options;return e&&(nr.Util.extend(e.options,e.defaultOptions),this.setFeatureStyle(t,i)),this},setFeatureStyle:function(t,e){var i=this._layers[t];return"function"==typeof e&&(e=e(i.feature)),i.setStyle&&i.setStyle(e),this},eachActiveFeature:function(t,e){if(this._map){var i=this._map.getBounds();for(var n in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[n].feature.id)&&("function"==typeof this._layers[n].getLatLng&&i.contains(this._layers[n].getLatLng())||"function"==typeof this._layers[n].getBounds&&i.intersects(this._layers[n].getBounds()))&&t.call(e,this._layers[n])}return this},eachFeature:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature((function(t){t.bringToBack&&t.bringToBack()}))},bringToFront:function(){this.eachFeature((function(t){t.bringToFront&&t.bringToFront()}))},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(t){var e=this._layers[t],i=e.feature;if(e&&e.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var n=this.options.pointToLayer(i,(0,nr.latLng)(i.geometry.coordinates[1],i.geometry.coordinates[0])).options.icon;e.setIcon(n)}if(e&&e.setStyle&&this.options.pointToLayer){var o=this.options.pointToLayer(i,(0,nr.latLng)(i.geometry.coordinates[1],i.geometry.coordinates[0])).options;this.setFeatureStyle(i.id,o)}e&&e.setStyle&&this.options.style&&this.resetFeatureStyle(i.id)},openPopup(t){return this._popup&&this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map),this},openTooltip(t){return this._tooltip&&this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this)),this}});i(732),i(627),i(977);or().TileLayer.HERE=or().TileLayer.extend({options:{subdomains:"1234",minZoom:2,maxZoom:18,scheme:"normal.day",resource:"maptile",mapId:"newest",format:"png8",apiKey:"",appId:"",appCode:""},initialize:function(t){var e=(t=or().setOptions(this,t)).scheme.split(".")[0];if(t.tileResolution=256,or().Browser.retina&&(t.tileResolution=512),t.apiKey)var i=".maps.ls.hereapi.com",n="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?apiKey={apiKey}",o="/maptile/2.1/copyright/{mapId}?apiKey={apiKey}";else i=".maps.api.here.com",n="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?app_id={appId}&app_code={appCode}",o="/maptile/2.1/copyright/{mapId}?app_id={appId}&app_code={appCode}";var r="base";"satellite"!=e&&"terrain"!=e&&"hybrid"!=e||(r="aerial"),-1!==t.scheme.indexOf(".traffic.")&&(r="traffic");var a="https://{s}."+r+i+n;this._attributionUrl=or().Util.template("https://1."+r+i+o,this.options),or().TileLayer.prototype.initialize.call(this,a,t),this._attributionText=""},onAdd:function(t){or().TileLayer.prototype.onAdd.call(this,t),this._attributionText="",this._attributionBBoxes||this._fetchAttributionBBoxes()},onRemove:function(t){or().TileLayer.prototype.onRemove.call(this,t),void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText),this._map.off("moveend zoomend resetview",this._findCopyrightBBox,this)},_fetchAttributionBBoxes:function(){var t=new XMLHttpRequest;t.onreadystatechange=or().bind((function(){4==t.readyState&&200==t.status&&this._parseAttributionBBoxes(JSON.parse(t.responseText))}),this),t.open("GET",this._attributionUrl,!0),t.send()},_parseAttributionBBoxes:function(t){if(this._map){for(var e=t[this.options.scheme.split(".")[0]]||t.normal,i=0;i<e.length;i++)if(e[i].boxes)for(var n=0;n<e[i].boxes.length;n++){var o=e[i].boxes[n];e[i].boxes[n]=or().latLngBounds([[o[0],o[1]],[o[2],o[3]]])}this._map.on("moveend zoomend resetview",this._findCopyrightBBox,this),this._attributionProviders=e,this._findCopyrightBBox()}},_findCopyrightBBox:function(){if(this._map){for(var t=this._attributionProviders,e=[],i=this._map.getZoom(),n=this._map.getBounds(),o=0;o<t.length;o++){if(t[o].minLevel<i&&t[o].maxLevel>i&&!t[o].boxes){e.push(t[o]);break}for(var r=0;r<t[o].boxes.length;r++){var a=t[o].boxes[r];if(n.overlaps(a)){e.push(t[o]);break}}}var s=['<a href="https://legal.here.com/terms/serviceterms/gb/">HERE maps</a>'];for(o=0;o<e.length;o++){var l=e[o];s.push('<abbr title="'+l.alt+'">'+l.label+"</abbr>")}var c="© "+s.join(", ")+". ";c!==this._attributionText&&void 0!==this._map.attributionControl&&(this._map.attributionControl.removeAttribution(this._attributionText),this._map.attributionControl.addAttribution(this._attributionText=c))}}}),or().tileLayer.here=function(t){return new(or().TileLayer.HERE)(t)},or().TileLayer.TomTom=or().TileLayer.extend({options:{apiKey:"",style:"main",subdomains:"abcd",minNativeZoom:0,maxNativeZoom:22},initialize:function(t){var e="https://{s}.api.tomtom.com/map/1/tile/basic/"+(t=or().setOptions(this,t)).style+"/{z}/{x}/{y}.png?key="+t.apiKey;or().TileLayer.prototype.initialize.call(this,e,t),this._copyright=or().DomUtil.create("div","tomtom-copyright"),this._copyrightClose=or().DomUtil.create("button","tomtom-copyright-close",this._copyright),this._copyrightContent=or().DomUtil.create("div","tomtom-copyright-content",this._copyright),or().DomEvent.on(this._copyrightClose,"click",(function(t){t.preventDefault(),t.stopPropagation(),this._hideCopyright()}),this),this._attributionText='<a class="tomtom-attribution" href="#">&copy; 1992 - '+(new Date).getFullYear()+" TomTom.</a>"},onAdd:function(t){or().TileLayer.prototype.onAdd.call(this,t),this._addAttribution(),this._map.on("click",this._hideCopyright,this)},onRemove:function(t){or().TileLayer.prototype.onRemove.call(this,t),this._hideCopyright(),this._removeAttribution(),this._map.off("click",this._hideCopyright,this)},_addAttribution:function(){if(void 0!==this._map.attributionControl){this._map.attributionControl.addAttribution(this._attributionText);var t=this._map.attributionControl.getContainer().querySelector(".tomtom-attribution");null!==t&&or().DomEvent.on(t,"click",(function(t){t.preventDefault(),t.stopPropagation(),this._showCopyright()}),this)}},_removeAttribution:function(){void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText)},_showCopyright:function(){var t=this._map.getContainer();null===t.querySelector(".tomtom-copyright")&&t.appendChild(this._copyright);var e,i,n,o,r=this._map.getBounds(),a=r.getNorthEast().wrap(),s=r.getSouthWest().wrap();s.lng<a.lng?(e=s.lng,i=a.lng):(e=a.lng,i=s.lng),s.lat<a.lat?(n=s.lat,o=a.lat):(n=a.lat,o=s.lat);var l="https://api.tomtom.com/map/1/copyrights/"+e+"/"+n+"/"+i+"/"+o+".json?key="+this.options.apiKey,c=new XMLHttpRequest;c.onreadystatechange=or().bind((function(){if(c.readyState===XMLHttpRequest.DONE&&200===c.status){for(var t=JSON.parse(c.responseText),e="<h4>General Copyrights:</h4>",i=0;i<t.generalCopyrights.length;i++)e+="<p>"+t.generalCopyrights[i]+"</p>";for(i=0;i<t.regions.length;i++){var n=t.regions[i];e+="<h4>"+n.country.label+":</h4>";for(var o=0;o<n.copyrights.length;o++)e+="<p>"+n.copyrights[o]+"</p>"}this._copyrightContent.innerHTML=e}}),this),c.open("GET",l,!0),c.send()},_hideCopyright:function(){this._copyright.remove()}}),or().tileLayer.tomTom=function(t,e){return new(or().TileLayer.TomTom)(t,e)};i(810),i(830),i(292),i(244),i(687);function xa(t){return xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xa(t)}function ka(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}function La(t){return 4!==(t=(t=t.replace(/[^0-9.,-]/g,"")).split(",")).length?null:(t.map(parseFloat),[[t[0],t[1]],[t[2],t[3]]])}function wa(t,e,i,n){return t.sort((function(t,o){var r,a;return"desc"===i?(r=o[e],a=t[e]):(r=t[e],a=o[e]),n?r-a:r.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"})})),t}function Ma(t,e){var i,n,o,r,a,s;return n=(i=Math.floor(t))%1e3,o=(i=Math.floor(i/1e3))%60,r=(i=Math.floor(i/60))%60,a=(i=Math.floor(i/60))%24,s=i=Math.floor(i/24),e?(n="",o+='"'):(n+='"',o+="."),t>6e4?r+="'":r="",t>36e5?a+=":":a="",t>864e5?s+=".":s="",s+a+r+o+n}function Ca(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}function Pa(t,e,i){if(isNaN(t))return"N/A";var n,o,r,a,s;switch(e?(n=1.609344,o="km",r="mi"):(n=.3048,o="m",r="ft"),"imperial"===i||"imperial-metric"===i?(a=t*n,s=t):(a=t,s=t/n),a=Ca(a,2)+" "+o,s=Ca(s,2)+" "+r,i){case"imperial":return s;case"metric-imperial":return a+" ("+s+")";case"imperial-metric":return s+" ("+a+")";default:return a}}function Sa(t){try{var e=JSON.parse(t);if(e&&"object"===xa(e))return e}catch(t){return t}return!1}function Ta(t){return t.replace(/G(?!\\)/g,"H").replace(/h(?!\\)/g,"G").replace(/g(?!\\)/g,"h").replace(/S(?!\\)/g,"J").replace(/s(?!\\)/g,"S").replace(/a(?!\\)/g,"K").replace(/A(?!\\)/g,"K")}function Aa(t){for(var e={d:"dd",D:"EEE",j:"d",l:"EEEE",N:"i",S:"o",w:"e",z:"D",W:"I",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"R",Y:"uuuu",y:"yy",a:"aaa",A:"aa",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSSSSS",v:"SSS",e:"",I:"",O:"xx",P:"xxx",p:"XXX",T:"",Z:"",c:"yyyy-MM-dd'T'HH:mm:ssxxx",r:"EEE, dd MMM yyyy HH:mm:ss xx",U:"t"},i="",n=0;n<t.length;n++){var o=t[n],r=0!==n&&t[n-1];"\\"===o&&"\\"!==r||(/[a-zA-Z]/.test(o)?i+="\\"===r||void 0===e[o]?"'"+o+"'":e[o]:i+=o)}return i}function Da(t){return new Promise((function(e,i){var n=new XMLHttpRequest;if(n.open(t.type,t.url,!0),n.onload=function(){200===n.status?e(n.responseText):i(new Error("XHR request failed with error "+n.status+" ("+n.statusText+")"))},n.onerror=function(){i(new Error("XHR request failed with an unknown error"))},t.beforeSend&&t.beforeSend(n),t.data){var o=new FormData;Object.keys(t.data).forEach((function(e){o.append(e,t.data[e])})),n.send(o)}else n.send(null)}))}or().Control.ResetView=or().Control.extend({options:{position:"topleft",onDemand:!1,coordinates:null,zoom:null,title:""},onAdd:function(t){var e=or().DomUtil.create("div","leaflet-control-reset-view leaflet-bar"),i=this.options;return i.onDemand&&(e.style.display="none",t.on("movestart",(function(){e.style.display="block"}))),null===i.coordinates&&(i.coordinates=t.getCenter()),null===i.zoom&&(i.zoom=t.getZoom()),this._createButton("",i.title,"leaflet-control-reset-view-button leaflet-bar-part",e,this._resetView),e},_createButton:function(t,e,i,n,o){var r=or().DomUtil.create("a",i,n);r.innerHTML=t,r.href="#",r.title=e,or().DomEvent.disableClickPropagation(r),or().DomEvent.on(r,"click",or().DomEvent.stop),or().DomEvent.on(r,"click",o,this),or().DomEvent.on(r,"click",this._refocusOnMap,this)},_resetView:function(){this._map.stop(),this.options.onDemand&&this._map.once("moveend",(function(){this._container.style.display="none"}),this),this._map.setView(this.options.coordinates,this.options.zoom,{animate:!0})}}),or().control.resetView=function(t){return new(or().Control.ResetView)(t)},or().Control.Filters=or().Control.extend({options:{mmp:null,collapsed:!0,position:"topright",buttons:!0,allText:"All",noneText:"None"},initialize:function(t){or().Util.setOptions(this,t)},onAdd:function(t){this._map=t;var e=this.options.mmp,i=this.options.collapsed,n="mmp-control-filters",o=this._container=or().DomUtil.create("div",n);o.setAttribute("aria-haspopup",!0),or().DomEvent.disableClickPropagation(o),or().DomEvent.disableScrollPropagation(o),i&&(this._map.on("click",this.collapse,this),or().Browser.android||or().DomEvent.on(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=or().DomUtil.create("a",n+"-toggle",o);r.href="#",r.title="Filters",or().Browser.touch?(or().DomEvent.on(r,"click",or().DomEvent.stop),or().DomEvent.on(r,"click",this.expand,this)):or().DomEvent.on(r,"focus",this.expand,this);var a=this._form=or().DomUtil.create("form",n+"-list",o);if(this.options.buttons){var s=or().DomUtil.create("div","mmp-control-filters-buttons",a),l=or().DomUtil.create("a",null,s);l.innerHTML=this.options.allText,l.href="#",l.title=this.options.allText,or().DomEvent.disableClickPropagation(l),or().DomEvent.on(l,"click",or().DomEvent.stop),or().DomEvent.on(l,"click",(function(){this._batchSelect(!0)}),this);var c=or().DomUtil.create("a",null,s);c.innerHTML=this.options.noneText,c.href="#",c.title=this.options.noneText,or().DomEvent.disableClickPropagation(c),or().DomEvent.on(c,"click",or().DomEvent.stop),or().DomEvent.on(c,"click",(function(){this._batchSelect(!1)}),this)}var h=[];Object.keys(e.settings.filtersDetails).forEach((function(t){var i=e.settings.filtersDetails[t];if(void 0!==e.groups[t]){var n=0;Object.keys(e.markers).forEach((function(i){-1!==e.markers[i].feature.properties.maps.indexOf(t)&&n++})),h.push({index:i.index,id:t,icon:i.icon,name:i.name,count:n})}})),h="id"===e.settings.filtersOrderBy?wa(h,"id",e.settings.filtersSortOrder,!0):"name"===e.settings.filtersOrderBy?wa(h,"name",e.settings.filtersSortOrder,!1):"count"===e.settings.filtersOrderBy?wa(h,"count",e.settings.filtersSortOrder,!0):wa(h,"index",e.settings.filtersSortOrder,!0);for(var u=0;u<h.length;u++){var p=or().DomUtil.create("label",null,a),d=or().DomUtil.create("input",n+"-selector",p);d.type="checkbox",d.value=h[u].id,void 0!==e.groups[h[u].id]&&e.groups[h[u].id].active&&(d.checked=!0);var m=or().DomUtil.create("span",null,p),f="";if(e.settings.filtersIcon)f+='<img class="mmp-filter-icon" src="'+(h[u].icon?mmpVars.iconsUrl+h[u].icon:mmpVars.pluginUrl+"images/leaflet/marker.png")+'" />';e.settings.filtersName&&(f+=h[u].name),e.settings.filtersCount&&(f+=" ["+h[u].count+"]"),m.innerHTML=f;var g=this;or().DomEvent.on(d,"click",(function(){void 0!==e.groups[this.value]&&(e.groups[this.value].active=this.checked),g._update(),t.fire("filterclick")}),d)}return i||this.expand(),o},expand:function(){or().DomUtil.addClass(this._container,"mmp-control-filters-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(or().DomUtil.addClass(this._form,"mmp-control-filters-scrollbar"),this._form.style.height=t+"px"):or().DomUtil.removeClass(this._form,"mmp-control-filters-scrollbar"),this},collapse:function(){return or().DomUtil.removeClass(this._container,"mmp-control-filters-expanded"),this},_batchSelect:function(t){for(var e=this.options.mmp,i=this._container.getElementsByClassName("mmp-control-filters-selector"),n=i.length-1;n>=0;n--)i[n].checked=t,void 0!==e.groups[i[n].value]&&(e.groups[i[n].value].active=t);this._update(),this._map.fire("filterclick")},_update:function(){var t=this.options.mmp;if("map"===t.type&&t.settings.list)t.getList();else{var e=t.getActiveMarkers();t.drawMarkers(e)}t.drawGeoJson()}}),or().control.filters=function(t){return new(or().Control.Filters)(t)},or().Control.Gpx=or().Control.extend({options:{mmp:null,collapsed:!0,position:"topleft"},initialize:function(t){or().Util.setOptions(this,t)},onAdd:function(t){this._map=t;var e=this.options.mmp,i=this.options.collapsed,n="mmp-control-tracks",o=this._container=or().DomUtil.create("div",n);o.setAttribute("aria-haspopup",!0),or().DomEvent.disableClickPropagation(o),or().DomEvent.disableScrollPropagation(o),i&&(this._map.on("click",this.collapse,this),or().Browser.android||or().DomEvent.on(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=or().DomUtil.create("a",n+"-toggle",o);r.href="#",r.title="Tracks",or().Browser.touch?(or().DomEvent.on(r,"click",or().DomEvent.stop),or().DomEvent.on(r,"click",this.expand,this)):or().DomEvent.on(r,"focus",this.expand,this);var a,s=this._form=or().DomUtil.create("form",n+"-list",o);for(a=0;a<e.gpx.tracks.length;a++){var l=or().DomUtil.create("label",null,s),c=or().DomUtil.create("input",n+"-selector",l);c.type="radio",c.name="mmp-gpx-tracks",c.value=a,0===a&&(c.checked=!0),or().DomUtil.create("span",null,l).innerHTML=e.gpx.tracks[a].name?e.gpx.tracks[a].name:"Unnamed Track",or().DomEvent.on(c,"click",(function(){var i=parseInt(this.value);t._activeTrack=i,t.fitBounds(e.gpxTracks[i].getBounds(),{padding:[10,10]}),e.updateElevationChart(!0)}),c)}return i||this.expand(),o},expand:function(){or().DomUtil.addClass(this._container,"mmp-control-tracks-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(or().DomUtil.addClass(this._form,"mmp-control-tracks-scrollbar"),this._form.style.height=t+"px"):or().DomUtil.removeClass(this._form,"mmp-control-tracks-scrollbar"),this},collapse:function(){return or().DomUtil.removeClass(this._container,"mmp-control-tracks-expanded"),this}}),or().control.gpx=function(t){return new(or().Control.Gpx)(t)};i(728);var Ea=i(957),Oa=i.n(Ea);var Ia=function(t){var e=this;this.selector=t.selector||"#address",this.beforeSend=t.beforeSend||function(){},this.error=t.error||function(){},this.selected=t.selected||function(){},this.provider=t.provider||"none",this.typingDelay=t.typingDelay||400,this.minChars=t.minChars||3,this.autocomplete,this.init=function(){document.querySelector(e.selector)&&(e.autocomplete=new(Oa())({name:"mmp-autocomplete",selector:e.selector,debounce:e.typingDelay,threshold:e.minChars,data:{src:function(t){return or().DomUtil.removeClass(e.autocomplete.input,"results-error"),or().DomUtil.addClass(e.autocomplete.input,"results-loading"),e.beforeSend(),Da({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_geocoding",provider:e.provider,query:t}}).then((function(t){return(t=JSON.parse(t)).success?t.results:(or().DomUtil.addClass(e.autocomplete.input,"results-error"),void e.error(""+t.message))})).catch((function(t){or().DomUtil.addClass(e.autocomplete.input,"results-error"),e.error(""+t)})).finally((function(){or().DomUtil.removeClass(e.autocomplete.input,"results-loading")}))},keys:["address"],cache:!1},searchEngine:function(t,e){return e},resultsList:{element:function(t,i){if(!i.results.length){var n=document.createElement("div");n.setAttribute("class",e.autocomplete.name+"_no-results"),n.innerHTML="<span>No results</span>",t.prepend(n)}var o=or().DomUtil.create("div",e.autocomplete.name+"_footer",t);switch(e.provider){case"locationiq":o.innerHTML='<a href="https://www.mapsmarker.com/locationiq-geocoding/" target="_blank"><img class="logo-locationiq" src="'+mmpVars.pluginUrl+'images/options/locationiq-logo.png" /></a>';break;case"mapquest":o.innerHTML='<a href="https://www.mapsmarker.com/mapquest-geocoding/" target="_blank"><img class="logo-mapquest" src="'+mmpVars.pluginUrl+'images/geocoding/mapquest-logo.png" /></a>';break;case"google":o.innerHTML='<a href="https://www.mapsmarker.com/google-geocoding/ target="_blank"><img class="logo-google" src="'+mmpVars.pluginUrl+'images/geocoding/powered-by-google.png" /></a>';break;case"tomtom":o.innerHTML='<a href="https://www.mapsmarker.com/tomtom-geocoding/" target="_blank"><img class="logo-tomtom" src="'+mmpVars.pluginUrl+'images/geocoding/tomtom-logo.png" /></a>';break;default:o.innerHTML=""}},maxResults:10,noResults:!0},resultItem:{element:function(t,i){t.innerHTML='<span class="'+e.autocomplete.name+'_icon"></span><span class="'+e.autocomplete.name+'_address">'+i.value.address+"</span>"},highlight:!1},events:{input:{init:function(t){t.srcElement.setAttribute("autocomplete","off")},focus:function(){e.autocomplete.open()},selection:function(t){var i=t.detail.selection.value;e.autocomplete.input.value=i.address,e.autocomplete.input.blur(),i.placeId?Da({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_google_places",placeId:i.placeId}}).then((function(t){(t=JSON.parse(t)).success&&e.selected(t.lat,t.lon,i.value)})).catch((function(){})):e.selected(i.lat,i.lon,i.value)}}}}))}};function Ba(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Ra(t){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ra(t)}function za(t){return Ba(1,arguments),t instanceof Date||"object"===Ra(t)&&"[object Date]"===Object.prototype.toString.call(t)}function Fa(t){return Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fa(t)}function ja(t){Ba(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===Fa(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Na(t){if(Ba(1,arguments),!za(t)&&"number"!=typeof t)return!1;var e=ja(t);return!isNaN(Number(e))}function Ua(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Ga(t,e){Ba(2,arguments);var i=ja(t).getTime(),n=Ua(e);return new Date(i+n)}function Ha(t,e){Ba(2,arguments);var i=Ua(e);return Ga(t,-i)}or().Control.MmpGeocoding=or().Control.extend({options:{mmp:null,collapsed:!0,position:"topleft",provider:"none",typingDelay:400,minChars:3,icon:null,titleText:"",errorText:""},onAdd:function(t){this._map=t;var e=this.options,i="leaflet-control-mmp-geocoding";e.icon?this._marker=or().marker([0,0],{icon:e.icon}):this._marker=null;var n=or().DomUtil.create("div",i);or().DomEvent.disableClickPropagation(n);var o=or().DomUtil.create("div",i+"-input-container",n),r=or().DomUtil.create("input",i+"-input",o);r.id=i+"-input-"+e.mmp.uid,r.type="text",r.title=e.titleText,r.placeholder=e.titleText,or().DomEvent.on(r,"keyup",this._onKeyUp,this);var a=this._clearButton=or().DomUtil.create("div",i+"-clear",o);return a.style.display="none",or().DomEvent.on(a,"mousedown",this._onMouseDown,this),or().DomEvent.on(a,"click",this.clear,this),e.collapsed&&(or().DomEvent.on(r,"focus",this.expand,this),or().DomEvent.on(r,"blur",this.collapse,this)),this._geocoding=new Ia({selector:"#"+i+"-input-"+e.mmp.uid,beforeSend:this._beforeSend.bind(this),error:this._onError.bind(this),selected:this._onSelected.bind(this),provider:e.provider,typingDelay:e.typingDelay,minChars:e.minChars}),n},addTo:function(t){return or().Control.prototype.addTo.call(this,t),this._geocoding.init(),this.options.collapsed||this.expand(),this},expand:function(){or().DomUtil.removeClass(this._container,"leaflet-control-mmp-geocoding-collapsed"),or().DomUtil.addClass(this._container,"leaflet-control-mmp-geocoding-expanded")},collapse:function(){or().DomUtil.removeClass(this._container,"leaflet-control-mmp-geocoding-expanded"),or().DomUtil.addClass(this._container,"leaflet-control-mmp-geocoding-collapsed")},clear:function(){this._marker&&this._marker.remove(),this._geocoding.autocomplete.input.value="",this._clearButton.style.display="none",this._geocoding.autocomplete.close()},_onKeyUp:function(){this._geocoding.autocomplete.input.value?this._clearButton.style.display="inline-block":this._clearButton.style.display="none"},_onMouseDown:function(t){t.preventDefault()},_beforeSend:function(){},_onError:function(t){this.options.mmp.showMapModal(this.options.errorText,t)},_onSelected:function(t,e,i){var n=this.options.mmp;void 0!==n.controls.locate&&n.controls.locate.stop(),this._marker&&(this._marker.remove(),this._marker.options.title=i,this._marker.setLatLng([t,e]),this._marker.addTo(this._map)),this._map.setView([t,e]),this._geocoding.autocomplete.input.blur()}}),or().control.mmpGeocoding=function(t){return new(or().Control.MmpGeocoding)(t)};var Za=864e5;function Va(t){Ba(1,arguments);var e=1,i=ja(t),n=i.getUTCDay(),o=(n<e?7:0)+n-e;return i.setUTCDate(i.getUTCDate()-o),i.setUTCHours(0,0,0,0),i}function Wa(t){Ba(1,arguments);var e=ja(t),i=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(i+1,0,4),n.setUTCHours(0,0,0,0);var o=Va(n),r=new Date(0);r.setUTCFullYear(i,0,4),r.setUTCHours(0,0,0,0);var a=Va(r);return e.getTime()>=o.getTime()?i+1:e.getTime()>=a.getTime()?i:i-1}function qa(t){Ba(1,arguments);var e=Wa(t),i=new Date(0);i.setUTCFullYear(e,0,4),i.setUTCHours(0,0,0,0);var n=Va(i);return n}var $a=6048e5;var Ya={};function Ka(){return Ya}function Ja(t,e){var i,n,o,r,a,s,l,c;Ba(1,arguments);var h=Ka(),u=Ua(null!==(i=null!==(n=null!==(o=null!==(r=null==e?void 0:e.weekStartsOn)&&void 0!==r?r:null==e||null===(a=e.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:h.weekStartsOn)&&void 0!==n?n:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==i?i:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=ja(t),d=p.getUTCDay(),m=(d<u?7:0)+d-u;return p.setUTCDate(p.getUTCDate()-m),p.setUTCHours(0,0,0,0),p}function Xa(t,e){var i,n,o,r,a,s,l,c;Ba(1,arguments);var h=ja(t),u=h.getUTCFullYear(),p=Ka(),d=Ua(null!==(i=null!==(n=null!==(o=null!==(r=null==e?void 0:e.firstWeekContainsDate)&&void 0!==r?r:null==e||null===(a=e.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:p.firstWeekContainsDate)&&void 0!==n?n:null===(l=p.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==i?i:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setUTCFullYear(u+1,0,d),m.setUTCHours(0,0,0,0);var f=Ja(m,e),g=new Date(0);g.setUTCFullYear(u,0,d),g.setUTCHours(0,0,0,0);var _=Ja(g,e);return h.getTime()>=f.getTime()?u+1:h.getTime()>=_.getTime()?u:u-1}function Qa(t,e){var i,n,o,r,a,s,l,c;Ba(1,arguments);var h=Ka(),u=Ua(null!==(i=null!==(n=null!==(o=null!==(r=null==e?void 0:e.firstWeekContainsDate)&&void 0!==r?r:null==e||null===(a=e.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:h.firstWeekContainsDate)&&void 0!==n?n:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==i?i:1),p=Xa(t,e),d=new Date(0);d.setUTCFullYear(p,0,u),d.setUTCHours(0,0,0,0);var m=Ja(d,e);return m}var ts=6048e5;function es(t,e){for(var i=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return i+n}var is={y:function(t,e){var i=t.getUTCFullYear(),n=i>0?i:1-i;return es("yy"===e?n%100:n,e.length)},M:function(t,e){var i=t.getUTCMonth();return"M"===e?String(i+1):es(i+1,2)},d:function(t,e){return es(t.getUTCDate(),e.length)},a:function(t,e){var i=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return"am"===i?"a.m.":"p.m."}},h:function(t,e){return es(t.getUTCHours()%12||12,e.length)},H:function(t,e){return es(t.getUTCHours(),e.length)},m:function(t,e){return es(t.getUTCMinutes(),e.length)},s:function(t,e){return es(t.getUTCSeconds(),e.length)},S:function(t,e){var i=e.length,n=t.getUTCMilliseconds();return es(Math.floor(n*Math.pow(10,i-3)),e.length)}},ns="midnight",os="noon",rs="morning",as="afternoon",ss="evening",ls="night",cs={G:function(t,e,i){var n=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});default:return i.era(n,{width:"wide"})}},y:function(t,e,i){if("yo"===e){var n=t.getUTCFullYear(),o=n>0?n:1-n;return i.ordinalNumber(o,{unit:"year"})}return is.y(t,e)},Y:function(t,e,i,n){var o=Xa(t,n),r=o>0?o:1-o;return"YY"===e?es(r%100,2):"Yo"===e?i.ordinalNumber(r,{unit:"year"}):es(r,e.length)},R:function(t,e){return es(Wa(t),e.length)},u:function(t,e){return es(t.getUTCFullYear(),e.length)},Q:function(t,e,i){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return es(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,i){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return es(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,i){var n=t.getUTCMonth();switch(e){case"M":case"MM":return is.M(t,e);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,i){var n=t.getUTCMonth();switch(e){case"L":return String(n+1);case"LL":return es(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,i,n){var o=function(t,e){Ba(1,arguments);var i=ja(t),n=Ja(i,e).getTime()-Qa(i,e).getTime();return Math.round(n/ts)+1}(t,n);return"wo"===e?i.ordinalNumber(o,{unit:"week"}):es(o,e.length)},I:function(t,e,i){var n=function(t){Ba(1,arguments);var e=ja(t),i=Va(e).getTime()-qa(e).getTime();return Math.round(i/$a)+1}(t);return"Io"===e?i.ordinalNumber(n,{unit:"week"}):es(n,e.length)},d:function(t,e,i){return"do"===e?i.ordinalNumber(t.getUTCDate(),{unit:"date"}):is.d(t,e)},D:function(t,e,i){var n=function(t){Ba(1,arguments);var e=ja(t),i=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),o=i-n;return Math.floor(o/Za)+1}(t);return"Do"===e?i.ordinalNumber(n,{unit:"dayOfYear"}):es(n,e.length)},E:function(t,e,i){var n=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,i,n){var o=t.getUTCDay(),r=(o-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return es(r,2);case"eo":return i.ordinalNumber(r,{unit:"day"});case"eee":return i.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(o,{width:"short",context:"formatting"});default:return i.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,i,n){var o=t.getUTCDay(),r=(o-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return es(r,e.length);case"co":return i.ordinalNumber(r,{unit:"day"});case"ccc":return i.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(o,{width:"narrow",context:"standalone"});case"cccccc":return i.day(o,{width:"short",context:"standalone"});default:return i.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,i){var n=t.getUTCDay(),o=0===n?7:n;switch(e){case"i":return String(o);case"ii":return es(o,e.length);case"io":return i.ordinalNumber(o,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,i){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,e,i){var n,o=t.getUTCHours();switch(n=12===o?os:0===o?ns:o/12>=1?"pm":"am",e){case"b":case"bb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,e,i){var n,o=t.getUTCHours();switch(n=o>=17?ss:o>=12?as:o>=4?rs:ls,e){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,e,i){if("ho"===e){var n=t.getUTCHours()%12;return 0===n&&(n=12),i.ordinalNumber(n,{unit:"hour"})}return is.h(t,e)},H:function(t,e,i){return"Ho"===e?i.ordinalNumber(t.getUTCHours(),{unit:"hour"}):is.H(t,e)},K:function(t,e,i){var n=t.getUTCHours()%12;return"Ko"===e?i.ordinalNumber(n,{unit:"hour"}):es(n,e.length)},k:function(t,e,i){var n=t.getUTCHours();return 0===n&&(n=24),"ko"===e?i.ordinalNumber(n,{unit:"hour"}):es(n,e.length)},m:function(t,e,i){return"mo"===e?i.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):is.m(t,e)},s:function(t,e,i){return"so"===e?i.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):is.s(t,e)},S:function(t,e){return is.S(t,e)},X:function(t,e,i,n){var o=(n._originalDate||t).getTimezoneOffset();if(0===o)return"Z";switch(e){case"X":return us(o);case"XXXX":case"XX":return ps(o);default:return ps(o,":")}},x:function(t,e,i,n){var o=(n._originalDate||t).getTimezoneOffset();switch(e){case"x":return us(o);case"xxxx":case"xx":return ps(o);default:return ps(o,":")}},O:function(t,e,i,n){var o=(n._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+hs(o,":");default:return"GMT"+ps(o,":")}},z:function(t,e,i,n){var o=(n._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+hs(o,":");default:return"GMT"+ps(o,":")}},t:function(t,e,i,n){var o=n._originalDate||t;return es(Math.floor(o.getTime()/1e3),e.length)},T:function(t,e,i,n){return es((n._originalDate||t).getTime(),e.length)}};function hs(t,e){var i=t>0?"-":"+",n=Math.abs(t),o=Math.floor(n/60),r=n%60;if(0===r)return i+String(o);var a=e||"";return i+String(o)+a+es(r,2)}function us(t,e){return t%60==0?(t>0?"-":"+")+es(Math.abs(t)/60,2):ps(t,e)}function ps(t,e){var i=e||"",n=t>0?"-":"+",o=Math.abs(t);return n+es(Math.floor(o/60),2)+i+es(o%60,2)}var ds=cs,ms=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},fs=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},gs={p:fs,P:function(t,e){var i,n=t.match(/(P+)(p+)?/)||[],o=n[1],r=n[2];if(!r)return ms(t,e);switch(o){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;default:i=e.dateTime({width:"full"})}return i.replace("{{date}}",ms(o,e)).replace("{{time}}",fs(r,e))}},_s=gs;function vs(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var ys=["D","DD"],bs=["YY","YYYY"];function xs(t){return-1!==ys.indexOf(t)}function ks(t){return-1!==bs.indexOf(t)}function Ls(t,e,i){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var ws={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ms=function(t,e,i){var n,o=ws[t];return n="string"==typeof o?o:1===e?o.one:o.other.replace("{{count}}",e.toString()),null!=i&&i.addSuffix?i.comparison&&i.comparison>0?"in "+n:n+" ago":n};function Cs(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.width?String(e.width):t.defaultWidth,n=t.formats[i]||t.formats[t.defaultWidth];return n}}var Ps={date:Cs({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Cs({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Cs({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Ss={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ts=function(t,e,i,n){return Ss[t]};function As(t){return function(e,i){var n;if("formatting"===(null!=i&&i.context?String(i.context):"standalone")&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,r=null!=i&&i.width?String(i.width):o;n=t.formattingValues[r]||t.formattingValues[o]}else{var a=t.defaultWidth,s=null!=i&&i.width?String(i.width):t.defaultWidth;n=t.values[s]||t.values[a]}return n[t.argumentCallback?t.argumentCallback(e):e]}}var Ds={ordinalNumber:function(t,e){var i=Number(t),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:As({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:As({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:As({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:As({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:As({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Es(t){return function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.width,o=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],r=e.match(o);if(!r)return null;var a,s=r[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Is(l,(function(t){return t.test(s)})):Os(l,(function(t){return t.test(s)}));a=t.valueCallback?t.valueCallback(c):c,a=i.valueCallback?i.valueCallback(a):a;var h=e.slice(s.length);return{value:a,rest:h}}}function Os(t,e){for(var i in t)if(t.hasOwnProperty(i)&&e(t[i]))return i}function Is(t,e){for(var i=0;i<t.length;i++)if(e(t[i]))return i}var Bs,Rs={ordinalNumber:(Bs={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.match(Bs.matchPattern);if(!i)return null;var n=i[0],o=t.match(Bs.parsePattern);if(!o)return null;var r=Bs.valueCallback?Bs.valueCallback(o[0]):o[0];r=e.valueCallback?e.valueCallback(r):r;var a=t.slice(n.length);return{value:r,rest:a}}),era:Es({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Es({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Es({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Es({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Es({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},zs={code:"en-US",formatDistance:Ms,formatLong:Ps,formatRelative:Ts,localize:Ds,match:Rs,options:{weekStartsOn:0,firstWeekContainsDate:1}},Fs=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,js=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ns=/^'([^]*?)'?$/,Us=/''/g,Gs=/[a-zA-Z]/;function Hs(t,e,i){var n,o,r,a,s,l,c,h,u,p,d,m,f,g,_,v,y,b;Ba(2,arguments);var x=String(e),k=Ka(),L=null!==(n=null!==(o=null==i?void 0:i.locale)&&void 0!==o?o:k.locale)&&void 0!==n?n:zs,w=Ua(null!==(r=null!==(a=null!==(s=null!==(l=null==i?void 0:i.firstWeekContainsDate)&&void 0!==l?l:null==i||null===(c=i.locale)||void 0===c||null===(h=c.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==s?s:k.firstWeekContainsDate)&&void 0!==a?a:null===(u=k.locale)||void 0===u||null===(p=u.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==r?r:1);if(!(w>=1&&w<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=Ua(null!==(d=null!==(m=null!==(f=null!==(g=null==i?void 0:i.weekStartsOn)&&void 0!==g?g:null==i||null===(_=i.locale)||void 0===_||null===(v=_.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==f?f:k.weekStartsOn)&&void 0!==m?m:null===(y=k.locale)||void 0===y||null===(b=y.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==d?d:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!L.localize)throw new RangeError("locale must contain localize property");if(!L.formatLong)throw new RangeError("locale must contain formatLong property");var C=ja(t);if(!Na(C))throw new RangeError("Invalid time value");var P=vs(C),S=Ha(C,P),T={firstWeekContainsDate:w,weekStartsOn:M,locale:L,_originalDate:C},A=x.match(js).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,_s[e])(t,L.formatLong):t})).join("").match(Fs).map((function(n){if("''"===n)return"'";var o=n[0];if("'"===o)return Zs(n);var r=ds[o];if(r)return null!=i&&i.useAdditionalWeekYearTokens||!ks(n)||Ls(n,e,String(t)),null!=i&&i.useAdditionalDayOfYearTokens||!xs(n)||Ls(n,e,String(t)),r(S,n,L.localize,T);if(o.match(Gs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");return n})).join("");return A}function Zs(t){var e=t.match(Ns);return e?e[1].replace(Us,"'"):t}function Vs(t){return Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vs(t)}function Ws(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qs(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,r=void 0,r=function(t,e){if("object"!==Vs(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==Vs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Vs(r)?r:String(r)),n)}var o,r}function $s(){return $s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=Ys(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},$s.apply(this,arguments)}function Ys(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qs(t)););return t}function Ks(t,e){return Ks=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ks(t,e)}function Js(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Qs(t);if(e){var o=Qs(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Xs(this,i)}}function Xs(t,e){if(e&&("object"===Vs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Qs(t){return Qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qs(t)}function tl(t){var i=this;this.uid=t.uid,this.type=t.type,this.id=t.id,this.lazy=t.lazy,this.customMarkers=t.marker||t.markers,this.settings=t.overrides||{},this.edit=t.edit||!1,this.highlight=t.highlight||{},this.containers={},this.map={},this.groups={},this.markers={},this.markerGroup={},this.geoJson={},this.geoJsonGroup={},this.tooltips={},this.basemaps={},this.minimaps={},this.overlays={},this.controls={},this.gpx={},this.gpxChart={},this.gpxTracks={},this.gpxWaypoints={},this.chartLayers={},this.listeners={},this.list={page:1,term:null,sort:null,order:null,lat:null,lng:null,zoom:null,radius:0,located:!1,geocoding:{},circle:{}},this.on=function(t,e){i.listeners[t]instanceof Array||(i.listeners[t]=[]),-1===i.listeners[t].indexOf(e)&&i.listeners[t].push(e)},this.off=function(t,e){if(i.listeners[t]instanceof Array){var n=i.listeners[t].indexOf(e);-1!==n&&i.listeners[t].splice(n,1)}},this.fire=function(t,e){if(i.listeners[t]instanceof Array)for(var n=0;n<i.listeners[t].length;n++)i.listeners[t][n].call(i,e)},this.checkInvalidateSize=function(){var t=ka(i.containers.main);!i.mapVisible&&t&&(i.map.invalidateSize(),void 0!==i.controls.minimap&&i.controls.minimap._miniMap.invalidateSize()),i.mapVisible=t},this.addLoading=function(t){if(!t.getElementsByClassName("mmp-loading-spinner").length){var e=or().DomUtil.create("div","mmp-loading-spinner"),i=or().DomUtil.create("div","rect-wrap");e.appendChild(i);for(var n=1;n<=5;n++){var o=or().DomUtil.create("div","rect"+n);i.appendChild(o)}t.appendChild(e)}},this.removeLoading=function(t){for(var e=t.getElementsByClassName("mmp-loading-spinner"),i=0;i<e.length;i++)e[i].remove()},this.showMapModal=function(t,e){void 0!==i.containers.mapModal&&i.containers.mapModal.remove(),i.containers.mapModal=or().DomUtil.create("div","mmp-map-modal"),i.containers.mapModal.addEventListener("click",(function(t){t.target===this&&this.remove()}));var n=or().DomUtil.create("div","mmp-map-modal-content",i.containers.mapModal),o=or().DomUtil.create("span","mmp-map-modal-close",n);o.innerHTML="&times;",o.addEventListener("click",(function(t){t.target===this&&i.containers.mapModal.remove()}));var r=or().DomUtil.create("div","mmp-map-modal-header",n);or().DomUtil.create("p","mmp-map-modal-title",r).innerHTML=t;var a=or().DomUtil.create("div","mmp-map-modal-body",n);"string"==typeof e?or().DomUtil.create("p","mmp-map-modal-message",a).innerHTML=e:a.appendChild(e);i.containers.mapWrap.appendChild(i.containers.mapModal)},this.getDirectionsLink=function(t,e,n,o){var r=i.settings,a="";switch(t){case"googlemaps":a="https://www.google.com/maps?daddr="+(o||e+","+n),a+="&t="+r.directionsGoogleType,a+="&layer="+(r.directionsGoogleTraffic?"1":"0"),a+="&doflg="+r.directionsGoogleUnits,r.directionsGoogleAvoidHighways&&(a+="&dirflg=h"),r.directionsGoogleAvoidTolls&&(a+="&dirflg=t"),r.directionsGooglePublicTransport&&(a+="&dirflg=r"),r.directionsGoogleWalking&&(a+="&dirflg=w"),r.directionsGoogleLanguage&&(a+="&hl="+r.directionsGoogleLanguage),a+="&om="+(r.directionsGoogleOverview?"1":"0");break;case"ors":a="https://classic-maps.openrouteservice.org/directions?a=null,null,"+e+","+n,a+="&b="+("Bicycle"===r.directionsOrsType?"1a":"Pedestrian"===r.directionsOrsType?"2":"HeavyVehicle"===r.directionsOrsType?"4a":"0"),a+="&c="+("Shortest"===r.directionsOrsRoute?"1":"0");break;case"bingmaps":a="https://www.bing.com/maps/default.aspx?v=2&rtp=pos___e_~pos."+e+"_"+n+(o?"_"+o:"")}return a},this.getApiLink=function(t,e,n){n=n||{},!mmpVars.language||"geojson"!==t&&"kml"!==t&&"georss"!==t||(n.lang=mmpVars.language);var o=mmpVars.apiUrl;switch(t){case"editMap":o=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+e;break;case"editMarker":o=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_marker&id="+e;break;case"fs":o+="fullscreen/"+e+"/";break;case"gpx":o=mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+i.settings.gpxUrl;break;case"geojson":o+="export/geojson/"+e+"/";break;case"kml":o+="export/kml/"+e+"/";break;case"georss":o+="export/georss/"+e+"/"}return Object.keys(n).length&&(o+="?",Object.keys(n).forEach((function(t){o+=t+"="+n[t]+"&"})),o=o.slice(0,-1)),o},this.addApiLink=function(t,e,i,n){var o=or().DomUtil.create("a","mmp-api-icon "+i,n);o.href=t,o.rel="nofollow",o.target="_blank",o.title=e},this.addShareLink=function(t,e){var n=or().DomUtil.create("i","mmp-api-icon mmp-api-icon-share",e);n.title=mmpL10n.api.share,n.addEventListener("click",(function(){i.containers.main.scrollIntoView(),i.openShareModal(t)}))},this.openShareModal=function(t){var e,n=i.settings;e=n.apiFullscreen&&"fs"===n.shareUrl?i.getApiLink("fs",i.id,{marker:t}):mmpVars.page+"?markerid="+t;var o=or().DomUtil.create("div",null);n.shareFacebook&&o.appendChild(i.getShareLink("facebook",e,n.shareText)),n.shareTwitter&&o.appendChild(i.getShareLink("twitter",e,n.shareText)),n.shareLinkedIn&&o.appendChild(i.getShareLink("linkedin",e,n.shareText)),n.shareWhatsApp&&o.appendChild(i.getShareLink("whatsapp",e,n.shareText)),n.shareEmail&&o.appendChild(i.getShareLink("email",e,n.shareText));var r=or().DomUtil.create("div","mmp-share-modal-url",o),a=or().DomUtil.create("input",null,r);a.setAttribute("type","text"),a.setAttribute("value",e),a.addEventListener("click",(function(){this.select()})),i.showMapModal(mmpL10n.api.share,o)},this.getShareLink=function(t,e,i){e=encodeURIComponent(e),i=encodeURIComponent(i);var n=or().DomUtil.create("a","mmp-share-button-link");n.setAttribute("target","_blank"),n.setAttribute("rel","noopener");var o=or().DomUtil.create("div","mmp-share-button",n),r=or().DomUtil.create("div","mmp-share-button-icon",o),a=or().SVG.create("svg");a.setAttribute("viewBox","0 0 24 24"),r.appendChild(a);var s=or().SVG.create("path");switch(a.appendChild(s),t){case"facebook":n.setAttribute("href","https://www.facebook.com/sharer.php?u="+e),or().DomUtil.addClass(o,"mmp-share-button-facebook"),s.setAttribute("d","M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z");break;case"twitter":n.setAttribute("href","https://twitter.com/share?text="+i+"&url="+e+"&via=mapsmarker"),or().DomUtil.addClass(o,"mmp-share-button-twitter"),s.setAttribute("d","M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z");break;case"linkedin":n.setAttribute("href","https://www.linkedin.com/shareArticle?title="+i+"&url="+e),or().DomUtil.addClass(o,"mmp-share-button-linkedin"),s.setAttribute("d","M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z");break;case"whatsapp":or().Browser.mobile?n.setAttribute("href","whatsapp://send?text="+i+" "+e):n.setAttribute("href","https://api.whatsapp.com/send?text="+i+" "+e),or().DomUtil.addClass(o,"mmp-share-button-whatsapp"),s.setAttribute("d","M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3 0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7 0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1 0-5.2 4.2-9.4 9.4-9.4 2.5 0 4.9 1 6.7 2.8 1.8 1.8 2.8 4.2 2.8 6.7-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2-.2-.3 0-.5.1-.6s.3-.3.4-.5c.2-.1.3-.3.4-.5.1-.2 0-.4 0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z");break;case"email":i?n.setAttribute("href","mailto:?subject="+i+"&body="+e):n.setAttribute("href","mailto:?body="+e),n.setAttribute("target","_self"),or().DomUtil.addClass(o,"mmp-share-button-email"),s.setAttribute("d","M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z");break;default:return null}return n},this.getActiveMarkers=function(){var t=i.settings,e=[];return Object.keys(i.markers).forEach((function(n){var o=i.markers[n],r=o.feature.properties.maps;if("map"!==i.type||t.filtersAllMarkers)e.push(o);else{var a=!1;"and"===t.filtersLogic?(a=!0,Object.keys(i.groups).forEach((function(t){t!==i.id&&i.groups[t].active&&-1===r.indexOf(t)&&(a=!1)}))):Object.keys(i.groups).forEach((function(t){i.groups[t].active&&-1!==r.indexOf(t)&&(a=!0)})),a&&-1===e.indexOf(o)&&e.push(o)}})),e},this.checkPopupSize=function(t){var e=i.settings;i.containers.map.offsetWidth<e.popupMaxWidth?(t.options.minWidth=i.containers.map.offsetWidth-50,t.options.maxWidth=i.containers.map.offsetWidth-50):(t.options.minWidth=e.popupMinWidth,t.options.maxWidth=e.popupMaxWidth),i.containers.map.offsetHeight<e.popupMaxHeight?t.options.maxHeight=i.containers.map.offsetHeight-50:t.options.maxHeight=e.popupMaxHeight,t.update()},this.loadPopup=function(t,e){return new Promise((function(n,o){var r=t.getPopup();if(void 0!==r)if(e||!r.getContent()){var a=or().DomUtil.create("div","mmp-popup");or().DomUtil.create("img","mmp-popup-loading",a).src=mmpVars.pluginUrl+"images/icons/paging-ajax-loader.gif",r.setContent(a);var s="";new Promise((function(e,n){t instanceof or().Marker?t.feature.properties.popup?(s=i.getMarkerPopup(t),e()):i.getPopups(t.feature.properties.id).then((function(){s=i.getMarkerPopup(t),e()})).catch((function(){n()})):t instanceof or().Path?(s=i.getGeoJsonPopup(t),e()):n()})).then((function(){var t=s.getElementsByTagName("img"),e=Array.prototype.slice.call(t);Promise.all(e.map(i.imgLoaded)).then((function(){r.setContent(s),n(r)}))})).catch((function(){o()}))}else n(r);else o()}))},this.getMarkerPopup=function(t){var e=i.settings,n=t.feature.properties,o=or().DomUtil.create("div","mmp-popup");if(o.id="mmp-popup-"+n.id,e.popupMarkername&&n.name){var r=or().DomUtil.create("div","mmp-popup-name",o);r.innerHTML=n.name,r.style.borderBottom="1px solid #f0f0e7"}n.popup&&(or().DomUtil.create("div","mmp-popup-text",o).innerHTML=n.popup);if(n.address&&e.popupAddress||e.popupCoordinates||e.popupDirections||e.popupShare){var a=or().DomUtil.create("div","mmp-popup-location",o);if(a.style.borderTop="1px solid #f0f0e7",e.popupShare&&i.addShareLink(n.id,a),n.address&&e.popupAddress)or().DomUtil.create("span","mmp-popup-location-address",a).innerHTML+=n.address;if(e.popupCoordinates){var s=or().DomUtil.create("span","mmp-popup-location-coordinates",a);n.address&&e.popupAddress?s.innerHTML+=" ("+t.getLatLng().lat+", "+t.getLatLng().lng+")":s.innerHTML+=t.getLatLng().lat+", "+t.getLatLng().lng}if(e.popupDirections){var l=or().DomUtil.create("span","mmp-popup-location-directions",a);(n.address&&e.popupAddress||e.popupCoordinates)&&(l.innerHTML+=" ");var c=or().DomUtil.create("a",null,l);c.href=i.getDirectionsLink(e.directionsProvider,t.getLatLng().lat,t.getLatLng().lng,n.address),c.target="_blank",c.title=mmpL10n.api.dir,c.innerHTML="("+mmpL10n.popup.directions+")"}}return o},this.getGeoJsonPopup=function(t){var e=i.settings,n=or().DomUtil.create("div","mmp-popup");if(e.popupMarkername&&t.options.name){var o=or().DomUtil.create("div","mmp-popup-name",n);o.innerHTML=t.options.name,o.style.borderBottom="1px solid #f0f0e7"}t.options.popup&&(or().DomUtil.create("div","mmp-popup-text",n).innerHTML=t.options.popup);return n},this.imgLoaded=function(t){if(t.src)return new Promise((function(e){t.addEventListener("load",e),t.addEventListener("error",e),t.loading&&"lazy"===t.loading&&(t.loading="eager")}))},this.updatePopups=function(){var t=i.settings;Object.keys(i.markers).forEach((function(e){var n=i.markers[e],o=n.getPopup();void 0!==o&&(o.setContent(""),o.options.minWidth=t.popupMinWidth,o.options.maxWidth=t.popupMaxWidth,o.options.maxHeight=t.popupMaxHeight,o.isOpen()&&i.updatePopup(n))}))},this.updatePopup=function(t,e){var n=i.settings,o=t.getPopup();!o&&t.feature.properties.popup?t.bindPopup("",i.popup):o&&!t.feature.properties.popup&&(t.closePopup(),t.unbindPopup()),i.loadPopup(t,e).then((function(t){i.checkPopupSize(t),n.popupCenterOnMap&&i.centerPopup(t)})).catch((function(){}))},this.centerPopup=function(t){if(t.isOpen()){var e=t.getLatLng(),n=i.map.project(e),o=t._container.clientHeight;n.y-=o/2;var r=i.map.unproject(n);i.map.panTo(r,{animate:!0})}},this.openMarker=function(t){t.isPopupOpen()?i.updatePopup(t):t.openPopup()},this.highlightMarker=function(t,e,n,o){if(t instanceof or().Marker||void 0!==(t=i.markers[t])){var r=t.feature.properties;if(r.link)i.openLink(r.link,r.blank);else{e&&i.containers.main.scrollIntoView();var a=t.getLatLng(),s=n?r.zoom:void 0;i.map.setView(a,s),o&&(i.settings.clustering?i.markerGroup.zoomToShowLayer(t,(function(){i.openMarker(t)})):i.openMarker(t))}}},this.openLink=function(t,e){var i="1"===e?"_blank":"_self";window.open(t,i)},this.showError=function(t){if(i.containers.main.innerHTML="",or().DomUtil.addClass(i.containers.main,"mmp-map-error"),mmpVars.isAdmin){var e=or().DomUtil.create("pre","mmp-map-error-debug",i.containers.main);e.innerHTML='Unable to load Maps Marker Pro map.\nSee <a href="https://www.mapsmarker.com/map-loading-issues/" target="_blank">https://www.mapsmarker.com/map-loading-issues/</a> for possible solutions.\nPlease include the URL to the map and the information below if opening a support ticket.\n\n',e.appendChild(document.createTextNode(t.stack))}else{or().DomUtil.create("p","mmp-map-error-msg",i.containers.main).innerHTML="The map could not be loaded. Please contact the site owner."}},this.logError=function(t){console.error("[Maps Marker Pro] "+t)},this.main=function(){i.containers.main=document.getElementById("maps-marker-pro-"+i.uid),i.containers.main?i.lazy?"function"==typeof IntersectionObserver?new IntersectionObserver(i.lazyLoadHandler,{root:null,rootMargin:"0px",threshold:0}).observe(i.containers.main):i.lazyLoadHandlerFallback():i.load():"function"==typeof MutationObserver?new MutationObserver(i.deferredLoadHandler).observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):i.logError("Unable to find map container")},this.load=function(){if(i.addLoading(i.containers.main),"function"==typeof URL){var t=new URL(window.location.href),e=parseInt(t.searchParams.get("marker"));isNaN(e)&&(e=parseInt(t.searchParams.get("markerid"))),isNaN(e)||(i.highlight={id:e,open:!0,zoom:!1})}for(var n=document.getElementsByClassName("mmp-highlight"),o=0;o<n.length;o++){var r=n[o].dataset;r.uid&&r.uid!==i.uid||(r.map&&r.map!==i.id||n[o].addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation();var e=this.dataset,n=e.marker||null,o=!e.scroll||"false"!==e.scroll,r=!(!e.zoom||"true"!==e.zoom),a=!e.open||"false"!==e.open;i.highlightMarker(n,o,r,a)})))}for(var a=0;a<tl.callbacks.length;a++){var s=tl.callbacks[a];"function"==typeof s&&s(i)}i.loadSettings().then((function(){return i.init(),i.loadResources()})).then((function(){i.loadControls(),i.removeLoading(i.containers.main),i.highlight.id&&i.highlightMarker(i.highlight.id,!!i.highlight.scroll,!!i.highlight.zoom,!!i.highlight.open)})).catch((function(t){i.logError("Error loading map ("+t.message+")"),i.showError(t)}))},this.init=function(){i.containers.mapWrap=document.getElementById("mmp-map-wrap-"+i.uid),i.containers.mapWrap||(i.containers.mapWrap=or().DomUtil.create("div","mmp-map-wrap",i.containers.main),i.containers.mapWrap.id="mmp-map-wrap-"+i.uid),i.loadPanel(),i.loadMap(),i.loadChart(),i.loadList(),i.setLayout(),window.addEventListener("resize",i.setLayoutThrottled),"function"==typeof IntersectionObserver?new IntersectionObserver(i.visibilityDetectionHandler,{root:null,rootMargin:"0px",threshold:0}).observe(i.containers.main):i.visibilityDetectionHandlerFallback(),i.loadBasemaps(),i.loadOverlays()},this.setLayout=function(){var t=i.settings;i.containers.main.style.width=t.width+t.widthUnit,i.containers.map.style.height=t.height+t.heightUnit,t.responsive&&"px"===t.widthUnit&&("100%"!==i.containers.main.style.width&&i.containers.main.parentNode.offsetWidth<t.width?i.containers.main.style.width="100%":"100%"===i.containers.main.style.width&&i.containers.main.parentNode.offsetWidth>t.width&&(i.containers.main.style.width=t.width+"px")),void 0!==i.containers.list&&(t.list>0?1===t.list||-1===i.containers.main.style.width.indexOf("px")&&i.containers.main.offsetWidth<t.listWidth+t.listBreakpoint?(or().DomUtil.removeClass(i.containers.main,"mmp-list-right"),or().DomUtil.removeClass(i.containers.main,"mmp-list-left"),or().DomUtil.addClass(i.containers.main,"mmp-list-below")):(or().DomUtil.removeClass(i.containers.main,"mmp-list-below"),2===t.list?(or().DomUtil.removeClass(i.containers.main,"mmp-list-left"),or().DomUtil.addClass(i.containers.main,"mmp-list-right")):3===t.list&&(or().DomUtil.removeClass(i.containers.main,"mmp-list-right"),or().DomUtil.addClass(i.containers.main,"mmp-list-left"))):(or().DomUtil.removeClass(i.containers.main,"mmp-list-below"),or().DomUtil.removeClass(i.containers.main,"mmp-list-right"),or().DomUtil.removeClass(i.containers.main,"mmp-list-left"))),i.map.invalidateSize()},this.setLayoutThrottled=or().Util.throttle(i.setLayout,200,this),this.loadSettings=function(){return new Promise((function(t,e){Da({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_settings",type:i.type,id:i.id,marker:i.customMarkers||null,highlight:i.highlight.id||null,lang:mmpVars.language,edit:i.edit}}).then((function(n){(n=Sa(n))instanceof Error?e(n):n.success||e(new Error(n.data));var o=n.data;Object.keys(i.settings).forEach((function(t){o[t]=i.settings[t]})),i.settings=o,o.callback&&"function"==typeof window[o.callback]&&window[o.callback](i),i.fire("settingsloaded",i.settings),t()})).catch((function(t){i.logError("Error loading settings ("+t.message+")"),e(t)}))}))},this.loadPanel=function(){var t=i.settings;if(i.containers.panel=document.getElementById("mmp-panel-"+i.uid),t.panel){var e=or().DomUtil.create("div","mmp-panel");e.id="mmp-panel-"+i.uid,e.style.backgroundColor=t.panelColor,or().DomUtil.create("div","mmp-panel-text",e).innerHTML=t.name;var n=or().DomUtil.create("div","mmp-panel-api",e);"map"===i.type&&(t.panelEdit&&i.addApiLink(i.getApiLink("editMap",i.id),mmpL10n.api.editMap,"mmp-api-icon-edit",n),t.apiFullscreen&&t.panelFs&&i.addApiLink(i.getApiLink("fs",i.id),mmpL10n.api.fs,"mmp-api-icon-fullscreen",n),t.panelGpx&&t.gpxUrl&&i.addApiLink(i.getApiLink("gpx",i.id),mmpL10n.gpx.metaDownload,"mmp-api-icon-gpx",n),t.apiExport&&t.panelGeoJson&&i.addApiLink(i.getApiLink("geojson",i.id),mmpL10n.api.geoJson,"mmp-api-icon-geojson",n),t.apiExport&&t.panelKml&&i.addApiLink(i.getApiLink("kml",i.id),mmpL10n.api.kml,"mmp-api-icon-kml",n),t.apiExport&&t.panelGeoRss&&i.addApiLink(i.getApiLink("georss",i.id),mmpL10n.api.geoRss,"mmp-api-icon-georss",n)),i.containers.panel?i.containers.panel.parentNode.replaceChild(e,i.containers.panel):i.containers.mapWrap.insertBefore(e,i.containers.map),i.containers.panel=e,i.fire("panelloaded",i.map)}else i.containers.panel&&(i.containers.panel.remove(),i.containers.panel=null)},this.loadMap=function(){var t=i.settings;"function"==typeof i.map.remove&&i.map.remove(),i.map={};var e=or().DomUtil.create("div","mmp-map");e.id="mmp-map-"+i.uid,e.style.height=t.height+t.heightUnit,i.containers.map=document.getElementById("mmp-map-"+i.uid),i.containers.map?i.containers.map.parentNode.replaceChild(e,i.containers.map):i.containers.mapWrap.insertBefore(e,i.containers.chartWrap),i.containers.map=e,i.map=or().map(i.containers.map,{center:[t.lat,t.lng],zoom:t.zoom,minZoom:t.minZoom,maxZoom:t.maxZoom,zoomSnap:t.zoomStep,zoomDelta:t.zoomStep,maxBounds:La(t.maxBounds),maxBoundsViscosity:1,gestureHandling:t.gestureHandling,gestureHandlingOptions:{text:{touch:mmpL10n.interaction.gestureTouch,scroll:mmpL10n.interaction.gestureScroll,scrollMac:mmpL10n.interaction.gestureScrollMac},duration:1e3},dragging:t.dragging,inertia:t.inertia,inertiaDeceleration:t.inertiaDeceleration,inertiaMaxSpeed:t.inertiaMaxSpeed,keyboard:t.keyboard,keyboardPanDelta:t.keyboardPanDelta,scrollWheelZoom:t.scrollWheelZoom,doubleClickZoom:t.doubleClickZoom,touchZoom:t.touchZoom,boxzoom:t.boxzoom,bounceAtZoomLimits:t.bounceAtZoomLimits,worldCopyJump:t.worldCopyJump,attributionControl:!1,zoomControl:!1,closePopupOnClick:t.popupAutoClose}),i.map._activeTrack=0,i.fire("maploaded",i.map)},this.loadChart=function(){var t=i.settings;if("function"==typeof i.gpxChart.destroy&&i.gpxChart.destroy(),i.gpxChart={},i.containers.chartWrap=document.getElementById("mmp-chart-wrap-"+i.uid),t.gpxUrl&&t.gpxChart){var e=or().DomUtil.create("div","mmp-gpx-chart-wrap");e.id="mmp-chart-wrap-"+i.uid,e.style.height=t.gpxChartHeight+"px",e.style.position="relative",e.style.minWidth=0;var n=or().DomUtil.create("canvas","mmp-gpx-chart",e);n.id="mmp-gpx-chart-"+i.uid,i.containers.chartWrap?i.containers.chartWrap.parentNode.replaceChild(e,i.containers.chartWrap):i.containers.mapWrap.appendChild(e),i.containers.chartWrap=e,i.containers.chart=n,i.fire("chartloaded",i.gpxChart)}else i.containers.chartWrap&&(i.containers.chartWrap.remove(),i.containers.chartWrap=null,i.containers.chart=null)},this.loadList=function(){var t=i.settings;if(i.containers.list=document.getElementById("mmp-list-"+i.uid),"map"!==i.type&&"custom"!==i.type||!t.list)i.containers.list&&(i.containers.list.remove(),i.containers.list=null);else{var e=or().DomUtil.create("div","mmp-list");if(e.id="mmp-list-"+i.uid,e.style.flexBasis=t.listWidth+"px",i.list.sort=t.listOrderBy,i.list.order=t.listSortOrder,t.listSearch){var n=or().DomUtil.create("div","mmp-list-header",e),o=or().DomUtil.create("div","mmp-list-header-left",n),r=or().DomUtil.create("div","mmp-list-search-wrap",o),a=or().DomUtil.create("input","mmp-list-search",r);a.id="list-search-"+i.uid,a.type="text",a.placeholder=mmpL10n.list.search;var s=or().DomUtil.create("div","mmp-list-search-clear",r);s.style.display="none",s.addEventListener("click",(function(){var t=document.getElementById("list-search-"+i.uid);t&&(t.value=""),this.style.display="none",i.getList({page:1,term:null})}));var l=or().DomUtil.create("div","mmp-list-header-right",n),c=or().DomUtil.create("select","mmp-list-sort",l),h=[];t.listOrderById&&h.push("id"),t.listOrderByName&&h.push("name"),t.listOrderByAddress&&h.push("address"),t.listOrderByDistance&&h.push("distance"),t.listOrderByIcon&&h.push("icon"),t.listOrderByCreated&&h.push("created_on"),t.listOrderByUpdated&&h.push("updated_on");for(var u=0;u<h.length;u++){var p=or().DomUtil.create("option",null,c);p.value=h[u],h[u]===t.listOrderBy&&(p.defaultSelected=!0),p.innerHTML=mmpL10n.list[h[u]]}a.addEventListener("keyup",(function(t){this.value?s.style.display="inline-block":s.style.display="none",13===t.which&&i.getList({page:1,term:this.value})})),c.addEventListener("change",(function(){i.getList({page:1,sort:this.value})})),or().DomUtil.create("i","mmp-list-order mmp-"+t.listSortOrder,l).addEventListener("click",(function(){var t=or().DomUtil.hasClass(this,"mmp-desc")?"asc":"desc";or().DomUtil.removeClass(this,"mmp-asc"),or().DomUtil.removeClass(this,"mmp-desc"),or().DomUtil.addClass(this,"mmp-"+t),i.getList({page:1,order:t})}))}if(t.listLocation&&"none"!==t.geocodingProvider){var d=or().DomUtil.create("div","mmp-list-header",e),m=or().DomUtil.create("div","mmp-list-header-left",d),f=or().DomUtil.create("div","mmp-list-search-wrap",m),g=or().DomUtil.create("input","mmp-list-location",f);g.id="list-address-"+i.uid,g.type="text",g.placeholder=mmpL10n.list.location,g.addEventListener("keyup",(function(){this.value?_.style.display="inline-block":_.style.display="none"}));var _=or().DomUtil.create("div","mmp-list-location-clear",f);_.style.display="none",_.addEventListener("click",(function(){var t=document.getElementById("list-address-"+i.uid);t&&(or().DomUtil.removeClass(t,"results-loading"),or().DomUtil.removeClass(t,"results-error"),t.value=""),this.style.display="none",i.list.located||i.getList({page:1,lat:null,lng:null})}));var v=or().DomUtil.create("div","mmp-list-header-right",d),y=or().DomUtil.create("select","mmp-list-radius",v),b=[0,5,10,15,20,25,50,100,200,500];for(u=0;u<b.length;u++){var x=or().DomUtil.create("option",null,y);x.value=b[u],b[u]<=0?x.innerHTML=mmpL10n.list.noLimit:"imperial"===t.listDistanceUnit?x.innerHTML=b[u]+" mi":"metric-imperial"===t.listDistanceUnit?x.innerHTML=b[u]+" km ("+(b[u]/1.609344).toFixed(t.listDistancePrecision)+" mi)":"imperial-metric"===t.listDistanceUnit?x.innerHTML=b[u]+" mi ("+(1.609344*b[u]).toFixed(t.listDistancePrecision)+" km)":x.innerHTML=b[u]+" km"}y.addEventListener("change",(function(){i.getList({page:1,radius:y.value})}))}i.containers.listBody=or().DomUtil.create("div","mmp-list-body",e),i.containers.listFooter=or().DomUtil.create("div","mmp-list-footer",e),i.containers.list?i.containers.list.parentNode.replaceChild(e,i.containers.list):i.containers.main.appendChild(e),i.containers.list=e,t.listLocation&&"none"!==t.geocodingProvider&&(i.list.geocoding=new Ia({selector:"#list-address-"+i.uid,error:function(t){i.showMapModal(mmpL10n.list.locationError,t)},selected:function(e,n){void 0!==i.controls.locate&&i.controls.locate.stop(),i.getList({page:1,lat:e,lng:n,zoom:t.listGeocodingZoom})},provider:i.settings.geocodingProvider,typingDelay:i.settings.geocodingTypingDelay,minChars:i.settings.geocodingMinChars}),i.list.geocoding.init())}},this.loadBasemaps=function(){var t=i.settings;Object.keys(i.basemaps).forEach((function(t){i.map.removeLayer(i.basemaps[t])})),i.basemaps={},i.minimaps={},!t.basemaps.length&&t.fallbackBasemap&&(t.basemaps=[t.fallbackBasemap]);for(var e=0;e<t.basemaps.length;e++){var n=t.basemaps[e];if(1===n.type){if(n.options.bounds&&"string"==typeof n.options.bounds){var o=La(n.options.bounds);n.options.rasterTiles?n.options.bounds=[i.map.unproject(or().point(o[0][1],o[0][0]),n.options.maxNativeZoom),i.map.unproject(or().point(o[1][1],o[1][0]),n.options.maxNativeZoom)]:n.options.bounds=o}n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=void 0===n.options.errorTiles&&t.errorTiles||n.options.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,n.wms?(i.basemaps[n.name]=or().tileLayer.wms(n.url,n.options),i.minimaps[n.name]=or().tileLayer.wms(n.url,n.options)):(i.basemaps[n.name]=or().tileLayer(n.url,n.options),i.minimaps[n.name]=or().tileLayer(n.url,n.options))}else if(2===n.type&&t.googleApiKey)n.options.styles=t.basemapGoogleStyles,n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.edgeBufferTiles=0,i.basemaps[n.name]=new(or().gridLayer.googleMutant)(n.options),i.minimaps[n.name]=new(or().gridLayer.googleMutant)(n.options);else if(3===n.type&&t.bingApiKey)n.options.bingMapsKey=t.bingApiKey,n.options.culture=t.basemapBingCulture,n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=t.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,i.basemaps[n.name]=or().tileLayer.bing(n.options),i.minimaps[n.name]=or().tileLayer.bing(n.options);else if(4===n.type&&(t.hereApiKey||t.hereAppId&&t.hereAppCode))n.options.apiKey=t.hereApiKey,n.options.appId=t.hereAppId,n.options.appCode=t.hereAppCode,n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=t.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,i.basemaps[n.name]=or().tileLayer.here(n.options),i.minimaps[n.name]=or().tileLayer.here(n.options);else if(5===n.type&&t.tomApiKey)n.options.apiKey=t.tomApiKey,n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=t.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,i.basemaps[n.name]=or().tileLayer.tomTom(n.options),i.minimaps[n.name]=or().tileLayer.tomTom(n.options);else{if(6!==n.type)continue;n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=void 0===n.options.errorTiles&&t.errorTiles||n.options.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,n.labels?(i.basemaps[n.name]=or().layerGroup([da(n.key,n.options),da(n.labels,n.options)]),i.minimaps[n.name]=or().layerGroup([da(n.key,n.options),da(n.labels,n.options)])):(i.basemaps[n.name]=da(n.key,n.options),i.minimaps[n.name]=da(n.key,n.options))}i.basemaps[n.name].mmp_id=n.id,i.minimaps[n.name].mmp_id=n.id}var r=Object.keys(i.basemaps);if(r.length){var a=r[0];for(e=0;e<r.length;e++){var s=r[e];if(i.basemaps[s].mmp_id===t.basemapDefault){a=s;break}}i.basemaps[a].addTo(i.map)}i.fire("basemapsloaded",i.basemaps)},this.loadOverlays=function(){var t=i.settings;Object.keys(i.overlays).forEach((function(t){i.map.removeLayer(i.overlays[t])})),i.overlays={};for(var e=0;e<t.overlays.length;e++){var n=t.overlays[e];if(n.options.bounds&&"string"==typeof n.options.bounds){var o=La(n.options.bounds);n.options.rasterTiles?n.options.bounds=[i.map.unproject(or().point(o[0][1],o[0][0]),n.options.maxNativeZoom),i.map.unproject(or().point(o[1][1],o[1][0]),n.options.maxNativeZoom)]:n.options.bounds=o}n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=void 0===n.options.errorTiles||n.options.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,n.wms?i.overlays[n.name]=or().tileLayer.wms(n.url,n.options):i.overlays[n.name]=or().tileLayer(n.url,n.options),-1!==t.overlaysActive.indexOf(n.id)&&i.overlays[n.name].addTo(i.map)}i.fire("overlaysloaded",i.overlays)},this.loadResources=function(){var t=i.settings;return i.groups={},i.groups[i.id]={active:!0},Object.keys(t.filtersDetails).forEach((function(e){i.groups[e]={active:t.filtersDetails[e].active}})),Promise.all([i.getMarkers(),i.getGeoJson(),i.getGpx()])},this.getMarkers=function(){var t=i.settings,e=[];return t.filtersAllMarkers||(e.push(i.id),Object.keys(t.filtersDetails).forEach((function(t){e.push(t)}))),new Promise((function(n,o){Da({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_markers",type:i.type,id:e,custom:i.customMarkers,lang:mmpVars.language}}).then((function(e){(e=Sa(e))instanceof Error?o(e):e.success||o(new Error(e.data)),i.addMarkers(e.data),"map"!==i.type&&"custom"!==i.type||!t.list?(i.drawMarkers(),n()):i.getList().then((function(){n()})).catch((function(t){o(t)}))})).catch((function(t){i.logError("Error loading markers ("+t.message+")"),o(t)}))}))},this.addMarkers=function(t){var e=i.settings;i.markers={},i.tooltip={direction:e.tooltipDirection,permanent:e.tooltipPermanent,sticky:e.tooltipSticky,opacity:e.tooltipOpacity},i.popup={minWidth:e.popupMinWidth,maxWidth:e.popupMaxWidth,maxHeight:e.popupMaxHeight,autoPan:!e.popupCenterOnMap,closeButton:e.popupCloseButton,autoClose:e.popupAutoClose},or().geoJSON(t,{pointToLayer:function(t,i){return or().marker(i,{icon:or().icon({iconUrl:t.properties.icon?mmpVars.iconsUrl+t.properties.icon:mmpVars.pluginUrl+"images/leaflet/marker.png",iconSize:e.iconSize,iconAnchor:e.iconAnchor,popupAnchor:e.popupAnchor,className:"mmp-marker-icon mmp-marker-icon-"+t.properties.id}),opacity:e.markerOpacity})},onEachFeature:function(t,n){var o=t.properties;o.name&&(i.tooltips[o.id]=o.name,!e.tooltip||!e.tooltipPermanent&&or().Browser.mobile||n.bindTooltip(i.tooltips[o.id],i.tooltip)),o.link?(n.on("click",(function(){i.openLink(this.feature.properties.link,this.feature.properties.blank)})),n.on("keypress",(function(t){13===t.which&&i.openLink(this.feature.properties.link,this.feature.properties.blank)}))):(!1!==o.popup||o.address&&e.popupAddress||e.popupCoordinates||e.popupDirections)&&n.bindPopup("",i.popup),n.on("popupopen",i.openPopupHandler),e.popupOpenOnHover?n.on("mouseover",i.openOnHoverHandler):n.off("mouseover",i.openOnHoverHandler),i.markers[o.id]=n}}),i.fire("markersloaded",i.markers)},this.drawMarkers=function(t){t=t||i.getActiveMarkers();var e=i.settings;if("function"==typeof i.markerGroup.remove&&i.markerGroup.remove(),i.markerGroup={},e.clustering?i.markerGroup=or().markerClusterGroup({showCoverageOnHover:e.showCoverageOnHover,disableClusteringAtZoom:e.disableClusteringAtZoom||null,maxClusterRadius:e.maxClusterRadius,singleMarkerMode:e.singleMarkerMode,spiderfyDistanceMultiplier:e.spiderfyDistanceMultiplier,spiderfyOnEveryZoom:e.spiderfyOnEveryZoom,chunkedLoading:!1}):i.markerGroup=or().featureGroup(),i.markerGroup.addTo(i.map),e.clustering)i.markerGroup.addLayers(t);else for(var n=0;n<t.length;n++)i.markerGroup.hasLayer(t[n])||i.markerGroup.addLayer(t[n])},this.getGeoJson=function(){var t=[i.id];return!i.settings.filtersAllMarkers&&i.settings.filtersGeoJson&&Object.keys(i.settings.filtersDetails).forEach((function(e){t.push(e)})),new Promise((function(e,n){Da({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_geojson",type:i.type,id:t,lang:mmpVars.language}}).then((function(t){(t=Sa(t))instanceof Error?n(t):t.success||n(new Error(t.data)),i.addGeoJson(t.data),e()})).catch((function(t){i.logError("Error loading GeoJSON ("+t.message+")"),n(t)}))}))},this.parseGeoJson=function(t){return or().geoJSON(t,{pointToLayer:function(t,e){if(t.properties.radius)return or().circle(e,t.properties.radius)},style:function(t){if(!t.properties)return{};var e={};return Object.keys(t.properties).forEach((function(i){switch(i){case"weight":e[i]=parseInt(t.properties[i]);break;case"opacity":case"fillOpacity":e[i]=parseFloat(t.properties[i]);break;default:e[i]=t.properties[i]}})),e},onEachFeature:function(t,e){e.options.popup&&e.bindPopup("",i.popup),e.on("popupopen",i.openPopupHandler)}})},this.addGeoJson=function(t){"function"==typeof i.geoJsonGroup.remove&&i.geoJsonGroup.remove(),i.geoJson={},i.geoJsonGroup={},i.geoJson[i.id]=or().geoJSON(),t&&(Object.keys(t).forEach((function(e){void 0===t[e].features?i.geoJson[e]=or().geoJSON():i.geoJson[e]=i.parseGeoJson(t[e])})),i.drawGeoJson(),i.fire("geojsonloaded",i.geoJson))},this.drawGeoJson=function(){"function"==typeof i.geoJsonGroup.remove&&i.geoJsonGroup.remove(),i.geoJsonGroup=or().featureGroup(),i.geoJsonGroup.addTo(i.map),Object.keys(i.groups).forEach((function(t){i.groups[t].active&&void 0!==i.geoJson[t]&&i.geoJsonGroup.addLayer(i.geoJson[t])}))},this.getPopups=function(t){return new Promise((function(e,n){Da({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_marker_popups",id:t,lang:mmpVars.language}}).then((function(t){(t=Sa(t))instanceof Error?n(t):t.success||n(new Error(t.data));for(var o=t.data,r=0;r<o.length;r++){var a=o[r];i.markers[a.id].feature.properties.popup=a.popup}e()})).catch((function(t){i.logError("Error retrieving popups ("+t.message+")"),n(t)}))}))},this.getList=function(t){t=t||{};var e=i.settings;if(("map"===i.type||"custom"===i.type)&&e.list){for(var n=["page","term","sort","order","lat","lng","zoom","radius"],o=0;o<n.length;o++){var r=n[o];void 0!==t[r]&&(i.list[r]=t[r])}var a=[];return"map"===i.type?e.filtersAllMarkers||Object.keys(i.groups).forEach((function(t){"and"===e.filtersLogic&&t===i.id||i.groups[t].active&&a.push(t)})):a=i.customMarkers,new Promise((function(t,n){Da({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_marker_list",type:i.type,id:a,logic:e.filtersLogic,page:i.list.page,term:i.list.term||"",sort:i.list.sort,order:i.list.order,lat:i.list.lat||"",lng:i.list.lng||"",radius:"imperial"===e.listDistanceUnit||"imperial-metric"===e.listDistanceUnit?1609.344*i.list.radius:1e3*i.list.radius}}).then((function(e){(e=Sa(e))instanceof Error?n(e):e.success||n(new Error(e.data));for(var o=e.data,r=[],a=0;a<o.length;a++)void 0!==i.markers[o[a]]&&r.push(i.markers[o[a]]);i.updateCircle(),i.showList(r),i.drawMarkers(r),t()})).catch((function(t){i.logError("Error retrieving marker list ("+t.message+")"),n(t)}))}))}},this.showList=function(t){var e=i.settings,n=t.length>e.listLimit?e.listLimit:t.length,o=Math.ceil(t.length/e.listLimit);i.list.page=i.list.page>o?o:i.list.page,i.list.page<=0&&(i.list.page=1);for(var r=i.list.page===o?t.length:n*i.list.page,a=[],s=(i.list.page-1)*n;s<r;s++)null===t[s].feature.properties.popup&&a.push(t[s].feature.properties.id);a.length?i.getPopups(a).then((function(){i.renderList(t)})).catch((function(){})):i.renderList(t)},this.renderList=function(t){var e=i.settings;i.containers.listBody.innerHTML="";var n=t.length>e.listLimit?e.listLimit:t.length,o=Math.ceil(t.length/e.listLimit);i.list.page=i.list.page>o?o:i.list.page,i.list.page<=0&&(i.list.page=1);for(var r=i.list.page===o?t.length:n*i.list.page,a=(i.list.page-1)*n;a<r;a++){var s=or().DomUtil.create("div","mmp-list-row",i.containers.listBody);if(e.listIcon){var l=or().DomUtil.create("div","mmp-list-row-icon",s),c=or().DomUtil.create("div","mmp-list-icon",l),h=or().DomUtil.create("img",null,c);t[a].feature.properties.icon?h.src=mmpVars.iconsUrl+t[a].feature.properties.icon:h.src=mmpVars.pluginUrl+"images/leaflet/marker.png",h.style.width=e.iconSize[0]+"px",h.style.height=e.iconSize[1]+"px"}var u=or().DomUtil.create("div","mmp-list-row-info",s),p=or().DomUtil.create("div","mmp-list-row-header",u);if(e.listName||e.listDate)var d=or().DomUtil.create("div","mmp-list-row-header-left",p);if(e.listName){var m=or().DomUtil.create("div","mmp-list-name",d);m.innerHTML=t[a].feature.properties.name,"none"!==e.listAction&&(m.tabIndex=0,function(n){var o=i.containers.main.getBoundingClientRect().top<0,r="setviewzoom"===e.listAction||"popupzoom"===e.listAction,a="popup"===e.listAction||"popupzoom"===e.listAction;or().DomEvent.on(m,"click",(function(){i.highlightMarker(t[n],o,r,a)})),or().DomEvent.on(m,"keypress",(function(e){13===e.which&&i.highlightMarker(t[n],o,r,a)}))}(a))}if(e.listDate){var f,g,_=or().DomUtil.create("div","mmp-list-date",d);f="created"===e.listDateType?t[a].feature.properties.created_on:t[a].feature.properties.updated_on,g=Aa(g="date"===e.listDateFormat?mmpVars.dateFormat:"time"===e.listDateFormat?mmpVars.timeFormat:mmpVars.dateFormat+" "+mmpVars.timeFormat),_.innerHTML=Hs(new Date(1e3*f),g)}var v,y,b=or().DomUtil.create("div","mmp-list-row-header-right",p),x=or().DomUtil.create("div","mmp-list-api",b);if(t[a].feature.properties.edit&&i.addApiLink(i.getApiLink("editMarker",t[a].feature.properties.id),mmpL10n.api.editMarker,"mmp-api-icon-edit",x),e.listDir)v=i.getDirectionsLink(e.directionsProvider,t[a].getLatLng().lat,t[a].getLatLng().lng,t[a].feature.properties.address),"googlemaps"===e.directionsProvider?y=e.directionsGoogleWalking?"walk":"car":"ors"===e.directionsProvider?y="Bicycle"===e.directionsOrsType?"bicycle":"Pedestrian"===e.directionsOrsType?"walk":"car":"bingmaps"===e.directionsProvider&&(y="car"),i.addApiLink(v,mmpL10n.api.dir,"mmp-api-icon-"+y,x);e.apiFullscreen&&e.listFs&&i.addApiLink(i.getApiLink("fs",i.id,{marker:t[a].feature.properties.id}),mmpL10n.api.fs,"mmp-api-icon-fullscreen",x),e.listShare&&i.addShareLink(t[a].feature.properties.id,x);var k=or().DomUtil.create("div","mmp-list-row-body",u);if(e.listPopup&&t[a].feature.properties.popup)or().DomUtil.create("div","mmp-list-popup",k).innerHTML=t[a].feature.properties.popup;var L=or().DomUtil.create("div","mmp-list-row-footer",u);if(e.listAddress&&t[a].feature.properties.address)or().DomUtil.create("span","mmp-list-address",L).innerHTML=t[a].feature.properties.address;if(e.listCoordinates){var w=or().DomUtil.create("span","mmp-list-coordinates",L);t[a].feature.properties.address&&e.listAddress?w.innerHTML+=" ("+t[a].getLatLng().lat+", "+t[a].getLatLng().lng+")":w.innerHTML+=t[a].getLatLng().lat+", "+t[a].getLatLng().lng}if(e.listDistance&&null!==i.list.lat&&null!==i.list.lng){var M=or().latLng(i.list.lat,i.list.lng),C=t[a].getLatLng(),P=or().latLng(M).distanceTo(C),S=or().DomUtil.create("div","mmp-list-distance",x);"imperial"===e.listDistanceUnit?S.innerHTML=(P/1609.344).toFixed(e.listDistancePrecision)+" mi":"metric-imperial"===e.listDistanceUnit?S.innerHTML=(P/1e3).toFixed(e.listDistancePrecision)+" km ("+(P/1609.344).toFixed(e.listDistancePrecision)+" mi)":"imperial-metric"===e.listDistanceUnit?S.innerHTML=(P/1609.344).toFixed(e.listDistancePrecision)+" mi ("+(P/1e3).toFixed(e.listDistancePrecision)+" km)":S.innerHTML=(P/1e3).toFixed(e.listDistancePrecision)+" km"}}i.containers.listFooter.innerHTML="";var T=or().DomUtil.create("div","mmp-list-count",i.containers.listFooter);if(0===t.length?T.innerHTML=mmpL10n.list.noResults:1===t.length?T.innerHTML=mmpL10n.list.oneResult:T.innerHTML=t.length+" "+mmpL10n.list.results,t.length>e.listLimit){var A=or().DomUtil.create("div","mmp-list-nav",i.containers.listFooter),D=or().DomUtil.create("button",null,A);D.innerHTML="&laquo;",D.addEventListener("click",(function(){i.list.page=1,i.showList(t)}));var E=or().DomUtil.create("button",null,A);E.innerHTML="&lsaquo;",E.addEventListener("click",(function(){i.list.page=1===i.list.page?1:i.list.page-1,i.showList(t)}));var O=or().DomUtil.create("button",null,A);O.innerHTML="&rsaquo;",O.addEventListener("click",(function(){i.list.page=i.list.page===o?o:i.list.page+1,i.showList(t)}));var I=or().DomUtil.create("button",null,A);I.innerHTML="&raquo;",I.addEventListener("click",(function(){i.list.page=o,i.showList(t)}));var B=or().DomUtil.create("div","mmp-list-page",i.containers.listFooter),R=or().DomUtil.create("input",null,B);R.type="text",R.value=i.list.page,B.appendChild(document.createTextNode(" / "+o)),B.addEventListener("keyup",(function(e){13===e.which&&(i.list.page=Math.abs(parseInt(R.value)),i.showList(t))}))}i.fire("listupdated",i.map)},this.updateCircle=function(){var t=i.settings;if("function"==typeof i.list.circle.remove&&(i.list.circle.remove(),i.list.circle={}),null!==i.list.lat&&null!==i.list.lng){var e=or().latLng([i.list.lat,i.list.lng]);if(i.list.radius<=0)i.list.zoom?i.map.setView(e,i.list.zoom):i.map.panTo(e);else{var n=i.list.radius;"imperial"===t.listDistanceUnit||"imperial-metric"===t.listDistanceUnit?n*=1609.344:n*=1e3,t.listGeocodingDrawCircle&&(i.list.circle=or().circle(e,{interactive:!1,radius:n,stroke:t.listGeocodingStroke,color:t.listGeocodingColor,weight:t.listGeocodingWeight,fill:t.listGeocodingFill,fillColor:t.listGeocodingFillColor,fillOpacity:t.listGeocodingFillOpacity}).addTo(i.map)),i.map.fitBounds(e.toBounds(2*n))}i.list.zoom=null}},this.loadControls=function(){var t=i.settings;if(void 0!==i.controls.locate&&i.controls.locate.stop(),Object.keys(i.controls).forEach((function(t){i.controls[t].remove()})),i.controls={},i.controls.attribution=or().control.attribution({position:t.attributionPosition,prefix:t.attributionPrefix}),i.controls.attribution.mmpIndex=t.attributionIndex,i.controls.attribution._esriAttributionAdded=!0,"hidden"!==t.geocodingControlPosition&&"none"!==t.geocodingProvider){var e=null;t.geocodingControlShowMarker&&(e=or().icon({iconUrl:t.geocodingControlMarkerIcon?mmpVars.iconsUrl+t.geocodingControlMarkerIcon:mmpVars.pluginUrl+"images/leaflet/pin.png",iconSize:t.iconSize,iconAnchor:t.iconAnchor,popupAnchor:t.popupAnchor})),i.controls.geocoding=or().control.mmpGeocoding({mmp:i,collapsed:"collapsed"===t.geocodingControlCollapsed||"collapsed-mobile"===t.geocodingControlCollapsed&&or().Browser.mobile,position:t.geocodingControlPosition,provider:t.geocodingProvider,typingDelay:t.geocodingTypingDelay,minChars:t.geocodingMinChars,icon:e,titleText:mmpL10n.control.geocodingTitle,errorText:mmpL10n.control.geocodingError}),i.controls.geocoding.mmpIndex=t.geocodingControlIndex}if("hidden"!==t.zoomControlPosition&&(i.controls.zoom=or().control.zoom({position:t.zoomControlPosition,zoomInTitle:mmpL10n.control.zoomIn,zoomOutTitle:mmpL10n.control.zoomOut}),i.controls.zoom.mmpIndex=t.zoomControlIndex),"hidden"!==t.fullscreenPosition&&(i.controls.fullscreen=or().control.fullscreen({position:t.fullscreenPosition,title:{false:mmpL10n.control.fullscreenFalse,true:mmpL10n.control.fullscreenTrue}}),i.controls.fullscreen.mmpIndex=t.fullscreenIndex),"hidden"!==t.resetPosition&&(i.controls.reset=or().control.resetView({position:t.resetPosition,onDemand:t.resetOnDemand,title:mmpL10n.control.reset}),i.controls.reset.mmpIndex=t.resetIndex),"hidden"!==t.locatePosition&&(i.controls.locate=or().control.locate({locateOptions:{enableHighAccuracy:!0},position:t.locatePosition,drawCircle:t.locateDrawCircle,drawMarker:t.locateDrawMarker,setView:t.locateSetView,keepCurrentZoomLevel:t.locateKeepCurrentZoomLevel,clickBehavior:{inView:t.locateClickBehaviorInView,outOfView:t.locateClickBehaviorOutOfView},icon:"icon-pin",iconLoading:"icon-spinner",metric:t.locateMetric,showPopup:t.locateShowPopup,strings:{title:mmpL10n.control.locateTitle,metersUnit:mmpL10n.control.locateMetersUnit,feetUnit:mmpL10n.control.locateFeetUnit,popup:mmpL10n.control.locatePopup,outsideMapBoundsMsg:mmpL10n.control.locateOutsideMapBoundsMsg},onLocationError:function(t){var e=mmpL10n.control.locateErrorUnknown;1===t.code?e=mmpL10n.control.locateErrorDenied:2===t.code?e=mmpL10n.control.locateErrorUnavailable:3===t.code&&(e=mmpL10n.control.locateErrorTimeout),i.showMapModal(mmpL10n.control.locateError,e)},onLocationOutsideMapBounds:function(t){t.stop(),i.showMapModal(mmpL10n.control.locateError,t.options.strings.outsideMapBoundsMsg)}}),i.controls.locate.mmpIndex=t.locateIndex),"hidden"!==t.measurePosition&&(i.controls.measure=or().control.polylineMeasure({position:t.measurePosition,unit:"imperial"===t.measureUnit?"landmiles":"metres",showBearings:t.measureShowBearings,distanceShowSameUnit:!1,clearMeasurementsOnStop:t.measureClearMeasurementsOnStop,showClearControl:t.measureShowClearControl,showUnitControl:t.measureShowUnitControl,measureControlTitleOn:mmpL10n.control.measureOn,measureControlTitleOff:mmpL10n.control.measureOff,bearingTextIn:mmpL10n.control.measureIn,bearingTextOut:mmpL10n.control.measureOut,clearControlTitle:mmpL10n.control.measureClear,unitControlTitle:{text:mmpL10n.control.measureChangeUnits,metres:mmpL10n.control.measureMeters,landmiles:mmpL10n.control.measureMiles,nauticalmiles:mmpL10n.control.measureNauticalMiles},tooltipTextFinish:mmpL10n.control.measureFinish+"<br />",tooltipTextDelete:mmpL10n.control.measureDelete,tooltipTextMove:mmpL10n.control.measureMove+"<br />",tooltipTextResume:"<br />"+mmpL10n.control.measureResume,tooltipTextAdd:mmpL10n.control.measureAdd}),i.controls.measure.mmpIndex=t.measureIndex),"hidden"!==t.scalePosition&&(i.controls.scale=or().control.scale({position:t.scalePosition,maxWidth:t.scaleMaxWidth,metric:t.scaleMetric,imperial:t.scaleImperial}),i.controls.scale.mmpIndex=t.scaleIndex),"hidden"!==t.layersPosition&&(Object.keys(i.basemaps).length>1||Object.keys(i.overlays).length)&&(i.controls.layers=or().control.layers(null,null,{position:t.layersPosition,collapsed:"collapsed"===t.layersCollapsed||"collapsed-mobile"===t.layersCollapsed&&or().Browser.mobile}),Object.keys(i.basemaps).forEach((function(t){i.controls.layers.addBaseLayer(i.basemaps[t],t)})),Object.keys(i.overlays).forEach((function(t){i.controls.layers.addOverlay(i.overlays[t],t)})),i.controls.layers.mmpIndex=t.layersIndex),"hidden"!==t.filtersPosition&&"map"===i.type&&Object.keys(t.filtersDetails).length&&!t.filtersAllMarkers&&(i.controls.filters=or().control.filters({mmp:i,position:t.filtersPosition,collapsed:"collapsed"===t.filtersCollapsed||"collapsed-mobile"===t.filtersCollapsed&&or().Browser.mobile,buttons:t.filtersButtons,allText:mmpL10n.control.filtersAll,noneText:mmpL10n.control.filtersNone}),i.controls.filters.mmpIndex=t.filtersIndex),"hidden"!==t.gpxControlPosition&&void 0!==i.gpx.tracks&&i.gpx.tracks.length>1&&(i.controls.gpx=or().control.gpx({mmp:i,collapsed:"collapsed"===t.gpxControlCollapsed||"collapsed-mobile"===t.gpxControlCollapsed&&or().Browser.mobile,position:t.gpxControlPosition}),i.controls.gpx.mmpIndex=t.gpxControlIndex),"hidden"!==t.minimapPosition&&Object.keys(i.minimaps).length){var n=or().tileLayer("");Object.keys(i.basemaps).forEach((function(t){i.map.hasLayer(i.basemaps[t])&&(n=i.minimaps[t])})),i.controls.minimap=new(or().Control.MiniMap)(n,{position:t.minimapPosition,width:t.minimapWidth,height:t.minimapHeight,collapsedWidth:t.minimapCollapsedWidth,collapsedHeight:t.minimapCollapsedHeight,zoomLevelOffset:t.minimapZoomLevelOffset,zoomLevelFixed:t.minimapZoomLevelFixed||null,toggleDisplay:!0,autoToggleDisplay:!1,minimized:"collapsed"===t.minimapMinimized||"collapsed-mobile"===t.minimapMinimized&&or().Browser.mobile,strings:{hideText:mmpL10n.control.minimapHideText,showText:mmpL10n.control.minimapShowText},mapOptions:{attributionControl:!1}}),i.controls.minimap.mmpIndex=t.minimapIndex}var o=[];Object.keys(i.controls).forEach((function(t){o.push(i.controls[t])})),o.sort((function(t,e){return t.mmpIndex-e.mmpIndex}));for(var r=0;r<o.length;r++)o[r].addTo(i.map);Object.keys(i.basemaps).forEach((function(t){var e=i.basemaps[t];i.map.hasLayer(e)&&(e instanceof or().TileLayer.HERE?e._findCopyrightBBox():e instanceof or().TileLayer.TomTom?e._addAttribution():e instanceof pa&&qr._updateMapAttribution({target:i.map}))})),t.attributionCondensed&&(or().DomUtil.removeClass(i.controls.attribution.getContainer(),"leaflet-control-attribution"),or().DomUtil.addClass(i.controls.attribution.getContainer(),"mmp-control-attribution")),void 0!==i.controls.minimap?i.map.on("baselayerchange",i.updateMinimapHandler):i.map.off("baselayerchange",i.updateMinimapHandler),void 0!==i.controls.locate?(i.map.on("locationfound",i.updateLocationHandler),i.map.on("locatedeactivate",i.locateDeactivateHandler),i.settings.locateAutostart&&!i.highlight.id&&i.controls.locate.start()):(i.map.off("locationfound",i.updateLocationHandler),i.map.off("locatedeactivate",i.locateDeactivateHandler)),i.fire("controlsloaded",i.controls)},this.getGpx=function(){var t=i.settings;return t.gpxUrl?new Promise((function(n,o){Da({type:"GET",url:t.gpxUrl}).then((function(t){if(i.gpx=new e,i.gpx.parse(t),!i.gpx.tracks.length){for(var o=0;o<i.gpx.routes.length;o++){var r=i.gpx.routes[o];r.segments=[{points:r.points,extensions:r.extensions,time:r.time,distance:r.distance,elevation:r.elevation}],i.gpx.tracks.push(r)}i.gpx.routes=[]}i.addGpx(),n()})).catch((function(t){i.logError("Error loading GPX ("+t.message+")"),i.showMapModal(mmpL10n.gpx.loadingError,mmpL10n.gpx.loadingErrorMsg),n()}))})):Promise.resolve()},this.addGpx=function(){var t=i.settings;if(void 0!==i.gpxGroup&&"function"==typeof i.gpxGroup.remove&&i.gpxGroup.remove(),i.gpxGroup=or().featureGroup(),i.gpxTracks={},i.map._activeTrack=0,void 0!==i.gpx.tracks&&i.gpx.tracks.length){for(var e=[],n=0;n<i.gpx.tracks.length;n++)for(var o=i.gpx.tracks[n],r=0;r<o.segments.length;r++){var a=o.segments[r];e[n]=or().polyline([],{interactive:!0,smoothFactor:t.gpxTrackSmoothFactor,color:o.extensions.color||a.extensions.color||t.gpxTrackColor,weight:parseInt(o.extensions.weight||a.extensions.weight||t.gpxTrackWeight),opacity:parseFloat(o.extensions.opacity||a.extensions.opacity||t.gpxTrackOpacity)});for(var s=0;s<a.points.length;s++){var l=a.points[s].lat,c=a.points[s].lon;e[n].addLatLng([l,c])}e[n].addTo(i.gpxGroup)}i.gpxTracks=e}i.setTrackIcons(),i.setIntervalMarkers(),i.setTrackMeta(),i.setWaypoints(),i.gpxGroup.addTo(i.map),i.fire("gpxloaded",i.gpxTracks),i.loadChart(),i.addElevationChart()},this.getGpxName=function(t){return!(void 0===i.gpx.tracks[t]||!i.gpx.tracks[t].name)&&i.gpx.tracks[t].name},this.getGpxStartTime=function(t){return!(void 0===i.gpx.tracks[t]||!i.gpx.tracks[t].time.start)&&new Date(i.gpx.tracks[t].time.start).toUTCString()},this.getGpxEndTime=function(t){return!(void 0===i.gpx.tracks[t]||!i.gpx.tracks[t].time.end)&&new Date(i.gpx.tracks[t].time.end).toUTCString()},this.getGpxTimeTotal=function(t,e){return!(void 0===i.gpx.tracks[t]||!i.gpx.tracks[t].time.total)&&Ma(i.gpx.tracks[t].time.total,e)},this.getGpxTimeMoving=function(t,e){return!(void 0===i.gpx.tracks[t]||!i.gpx.tracks[t].time.moving)&&Ma(i.gpx.tracks[t].time.moving,e)},this.getGpxDistance=function(t,e){if(e=e||"metric",void 0===i.gpx.tracks[t]||!i.gpx.tracks[t].distance.total)return!1;switch(e){case"imperial":return(i.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi";case"metric-imperial":return(i.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km ("+(i.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi)";case"imperial-metric":return(i.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi ("+(i.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km)";default:return(i.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km"}},this.getGpxPace=function(t,e,n){if(e=e||"metric",void 0===i.gpx.tracks[t]||!i.gpx.tracks[t].time.moving||!i.gpx.tracks[t].distance.total)return!1;switch(e){case"imperial":return Ma(i.gpx.tracks[t].time.moving/(i.gpx.tracks[t].distance.total/1609.344),n)+"/mi";case"metric-imperial":return Ma(i.gpx.tracks[t].time.moving/(i.gpx.tracks[t].distance.total/1e3),n)+"/km ("+Ma(i.gpx.tracks[t].time.moving/(i.gpx.tracks[t].distance.total/1609.344),n)+"/mi)";case"imperial-metric":return Ma(i.gpx.tracks[t].time.moving/(i.gpx.tracks[t].distance.total/1609.344),n)+"/mi ("+Ma(i.gpx.tracks[t].time.moving/(i.gpx.tracks[t].distance.total/1e3),n)+"/km)";default:return Ma(i.gpx.tracks[t].time.moving/(i.gpx.tracks[t].distance.total/1e3),n)+"/km"}},this.getGpxHeartRate=function(t){return!(void 0===i.gpx.tracks[t]||!i.gpx.tracks[t].heartRate.avg)&&i.gpx.tracks[t].heartRate.avg.toFixed(0)+" bpm"},this.getGpxElevation=function(t,e){if(e=e||"metric",void 0===i.gpx.tracks[t]||!i.gpx.tracks[t].elevation.gain&&!i.gpx.tracks[t].elevation.loss)return!1;var n=i.gpx.tracks[t].elevation.gain-i.gpx.tracks[t].elevation.loss;switch(e){case"imperial":return"+"+(i.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(i.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(n/.3048).toFixed(0)+" ft";case"metric-imperial":return"+"+i.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+i.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+n.toFixed(0)+" m (+"+(i.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(i.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(n/.3048).toFixed(0)+" ft)";case"imperial-metric":return"+"+(i.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(i.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(n/.3048).toFixed(0)+" ft (+"+i.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+i.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+n.toFixed(0)+" m)";default:return"+"+i.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+i.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+n.toFixed(0)+" m"}},this.setTrackStyle=function(){var t=i.settings;Object.keys(i.gpxTracks).forEach((function(e){i.gpxTracks[e].setStyle({color:t.gpxTrackColor,weight:t.gpxTrackWeight,opacity:t.gpxTrackOpacity})}))},this.setTrackIcons=function(){var t=i.settings;void 0!==i.gpx.tracks&&Object.keys(i.gpx.tracks).forEach((function(e){if(void 0!==i.gpx.tracks[e].startIcon&&i.gpx.tracks[e].startIcon&&i.gpx.tracks[e].startIcon.remove(),void 0!==i.gpx.tracks[e].endIcon&&i.gpx.tracks[e].endIcon&&i.gpx.tracks[e].endIcon.remove(),t.gpxShowStartIcon&&(i.gpx.tracks[e].startIcon=or().marker([i.gpx.tracks[e].points[0].lat,i.gpx.tracks[e].points[0].lon],{interactive:!1,icon:or().icon({iconUrl:t.gpxStartIcon?mmpVars.iconsUrl+t.gpxStartIcon:mmpVars.pluginUrl+"images/leaflet/gpx-start.png",iconSize:t.iconSize,iconAnchor:t.iconAnchor,popupAnchor:t.popupAnchor,className:"mmp-gpx-icon mmp-gpx-icon-start"})}).addTo(i.gpxGroup)),t.gpxShowEndIcon){var n=i.gpx.tracks[e].points.length-1;i.gpx.tracks[e].endIcon=or().marker([i.gpx.tracks[e].points[n].lat,i.gpx.tracks[e].points[n].lon],{interactive:!1,icon:or().icon({iconUrl:t.gpxEndIcon?mmpVars.iconsUrl+t.gpxEndIcon:mmpVars.pluginUrl+"images/leaflet/gpx-end.png",iconSize:t.iconSize,iconAnchor:t.iconAnchor,popupAnchor:t.popupAnchor,className:"mmp-gpx-icon mmp-gpx-icon-end"})}).addTo(i.gpxGroup)}}))},this.setIntervalMarkers=function(){var t=i.settings;if(void 0!==i.gpx.tracks&&(Object.keys(i.gpx.tracks).forEach((function(t){if(void 0!==i.gpx.tracks[t].intervalMarkers&&i.gpx.tracks[t].intervalMarkers.length)for(var e=i.gpx.tracks[t].intervalMarkers,n=0;n<e.length;n++)e[n].remove()})),t.gpxIntervalMarkers))for(var e="imperial"===t.gpxMetaUnits||"imperial-metric"===t.gpxMetaUnits?1609.344:1e3,n=i.gpx.tracks,o=0;o<n.length;o++){n[o].intervalMarkers=[];for(var r=1,a=n[o].points,s=0;s<a.length;s++){var l=a[s];if(l.dist>=r*e){var c=or().marker([l.lat,l.lon],{interactive:!1,icon:or().divIcon({className:"mmp-interval-marker",html:"<span>"+r+"</span>"})}).addTo(i.map);n[o].intervalMarkers.push(c),r++}}}},this.setTrackMeta=function(){var t=i.settings;Object.keys(i.gpxTracks).forEach((function(e){if(!t.gpxMeta)return i.gpxTracks[e].closePopup(),void i.gpxTracks[e].unbindPopup();for(var n=or().DomUtil.create("div","mmp-gpx-meta"),o=[{show:t.gpxMetaName,title:mmpL10n.gpx.metaName,value:i.getGpxName(e)},{show:t.gpxMetaStart,title:mmpL10n.gpx.metaStart,value:i.getGpxStartTime(e)},{show:t.gpxMetaEnd,title:mmpL10n.gpx.metaEnd,value:i.getGpxEndTime(e)},{show:t.gpxMetaTotal,title:mmpL10n.gpx.metaTotal,value:i.getGpxTimeTotal(e)},{show:t.gpxMetaMoving,title:mmpL10n.gpx.metaMoving,value:i.getGpxTimeMoving(e)},{show:t.gpxMetaDistance,title:mmpL10n.gpx.metaDistance,value:i.getGpxDistance(e,t.gpxMetaUnits)},{show:t.gpxMetaPace,title:mmpL10n.gpx.metaPace,value:i.getGpxPace(e,t.gpxMetaUnits)},{show:t.gpxMetaHeartRate,title:mmpL10n.gpx.metaHeartRate,value:i.getGpxHeartRate(e)},{show:t.gpxMetaElevation,title:mmpL10n.gpx.metaElevation,value:i.getGpxElevation(e,t.gpxMetaUnits)}],r=0;r<o.length;r++)!o[r].show||t.gpxMetaHideMissing&&!1===o[r].value||(!1===o[r].value&&(o[r].value="N/A"),n.innerHTML+="<strong>"+o[r].title+":</strong> "+o[r].value+"<br />");t.gpxMetaDownload&&(n.innerHTML+='<a href="'+mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+i.settings.gpxUrl+'"><img src="'+mmpVars.pluginUrl+'images/icons/download-gpx.png" /> '+mmpL10n.gpx.metaDownload+"</a><br />"),t.gpxMetaDesc&&i.gpx.tracks[e].desc&&(n.innerHTML&&(n.innerHTML+="<br />"),n.innerHTML+=i.gpx.tracks[e].desc),void 0!==i.gpxTracks[e].getPopup()&&i.gpxTracks[e].getPopup()?i.gpxTracks[e].setPopupContent(n):i.gpxTracks[e].bindPopup(n)}))},this.setWaypoints=function(){var t,e=i.settings;for(t=0;t<i.gpxWaypoints.length;t++)i.gpxWaypoints[t].remove();if(i.gpxWaypoints=[],e.gpxWaypoints&&void 0!==i.gpx.waypoints)for(t=0;t<i.gpx.waypoints.length;t++){var n=or().circleMarker([i.gpx.waypoints[t].lat,i.gpx.waypoints[t].lon],{interactive:!0,radius:e.gpxWaypointsRadius,stroke:e.gpxWaypointsStroke,color:e.gpxWaypointsColor,weight:e.gpxWaypointsWeight,fillColor:e.gpxWaypointsFillColor,fillOpacity:e.gpxWaypointsFillOpacity}).addTo(i.gpxGroup);if(i.gpx.waypoints[t].name&&n.bindTooltip(i.gpx.waypoints[t].name),i.gpx.waypoints[t].desc){var o=or().DomUtil.create("div","mmp-gpx-waypoint");o.innerHTML=i.gpx.waypoints[t].desc,n.bindPopup(o)}i.gpxWaypoints.push(n)}},this.setWaypointStyle=function(){for(var t=i.settings,e=0;e<i.gpxWaypoints.length;e++)i.gpxWaypoints[e].setStyle({radius:t.gpxWaypointsRadius,stroke:t.gpxWaypointsStroke,color:t.gpxWaypointsColor,weight:t.gpxWaypointsWeight,fillColor:t.gpxWaypointsFillColor,fillOpacity:t.gpxWaypointsFillOpacity})},this.generateChartData=function(){var t,e;"imperial"===i.settings.gpxChartUnits||"imperial-metric"===i.settings.gpxChartUnits?(t=1609.433,e=.3048):(t=1e3,e=1);var n=isNaN(parseFloat(i.settings.gpxChartYOffset))?0:parseFloat(i.settings.gpxChartYOffset);return i.gpx.tracks[i.map._activeTrack].points.map((function(i){return{x:i.dist/t,y:i.ele/e+n}}))},this.updateElevationChart=function(t){var e=i.settings;if(i.gpxChart instanceof ro){if(t){var n=i.generateChartData();i.gpxChart.data.datasets[0].data=n,i.gpxChart.options.scales.x.max=n[n.length-1].x}i.gpxChart.data.datasets[0].borderWidth=e.gpxChartLineWidth,i.gpxChart.data.datasets[0].borderColor=e.gpxChartLineColor,i.gpxChart.data.datasets[0].fill=!!e.gpxChartFill&&"origin",i.gpxChart.data.datasets[0].backgroundColor=e.gpxChartFillColor,i.gpxChart.options.scales.y.grid.color=e.gpxChartGridLinesColor,i.gpxChart.options.scales.y.min=isNaN(parseInt(e.gpxChartYMin))?void 0:parseInt(e.gpxChartYMin),i.gpxChart.options.scales.y.max=isNaN(parseInt(e.gpxChartYMax))?void 0:parseInt(e.gpxChartYMax),i.gpxChart.options.scales.y.reverse=e.gpxChartReverseY,i.gpxChart.options.scales.y.ticks.color=e.gpxChartTicksFontColor,i.gpxChart.options.scales.x.grid.color=e.gpxChartGridLinesColor,i.gpxChart.options.scales.x.reverse=e.gpxChartReverseX,i.gpxChart.options.scales.x.ticks.color=e.gpxChartTicksFontColor,i.gpxChart.options.chartArea.backgroundColor=e.gpxChartBgColor,i.gpxChart.options.plugins.tooltip.backgroundColor=e.gpxChartTooltipBgColor,i.gpxChart.options.plugins.tooltip.bodyColor=e.gpxChartTooltipFontColor,i.gpxChart.options.indicator.lineWidth=e.gpxChartIndicatorLineWidth,i.gpxChart.options.indicator.lineColor=e.gpxChartIndicatorLineColor,i.gpxChart.update()}},this.updateElevationChartThrottled=or().Util.throttle(i.updateElevationChart,100,this),this.addElevationChart=function(){var t=i.settings;if(i.settings.gpxChart&&void 0!==i.gpx.tracks&&i.gpx.tracks.length){void 0===i.containers.chartWrap&&i.loadChart();var e=i.generateChartData(),n=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ks(t,e)}(r,t);var e,i,n,o=Js(r);function r(){return Ws(this,r),o.apply(this,arguments)}return e=r,i=[{key:"draw",value:function(){$s(Qs(r.prototype),"draw",this).call(this,arguments);var t=this.chart.config.options.mmp;if(this.chart.tooltip._active&&this.chart.tooltip._active.length&&void 0!==this.chart.scales.y){var e=this.chart.ctx,i=t.map._activeTrack,n=this.chart.tooltip.dataPoints[0],o=n.dataIndex,a=n.element.x,s=this.chart.scales.y.top,l=this.chart.scales.y.bottom;this.chart.config.options.indicator&&this.chart.config.options.indicator.lineWidth&&this.chart.config.options.indicator.lineColor&&(e.save(),e.beginPath(),e.moveTo(a,s),e.lineTo(a,l),e.lineWidth=this.chart.config.options.indicator.lineWidth,e.strokeStyle=this.chart.config.options.indicator.lineColor,e.stroke(),e.restore()),t.settings.gpxChartLocator&&void 0!==t.chartLayers.locator&&(t.chartLayers.locator.setLatLng([t.gpx.tracks[i].points[o].lat,t.gpx.tracks[i].points[o].lon]),t.map.hasLayer(t.chartLayers.locator)||t.chartLayers.locator.addTo(t.map))}else void 0!==t.chartLayers.locator&&t.map.hasLayer(t.chartLayers.locator)&&t.chartLayers.locator.remove()}}],i&&qs(e.prototype,i),n&&qs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}(ji);n.id="scatterIndicator",n.defaults=ji.defaults,ro.register(vo,go,ji,tr,n,Bo,Ko),i.gpxChart=new ro("mmp-gpx-chart-"+i.uid,{plugins:[{beforeDraw:function(t){if(t.config.options.chartArea&&t.config.options.chartArea.backgroundColor){var e=t.ctx,i=t.chartArea;e.save(),e.fillStyle=t.config.options.chartArea.backgroundColor,e.fillRect(i.left,i.top,i.right-i.left,i.bottom-i.top),e.restore()}}},{afterDraw:function(t){if(!t.data.datasets[0].data.filter((function(t){return!isNaN(t.y)})).length){var e=t.ctx,i=t.width,n=t.height;t.clear(),e.save(),e.fillStyle="rgba(0, 0, 0, 1)",e.textAlign="center",e.textBaseline="middle",e.fillText(mmpL10n.gpx.noElevationData,i/2,n/2),e.restore()}}}],type:"scatterIndicator",data:{datasets:[{data:e,pointRadius:0,showLine:!0,spanGaps:!0,lineTension:t.gpxChartLineTension,borderCapStyle:"round",borderWidth:t.gpxChartLineWidth,borderColor:t.gpxChartLineColor,fill:!!t.gpxChartFill&&"origin",backgroundColor:t.gpxChartFillColor}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},layout:{padding:{top:10}},scales:{x:{grid:{color:t.gpxChartGridLinesColor},ticks:{callback:function(e){return Pa(e,!0,t.gpxChartUnits)},autoSkip:!1,color:t.gpxChartTicksFontColor},min:0,max:e[e.length-1].x,reverse:t.gpxChartReverseX},y:{grid:{color:t.gpxChartGridLinesColor},ticks:{callback:function(e){return Pa(e,!1,t.gpxChartUnits)},color:t.gpxChartTicksFontColor},min:isNaN(parseInt(t.gpxChartYMin))?void 0:parseInt(t.gpxChartYMin),max:isNaN(parseInt(t.gpxChartYMax))?void 0:parseInt(t.gpxChartYMax),reverse:t.gpxChartReverseY}},chartArea:{backgroundColor:t.gpxChartBgColor},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){var i=e.dataIndex,n=e.dataset.data[i].y,o=e.dataset.data[i].x;return[mmpL10n.gpx.metaElevation+": "+Pa(n,!1,t.gpxChartUnits),mmpL10n.gpx.metaDistance+": "+Pa(o,!0,t.gpxChartUnits)]}},animation:{duration:250},mode:"index",intersect:!1,displayColors:!1,backgroundColor:t.gpxChartTooltipBgColor,bodyColor:t.gpxChartTooltipFontColor}},indicator:{lineWidth:t.gpxChartIndicatorLineWidth,lineColor:t.gpxChartIndicatorLineColor},mmp:i}}),void 0!==i.chartLayers&&Object.keys(i.chartLayers).forEach((function(t){i.chartLayers[t].remove()})),i.chartLayers={},i.chartLayers.locator=or().circleMarker([0,0]),i.setChartStyle()}},this.setChartStyle=function(){var t=i.settings;t.gpxChart&&void 0!==i.chartLayers&&(Object.keys(i.chartLayers).forEach((function(t){i.chartLayers[t].remove()})),i.chartLayers.locator.setStyle({interactive:!1,radius:t.gpxChartLocatorRadius,stroke:t.gpxChartLocatorStroke,color:t.gpxChartLocatorColor,weight:t.gpxChartLocatorWeight,fillColor:t.gpxChartLocatorFillColor,fillOpacity:t.gpxChartLocatorFillOpacity}))},this.fitVisibleMarkers=function(){var t=i.markerGroup.getBounds();t.isValid()&&i.map.fitBounds(t)},this.fitGeoJson=function(t){var e=i.geoJson[i.id].getLayer(t);if(void 0!==e){var n=e.getBounds();n.isValid()&&i.map.fitBounds(n)}},this.deferredLoadHandler=function(t,e){t.forEach((function(t){if("childList"===t.type&&t.addedNodes.length)for(var n=0;n<t.addedNodes.length;n++){if(t.addedNodes[n].id==="maps-marker-pro-"+i.uid)return e.disconnect(),void i.main()}}))},this.lazyLoadHandler=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.target===i.containers.main&&o.isIntersecting)return e.disconnect(),void i.load()}},this.lazyLoadHandlerFallback=function(){if(!(ka(i.containers.main)&&(t=i.containers.main,e=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,e.left<=o&&e.right>=0&&e.top<=n&&e.bottom>=0)))return setTimeout(i.lazyLoadHandlerFallback,250);var t,e,n,o;i.load()},this.visibilityDetectionHandler=function(t){for(var e=0;e<t.length;e++){t[e].target===i.containers.main&&i.checkInvalidateSize()}},this.visibilityDetectionHandlerFallback=function(){i.checkInvalidateSize(),setTimeout(i.visibilityDetectionHandlerFallback,250)},this.openPopupHandler=function(t){var e=i.settings,n=t.target.getPopup();void 0!==n&&i.loadPopup(t.target).then((function(){i.checkPopupSize(n),e.popupCenterOnMap&&i.centerPopup(n),i.fire("popupopen",n)})).catch((function(){}))},this.openOnHoverHandler=function(t){t.target.openPopup()},this.updateListHandler=function(){i.getList()},this.updateMinimapHandler=function(t){i.controls.minimap.changeLayer(i.minimaps[t.name])},this.updateLocationHandler=function(t){if(!i.list.located){i.list.located=!0;var e=document.getElementById("list-address-"+i.uid);e&&(e.value="",e.dispatchEvent(new Event("keyup"))),i.getList({lat:t.latitude,lng:t.longitude})}},this.locateDeactivateHandler=function(){i.list.located&&(i.list.located=!1,i.getList({lat:null,lng:null}))},this.main()}tl.callbacks=[],tl.init=function(){Object.keys(window.mapsMarkerPro).forEach((function(t){window.mapsMarkerPro[t]instanceof tl||(window.mapsMarkerPro[t]=new tl(window.mapsMarkerPro[t]))}))};var el=tl;i(911),i(686),i(607);or().PM.setOptIn(!0);var il=function(){!function(t){var e=t("#mapSettings").serialize(),i=wp.media({title:mmpAdminL10n.map.chooseGpx,button:{text:mmpAdminL10n.map.choose},library:{type:["application/gpx","application/gpx+xml"]},multiple:!1}),n=new Ia({selector:"#address",beforeSend:function(){t("#geocodingError").empty()},error:function(e){t("#geocodingError").html(e)},selected:function(e,i){mmpAdmin.map.panTo([e,i]),t("#lat").val(e.toFixed(6)),t("#lng").val(i.toFixed(6))},provider:t("#geocodingProvider").val(),typingDelay:mmpAdmin.settings.geocodingTypingDelay,minChars:mmpAdmin.settings.geocodingMinChars});function o(){var e=t("#advancedSettings").prop("checked");t(".mmp-advanced").each((function(){e?t(this).show():t(this).hide()}))}function r(){t("#filtersAllMarkers").prop("checked")?t("#filtersWrap").hide():t("#filtersWrap").show()}function a(){return new Promise((function(t){var e=S();mmpAdmin.loadResources().then((function(){mmpAdmin.geoJson[mmpAdmin.id]=mmpAdmin.parseGeoJson(e),mmpAdmin.drawGeoJson(),mmpAdmin.loadControls(),T(),t()}))}))}function s(t){mmpAdmin.settings.panelColor=t,mmpAdmin.loadPanel()}function l(t){mmpAdmin.settings.listGeocodingColor=t,mmpAdmin.updateCircle()}function c(t){mmpAdmin.settings.listGeocodingFillColor=t,mmpAdmin.updateCircle()}function h(t){mmpAdmin.settings.gpxTrackColor=t,mmpAdmin.setTrackStyle()}function u(t){mmpAdmin.settings.gpxWaypointsColor=t,mmpAdmin.setWaypointStyle()}function p(t){mmpAdmin.settings.gpxWaypointsFillColor=t,mmpAdmin.setWaypointStyle()}function d(t){mmpAdmin.settings.gpxChartLocatorColor=t,mmpAdmin.setChartStyle()}function m(t){mmpAdmin.settings.gpxChartLocatorFillColor=t,mmpAdmin.setChartStyle()}function f(e){var i=mmpAdmin.settings.availableBasemaps[e];if(void 0!==i){var n=t('<li class="mmp-basemap" data-id="'+e+'"></li>'),o=t("<div></div>");n.append(o);var r=t('<input type="hidden" name="basemaps[]" value="'+e+'" />');o.append(r);var a=t('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');o.append(a);var s=t('<input type="radio" name="basemapDefault" value="'+e+'" />');s.on("change",(function(){mmpAdmin.settings.basemapDefault=t(this).val().toString(),mmpAdmin.loadBasemaps(),mmpAdmin.loadControls()})),s.prop("checked",e===mmpAdmin.settings.basemapDefault),o.append(" ").append(s);var l=t('<input type="text" class="mmp-align-middle" value="'+i.name+'" disabled="disabled" />');o.append(" ").append(l);var c=t('<i class="dashicons dashicons-no mmp-remove-basemap"></i>');c.on("click",(function(){t(this).parent().parent().remove(),g(),_()})),o.append(" ").append(c),t("#basemapList").append(n)}}function g(){var e=[];t(".mmp-basemap").each((function(){e.push(t(this).data("id").toString())}));var i=t("#basemapsList");i.empty(),Object.keys(mmpAdmin.settings.availableBasemaps).forEach((function(n){if(-1===e.indexOf(n)){var o=mmpAdmin.settings.availableBasemaps[n],r=t('<option value="'+n+'">'+o.name+"</option>");i.append(r)}})),t("#basemapsList option").length?t("#basemapsAdd").prop("disabled",!1):t("#basemapsAdd").prop("disabled",!0)}function _(){mmpAdmin.settings.basemaps=[],t("#basemapList li").each((function(){var e=t(this).data("id").toString(),i=mmpAdmin.settings.availableBasemaps[e];void 0!==i&&mmpAdmin.settings.basemaps.push(i)})),mmpAdmin.loadBasemaps(),mmpAdmin.loadControls()}function v(e){var i=mmpAdmin.settings.availableOverlays[e];if(void 0!==i){var n=t('<li class="mmp-overlay" data-id="'+e+'"></li>'),o=t("<div></div>");n.append(o);var r=t('<input type="hidden" name="overlays[]" value="'+e+'" />');o.append(r);var a=t('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');o.append(a);var s=t('<input type="checkbox" name="overlaysActive[]" value="'+e+'" />');s.on("change",(function(){mmpAdmin.settings.overlaysActive=[],t('input[name="overlaysActive[]"]:checked').each((function(){mmpAdmin.settings.overlaysActive.push(t(this).val().toString())})),mmpAdmin.loadOverlays(),mmpAdmin.loadControls()})),s.prop("checked",-1!==mmpAdmin.settings.overlaysActive.indexOf(e)),o.append(" ").append(s);var l=t('<input type="text" class="mmp-align-middle" value="'+i.name+'" disabled="disabled" />');o.append(" ").append(l);var c=t('<i class="dashicons dashicons-no mmp-remove-overlay"></i>');c.on("click",(function(){t(this).parent().parent().remove(),y(),b()})),o.append(" ").append(c),t("#overlayList").append(n)}}function y(){var e=[];t(".mmp-overlay").each((function(){e.push(t(this).data("id").toString())}));var i=t("#overlaysList");i.empty(),Object.keys(mmpAdmin.settings.availableOverlays).forEach((function(n){if(-1===e.indexOf(n)){var o=mmpAdmin.settings.availableOverlays[n],r=t('<option value="'+n+'">'+o.name+"</option>");i.append(r)}})),t("#overlaysList option").length?t("#overlaysAdd").prop("disabled",!1):t("#overlaysAdd").prop("disabled",!0)}function b(){mmpAdmin.settings.overlays=[],t("#overlayList li").each((function(){var e=t(this).data("id").toString(),i=mmpAdmin.settings.availableOverlays[e];void 0!==i&&mmpAdmin.settings.overlays.push(i)})),mmpAdmin.loadOverlays(),mmpAdmin.loadControls()}function x(e,i){var n=void 0===i.active||!!i.active,o=i.icon||"",r=i.name||"",s=t('<li class="mmp-filter" data-id="'+e+'"></li>'),l=t("<div></div>");s.append(l);var c=t('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');l.append(c);var h=t('<label class="mmp-align-middle"><div class="switch"><input type="checkbox" name="filtersList['+e+'][active]"'+(n?' checked="checked"':"")+' /><span class="slider"></span></div></label>');t("input",h).on("change",(function(){var e=t(this).closest("li").data("id"),i=t(this).prop("checked");t(".mmp-control-filters-selector[value="+e+"]").prop("checked",i),void 0!==mmpAdmin.groups[e]&&(mmpAdmin.groups[e].active=i),mmpAdmin.drawMarkers(),mmpAdmin.drawGeoJson()})),l.append(" ").append(h);var u=t('<input type="hidden" name="filtersList['+e+'][icon]" value="'+o+'" />');l.append(u);var p=o?mmpVars.iconsUrl+o:mmpVars.pluginUrl+"images/leaflet/marker.png",d=t('<img class="mmp-filter-icon mmp-align-middle" src="'+p+'" />');d.on("click",(function(){t("#iconTarget").val(t(this).parent().parent().data("id")),t("#icons").show()})),l.append(" ").append(d);var m=t('<input type="text" class="mmp-align-middle" name="filtersList['+e+'][name]" value="'+r+'" />');m.on("change",(function(){w(),mmpAdmin.loadControls()})),l.append(" ").append(m);var f=t('<i class="dashicons dashicons-no mmp-remove-filter"></i>');f.on("click",(function(){t(this).parent().parent().remove(),k(),w(),a()})),l.append(" ").append(f),t("#filterList").append(s)}function k(){var e=[];t(".mmp-filter").each((function(){e.push(t(this).data("id"))})),t("#filtersMapList option").each((function(){var i=t(this).val()==mmpAdmin.id||-1!==t.inArray(parseInt(t(this).val()),e);t(this).prop("disabled",i)}));var i=!1;t("#filtersMapList option").each((function(){if(!t(this).prop("disabled"))return i=!0,t(this).prop("selected",!0),!1})),i?t("#filtersAdd").prop("disabled",!1):(t("#filtersAdd").prop("disabled",!0),t("#filtersMapList option").prop("selected",!1)),t("#filtersMapList").select2({width:"300px"})}function L(){mmpAdmin.settings.geocodingControlMarkerIcon=t("#geocodingControlMarkerIcon").val(),void 0!==mmpAdmin.controls.geocoding&&mmpAdmin.controls.geocoding._marker&&mmpAdmin.controls.geocoding._marker.remove()}function w(){var e={};t("#filterList li").each((function(i){var n=t(this).data("id");e[n]={index:i,active:t('input[name="filtersList['+n+'][active]"]').prop("checked"),name:t('input[name="filtersList['+n+'][name]"]').val(),icon:t('input[name="filtersList['+n+'][icon]"]').val()}})),mmpAdmin.settings.filtersDetails=e}function M(){mmpAdmin.settings.gpxStartIcon=t("#gpxStartIcon").val(),mmpAdmin.settings.gpxEndIcon=t("#gpxEndIcon").val(),mmpAdmin.setTrackIcons()}function C(e){void 0!==mmpAdmin.map.pm&&(e?(mmpAdmin.map.pm.addControls({position:"topleft",drawMarker:!1,drawCircleMarker:!1}),mmpAdmin.settings.filtersGeoJson=!1,a().then((function(){mmpAdmin.geoJson[mmpAdmin.id].eachLayer((function(t){t.options.pmIgnore=!1,or().PM.reInitLayer(t)}))}))):(mmpAdmin.map.pm.removeControls(),mmpAdmin.settings.filtersGeoJson=t("#filtersGeoJson").prop("checked"),a()))}function P(){void 0!==mmpAdmin.map.pm&&mmpAdmin.map.pm.setPathOptions({stroke:t("#drawStroke").prop("checked"),color:t("#drawStrokeColor").val(),weight:parseInt(t("#drawStrokeWeight").val()),opacity:parseFloat(t("#drawStrokeOpacity").val()),lineCap:t("#drawLineCap").val(),lineJoin:t("#drawLineJoin").val(),fill:t("#drawFill").prop("checked"),fillColor:t("#drawFillColor").val(),fillOpacity:parseFloat(t("#drawFillOpacity").val()),fillRule:t("#drawFillRule").val()})}function S(){var t={type:"FeatureCollection",features:[]};return mmpAdmin.geoJson[mmpAdmin.id].eachLayer((function(e){try{var i=e.toGeoJSON()}catch(t){return}void 0===i.properties&&(i.properties={}),e instanceof or().Circle?i.properties.radius=e.getRadius():e instanceof or().Rectangle&&(i.properties.rectangle=!0);for(var n=["name","stroke","color","weight","opacity","lineCap","lineJoin","fill","fillColor","fillOpacity","fillRule","popup"],o=0;o<n.length;o++)void 0!==e.options[n[o]]&&(i.properties[n[o]]=e.options[n[o]]);t.features.push(i)})),t}function T(){t("#geoJson").empty(),t("#shapesSelectAll").prop("checked",!1),mmpAdmin.geoJson[mmpAdmin.id].eachLayer(D),t('input[name="shapesSelected[]"]').length?t("#shapesList").show():t("#shapesList").hide(),t('input[name="shapesSelected[]"]').on("change",(function(){var e=!0;t('input[name="shapesSelected[]"]').each((function(i,n){e=e&&t(n).prop("checked")})),t("#shapesSelectAll").prop("checked",e)}))}function A(t){var e=!1;return t instanceof or().Circle?e="Circle":t instanceof or().Rectangle?e="Rectangle":t instanceof or().Polygon?e="Polygon":t instanceof or().Polyline&&(e="Polyline"),e}function D(e){var i=or().stamp(e),n=A(e),o=t('<li class="mmp-shape" data-id="'+i+'"></li>'),r=t("<div></div>");o.append(r);var a=t('<input type="checkbox" name="shapesSelected[]" value="'+i+'" />');r.append(a);var s=t('<img class="mmp-align-middle" src="'+mmpVars.pluginUrl+"images/icons/geojson-"+n.toLowerCase()+'.png" />');r.append(s);var l=t('<input type="text" class="mmp-align-middle" value="'+e.options.name+'" />');l.on("change",(function(){var e=t(this).parent().parent().data("id"),i=mmpAdmin.geoJson[mmpAdmin.id].getLayer(e);void 0!==i&&(i.options.name=t(this).val(),mmpAdmin.updatePopup(i,!0))})),r.append(" ").append(l);var c=t('<img class="mmp-align-middle mmp-clickable" src="'+mmpVars.pluginUrl+'images/icons/jump-to.png" />');c.on("click",(function(){mmpAdmin.fitGeoJson(i)})),r.append(" ").append(c);var h=t('<img class="mmp-align-middle mmp-clickable" src="'+mmpVars.pluginUrl+'images/icons/edit-layer.png" />');h.on("click",(function(){B(),t("#shapeId").val(i);var e=mmpAdmin.geoJson[mmpAdmin.id].getLayer(t("#shapeId").val());void 0!==e&&(I(e.options),t("#shapeBackup").val(JSON.stringify(O())),t("#editShape").appendTo(t(this).parent()),t("#editShape").slideDown(500))})),r.append(" ").append(h),t("#geoJson").append(o)}function E(){var e=mmpAdmin.geoJson[mmpAdmin.id].getLayer(t("#shapeId").val());void 0!==e&&e.setStyle(O())}function O(){return{stroke:t("#editDrawStroke").prop("checked"),color:t("#editDrawStrokeColor").val(),weight:parseInt(t("#editDrawStrokeWeight").val()),opacity:parseFloat(t("#editDrawStrokeOpacity").val()),lineCap:t("#editDrawLineCap").val(),lineJoin:t("#editDrawLineJoin").val(),fill:t("#editDrawFill").prop("checked"),fillColor:t("#editDrawFillColor").val(),fillOpacity:parseFloat(t("#editDrawFillOpacity").val()),fillRule:t("#editDrawFillRule").val(),popup:t("#editDrawPopup").val()}}function I(e){t("#editDrawStroke").prop("checked",e.stroke),t("#editDrawStrokeColor").spectrum("set",e.color),t("#editDrawStrokeWeight").val(e.weight),t("#editDrawStrokeOpacity").val(e.opacity),t('#editDrawLineCap option[value="'+e.lineCap+'"]').prop("selected",!0),t('#editDrawLineJoin option[value="'+e.lineJoin+'"]').prop("selected",!0),t("#editDrawFill").prop("checked",e.fill),t("#editDrawFillColor").spectrum("set",e.fillColor),t("#editDrawFillOpacity").val(e.fillOpacity),t('#editDrawFillRule option[value="'+e.fillRule+'"]').prop("selected",!0),t("#editDrawPopup").val(e.popup)}function B(){var e=t("#shapeBackup").val();e&&(I(JSON.parse(e)),E(),t("#shapeBackup").val(""))}function R(t){void 0!==t[0]&&mmpAdmin.map.fitBounds(t[0].getBounds(),{padding:[10,10]})}i.on("select",(function(){var e=i.state().get("selection").first().toJSON();t("#gpxUrl").val(e.url),t("#updateGpx").trigger("click")})),mmpAdmin.on("settingsloaded",(function(e){t("#filterList").empty(),Object.keys(e.filtersDetails).forEach((function(t){x(t,e.filtersDetails[t])})),k(),w(),t("#basemapList").empty();for(var i=0;i<e.basemaps.length;i++)f(e.basemaps[i].id);g(),t("#overlayList").empty();for(i=0;i<e.overlays.length;i++)v(e.overlays[i].id);y()})),mmpAdmin.on("basemapsloaded",(function(e){t("input[name=basemapDefault]:checked").length||t.each(e,(function(e,i){if(mmpAdmin.map.hasLayer(i))return mmpAdmin.settings.basemapDefault=i.mmp_id,t('input[name=basemapDefault][value="'+i.mmp_id+'"]').prop("checked",!0),!1}))})),mmpAdmin.on("maploaded",(function(){mmpAdmin.map.options.pmIgnore=!1,or().PM.reInitLayer(mmpAdmin.map),mmpAdmin.map.on("moveend",(function(){t("#lat").val(mmpAdmin.map.getCenter().lat.toFixed(6)),t("#lng").val(mmpAdmin.map.getCenter().lng.toFixed(6))})),mmpAdmin.map.on("zoomend",(function(){t("#zoom").val(mmpAdmin.map.getZoom().toFixed(1))})),mmpAdmin.on("controlsloaded",(function(){e=t("#mapSettings").serialize(),t(".leaflet-control-layers-base .leaflet-control-layers-selector").on("change",(function(){t(".mmp-basemap").each((function(e,i){var n=t("input[type=text]",i).val();if(mmpAdmin.map.hasLayer(mmpAdmin.basemaps[n]))return t("input[type=radio]",i).prop("checked",!0),!1}))})),t(".leaflet-control-layers-overlays .leaflet-control-layers-selector").on("change",(function(){t(".mmp-overlay").each((function(e,i){var n=t("input[type=text]",i).val(),o=mmpAdmin.map.hasLayer(mmpAdmin.overlays[n]);t("input[type=checkbox]",i).prop("checked",o)}))})),t(".mmp-control-filters-selector").on("change",(function(){var e=t(this).val(),i=t(this).prop("checked");t('input[name="filtersList['+e+'][active]"]').prop("checked",i)}))})),mmpAdmin.map.on("pm:create",(function(e){e.layer.options.pmIgnore=!1,or().PM.reInitLayer(e.layer),B(),t("#editShape").hide(),t("#editShape").appendTo(t("#mmp-tabDraw-settings"));var i=A(e.layer).toLowerCase();e.layer.options.name=mmpAdminL10n.geoJson[i],mmpAdmin.geoJson[mmpAdmin.id].addLayer(e.layer),T()})),mmpAdmin.map.on("pm:remove",(function(e){B(),t("#editShape").hide(),t("#editShape").appendTo(t("#mmp-tabDraw-settings")),mmpAdmin.geoJson[mmpAdmin.id].removeLayer(e.layer),T()})),mmpAdmin.map.on("pm:cut",(function(e){B(),t("#editShape").hide(),t("#editShape").appendTo(t("#mmp-tabDraw-settings")),mmpAdmin.geoJson[mmpAdmin.id].removeLayer(e.originalLayer),e.layer.options.name=e.originalLayer.options.name||"",mmpAdmin.geoJson[mmpAdmin.id].addLayer(e.layer),T()})),r(),P()})),mmpAdmin.on("geojsonloaded",(function(){T()})),t("#chooseGpx").on("click",(function(){i.open()})),t("#tabMap, #tabLayers, #tabControl, #tabMarker, #tabFilter, #tabList, #tabShare, #tabInteraction, #tabGpx, #tabDraw").on("click",(function(){!function(e){var i=t(".mmp-tablink.active").first().attr("id");t(".mmp-tab").each((function(){t(this).hide()})),t(".mmp-tablink").each((function(){t(this).removeClass("active")})),t("#mmp-"+e.attr("id")+"-settings").show(),e.addClass("active");var n="tabDraw"===e.attr("id");n&&"tabDraw"!==i?C(!0):n||"tabDraw"!==i||C(!1)}(t(this))})),t("#tabMap").trigger("click"),t("#advancedSettings").on("change",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_advanced_map_settings_state",nonce:t("#nonce").val(),state:t("#advancedSettings").prop("checked")?1:0},beforeSend:o})})),t("#deleteMap").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map_direct",nonce:t("#nonce").val(),con:0,id:t("#id").val()}}).done((function(i){if(i.success){if(!confirm(i.data.message))return;t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map_direct",nonce:t("#nonce").val(),con:1,id:i.data.id}}).done((function(i){i.success&&(e=t("#mapSettings").serialize(),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_maps")}))}}))})),t("#panelColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1),t("#panel").prop("checked",!0),t("#panel").trigger("change")},move:function(t){s(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),s(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?s(e.toHexString("hex3")):s(t(this).val())}}),t("#gpxTrackColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){h(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),h(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?h(e.toHexString("hex3")):h(t(this).val())}}),t("#gpxWaypointsColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1),t("#gpxWaypoints").prop("checked",!0),t("#gpxWaypoints").trigger("change"),t("#gpxWaypointsStroke").prop("checked",!0),t("#gpxWaypointsStroke").trigger("change")},move:function(t){u(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),u(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?u(e.toHexString("hex3")):u(t(this).val())}}),t("#gpxWaypointsFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1),t("#gpxWaypoints").prop("checked",!0),t("#gpxWaypoints").trigger("change")},move:function(t){p(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),p(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?p(e.toHexString("hex3")):p(t(this).val())}}),t("#mapSettings").on("submit",(function(i){i.preventDefault(),i.stopPropagation(),t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_map",nonce:t("input[name=nonce]").val(),settings:t("#mapSettings").serialize(),geoJson:JSON.stringify(S())},beforeSend:function(){var e;e=t("#save"),t("#save").prop("disabled",!0),t(e).addClass("mmp-button-loading")}}).done((function(i){i.success?(e=t("#mapSettings").serialize(),"new"===t("#id").val()?(localStorage.setItem("saved",!0),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+i.data.id):t('<div class="notice notice-success"><p>'+i.data.message+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){t(this).remove()}))):t('<div class="notice notice-error"><p>'+i.data+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){t(this).remove()}))})).fail((function(e,i,n){t('<div class="notice notice-error"><p>'+mmpAdminL10n.global.ajaxError+" ("+n+")</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){t(this).remove()}))})).always((function(){var e;e=t("#save"),t(e).removeClass("mmp-button-loading"),t("#save").prop("disabled",!1),t(".mmp-wrap")[0].scrollIntoView()}))})),t("#saveDefaultsLink").on("click",(function(e){e.preventDefault(),e.stopPropagation(),t(this).hide(),t(".mmp-save-defaults").show()})),t("#saveDefaultsConfirm").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_map_defaults",nonce:t("input[name=nonce]").val(),settings:t("#mapSettings").serialize()},beforeSend:function(){t("#saveDefaultsConfirm").prop("disabled",!0),t("#saveDefaultsCancel").prop("disabled",!0),t(".mmp-save-defaults").addClass("mmp-save-defaults-loading")}}).always((function(){t(".mmp-save-defaults").removeClass("mmp-save-defaults-loading"),t(".mmp-save-defaults").fadeOut(500,(function(){t("#saveDefaultsConfirm").prop("disabled",!1),t("#saveDefaultsCancel").prop("disabled",!1),t("#saveDefaultsLink").show()}))}))})),t("#saveDefaultsCancel").on("click",(function(){t(".mmp-save-defaults").hide(),t("#saveDefaultsLink").show()})),t("#fitMarkers").on("click",(function(){mmpAdmin.fitVisibleMarkers()})),t("#name").on("change",(function(){mmpAdmin.settings.name=t(this).val().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),mmpAdmin.loadPanel()})),t("#width, input[name=widthUnit], #height, input[name=heightUnit]").on("change",(function(){t("#widthUnitPct").prop("checked")&&t("#width").val()>100&&t("#width").val(100),mmpAdmin.settings.width=parseInt(t("#width").val()),mmpAdmin.settings.widthUnit=t("input[name=widthUnit]:checked").val(),mmpAdmin.settings.height=parseInt(t("#height").val()),mmpAdmin.settings.heightUnit=t("input[name=heightUnit]:checked").val(),mmpAdmin.setLayout()})),t("#lat, #lng").on("change",(function(){var e=parseFloat(t("#lat").val()),i=parseFloat(t("#lng").val());mmpAdmin.map.panTo([e,i])})),t("#zoom, #minZoom, #maxZoom, #zoomStep").on("change",(function(){mmpAdmin.map.options.minZoom=parseFloat(t("#minZoom").val()),mmpAdmin.map.options.maxZoom=parseFloat(t("#maxZoom").val()),mmpAdmin.map.options.zoomSnap=parseFloat(t("#zoomStep").val()),mmpAdmin.map.options.zoomDelta=parseFloat(t("#zoomStep").val()),mmpAdmin.map.setZoom(parseFloat(t("#zoom").val()))})),t("#maxBounds").on("change",(function(){mmpAdmin.map.setMaxBounds(La(t("#maxBounds").val()))})),t("#restrictView").on("click",(function(){var e;t("#minZoom").val(mmpAdmin.map.getZoom()),mmpAdmin.map.options.minZoom=parseFloat(t("#minZoom").val()),t("#maxBounds").val([(e=mmpAdmin.map.getBounds()).getSouth(),e.getWest(),e.getNorth(),e.getEast()].join(",")),mmpAdmin.map.setMaxBounds(La(t("#maxBounds").val()))})),t("#panel").on("change",(function(){mmpAdmin.settings.panel=t(this).prop("checked"),mmpAdmin.loadPanel()})),t("#panelFs, #panelGpx, #panelGeoJson, #panelKml, #panelGeoRss").on("change",(function(){mmpAdmin.settings[t(this).attr("id")]=t(this).prop("checked"),mmpAdmin.loadPanel()})),t("#basemapList").sortable({handle:".mmp-handle",update:_}),t("#basemapsAdd").on("click",(function(){f(t("#basemapsList").val()),g(),_()})),t("#overlayList").sortable({handle:".mmp-handle",update:b}),t("#overlaysAdd").on("click",(function(){v(t("#overlaysList").val()),y(),b()})),t("input[name=attributionPosition], #attributionIndex, #attributionCondensed").on("change",(function(){mmpAdmin.settings.attributionPosition=t("input[name=attributionPosition]:checked").val(),mmpAdmin.settings.attributionIndex=t("#attributionIndex").val(),mmpAdmin.settings.attributionCondensed=t("#attributionCondensed").prop("checked"),mmpAdmin.loadControls()})),t("input[name=geocodingControlPosition], #geocodingControlIndex, #geocodingControlCollapsed").on("change",(function(){mmpAdmin.settings.geocodingControlPosition=t("input[name=geocodingControlPosition]:checked").val(),mmpAdmin.settings.geocodingControlIndex=t("#geocodingControlIndex").val(),mmpAdmin.settings.geocodingControlCollapsed=t("#geocodingControlCollapsed").val(),void 0!==mmpAdmin.controls.geocoding&&mmpAdmin.controls.geocoding._marker&&mmpAdmin.controls.geocoding._marker.remove(),mmpAdmin.loadControls()})),t("#geocodingControlShowMarker").on("change",(function(){mmpAdmin.settings.geocodingControlShowMarker=t("#geocodingControlShowMarker").prop("checked"),L(),mmpAdmin.loadControls()})),t(".mmp-geocoding-control-icon").on("click",(function(){t("#iconTarget").val("geocoding-control"),t("#icons").show()})),t("input[name=zoomControlPosition], #zoomControlIndex").on("change",(function(){mmpAdmin.settings.zoomControlPosition=t("input[name=zoomControlPosition]:checked").val(),mmpAdmin.settings.zoomControlIndex=t("#zoomControlIndex").val(),mmpAdmin.loadControls()})),t("input[name=fullscreenPosition], #fullscreenIndex").on("change",(function(){mmpAdmin.settings.fullscreenPosition=t("input[name=fullscreenPosition]:checked").val(),mmpAdmin.settings.fullscreenIndex=t("#fullscreenIndex").val(),mmpAdmin.loadControls()})),t("input[name=resetPosition], #resetIndex, #resetOnDemand").on("change",(function(){mmpAdmin.settings.resetPosition=t("input[name=resetPosition]:checked").val(),mmpAdmin.settings.resetIndex=t("#resetIndex").val(),mmpAdmin.settings.resetOnDemand=t("#resetOnDemand").prop("checked"),mmpAdmin.loadControls()})),t("input[name=locatePosition], #locateIndex").on("change",(function(){mmpAdmin.settings.locatePosition=t("input[name=locatePosition]:checked").val(),mmpAdmin.settings.locateIndex=t("#locateIndex").val(),mmpAdmin.loadControls()})),t("input[name=measurePosition], #measureIndex").on("change",(function(){mmpAdmin.settings.measurePosition=t("input[name=measurePosition]:checked").val(),mmpAdmin.settings.measureIndex=t("#measureIndex").val(),void 0!==mmpAdmin.controls.measure&&mmpAdmin.controls.measure._clearAllMeasurements(),mmpAdmin.loadControls()})),t("#measureUnit, #measureShowBearings, #measureClearMeasurementsOnStop, #measureShowClearControl, #measureShowUnitControl").on("change",(function(){mmpAdmin.settings.measureUnit=t("#measureUnit").val(),mmpAdmin.settings.measureShowBearings=t("#measureShowBearings").prop("checked"),mmpAdmin.settings.measureClearMeasurementsOnStop=t("#measureClearMeasurementsOnStop").prop("checked"),mmpAdmin.settings.measureShowClearControl=t("#measureShowClearControl").prop("checked"),mmpAdmin.settings.measureShowUnitControl=t("#measureShowUnitControl").prop("checked"),void 0!==mmpAdmin.controls.measure&&mmpAdmin.controls.measure._clearAllMeasurements(),mmpAdmin.loadControls()})),t("input[name=scalePosition], #scaleIndex").on("change",(function(){mmpAdmin.settings.scalePosition=t("input[name=scalePosition]:checked").val(),mmpAdmin.settings.scaleIndex=t("#scaleIndex").val(),mmpAdmin.loadControls()})),t("#scaleMaxWidth, #scaleMetric, #scaleImperial").on("change",(function(){mmpAdmin.settings.scaleMaxWidth=t("#scaleMaxWidth").val(),mmpAdmin.settings.scaleMetric=t("#scaleMetric").prop("checked"),mmpAdmin.settings.scaleImperial=t("#scaleImperial").prop("checked"),mmpAdmin.loadControls()})),t("input[name=layersPosition], #layersIndex, #layersCollapsed").on("change",(function(){mmpAdmin.settings.layersPosition=t("input[name=layersPosition]:checked").val(),mmpAdmin.settings.layersIndex=t("#layersIndex").val(),mmpAdmin.settings.layersCollapsed=t("#layersCollapsed").val(),mmpAdmin.loadControls()})),t("input[name=filtersPosition], #filtersIndex, #filtersCollapsed, #filtersOrderBy, #filtersSortOrder").on("change",(function(){t("#filtersSortOrder").prop("disabled","custom"===t("#filtersOrderBy").val()),mmpAdmin.settings.filtersPosition=t("input[name=filtersPosition]:checked").val(),mmpAdmin.settings.filtersIndex=t("#filtersIndex").val(),mmpAdmin.settings.filtersCollapsed=t("#filtersCollapsed").val(),mmpAdmin.settings.filtersOrderBy=t("#filtersOrderBy").val(),mmpAdmin.settings.filtersSortOrder=t("#filtersSortOrder").val(),mmpAdmin.loadControls()})),t("input[name=gpxControlPosition], #gpxControlIndex, #gpxControlCollapsed").on("change",(function(){mmpAdmin.settings.gpxControlPosition=t("input[name=gpxControlPosition]:checked").val(),mmpAdmin.settings.gpxControlIndex=t("#gpxControlIndex").val(),mmpAdmin.settings.gpxControlCollapsed=t("#gpxControlCollapsed").val(),mmpAdmin.loadControls()})),t("#filtersButtons, #filtersIcon, #filtersName, #filtersCount").on("change",(function(){mmpAdmin.settings[t(this).attr("id")]=t(this).prop("checked"),mmpAdmin.loadControls()})),t("input[name=minimapPosition], #minimapIndex, #minimapWidth, #minimapHeight, #minimapCollapsedWidth, #minimapCollapsedHeight, #minimapZoomLevelOffset, #minimapZoomLevelFixed, #minimapMinimized").on("change",(function(){mmpAdmin.settings.minimapPosition=t("input[name=minimapPosition]:checked").val(),mmpAdmin.settings.minimapIndex=t("#minimapIndex").val(),mmpAdmin.settings.minimapWidth=t("#minimapWidth").val(),mmpAdmin.settings.minimapHeight=t("#minimapHeight").val(),mmpAdmin.settings.minimapCollapsedWidth=t("#minimapCollapsedWidth").val(),mmpAdmin.settings.minimapCollapsedHeight=t("#minimapCollapsedHeight").val(),mmpAdmin.settings.minimapZoomLevelOffset=parseFloat(t("#minimapZoomLevelOffset").val()),mmpAdmin.settings.minimapZoomLevelFixed=parseFloat(t("#minimapZoomLevelFixed").val())||null,mmpAdmin.settings.minimapMinimized=t("#minimapMinimized").val(),mmpAdmin.loadControls()})),t("#filtersAllMarkers").on("change",(function(){mmpAdmin.settings.filtersAllMarkers=t(this).prop("checked"),r(),a()})),t("#filtersGeoJson").on("change",(function(){mmpAdmin.settings.filtersGeoJson=t(this).prop("checked"),a()})),t("#filterList").sortable({handle:".mmp-handle",update:function(){w(),mmpAdmin.loadControls()}}),t(".mmp-gpx-start-icon").on("click",(function(){t("#iconTarget").val("gpx-start"),t("#icons").show()})),t(".mmp-gpx-end-icon").on("click",(function(){t("#iconTarget").val("gpx-end"),t("#icons").show()})),t("#iconsList img").on("click",(function(){var e=t("#iconTarget").val(),i=t(this).attr("src"),n=t(this).data("icon");"gpx-start"===e?(t("#gpxStartIcon").val(n),t(".mmp-gpx-start-icon").attr("src",i),M()):"gpx-end"===e?(t("#gpxEndIcon").val(n),t(".mmp-gpx-end-icon").attr("src",i),M()):"geocoding-control"===e?(t("#geocodingControlMarkerIcon").val(n),t(".mmp-geocoding-control-icon").attr("src",i),L(),mmpAdmin.loadControls()):(t('input[name="filtersList['+e+'][icon]"]').val(n),t('.mmp-filter[data-id="'+e+'"] .mmp-filter-icon').attr("src",i),w(),mmpAdmin.loadControls()),t("#icons").hide()})),t("#filtersAdd").on("click",(function(){var e=t("#filtersMapList option:checked").text().replace(/\[(.+)\] /,"").replace(/ \((.+)\)$/,"");x(t("#filtersMapList").val(),{name:e}),k(),w(),a()})),k(),t(".mmp-remove-filter").on("click",(function(){t(this).parent().parent().remove(),k(),w()})),t("#markerOpacity").on("change",(function(){Object.keys(mmpAdmin.markers).forEach((function(e){mmpAdmin.markers[e].setOpacity(parseFloat(t("#markerOpacity").val()))}))})),t("#tooltip").on("change",(function(){var e=t(this).prop("checked");Object.keys(mmpAdmin.markers).forEach((function(t){mmpAdmin.markers[t].unbindTooltip(),e&&void 0!==mmpAdmin.tooltips[t]&&mmpAdmin.markers[t].bindTooltip(mmpAdmin.tooltips[t],mmpAdmin.tooltip)}))})),t("#tooltipDirection, #tooltipPermanent, #tooltipSticky, #tooltipOpacity").on("change",(function(){mmpAdmin.tooltip.direction=t("#tooltipDirection").val(),mmpAdmin.tooltip.permanent=t("#tooltipPermanent").prop("checked"),mmpAdmin.tooltip.sticky=t("#tooltipSticky").prop("checked"),mmpAdmin.tooltip.opacity=parseFloat(t("#tooltipOpacity").val()),t("#tooltip").trigger("change")})),t("#popupCenterOnMap, #popupMarkername, #popupAddress, #popupCoordinates, #popupDirections, #popupShare, #popupMinWidth, #popupMaxWidth, #popupMaxHeight").on("change",(function(){mmpAdmin.settings.popupCenterOnMap=t("#popupCenterOnMap").prop("checked"),mmpAdmin.settings.popupMarkername=t("#popupMarkername").prop("checked"),mmpAdmin.settings.popupAddress=t("#popupAddress").prop("checked"),mmpAdmin.settings.popupCoordinates=t("#popupCoordinates").prop("checked"),mmpAdmin.settings.popupDirections=t("#popupDirections").prop("checked"),mmpAdmin.settings.popupShare=t("#popupShare").prop("checked"),mmpAdmin.settings.popupMinWidth=parseInt(t("#popupMinWidth").val()),mmpAdmin.settings.popupMaxWidth=parseInt(t("#popupMaxWidth").val()),mmpAdmin.settings.popupMaxHeight=parseInt(t("#popupMaxHeight").val()),mmpAdmin.updatePopups()})),t("#showCoverageOnHover, #spiderfyDistanceMultiplier, #spiderfyOnEveryZoom").on("change",(function(){mmpAdmin.settings.clustering&&(mmpAdmin.markerGroup.remove(),mmpAdmin.markerGroup.options.showCoverageOnHover=t("#showCoverageOnHover").prop("checked"),mmpAdmin.markerGroup.options.spiderfyDistanceMultiplier=parseFloat(t("#spiderfyDistanceMultiplier").val()),mmpAdmin.markerGroup.options.spiderfyOnEveryZoom=t("#spiderfyOnEveryZoom").prop("checked"),mmpAdmin.markerGroup.addTo(mmpAdmin.map))})),t("#list, #listWidth, #listBreakpoint").on("change",(function(){var e=mmpAdmin.settings.list,i=parseInt(t("#list").val());mmpAdmin.settings.list=i;var n=parseInt(t("#listWidth").val());mmpAdmin.settings.listWidth=n,mmpAdmin.containers.list&&(mmpAdmin.containers.list.style.flexBasis=n+"px"),mmpAdmin.settings.listBreakpoint=parseInt(t("#listBreakpoint").val()),mmpAdmin.setLayout(),(0===e&&i>0||e>0&&0===i)&&(mmpAdmin.loadList(),mmpAdmin.getList(),mmpAdmin.setLayout())})),t("#listSearch, #listIcon, #listName, #listDate, #listPopup, #listAddress, #listCoordinates, #listDistance").on("change",(function(){mmpAdmin.settings[t(this).attr("id")]=t(this).prop("checked"),mmpAdmin.loadList(),mmpAdmin.getList()})),t("#listDateType, #listDateFormat").on("change",(function(){mmpAdmin.settings.listDateType=t("#listDateType").val(),mmpAdmin.settings.listDateFormat=t("#listDateFormat").val(),mmpAdmin.loadList(),mmpAdmin.getList()})),t("#listDir, #listFs, #listShare").on("change",(function(){mmpAdmin.settings.listDir=t("#listDir").prop("checked"),mmpAdmin.settings.listFs=t("#listFs").prop("checked"),mmpAdmin.settings.listShare=t("#listShare").prop("checked"),mmpAdmin.loadList(),mmpAdmin.getList()})),t("#listDistanceUnit, #listDistancePrecision, #listOrderBy, #listSortOrder, #listLimit, #listAction").on("change",(function(){mmpAdmin.settings.listDistanceUnit=t("#listDistanceUnit").val(),mmpAdmin.settings.listDistancePrecision=parseInt(t("#listDistancePrecision").val()),mmpAdmin.settings.listOrderBy=t("#listOrderBy").val(),mmpAdmin.settings.listSortOrder=t("#listSortOrder").val(),mmpAdmin.settings.listLimit=parseInt(t("#listLimit").val()),mmpAdmin.settings.listAction=t("#listAction").val(),mmpAdmin.loadList(),mmpAdmin.getList()})),t("#listOrderById, #listOrderByName, #listOrderByAddress, #listOrderByDistance, #listOrderByIcon, #listOrderByCreated, #listOrderByUpdated").on("change",(function(){mmpAdmin.settings[t(this).attr("id")]=t(this).prop("checked"),mmpAdmin.loadList(),mmpAdmin.getList()})),t("#listLocation").on("change",(function(){mmpAdmin.settings.listLocation=t(this).prop("checked"),mmpAdmin.loadList(),mmpAdmin.getList()})),t("#listGeocodingZoom").on("change",(function(){mmpAdmin.settings.listGeocodingZoom=parseFloat(t(this).val())})),t("#listGeocodingDrawCircle").on("change",(function(){mmpAdmin.settings.listGeocodingDrawCircle=t(this).prop("checked"),mmpAdmin.updateCircle()})),t("#listGeocodingStroke").on("change",(function(){mmpAdmin.settings.listGeocodingStroke=t(this).prop("checked"),mmpAdmin.updateCircle()})),t("#listGeocodingWeight").on("change",(function(){mmpAdmin.settings.listGeocodingWeight=parseInt(t(this).val()),mmpAdmin.updateCircle()})),t("#listGeocodingColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){l(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),l(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?l(e.toHexString("hex3")):l(t(this).val())}}),t("#listGeocodingFill").on("change",(function(){mmpAdmin.settings.listGeocodingFill=t(this).prop("checked"),mmpAdmin.updateCircle()})),t("#listGeocodingFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){c(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),c(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?c(e.toHexString("hex3")):c(t(this).val())}}),t("#listGeocodingFillOpacity").on("change",(function(){mmpAdmin.settings.listGeocodingFillOpacity=parseFloat(t(this).val()),mmpAdmin.updateCircle()})),t("#shareUrl, #shareText, #shareFacebook, #shareTwitter, #shareLinkedIn, #shareWhatsApp, #shareEmail").on("change",(function(){mmpAdmin.settings.shareUrl=t("#shareUrl").val(),mmpAdmin.settings.shareText=t("#shareText").val(),mmpAdmin.settings.popupShare=t("#popupShare").prop("checked"),mmpAdmin.settings.listShare=t("#listShare").prop("checked"),mmpAdmin.settings.shareFacebook=t("#shareFacebook").prop("checked"),mmpAdmin.settings.shareTwitter=t("#shareTwitter").prop("checked"),mmpAdmin.settings.shareLinkedIn=t("#shareLinkedIn").prop("checked"),mmpAdmin.settings.shareWhatsApp=t("#shareWhatsApp").prop("checked"),mmpAdmin.settings.shareEmail=t("#shareEmail").prop("checked")})),t("#responsive").on("change",(function(){mmpAdmin.settings.responsive=t(this).prop("checked"),mmpAdmin.setLayout()})),t("#boxZoom").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.boxZoom.enable():mmpAdmin.map.boxZoom.disable()})),t("#doubleClickZoom").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.doubleClickZoom.enable():mmpAdmin.map.doubleClickZoom.disable()})),t("#dragging").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.dragging.enable():mmpAdmin.map.dragging.disable()})),t("#inertia, #inertiaDeceleration, #inertiaMaxSpeed").on("change",(function(){mmpAdmin.map.options.inertia=t("#inertia").prop("checked"),mmpAdmin.map.options.inertiaDeceleration=parseInt(t("#inertiaDeceleration").val()),mmpAdmin.map.options.inertiaMaxSpeed=parseInt(t("#inertiaMaxSpeed").val())})),t("#keyboard").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.keyboard.enable():mmpAdmin.map.keyboard.disable()})),t("#scrollWheelZoom").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.scrollWheelZoom.enable():mmpAdmin.map.scrollWheelZoom.disable()})),t("#touchZoom").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.touchZoom.enable():mmpAdmin.map.touchZoom.disable()})),t("#updateGpx").on("click",(function(){var e=t("#gpxUrl").val();mmpAdmin.settings.gpxUrl=e,e?(mmpAdmin.on("gpxloaded",R),mmpAdmin.getGpx().then(mmpAdmin.loadControls)):(mmpAdmin.off("gpxloaded",R),mmpAdmin.gpx={},mmpAdmin.addGpx(),mmpAdmin.loadControls())})),t("#gpxShowStartIcon, #gpxShowEndIcon").on("change",(function(){mmpAdmin.settings.gpxShowStartIcon=t("#gpxShowStartIcon").prop("checked"),mmpAdmin.settings.gpxShowEndIcon=t("#gpxShowEndIcon").prop("checked"),mmpAdmin.setTrackIcons()})),t("#gpxIntervalMarkers").on("change",(function(){mmpAdmin.settings.gpxIntervalMarkers=t(this).prop("checked"),mmpAdmin.setIntervalMarkers()})),t("#gpxTrackWeight").on("change",(function(){mmpAdmin.settings.gpxTrackWeight=parseInt(t(this).val()),mmpAdmin.setTrackStyle()})),t("#gpxTrackOpacity").on("change",(function(){mmpAdmin.settings.gpxTrackOpacity=parseFloat(t(this).val()),mmpAdmin.setTrackStyle()})),t("#gpxMeta, #gpxMetaUnits, #gpxMetaHideMissing").on("change",(function(){mmpAdmin.settings.gpxMeta=t("#gpxMeta").prop("checked"),mmpAdmin.settings.gpxMetaUnits=t("#gpxMetaUnits").val(),mmpAdmin.settings.gpxMetaHideMissing=t("#gpxMetaHideMissing").prop("checked"),mmpAdmin.setTrackMeta()})),t("#gpxMetaName, #gpxMetaDesc, #gpxMetaStart, #gpxMetaEnd, #gpxMetaTotal, #gpxMetaMoving, #gpxMetaDistance, #gpxMetaPace, #gpxMetaHeartRate, #gpxMetaElevation, #gpxMetaDownload").on("change",(function(){mmpAdmin.settings[t(this).attr("id")]=t(this).prop("checked"),mmpAdmin.setTrackMeta()})),t("#gpxWaypoints").on("change",(function(){mmpAdmin.settings.gpxWaypoints=t(this).prop("checked"),mmpAdmin.setWaypoints()})),t("#gpxWaypointsRadius").on("change",(function(){mmpAdmin.settings.gpxWaypointsRadius=parseInt(t(this).val()),mmpAdmin.setWaypointStyle()})),t("#gpxWaypointsStroke").on("change",(function(){mmpAdmin.settings.gpxWaypointsStroke=t(this).prop("checked"),mmpAdmin.setWaypointStyle()})),t("#gpxWaypointsWeight").on("change",(function(){mmpAdmin.settings.gpxWaypointsWeight=parseInt(t(this).val()),mmpAdmin.setWaypointStyle()})),t("#gpxWaypointsFillOpacity").on("change",(function(){mmpAdmin.settings.gpxWaypointsFillOpacity=parseFloat(t(this).val()),mmpAdmin.setWaypointStyle()})),t("#gpxChart").on("change",(function(){mmpAdmin.settings.gpxChart=t(this).prop("checked"),mmpAdmin.loadChart(),mmpAdmin.addElevationChart()})),t("#gpxChartUnits, #gpxChartYOffset").on("change",(function(){mmpAdmin.settings.gpxChartUnits=t(this).val(),mmpAdmin.settings.gpxChartYOffset=t("#gpxChartYOffset").val(),mmpAdmin.updateElevationChart(!0)})),t("#gpxChartHeight").on("change",(function(){var e=parseInt(t(this).val());mmpAdmin.settings.gpxChartHeight=e,mmpAdmin.containers.chartWrap&&(mmpAdmin.containers.chartWrap.style.height=e+"px")})),t("#gpxChartReverseX, #gpxChartReverseY").on("change",(function(){mmpAdmin.settings.gpxChartReverseX=t("#gpxChartReverseX").prop("checked"),mmpAdmin.settings.gpxChartReverseY=t("#gpxChartReverseY").prop("checked"),mmpAdmin.updateElevationChart()})),t("#gpxChartYMin, #gpxChartYMax").on("change",(function(){mmpAdmin.settings.gpxChartYMin=t("#gpxChartYMin").val(),mmpAdmin.settings.gpxChartYMax=t("#gpxChartYMax").val(),mmpAdmin.updateElevationChart()})),t("#gpxChartBgColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartBgColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartBgColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartBgColor=e.toRgbString():mmpAdmin.settings.gpxChartBgColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartGridLinesColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartGridLinesColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartGridLinesColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartGridLinesColor=e.toRgbString():mmpAdmin.settings.gpxChartGridLinesColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartTicksFontColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartTicksFontColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartTicksFontColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartTicksFontColor=e.toRgbString():mmpAdmin.settings.gpxChartTicksFontColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartLineWidth").on("change",(function(){mmpAdmin.settings.gpxChartLineWidth=parseInt(t(this).val()),mmpAdmin.updateElevationChartThrottled()})),t("#gpxChartLineColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartLineColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartLineColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartLineColor=e.toRgbString():mmpAdmin.settings.gpxChartLineColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartFill").on("change",(function(){mmpAdmin.settings.gpxChartFill=t(this).prop("checked"),mmpAdmin.updateElevationChartThrottled()})),t("#gpxChartFillColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartFillColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartFillColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartFillColor=e.toRgbString():mmpAdmin.settings.gpxChartFillColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartTooltipBgColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartTooltipBgColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartTooltipBgColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartTooltipBgColor=e.toRgbString():mmpAdmin.settings.gpxChartTooltipBgColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartTooltipFontColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartTooltipFontColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartTooltipFontColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartTooltipFontColor=e.toRgbString():mmpAdmin.settings.gpxChartTooltipFontColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartIndicatorLineWidth").on("change",(function(){mmpAdmin.settings.gpxChartIndicatorLineWidth=parseInt(t(this).val()),mmpAdmin.updateElevationChartThrottled()})),t("#gpxChartIndicatorLineColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartIndicatorLineColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartIndicatorLineColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartIndicatorLineColor=e.toRgbString():mmpAdmin.settings.gpxChartIndicatorLineColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartLocator").on("change",(function(){mmpAdmin.settings.gpxChartLocator=t(this).prop("checked")})),t("#gpxChartLocatorRadius").on("change",(function(){mmpAdmin.settings.gpxChartLocatorRadius=parseInt(t(this).val()),mmpAdmin.setChartStyle()})),t("#gpxChartLocatorStroke").on("change",(function(){mmpAdmin.settings.gpxChartLocatorStroke=t(this).prop("checked"),mmpAdmin.setChartStyle()})),t("#gpxChartLocatorColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){d(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),d(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?d(e.toHexString("hex3")):d(t(this).val())}}),t("#gpxChartLocatorWeight").on("change",(function(){mmpAdmin.settings.gpxChartLocatorWeight=parseInt(t(this).val()),mmpAdmin.setChartStyle()})),t("#gpxChartLocatorFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){m(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),m(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?m(e.toHexString("hex3")):m(t(this).val())}}),t("#gpxChartLocatorFillOpacity").on("change",(function(){mmpAdmin.settings.gpxChartLocatorFillOpacity=parseFloat(t(this).val()),mmpAdmin.setChartStyle()})),t("#addGeoJson").on("click",(function(){t("#geoJsonModal").slideDown(500)})),t("#geoJsonCancel").on("click",(function(){t(".mmp-json-error").remove(),t("#geoJsonText").val(""),t("#geoJsonModal").slideUp(500)})),t("#geoJsonSave").on("click",(function(){t(".mmp-json-error").remove();var e=Sa(t("#geoJsonText").val());if(e instanceof Error||!1===e)t('<div class="notice notice-error mmp-json-error"><p>'+mmpAdminL10n.map.invalidJson+"</p></div>").prependTo("#geoJsonModal").delay(5e3).fadeOut(500,(function(){t(this).remove()}));else{try{!function(t){or().geoJSON(t,{pointToLayer:function(t,e){if(t.properties.radius)return or().circle(e,t.properties.radius)},style:function(t){for(var e=O(),i=["stroke","color","weight","opacity","lineCap","lineJoin","fill","fillColor","fillOpacity","fillRule"],n=0;n<i.length;n++){var o=i[n];if(void 0!==t.properties[o])switch(o){case"weight":e[o]=parseInt(t.properties[o]);break;case"opacity":case"fillOpacity":e[o]=parseFloat(t.properties[o]);break;default:e[o]=t.properties[o]}}return e},onEachFeature:function(t,e){var i=A(e);!1!==i&&(e instanceof or().Polyline&&!t.geometry.coordinates.length||(!(e instanceof or().Polygon)||t.geometry.coordinates.length&&t.geometry.coordinates[0].length&&null!==t.geometry.coordinates[0][0])&&(e.options.name=t.properties.name||mmpAdminL10n.geoJson[i.toLowerCase()],e.options.popup=t.properties.popup||"",e.addTo(mmpAdmin.map),e.addTo(mmpAdmin.geoJson[mmpAdmin.id])))}}),T()}(e)}catch(e){return void t('<div class="notice notice-error mmp-json-error"><p>'+mmpAdminL10n.map.invalidGeoJson+"</p></div>").prependTo("#geoJsonModal").delay(5e3).fadeOut(500,(function(){t(this).remove()}))}t("#geoJsonText").val(""),t("#geoJsonModal").slideUp(500)}})),t("#drawStrokeColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t("#drawStroke").prop("checked",!0),t("#drawStroke").trigger("change")},change:function(e){t("#drawStrokeColor").val(e.toHexString("hex3")),P()}}),t("#editDrawStrokeColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t("#editDrawStroke").prop("checked",!0),t("#editDrawStroke").trigger("change")},move:function(e){t("#editDrawStrokeColor").val(e.toHexString("hex3")),E()},change:function(e){t("#editDrawStrokeColor").val(e.toHexString("hex3")),E()},hide:function(e){t("#editDrawStrokeColor").val(e.toHexString("hex3")),E()}}),t("#drawFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t("#drawFill").prop("checked",!0),t("#drawFill").trigger("change")},change:function(e){t("#drawFillColor").val(e.toHexString("hex3")),P()}}),t("#editDrawFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t("#editDrawFill").prop("checked",!0),t("#editDrawFill").trigger("change")},move:function(e){t("#editDrawFillColor").val(e.toHexString("hex3")),E()},change:function(e){t("#editDrawFillColor").val(e.toHexString("hex3")),E()},hide:function(e){t("#editDrawFillColor").val(e.toHexString("hex3")),E()}}),t("#drawStroke, #drawStrokeWeight, #drawStrokeOpacity, #drawLineCap, #drawLineJoin, #drawFill, #drawFillOpacity, #drawFillRule").on("change",(function(){P()})),t("#editDrawStroke, #editDrawStrokeWeight, #editDrawStrokeOpacity, #editDrawLineCap, #editDrawLineJoin, #editDrawFill, #editDrawFillOpacity, #editDrawFillRule").on("change",(function(){E()})),t("#editDrawCancel").on("click",(function(){B(),t("#editShape").slideUp(500)})),t("#editDrawSave").on("click",(function(){E();var e=mmpAdmin.geoJson[mmpAdmin.id].getLayer(t("#shapeId").val());void 0!==e&&(e.options.popup=t("#editDrawPopup").val(),mmpAdmin.updatePopup(e,!0)),t("#shapeBackup").val(""),t("#editShape").slideUp(500)})),t("#editDrawDelete").on("click",(function(){B();var e=mmpAdmin.geoJson[mmpAdmin.id].getLayer(t("#shapeId").val());void 0!==e&&(t("#editShape").hide(),t("#editShape").appendTo(t("#mmp-tabDraw-settings")),mmpAdmin.geoJson[mmpAdmin.id].removeLayer(e),T())})),t("#shapesSelectAll").on("click",(function(){t('input[name="shapesSelected[]"]').each((function(e,i){t(i).prop("checked",t("#shapesSelectAll").prop("checked"))}))})),t("#shapesDeleteSelected").on("click",(function(){B(),t("#editShape").hide(),t("#editShape").appendTo(t("#mmp-tabDraw-settings")),t('input[name="shapesSelected[]"]:checked').each((function(e,i){mmpAdmin.geoJson[mmpAdmin.id].removeLayer(parseInt(t(i).val()))})),T()})),t(".mmp-admin-modal, .mmp-admin-modal-close").on("click",(function(e){e.target===this&&t("#icons").hide()})),t("#geocodingProvider").on("change",(function(){n.provider=t("#geocodingProvider").val(),n.autocomplete.start(),n.autocomplete.input.focus()})),t(".mmp-shortcode").on("click",(function(){t(this).trigger("select")})),o(),n.init(),window.onbeforeunload=function(){return e!==t("#mapSettings").serialize()?"":null},localStorage.getItem("saved")&&(t('<div class="notice notice-success"><p>'+mmpAdminL10n.map.saved+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){t(this).remove()})),localStorage.removeItem("saved")),t("#save").prop("disabled",!1)}(jQuery)},nl=i(192),ol=i.n(nl);var rl=function(){!function(t){function e(e){t("#pagination_top button, #pagination_bottom button").prop("disabled",e),t("#page_top, #page_bottom").prop("disabled",e),t("#perpage_top, #perpage_bottom").prop("disabled",e),t("#search_top, #search_bottom").prop("disabled",e)}function i(n,o,r,a,s){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_map_list",nonce:t("#mapListNonce").val(),page:n,limit:o,search:r,sort:a,order:s},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0),t("#map_list").empty(),t("#map_list").addClass("mmp-page-loading")}}).done((function(n){var o=n.data;n.success?(t("#mapcount_top, #mapcount_bottom").html(o.total),t("#previous_top, #previous_bottom").val(o.page-1),t("#next_top, #next_bottom").val(o.page+1),t("#last_top, #last_bottom").val(Math.ceil(o.total/o.limit)),t("#page_top, #page_bottom").val(o.page),t("#pagecount_top, #pagecount_bottom").html(Math.ceil(o.total/o.limit)),t("#perpage_top, #perpage_bottom").val(o.limit),t("#search_top, #search_botom").val(o.search),t("#map_list").html(o.html),t('.mmp-sortable[data-orderby="'+o.sort+'"]').addClass("mmp-sorted-"+o.order)):t("#map_list").html(o.html),t("#selectAll").on("click",(function(){t('input[name="selected[]"]').each((function(e,i){t(i).prop("checked",t("#selectAll").prop("checked"))}))})),t('input[name="selected[]"]').on("change",(function(){var e=!0;t('input[name="selected[]"]').each((function(i,n){e=e&&t(n).prop("checked")})),t("#selectAll").prop("checked",e)})),t(".mmp-sortable").on("click",(function(e){e.preventDefault(),e.stopPropagation();var n=t("#sortorder").val();n=t("#orderby").val()===t(this).data("orderby")&&"asc"===n?"desc":"asc",t("#sortorder").val(n),t("#orderby").val(t(this).data("orderby")),i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})),t(".mmp-table td:nth-child(3)").on("mouseenter",(function(){t(".mmp-action",t(this)).css("visibility","visible")})),t(".mmp-table td:nth-child(3)").on("mouseleave",(function(){t(".mmp-action",t(this)).css("visibility","hidden")})),t(".mmp-delete").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map",nonce:t("#mapListNonce").val(),con:0,id:t(this).data("id")},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0)}}).done((function(n){if(n.success){if(!confirm(n.data.message))return;t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map",nonce:t("#mapListNonce").val(),con:1,id:n.data.id},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0)}}).done((function(e){e.success&&i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1),t("#bulkActionSubmit").prop("disabled",!1)}))}})).always((function(){e(!1),t("#bulkActionSubmit").prop("disabled",!1)}))})),t(".mmp-shortcode").on("click",(function(){t(this).trigger("select")})),t(".mmp-qrcode-link").on("click",(function(e){e.preventDefault(),e.stopPropagation();var i=ol()(0,"H"),n=t(this).data("url");i.addData(n),i.make();var o=i.createDataURL(8,0),r=t(this).data("id"),a=t("#qrcode_"+r),s=t('<a href="'+o+'" download="qr-code-map-'+r+'.gif"><img src="'+o+'" /></a>');a.html(s),t("img",a).trigger("click")}))})).always((function(){e(!1),t("input[name=bulkAction]").prop("checked",!1),t("#map_list").removeClass("mmp-page-loading")}))}t("input[name=bulkAction]").on("change",(function(){t("#bulkActionSubmit").prop("disabled",!1)})),t("#pagination_top button").on("click",(function(){i(t(this).val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})),t("#pagination_bottom button").on("click",(function(){i(t(this).val(),t("#perpage_bottom").val(),t("#search_bottom").val(),t("#orderby").val(),t("#sortorder").val())})),t("#page_top, #perpage_top").on("change",(function(){i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})),t("#page_bottom, #perpage_bottom").on("change",(function(){i(t("#page_bottom").val(),t("#perpage_bottom").val(),t("#search_bottom").val(),t("#orderby").val(),t("#sortorder").val())})),t("#search_top").on("change",(function(){i(1,t("#perpage_top").val(),t(this).val(),t("#orderby").val(),t("#sortorder").val())})),t("#search_bottom").on("change",(function(){i(1,t("#perpage_bottom").val(),t(this).val(),t("#orderby").val(),t("#sortorder").val())})),t("#mapList").on("submit",(function(n){var o;switch(n.preventDefault(),n.stopPropagation(),t("input[name=bulkAction]:checked").val()){case"duplicate":o=mmpAdminL10n.maps.bulkDuplicate;break;case"duplicate-assign":o=mmpAdminL10n.maps.bulkDuplicateAssign;break;case"delete":o=mmpAdminL10n.maps.bulkDelete;break;case"delete-assign":o=mmpAdminL10n.maps.bulkDeleteAssign.replace("{map}",t("#assignTarget").val());break;case"delete-delete":o=mmpAdminL10n.maps.bulkDeleteDelete;break;default:return}confirm(o)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_bulk_action_maps",nonce:t("#bulkNonce").val(),data:t("#mapList").serialize()},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0)}}).done((function(){i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1),t("input[name=bulkAction]").prop("checked",!1)}))})),t("#mmp-maps-screen-options-apply").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_maps_screen_options",nonce:t("#screenoptionnonce").val(),hiddenColumns:t(".mmp-maps-column").not(":checked").map((function(){return this.value})).get(),perPage:t("#mmp-maps-per-page").val()},beforeSend:function(){e(!0)}}).done((function(){t("#show-settings-link").trigger("click"),i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1)}))})),i()}(jQuery)},al=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],sl={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return"undefined"!=typeof console&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var i=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},ll={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},cl=ll,hl=function(t,e){return void 0===e&&(e=2),("000"+t).slice(-1*e)},ul=function(t){return!0===t?1:0};function pl(t,e){var i;return function(){var n=this,o=arguments;clearTimeout(i),i=setTimeout((function(){return t.apply(n,o)}),e)}}var dl=function(t){return t instanceof Array?t:[t]};function ml(t,e,i){if(!0===i)return t.classList.add(e);t.classList.remove(e)}function fl(t,e,i){var n=window.document.createElement(t);return e=e||"",i=i||"",n.className=e,void 0!==i&&(n.textContent=i),n}function gl(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function _l(t,e){return e(t)?t:t.parentNode?_l(t.parentNode,e):void 0}function vl(t,e){var i=fl("div","numInputWrapper"),n=fl("input","numInput "+t),o=fl("span","arrowUp"),r=fl("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?n.type="number":(n.type="text",n.pattern="\\d*"),void 0!==e)for(var a in e)n.setAttribute(a,e[a]);return i.appendChild(n),i.appendChild(o),i.appendChild(r),i}function yl(t){try{return"function"==typeof t.composedPath?t.composedPath()[0]:t.target}catch(e){return t.target}}var bl=function(){},xl=function(t,e,i){return i.months[e?"shorthand":"longhand"][t]},kl={D:bl,F:function(t,e,i){t.setMonth(i.months.longhand.indexOf(e))},G:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,i){t.setHours(t.getHours()%12+12*ul(new RegExp(i.amPM[1],"i").test(e)))},M:function(t,e,i){t.setMonth(i.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(1e3*parseFloat(e))},W:function(t,e,i){var n=parseInt(e),o=new Date(t.getFullYear(),0,2+7*(n-1),0,0,0,0);return o.setDate(o.getDate()-o.getDay()+i.firstDayOfWeek),o},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:bl,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:bl,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},Ll={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},wl={Z:function(t){return t.toISOString()},D:function(t,e,i){return e.weekdays.shorthand[wl.w(t,e,i)]},F:function(t,e,i){return xl(wl.n(t,e,i)-1,!1,e)},G:function(t,e,i){return hl(wl.h(t,e,i))},H:function(t){return hl(t.getHours())},J:function(t,e){return void 0!==e.ordinal?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[ul(t.getHours()>11)]},M:function(t,e){return xl(t.getMonth(),!0,e)},S:function(t){return hl(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,i){return i.getWeek(t)},Y:function(t){return hl(t.getFullYear(),4)},d:function(t){return hl(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return hl(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return hl(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},Ml=function(t){var e=t.config,i=void 0===e?sl:e,n=t.l10n,o=void 0===n?ll:n,r=t.isMobile,a=void 0!==r&&r;return function(t,e,n){var r=n||o;return void 0===i.formatDate||a?e.split("").map((function(e,n,o){return wl[e]&&"\\"!==o[n-1]?wl[e](t,r,i):"\\"!==e?e:""})).join(""):i.formatDate(t,e,r)}},Cl=function(t){var e=t.config,i=void 0===e?sl:e,n=t.l10n,o=void 0===n?ll:n;return function(t,e,n,r){if(0===t||t){var a,s=r||o,l=t;if(t instanceof Date)a=new Date(t.getTime());else if("string"!=typeof t&&void 0!==t.toFixed)a=new Date(t);else if("string"==typeof t){var c=e||(i||sl).dateFormat,h=String(t).trim();if("today"===h)a=new Date,n=!0;else if(i&&i.parseDate)a=i.parseDate(t,c);else if(/Z$/.test(h)||/GMT$/.test(h))a=new Date(t);else{for(var u=void 0,p=[],d=0,m=0,f="";d<c.length;d++){var g=c[d],_="\\"===g,v="\\"===c[d-1]||_;if(Ll[g]&&!v){f+=Ll[g];var y=new RegExp(f).exec(t);y&&(u=!0)&&p["Y"!==g?"push":"unshift"]({fn:kl[g],val:y[++m]})}else _||(f+=".")}a=i&&i.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),p.forEach((function(t){var e=t.fn,i=t.val;return a=e(a,i,s)||a})),a=u?a:void 0}}if(a instanceof Date&&!isNaN(a.getTime()))return!0===n&&a.setHours(0,0,0,0),a;i.errorHandler(new Error("Invalid date provided: "+l))}}};function Pl(t,e,i){return void 0===i&&(i=!0),!1!==i?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}var Sl=function(t,e,i){return 3600*t+60*e+i},Tl=864e5;function Al(t){var e=t.defaultHour,i=t.defaultMinute,n=t.defaultSeconds;if(void 0!==t.minDate){var o=t.minDate.getHours(),r=t.minDate.getMinutes(),a=t.minDate.getSeconds();e<o&&(e=o),e===o&&i<r&&(i=r),e===o&&i===r&&n<a&&(n=t.minDate.getSeconds())}if(void 0!==t.maxDate){var s=t.maxDate.getHours(),l=t.maxDate.getMinutes();(e=Math.min(e,s))===s&&(i=Math.min(l,i)),e===s&&i===l&&(n=t.maxDate.getSeconds())}return{hours:e,minutes:i,seconds:n}}i(895);var Dl=function(){return Dl=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Dl.apply(this,arguments)},El=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};function Ol(t,e){var i={config:Dl(Dl({},sl),Bl.defaultConfig),l10n:cl};function n(){var t;return(null===(t=i.calendarContainer)||void 0===t?void 0:t.getRootNode()).activeElement||document.activeElement}function o(t){return t.bind(i)}function r(){var t=i.config;!1===t.weekNumbers&&1===t.showMonths||!0!==t.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==i.calendarContainer&&(i.calendarContainer.style.visibility="hidden",i.calendarContainer.style.display="block"),void 0!==i.daysContainer){var e=(i.days.offsetWidth+1)*t.showMonths;i.daysContainer.style.width=e+"px",i.calendarContainer.style.width=e+(void 0!==i.weekWrapper?i.weekWrapper.offsetWidth:0)+"px",i.calendarContainer.style.removeProperty("visibility"),i.calendarContainer.style.removeProperty("display")}}))}function a(t){if(0===i.selectedDates.length){var e=void 0===i.config.minDate||Pl(new Date,i.config.minDate)>=0?new Date:new Date(i.config.minDate.getTime()),n=Al(i.config);e.setHours(n.hours,n.minutes,n.seconds,e.getMilliseconds()),i.selectedDates=[e],i.latestSelectedDateObj=e}void 0!==t&&"blur"!==t.type&&function(t){t.preventDefault();var e="keydown"===t.type,n=yl(t),o=n;void 0!==i.amPM&&n===i.amPM&&(i.amPM.textContent=i.l10n.amPM[ul(i.amPM.textContent===i.l10n.amPM[0])]);var r=parseFloat(o.getAttribute("min")),a=parseFloat(o.getAttribute("max")),s=parseFloat(o.getAttribute("step")),l=parseInt(o.value,10),c=t.delta||(e?38===t.which?1:-1:0),h=l+s*c;if(void 0!==o.value&&2===o.value.length){var u=o===i.hourElement,p=o===i.minuteElement;h<r?(h=a+h+ul(!u)+(ul(u)&&ul(!i.amPM)),p&&f(void 0,-1,i.hourElement)):h>a&&(h=o===i.hourElement?h-a-ul(!i.amPM):r,p&&f(void 0,1,i.hourElement)),i.amPM&&u&&(1===s?h+l===23:Math.abs(h-l)>s)&&(i.amPM.textContent=i.l10n.amPM[ul(i.amPM.textContent===i.l10n.amPM[0])]),o.value=hl(h)}}(t);var o=i._input.value;s(),Q(),i._input.value!==o&&i._debouncedChange()}function s(){if(void 0!==i.hourElement&&void 0!==i.minuteElement){var t,e,n=(parseInt(i.hourElement.value.slice(-2),10)||0)%24,o=(parseInt(i.minuteElement.value,10)||0)%60,r=void 0!==i.secondElement?(parseInt(i.secondElement.value,10)||0)%60:0;void 0!==i.amPM&&(t=n,e=i.amPM.textContent,n=t%12+12*ul(e===i.l10n.amPM[1]));var a=void 0!==i.config.minTime||i.config.minDate&&i.minDateHasTime&&i.latestSelectedDateObj&&0===Pl(i.latestSelectedDateObj,i.config.minDate,!0),s=void 0!==i.config.maxTime||i.config.maxDate&&i.maxDateHasTime&&i.latestSelectedDateObj&&0===Pl(i.latestSelectedDateObj,i.config.maxDate,!0);if(void 0!==i.config.maxTime&&void 0!==i.config.minTime&&i.config.minTime>i.config.maxTime){var l=Sl(i.config.minTime.getHours(),i.config.minTime.getMinutes(),i.config.minTime.getSeconds()),h=Sl(i.config.maxTime.getHours(),i.config.maxTime.getMinutes(),i.config.maxTime.getSeconds()),u=Sl(n,o,r);if(u>h&&u<l){var p=function(t){var e=Math.floor(t/3600),i=(t-3600*e)/60;return[e,i,t-3600*e-60*i]}(l);n=p[0],o=p[1],r=p[2]}}else{if(s){var d=void 0!==i.config.maxTime?i.config.maxTime:i.config.maxDate;(n=Math.min(n,d.getHours()))===d.getHours()&&(o=Math.min(o,d.getMinutes())),o===d.getMinutes()&&(r=Math.min(r,d.getSeconds()))}if(a){var m=void 0!==i.config.minTime?i.config.minTime:i.config.minDate;(n=Math.max(n,m.getHours()))===m.getHours()&&o<m.getMinutes()&&(o=m.getMinutes()),o===m.getMinutes()&&(r=Math.max(r,m.getSeconds()))}}c(n,o,r)}}function l(t){var e=t||i.latestSelectedDateObj;e&&e instanceof Date&&c(e.getHours(),e.getMinutes(),e.getSeconds())}function c(t,e,n){void 0!==i.latestSelectedDateObj&&i.latestSelectedDateObj.setHours(t%24,e,n||0,0),i.hourElement&&i.minuteElement&&!i.isMobile&&(i.hourElement.value=hl(i.config.time_24hr?t:(12+t)%12+12*ul(t%12==0)),i.minuteElement.value=hl(e),void 0!==i.amPM&&(i.amPM.textContent=i.l10n.amPM[ul(t>=12)]),void 0!==i.secondElement&&(i.secondElement.value=hl(n)))}function h(t){var e=yl(t),i=parseInt(e.value)+(t.delta||0);(i/1e3>1||"Enter"===t.key&&!/[^\d]/.test(i.toString()))&&A(i)}function u(t,e,n,o){return e instanceof Array?e.forEach((function(e){return u(t,e,n,o)})):t instanceof Array?t.forEach((function(t){return u(t,e,n,o)})):(t.addEventListener(e,n,o),void i._handlers.push({remove:function(){return t.removeEventListener(e,n,o)}}))}function p(){$("onChange")}function d(t,e){var n=void 0!==t?i.parseDate(t):i.latestSelectedDateObj||(i.config.minDate&&i.config.minDate>i.now?i.config.minDate:i.config.maxDate&&i.config.maxDate<i.now?i.config.maxDate:i.now),o=i.currentYear,r=i.currentMonth;try{void 0!==n&&(i.currentYear=n.getFullYear(),i.currentMonth=n.getMonth())}catch(t){t.message="Invalid date supplied: "+n,i.config.errorHandler(t)}e&&i.currentYear!==o&&($("onYearChange"),k()),!e||i.currentYear===o&&i.currentMonth===r||$("onMonthChange"),i.redraw()}function m(t){var e=yl(t);~e.className.indexOf("arrow")&&f(t,e.classList.contains("arrowUp")?1:-1)}function f(t,e,i){var n=t&&yl(t),o=i||n&&n.parentNode&&n.parentNode.firstChild,r=Y("increment");r.delta=e,o&&o.dispatchEvent(r)}function g(t,e,n,o){var r=D(e,!0),a=fl("span",t,e.getDate().toString());return a.dateObj=e,a.$i=o,a.setAttribute("aria-label",i.formatDate(e,i.config.ariaDateFormat)),-1===t.indexOf("hidden")&&0===Pl(e,i.now)&&(i.todayDateElem=a,a.classList.add("today"),a.setAttribute("aria-current","date")),r?(a.tabIndex=-1,K(e)&&(a.classList.add("selected"),i.selectedDateElem=a,"range"===i.config.mode&&(ml(a,"startRange",i.selectedDates[0]&&0===Pl(e,i.selectedDates[0],!0)),ml(a,"endRange",i.selectedDates[1]&&0===Pl(e,i.selectedDates[1],!0)),"nextMonthDay"===t&&a.classList.add("inRange")))):a.classList.add("flatpickr-disabled"),"range"===i.config.mode&&function(t){return!("range"!==i.config.mode||i.selectedDates.length<2)&&(Pl(t,i.selectedDates[0])>=0&&Pl(t,i.selectedDates[1])<=0)}(e)&&!K(e)&&a.classList.add("inRange"),i.weekNumbers&&1===i.config.showMonths&&"prevMonthDay"!==t&&o%7==6&&i.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+i.config.getWeek(e)+"</span>"),$("onDayCreate",a),a}function _(t){t.focus(),"range"===i.config.mode&&B(t)}function v(t){for(var e=t>0?0:i.config.showMonths-1,n=t>0?i.config.showMonths:-1,o=e;o!=n;o+=t)for(var r=i.daysContainer.children[o],a=t>0?0:r.children.length-1,s=t>0?r.children.length:-1,l=a;l!=s;l+=t){var c=r.children[l];if(-1===c.className.indexOf("hidden")&&D(c.dateObj))return c}}function y(t,e){var o=n(),r=E(o||document.body),a=void 0!==t?t:r?o:void 0!==i.selectedDateElem&&E(i.selectedDateElem)?i.selectedDateElem:void 0!==i.todayDateElem&&E(i.todayDateElem)?i.todayDateElem:v(e>0?1:-1);void 0===a?i._input.focus():r?function(t,e){for(var n=-1===t.className.indexOf("Month")?t.dateObj.getMonth():i.currentMonth,o=e>0?i.config.showMonths:-1,r=e>0?1:-1,a=n-i.currentMonth;a!=o;a+=r)for(var s=i.daysContainer.children[a],l=n-i.currentMonth===a?t.$i+e:e<0?s.children.length-1:0,c=s.children.length,h=l;h>=0&&h<c&&h!=(e>0?c:-1);h+=r){var u=s.children[h];if(-1===u.className.indexOf("hidden")&&D(u.dateObj)&&Math.abs(t.$i-h)>=Math.abs(e))return _(u)}i.changeMonth(r),y(v(r),0)}(a,e):_(a)}function b(t,e){for(var n=(new Date(t,e,1).getDay()-i.l10n.firstDayOfWeek+7)%7,o=i.utils.getDaysInMonth((e-1+12)%12,t),r=i.utils.getDaysInMonth(e,t),a=window.document.createDocumentFragment(),s=i.config.showMonths>1,l=s?"prevMonthDay hidden":"prevMonthDay",c=s?"nextMonthDay hidden":"nextMonthDay",h=o+1-n,u=0;h<=o;h++,u++)a.appendChild(g("flatpickr-day "+l,new Date(t,e-1,h),0,u));for(h=1;h<=r;h++,u++)a.appendChild(g("flatpickr-day",new Date(t,e,h),0,u));for(var p=r+1;p<=42-n&&(1===i.config.showMonths||u%7!=0);p++,u++)a.appendChild(g("flatpickr-day "+c,new Date(t,e+1,p%r),0,u));var d=fl("div","dayContainer");return d.appendChild(a),d}function x(){if(void 0!==i.daysContainer){gl(i.daysContainer),i.weekNumbers&&gl(i.weekNumbers);for(var t=document.createDocumentFragment(),e=0;e<i.config.showMonths;e++){var n=new Date(i.currentYear,i.currentMonth,1);n.setMonth(i.currentMonth+e),t.appendChild(b(n.getFullYear(),n.getMonth()))}i.daysContainer.appendChild(t),i.days=i.daysContainer.firstChild,"range"===i.config.mode&&1===i.selectedDates.length&&B()}}function k(){if(!(i.config.showMonths>1||"dropdown"!==i.config.monthSelectorType)){var t=function(t){return!(void 0!==i.config.minDate&&i.currentYear===i.config.minDate.getFullYear()&&t<i.config.minDate.getMonth())&&!(void 0!==i.config.maxDate&&i.currentYear===i.config.maxDate.getFullYear()&&t>i.config.maxDate.getMonth())};i.monthsDropdownContainer.tabIndex=-1,i.monthsDropdownContainer.innerHTML="";for(var e=0;e<12;e++)if(t(e)){var n=fl("option","flatpickr-monthDropdown-month");n.value=new Date(i.currentYear,e).getMonth().toString(),n.textContent=xl(e,i.config.shorthandCurrentMonth,i.l10n),n.tabIndex=-1,i.currentMonth===e&&(n.selected=!0),i.monthsDropdownContainer.appendChild(n)}}}function L(){var t,e=fl("div","flatpickr-month"),n=window.document.createDocumentFragment();i.config.showMonths>1||"static"===i.config.monthSelectorType?t=fl("span","cur-month"):(i.monthsDropdownContainer=fl("select","flatpickr-monthDropdown-months"),i.monthsDropdownContainer.setAttribute("aria-label",i.l10n.monthAriaLabel),u(i.monthsDropdownContainer,"change",(function(t){var e=yl(t),n=parseInt(e.value,10);i.changeMonth(n-i.currentMonth),$("onMonthChange")})),k(),t=i.monthsDropdownContainer);var o=vl("cur-year",{tabindex:"-1"}),r=o.getElementsByTagName("input")[0];r.setAttribute("aria-label",i.l10n.yearAriaLabel),i.config.minDate&&r.setAttribute("min",i.config.minDate.getFullYear().toString()),i.config.maxDate&&(r.setAttribute("max",i.config.maxDate.getFullYear().toString()),r.disabled=!!i.config.minDate&&i.config.minDate.getFullYear()===i.config.maxDate.getFullYear());var a=fl("div","flatpickr-current-month");return a.appendChild(t),a.appendChild(o),n.appendChild(a),e.appendChild(n),{container:e,yearElement:r,monthElement:t}}function w(){gl(i.monthNav),i.monthNav.appendChild(i.prevMonthNav),i.config.showMonths&&(i.yearElements=[],i.monthElements=[]);for(var t=i.config.showMonths;t--;){var e=L();i.yearElements.push(e.yearElement),i.monthElements.push(e.monthElement),i.monthNav.appendChild(e.container)}i.monthNav.appendChild(i.nextMonthNav)}function M(){i.weekdayContainer?gl(i.weekdayContainer):i.weekdayContainer=fl("div","flatpickr-weekdays");for(var t=i.config.showMonths;t--;){var e=fl("div","flatpickr-weekdaycontainer");i.weekdayContainer.appendChild(e)}return C(),i.weekdayContainer}function C(){if(i.weekdayContainer){var t=i.l10n.firstDayOfWeek,e=El(i.l10n.weekdays.shorthand);t>0&&t<e.length&&(e=El(e.splice(t,e.length),e.splice(0,t)));for(var n=i.config.showMonths;n--;)i.weekdayContainer.children[n].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+e.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function P(t,e){void 0===e&&(e=!0);var n=e?t:t-i.currentMonth;n<0&&!0===i._hidePrevMonthArrow||n>0&&!0===i._hideNextMonthArrow||(i.currentMonth+=n,(i.currentMonth<0||i.currentMonth>11)&&(i.currentYear+=i.currentMonth>11?1:-1,i.currentMonth=(i.currentMonth+12)%12,$("onYearChange"),k()),x(),$("onMonthChange"),J())}function S(t){return i.calendarContainer.contains(t)}function T(t){if(i.isOpen&&!i.config.inline){var e=yl(t),n=S(e),o=!(e===i.input||e===i.altInput||i.element.contains(e)||t.path&&t.path.indexOf&&(~t.path.indexOf(i.input)||~t.path.indexOf(i.altInput)))&&!n&&!S(t.relatedTarget),r=!i.config.ignoredFocusElements.some((function(t){return t.contains(e)}));o&&r&&(i.config.allowInput&&i.setDate(i._input.value,!1,i.config.altInput?i.config.altFormat:i.config.dateFormat),void 0!==i.timeContainer&&void 0!==i.minuteElement&&void 0!==i.hourElement&&""!==i.input.value&&void 0!==i.input.value&&a(),i.close(),i.config&&"range"===i.config.mode&&1===i.selectedDates.length&&i.clear(!1))}}function A(t){if(!(!t||i.config.minDate&&t<i.config.minDate.getFullYear()||i.config.maxDate&&t>i.config.maxDate.getFullYear())){var e=t,n=i.currentYear!==e;i.currentYear=e||i.currentYear,i.config.maxDate&&i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth=Math.min(i.config.maxDate.getMonth(),i.currentMonth):i.config.minDate&&i.currentYear===i.config.minDate.getFullYear()&&(i.currentMonth=Math.max(i.config.minDate.getMonth(),i.currentMonth)),n&&(i.redraw(),$("onYearChange"),k())}}function D(t,e){var n;void 0===e&&(e=!0);var o=i.parseDate(t,void 0,e);if(i.config.minDate&&o&&Pl(o,i.config.minDate,void 0!==e?e:!i.minDateHasTime)<0||i.config.maxDate&&o&&Pl(o,i.config.maxDate,void 0!==e?e:!i.maxDateHasTime)>0)return!1;if(!i.config.enable&&0===i.config.disable.length)return!0;if(void 0===o)return!1;for(var r=!!i.config.enable,a=null!==(n=i.config.enable)&&void 0!==n?n:i.config.disable,s=0,l=void 0;s<a.length;s++){if("function"==typeof(l=a[s])&&l(o))return r;if(l instanceof Date&&void 0!==o&&l.getTime()===o.getTime())return r;if("string"==typeof l){var c=i.parseDate(l,void 0,!0);return c&&c.getTime()===o.getTime()?r:!r}if("object"==typeof l&&void 0!==o&&l.from&&l.to&&o.getTime()>=l.from.getTime()&&o.getTime()<=l.to.getTime())return r}return!r}function E(t){return void 0!==i.daysContainer&&(-1===t.className.indexOf("hidden")&&-1===t.className.indexOf("flatpickr-disabled")&&i.daysContainer.contains(t))}function O(t){var e=t.target===i._input,n=i._input.value.trimEnd()!==X();!e||!n||t.relatedTarget&&S(t.relatedTarget)||i.setDate(i._input.value,!0,t.target===i.altInput?i.config.altFormat:i.config.dateFormat)}function I(e){var o=yl(e),r=i.config.wrap?t.contains(o):o===i._input,l=i.config.allowInput,c=i.isOpen&&(!l||!r),h=i.config.inline&&r&&!l;if(13===e.keyCode&&r){if(l)return i.setDate(i._input.value,!0,o===i.altInput?i.config.altFormat:i.config.dateFormat),i.close(),o.blur();i.open()}else if(S(o)||c||h){var u=!!i.timeContainer&&i.timeContainer.contains(o);switch(e.keyCode){case 13:u?(e.preventDefault(),a(),G()):H(e);break;case 27:e.preventDefault(),G();break;case 8:case 46:r&&!i.config.allowInput&&(e.preventDefault(),i.clear());break;case 37:case 39:if(u||r)i.hourElement&&i.hourElement.focus();else{e.preventDefault();var p=n();if(void 0!==i.daysContainer&&(!1===l||p&&E(p))){var d=39===e.keyCode?1:-1;e.ctrlKey?(e.stopPropagation(),P(d),y(v(1),0)):y(void 0,d)}}break;case 38:case 40:e.preventDefault();var m=40===e.keyCode?1:-1;i.daysContainer&&void 0!==o.$i||o===i.input||o===i.altInput?e.ctrlKey?(e.stopPropagation(),A(i.currentYear-m),y(v(1),0)):u||y(void 0,7*m):o===i.currentYearElement?A(i.currentYear-m):i.config.enableTime&&(!u&&i.hourElement&&i.hourElement.focus(),a(e),i._debouncedChange());break;case 9:if(u){var f=[i.hourElement,i.minuteElement,i.secondElement,i.amPM].concat(i.pluginElements).filter((function(t){return t})),g=f.indexOf(o);if(-1!==g){var _=f[g+(e.shiftKey?-1:1)];e.preventDefault(),(_||i._input).focus()}}else!i.config.noCalendar&&i.daysContainer&&i.daysContainer.contains(o)&&e.shiftKey&&(e.preventDefault(),i._input.focus())}}if(void 0!==i.amPM&&o===i.amPM)switch(e.key){case i.l10n.amPM[0].charAt(0):case i.l10n.amPM[0].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[0],s(),Q();break;case i.l10n.amPM[1].charAt(0):case i.l10n.amPM[1].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[1],s(),Q()}(r||S(o))&&$("onKeyDown",e)}function B(t,e){if(void 0===e&&(e="flatpickr-day"),1===i.selectedDates.length&&(!t||t.classList.contains(e)&&!t.classList.contains("flatpickr-disabled"))){for(var n=t?t.dateObj.getTime():i.days.firstElementChild.dateObj.getTime(),o=i.parseDate(i.selectedDates[0],void 0,!0).getTime(),r=Math.min(n,i.selectedDates[0].getTime()),a=Math.max(n,i.selectedDates[0].getTime()),s=!1,l=0,c=0,h=r;h<a;h+=Tl)D(new Date(h),!0)||(s=s||h>r&&h<a,h<o&&(!l||h>l)?l=h:h>o&&(!c||h<c)&&(c=h));Array.from(i.rContainer.querySelectorAll("*:nth-child(-n+"+i.config.showMonths+") > ."+e)).forEach((function(e){var r,a,h,u=e.dateObj.getTime(),p=l>0&&u<l||c>0&&u>c;if(p)return e.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach((function(t){e.classList.remove(t)}));s&&!p||(["startRange","inRange","endRange","notAllowed"].forEach((function(t){e.classList.remove(t)})),void 0!==t&&(t.classList.add(n<=i.selectedDates[0].getTime()?"startRange":"endRange"),o<n&&u===o?e.classList.add("startRange"):o>n&&u===o&&e.classList.add("endRange"),u>=l&&(0===c||u<=c)&&(a=o,h=n,(r=u)>Math.min(a,h)&&r<Math.max(a,h))&&e.classList.add("inRange")))}))}}function R(){!i.isOpen||i.config.static||i.config.inline||N()}function z(t){return function(e){var n=i.config["_"+t+"Date"]=i.parseDate(e,i.config.dateFormat),o=i.config["_"+("min"===t?"max":"min")+"Date"];void 0!==n&&(i["min"===t?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),i.selectedDates&&(i.selectedDates=i.selectedDates.filter((function(t){return D(t)})),i.selectedDates.length||"min"!==t||l(n),Q()),i.daysContainer&&(U(),void 0!==n?i.currentYearElement[t]=n.getFullYear().toString():i.currentYearElement.removeAttribute(t),i.currentYearElement.disabled=!!o&&void 0!==n&&o.getFullYear()===n.getFullYear())}}function F(){return i.config.wrap?t.querySelector("[data-input]"):t}function j(){"object"!=typeof i.config.locale&&void 0===Bl.l10ns[i.config.locale]&&i.config.errorHandler(new Error("flatpickr: invalid locale "+i.config.locale)),i.l10n=Dl(Dl({},Bl.l10ns.default),"object"==typeof i.config.locale?i.config.locale:"default"!==i.config.locale?Bl.l10ns[i.config.locale]:void 0),Ll.D="("+i.l10n.weekdays.shorthand.join("|")+")",Ll.l="("+i.l10n.weekdays.longhand.join("|")+")",Ll.M="("+i.l10n.months.shorthand.join("|")+")",Ll.F="("+i.l10n.months.longhand.join("|")+")",Ll.K="("+i.l10n.amPM[0]+"|"+i.l10n.amPM[1]+"|"+i.l10n.amPM[0].toLowerCase()+"|"+i.l10n.amPM[1].toLowerCase()+")",void 0===Dl(Dl({},e),JSON.parse(JSON.stringify(t.dataset||{}))).time_24hr&&void 0===Bl.defaultConfig.time_24hr&&(i.config.time_24hr=i.l10n.time_24hr),i.formatDate=Ml(i),i.parseDate=Cl({config:i.config,l10n:i.l10n})}function N(t){if("function"!=typeof i.config.position){if(void 0!==i.calendarContainer){$("onPreCalendarPosition");var e=t||i._positionElement,n=Array.prototype.reduce.call(i.calendarContainer.children,(function(t,e){return t+e.offsetHeight}),0),o=i.calendarContainer.offsetWidth,r=i.config.position.split(" "),a=r[0],s=r.length>1?r[1]:null,l=e.getBoundingClientRect(),c=window.innerHeight-l.bottom,h="above"===a||"below"!==a&&c<n&&l.top>n,u=window.pageYOffset+l.top+(h?-n-2:e.offsetHeight+2);if(ml(i.calendarContainer,"arrowTop",!h),ml(i.calendarContainer,"arrowBottom",h),!i.config.inline){var p=window.pageXOffset+l.left,d=!1,m=!1;"center"===s?(p-=(o-l.width)/2,d=!0):"right"===s&&(p-=o-l.width,m=!0),ml(i.calendarContainer,"arrowLeft",!d&&!m),ml(i.calendarContainer,"arrowCenter",d),ml(i.calendarContainer,"arrowRight",m);var f=window.document.body.offsetWidth-(window.pageXOffset+l.right),g=p+o>window.document.body.offsetWidth,_=f+o>window.document.body.offsetWidth;if(ml(i.calendarContainer,"rightMost",g),!i.config.static)if(i.calendarContainer.style.top=u+"px",g)if(_){var v=function(){for(var t=null,e=0;e<document.styleSheets.length;e++){var i=document.styleSheets[e];if(i.cssRules){try{i.cssRules}catch(t){continue}t=i;break}}return null!=t?t:(n=document.createElement("style"),document.head.appendChild(n),n.sheet);var n}();if(void 0===v)return;var y=window.document.body.offsetWidth,b=Math.max(0,y/2-o/2),x=v.cssRules.length,k="{left:"+l.left+"px;right:auto;}";ml(i.calendarContainer,"rightMost",!1),ml(i.calendarContainer,"centerMost",!0),v.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+k,x),i.calendarContainer.style.left=b+"px",i.calendarContainer.style.right="auto"}else i.calendarContainer.style.left="auto",i.calendarContainer.style.right=f+"px";else i.calendarContainer.style.left=p+"px",i.calendarContainer.style.right="auto"}}}else i.config.position(i,t)}function U(){i.config.noCalendar||i.isMobile||(k(),J(),x())}function G(){i._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(i.close,0):i.close()}function H(t){t.preventDefault(),t.stopPropagation();var e=_l(yl(t),(function(t){return t.classList&&t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled")&&!t.classList.contains("notAllowed")}));if(void 0!==e){var n=e,o=i.latestSelectedDateObj=new Date(n.dateObj.getTime()),r=(o.getMonth()<i.currentMonth||o.getMonth()>i.currentMonth+i.config.showMonths-1)&&"range"!==i.config.mode;if(i.selectedDateElem=n,"single"===i.config.mode)i.selectedDates=[o];else if("multiple"===i.config.mode){var a=K(o);a?i.selectedDates.splice(parseInt(a),1):i.selectedDates.push(o)}else"range"===i.config.mode&&(2===i.selectedDates.length&&i.clear(!1,!1),i.latestSelectedDateObj=o,i.selectedDates.push(o),0!==Pl(o,i.selectedDates[0],!0)&&i.selectedDates.sort((function(t,e){return t.getTime()-e.getTime()})));if(s(),r){var l=i.currentYear!==o.getFullYear();i.currentYear=o.getFullYear(),i.currentMonth=o.getMonth(),l&&($("onYearChange"),k()),$("onMonthChange")}if(J(),x(),Q(),r||"range"===i.config.mode||1!==i.config.showMonths?void 0!==i.selectedDateElem&&void 0===i.hourElement&&i.selectedDateElem&&i.selectedDateElem.focus():_(n),void 0!==i.hourElement&&void 0!==i.hourElement&&i.hourElement.focus(),i.config.closeOnSelect){var c="single"===i.config.mode&&!i.config.enableTime,h="range"===i.config.mode&&2===i.selectedDates.length&&!i.config.enableTime;(c||h)&&G()}p()}}i.parseDate=Cl({config:i.config,l10n:i.l10n}),i._handlers=[],i.pluginElements=[],i.loadedPlugins=[],i._bind=u,i._setHoursFromDate=l,i._positionCalendar=N,i.changeMonth=P,i.changeYear=A,i.clear=function(t,e){void 0===t&&(t=!0);void 0===e&&(e=!0);i.input.value="",void 0!==i.altInput&&(i.altInput.value="");void 0!==i.mobileInput&&(i.mobileInput.value="");i.selectedDates=[],i.latestSelectedDateObj=void 0,!0===e&&(i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth());if(!0===i.config.enableTime){var n=Al(i.config),o=n.hours,r=n.minutes,a=n.seconds;c(o,r,a)}i.redraw(),t&&$("onChange")},i.close=function(){i.isOpen=!1,i.isMobile||(void 0!==i.calendarContainer&&i.calendarContainer.classList.remove("open"),void 0!==i._input&&i._input.classList.remove("active"));$("onClose")},i.onMouseOver=B,i._createElement=fl,i.createDay=g,i.destroy=function(){void 0!==i.config&&$("onDestroy");for(var t=i._handlers.length;t--;)i._handlers[t].remove();if(i._handlers=[],i.mobileInput)i.mobileInput.parentNode&&i.mobileInput.parentNode.removeChild(i.mobileInput),i.mobileInput=void 0;else if(i.calendarContainer&&i.calendarContainer.parentNode)if(i.config.static&&i.calendarContainer.parentNode){var e=i.calendarContainer.parentNode;if(e.lastChild&&e.removeChild(e.lastChild),e.parentNode){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}}else i.calendarContainer.parentNode.removeChild(i.calendarContainer);i.altInput&&(i.input.type="text",i.altInput.parentNode&&i.altInput.parentNode.removeChild(i.altInput),delete i.altInput);i.input&&(i.input.type=i.input._type,i.input.classList.remove("flatpickr-input"),i.input.removeAttribute("readonly"));["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(t){try{delete i[t]}catch(t){}}))},i.isEnabled=D,i.jumpToDate=d,i.updateValue=Q,i.open=function(t,e){void 0===e&&(e=i._positionElement);if(!0===i.isMobile){if(t){t.preventDefault();var n=yl(t);n&&n.blur()}return void 0!==i.mobileInput&&(i.mobileInput.focus(),i.mobileInput.click()),void $("onOpen")}if(i._input.disabled||i.config.inline)return;var o=i.isOpen;i.isOpen=!0,o||(i.calendarContainer.classList.add("open"),i._input.classList.add("active"),$("onOpen"),N(e));!0===i.config.enableTime&&!0===i.config.noCalendar&&(!1!==i.config.allowInput||void 0!==t&&i.timeContainer.contains(t.relatedTarget)||setTimeout((function(){return i.hourElement.select()}),50))},i.redraw=U,i.set=function(t,e){if(null!==t&&"object"==typeof t)for(var n in Object.assign(i.config,t),t)void 0!==Z[n]&&Z[n].forEach((function(t){return t()}));else i.config[t]=e,void 0!==Z[t]?Z[t].forEach((function(t){return t()})):al.indexOf(t)>-1&&(i.config[t]=dl(e));i.redraw(),Q(!0)},i.setDate=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=i.config.dateFormat);if(0!==t&&!t||t instanceof Array&&0===t.length)return i.clear(e);V(t,n),i.latestSelectedDateObj=i.selectedDates[i.selectedDates.length-1],i.redraw(),d(void 0,e),l(),0===i.selectedDates.length&&i.clear(!1);Q(e),e&&$("onChange")},i.toggle=function(t){if(!0===i.isOpen)return i.close();i.open(t)};var Z={locale:[j,C],showMonths:[w,r,M],minDate:[d],maxDate:[d],positionElement:[q],clickOpens:[function(){!0===i.config.clickOpens?(u(i._input,"focus",i.open),u(i._input,"click",i.open)):(i._input.removeEventListener("focus",i.open),i._input.removeEventListener("click",i.open))}]};function V(t,e){var n=[];if(t instanceof Array)n=t.map((function(t){return i.parseDate(t,e)}));else if(t instanceof Date||"number"==typeof t)n=[i.parseDate(t,e)];else if("string"==typeof t)switch(i.config.mode){case"single":case"time":n=[i.parseDate(t,e)];break;case"multiple":n=t.split(i.config.conjunction).map((function(t){return i.parseDate(t,e)}));break;case"range":n=t.split(i.l10n.rangeSeparator).map((function(t){return i.parseDate(t,e)}))}else i.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(t)));i.selectedDates=i.config.allowInvalidPreload?n:n.filter((function(t){return t instanceof Date&&D(t,!1)})),"range"===i.config.mode&&i.selectedDates.sort((function(t,e){return t.getTime()-e.getTime()}))}function W(t){return t.slice().map((function(t){return"string"==typeof t||"number"==typeof t||t instanceof Date?i.parseDate(t,void 0,!0):t&&"object"==typeof t&&t.from&&t.to?{from:i.parseDate(t.from,void 0),to:i.parseDate(t.to,void 0)}:t})).filter((function(t){return t}))}function q(){i._positionElement=i.config.positionElement||i._input}function $(t,e){if(void 0!==i.config){var n=i.config[t];if(void 0!==n&&n.length>0)for(var o=0;n[o]&&o<n.length;o++)n[o](i.selectedDates,i.input.value,i,e);"onChange"===t&&(i.input.dispatchEvent(Y("change")),i.input.dispatchEvent(Y("input")))}}function Y(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}function K(t){for(var e=0;e<i.selectedDates.length;e++){var n=i.selectedDates[e];if(n instanceof Date&&0===Pl(n,t))return""+e}return!1}function J(){i.config.noCalendar||i.isMobile||!i.monthNav||(i.yearElements.forEach((function(t,e){var n=new Date(i.currentYear,i.currentMonth,1);n.setMonth(i.currentMonth+e),i.config.showMonths>1||"static"===i.config.monthSelectorType?i.monthElements[e].textContent=xl(n.getMonth(),i.config.shorthandCurrentMonth,i.l10n)+" ":i.monthsDropdownContainer.value=n.getMonth().toString(),t.value=n.getFullYear().toString()})),i._hidePrevMonthArrow=void 0!==i.config.minDate&&(i.currentYear===i.config.minDate.getFullYear()?i.currentMonth<=i.config.minDate.getMonth():i.currentYear<i.config.minDate.getFullYear()),i._hideNextMonthArrow=void 0!==i.config.maxDate&&(i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth+1>i.config.maxDate.getMonth():i.currentYear>i.config.maxDate.getFullYear()))}function X(t){var e=t||(i.config.altInput?i.config.altFormat:i.config.dateFormat);return i.selectedDates.map((function(t){return i.formatDate(t,e)})).filter((function(t,e,n){return"range"!==i.config.mode||i.config.enableTime||n.indexOf(t)===e})).join("range"!==i.config.mode?i.config.conjunction:i.l10n.rangeSeparator)}function Q(t){void 0===t&&(t=!0),void 0!==i.mobileInput&&i.mobileFormatStr&&(i.mobileInput.value=void 0!==i.latestSelectedDateObj?i.formatDate(i.latestSelectedDateObj,i.mobileFormatStr):""),i.input.value=X(i.config.dateFormat),void 0!==i.altInput&&(i.altInput.value=X(i.config.altFormat)),!1!==t&&$("onValueUpdate")}function tt(t){var e=yl(t),n=i.prevMonthNav.contains(e),o=i.nextMonthNav.contains(e);n||o?P(n?-1:1):i.yearElements.indexOf(e)>=0?e.select():e.classList.contains("arrowUp")?i.changeYear(i.currentYear+1):e.classList.contains("arrowDown")&&i.changeYear(i.currentYear-1)}return function(){i.element=i.input=t,i.isOpen=!1,function(){var n=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],r=Dl(Dl({},JSON.parse(JSON.stringify(t.dataset||{}))),e),a={};i.config.parseDate=r.parseDate,i.config.formatDate=r.formatDate,Object.defineProperty(i.config,"enable",{get:function(){return i.config._enable},set:function(t){i.config._enable=W(t)}}),Object.defineProperty(i.config,"disable",{get:function(){return i.config._disable},set:function(t){i.config._disable=W(t)}});var s="time"===r.mode;if(!r.dateFormat&&(r.enableTime||s)){var l=Bl.defaultConfig.dateFormat||sl.dateFormat;a.dateFormat=r.noCalendar||s?"H:i"+(r.enableSeconds?":S":""):l+" H:i"+(r.enableSeconds?":S":"")}if(r.altInput&&(r.enableTime||s)&&!r.altFormat){var c=Bl.defaultConfig.altFormat||sl.altFormat;a.altFormat=r.noCalendar||s?"h:i"+(r.enableSeconds?":S K":" K"):c+" h:i"+(r.enableSeconds?":S":"")+" K"}Object.defineProperty(i.config,"minDate",{get:function(){return i.config._minDate},set:z("min")}),Object.defineProperty(i.config,"maxDate",{get:function(){return i.config._maxDate},set:z("max")});var h=function(t){return function(e){i.config["min"===t?"_minTime":"_maxTime"]=i.parseDate(e,"H:i:S")}};Object.defineProperty(i.config,"minTime",{get:function(){return i.config._minTime},set:h("min")}),Object.defineProperty(i.config,"maxTime",{get:function(){return i.config._maxTime},set:h("max")}),"time"===r.mode&&(i.config.noCalendar=!0,i.config.enableTime=!0);Object.assign(i.config,a,r);for(var u=0;u<n.length;u++)i.config[n[u]]=!0===i.config[n[u]]||"true"===i.config[n[u]];al.filter((function(t){return void 0!==i.config[t]})).forEach((function(t){i.config[t]=dl(i.config[t]||[]).map(o)})),i.isMobile=!i.config.disableMobile&&!i.config.inline&&"single"===i.config.mode&&!i.config.disable.length&&!i.config.enable&&!i.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(u=0;u<i.config.plugins.length;u++){var p=i.config.plugins[u](i)||{};for(var d in p)al.indexOf(d)>-1?i.config[d]=dl(p[d]).map(o).concat(i.config[d]):void 0===r[d]&&(i.config[d]=p[d])}r.altInputClass||(i.config.altInputClass=F().className+" "+i.config.altInputClass);$("onParseConfig")}(),j(),function(){if(i.input=F(),!i.input)return void i.config.errorHandler(new Error("Invalid input element specified"));i.input._type=i.input.type,i.input.type="text",i.input.classList.add("flatpickr-input"),i._input=i.input,i.config.altInput&&(i.altInput=fl(i.input.nodeName,i.config.altInputClass),i._input=i.altInput,i.altInput.placeholder=i.input.placeholder,i.altInput.disabled=i.input.disabled,i.altInput.required=i.input.required,i.altInput.tabIndex=i.input.tabIndex,i.altInput.type="text",i.input.setAttribute("type","hidden"),!i.config.static&&i.input.parentNode&&i.input.parentNode.insertBefore(i.altInput,i.input.nextSibling));i.config.allowInput||i._input.setAttribute("readonly","readonly");q()}(),function(){i.selectedDates=[],i.now=i.parseDate(i.config.now)||new Date;var t=i.config.defaultDate||("INPUT"!==i.input.nodeName&&"TEXTAREA"!==i.input.nodeName||!i.input.placeholder||i.input.value!==i.input.placeholder?i.input.value:null);t&&V(t,i.config.dateFormat);i._initialDate=i.selectedDates.length>0?i.selectedDates[0]:i.config.minDate&&i.config.minDate.getTime()>i.now.getTime()?i.config.minDate:i.config.maxDate&&i.config.maxDate.getTime()<i.now.getTime()?i.config.maxDate:i.now,i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth(),i.selectedDates.length>0&&(i.latestSelectedDateObj=i.selectedDates[0]);void 0!==i.config.minTime&&(i.config.minTime=i.parseDate(i.config.minTime,"H:i"));void 0!==i.config.maxTime&&(i.config.maxTime=i.parseDate(i.config.maxTime,"H:i"));i.minDateHasTime=!!i.config.minDate&&(i.config.minDate.getHours()>0||i.config.minDate.getMinutes()>0||i.config.minDate.getSeconds()>0),i.maxDateHasTime=!!i.config.maxDate&&(i.config.maxDate.getHours()>0||i.config.maxDate.getMinutes()>0||i.config.maxDate.getSeconds()>0)}(),i.utils={getDaysInMonth:function(t,e){return void 0===t&&(t=i.currentMonth),void 0===e&&(e=i.currentYear),1===t&&(e%4==0&&e%100!=0||e%400==0)?29:i.l10n.daysInMonth[t]}},i.isMobile||function(){var t=window.document.createDocumentFragment();if(i.calendarContainer=fl("div","flatpickr-calendar"),i.calendarContainer.tabIndex=-1,!i.config.noCalendar){if(t.appendChild((i.monthNav=fl("div","flatpickr-months"),i.yearElements=[],i.monthElements=[],i.prevMonthNav=fl("span","flatpickr-prev-month"),i.prevMonthNav.innerHTML=i.config.prevArrow,i.nextMonthNav=fl("span","flatpickr-next-month"),i.nextMonthNav.innerHTML=i.config.nextArrow,w(),Object.defineProperty(i,"_hidePrevMonthArrow",{get:function(){return i.__hidePrevMonthArrow},set:function(t){i.__hidePrevMonthArrow!==t&&(ml(i.prevMonthNav,"flatpickr-disabled",t),i.__hidePrevMonthArrow=t)}}),Object.defineProperty(i,"_hideNextMonthArrow",{get:function(){return i.__hideNextMonthArrow},set:function(t){i.__hideNextMonthArrow!==t&&(ml(i.nextMonthNav,"flatpickr-disabled",t),i.__hideNextMonthArrow=t)}}),i.currentYearElement=i.yearElements[0],J(),i.monthNav)),i.innerContainer=fl("div","flatpickr-innerContainer"),i.config.weekNumbers){var e=function(){i.calendarContainer.classList.add("hasWeeks");var t=fl("div","flatpickr-weekwrapper");t.appendChild(fl("span","flatpickr-weekday",i.l10n.weekAbbreviation));var e=fl("div","flatpickr-weeks");return t.appendChild(e),{weekWrapper:t,weekNumbers:e}}(),n=e.weekWrapper,o=e.weekNumbers;i.innerContainer.appendChild(n),i.weekNumbers=o,i.weekWrapper=n}i.rContainer=fl("div","flatpickr-rContainer"),i.rContainer.appendChild(M()),i.daysContainer||(i.daysContainer=fl("div","flatpickr-days"),i.daysContainer.tabIndex=-1),x(),i.rContainer.appendChild(i.daysContainer),i.innerContainer.appendChild(i.rContainer),t.appendChild(i.innerContainer)}i.config.enableTime&&t.appendChild(function(){i.calendarContainer.classList.add("hasTime"),i.config.noCalendar&&i.calendarContainer.classList.add("noCalendar");var t=Al(i.config);i.timeContainer=fl("div","flatpickr-time"),i.timeContainer.tabIndex=-1;var e=fl("span","flatpickr-time-separator",":"),n=vl("flatpickr-hour",{"aria-label":i.l10n.hourAriaLabel});i.hourElement=n.getElementsByTagName("input")[0];var o=vl("flatpickr-minute",{"aria-label":i.l10n.minuteAriaLabel});i.minuteElement=o.getElementsByTagName("input")[0],i.hourElement.tabIndex=i.minuteElement.tabIndex=-1,i.hourElement.value=hl(i.latestSelectedDateObj?i.latestSelectedDateObj.getHours():i.config.time_24hr?t.hours:function(t){switch(t%24){case 0:case 12:return 12;default:return t%12}}(t.hours)),i.minuteElement.value=hl(i.latestSelectedDateObj?i.latestSelectedDateObj.getMinutes():t.minutes),i.hourElement.setAttribute("step",i.config.hourIncrement.toString()),i.minuteElement.setAttribute("step",i.config.minuteIncrement.toString()),i.hourElement.setAttribute("min",i.config.time_24hr?"0":"1"),i.hourElement.setAttribute("max",i.config.time_24hr?"23":"12"),i.hourElement.setAttribute("maxlength","2"),i.minuteElement.setAttribute("min","0"),i.minuteElement.setAttribute("max","59"),i.minuteElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(n),i.timeContainer.appendChild(e),i.timeContainer.appendChild(o),i.config.time_24hr&&i.timeContainer.classList.add("time24hr");if(i.config.enableSeconds){i.timeContainer.classList.add("hasSeconds");var r=vl("flatpickr-second");i.secondElement=r.getElementsByTagName("input")[0],i.secondElement.value=hl(i.latestSelectedDateObj?i.latestSelectedDateObj.getSeconds():t.seconds),i.secondElement.setAttribute("step",i.minuteElement.getAttribute("step")),i.secondElement.setAttribute("min","0"),i.secondElement.setAttribute("max","59"),i.secondElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(fl("span","flatpickr-time-separator",":")),i.timeContainer.appendChild(r)}i.config.time_24hr||(i.amPM=fl("span","flatpickr-am-pm",i.l10n.amPM[ul((i.latestSelectedDateObj?i.hourElement.value:i.config.defaultHour)>11)]),i.amPM.title=i.l10n.toggleTitle,i.amPM.tabIndex=-1,i.timeContainer.appendChild(i.amPM));return i.timeContainer}());ml(i.calendarContainer,"rangeMode","range"===i.config.mode),ml(i.calendarContainer,"animate",!0===i.config.animate),ml(i.calendarContainer,"multiMonth",i.config.showMonths>1),i.calendarContainer.appendChild(t);var r=void 0!==i.config.appendTo&&void 0!==i.config.appendTo.nodeType;if((i.config.inline||i.config.static)&&(i.calendarContainer.classList.add(i.config.inline?"inline":"static"),i.config.inline&&(!r&&i.element.parentNode?i.element.parentNode.insertBefore(i.calendarContainer,i._input.nextSibling):void 0!==i.config.appendTo&&i.config.appendTo.appendChild(i.calendarContainer)),i.config.static)){var a=fl("div","flatpickr-wrapper");i.element.parentNode&&i.element.parentNode.insertBefore(a,i.element),a.appendChild(i.element),i.altInput&&a.appendChild(i.altInput),a.appendChild(i.calendarContainer)}i.config.static||i.config.inline||(void 0!==i.config.appendTo?i.config.appendTo:window.document.body).appendChild(i.calendarContainer)}(),function(){i.config.wrap&&["open","close","toggle","clear"].forEach((function(t){Array.prototype.forEach.call(i.element.querySelectorAll("[data-"+t+"]"),(function(e){return u(e,"click",i[t])}))}));if(i.isMobile)return void function(){var t=i.config.enableTime?i.config.noCalendar?"time":"datetime-local":"date";i.mobileInput=fl("input",i.input.className+" flatpickr-mobile"),i.mobileInput.tabIndex=1,i.mobileInput.type=t,i.mobileInput.disabled=i.input.disabled,i.mobileInput.required=i.input.required,i.mobileInput.placeholder=i.input.placeholder,i.mobileFormatStr="datetime-local"===t?"Y-m-d\\TH:i:S":"date"===t?"Y-m-d":"H:i:S",i.selectedDates.length>0&&(i.mobileInput.defaultValue=i.mobileInput.value=i.formatDate(i.selectedDates[0],i.mobileFormatStr));i.config.minDate&&(i.mobileInput.min=i.formatDate(i.config.minDate,"Y-m-d"));i.config.maxDate&&(i.mobileInput.max=i.formatDate(i.config.maxDate,"Y-m-d"));i.input.getAttribute("step")&&(i.mobileInput.step=String(i.input.getAttribute("step")));i.input.type="hidden",void 0!==i.altInput&&(i.altInput.type="hidden");try{i.input.parentNode&&i.input.parentNode.insertBefore(i.mobileInput,i.input.nextSibling)}catch(t){}u(i.mobileInput,"change",(function(t){i.setDate(yl(t).value,!1,i.mobileFormatStr),$("onChange"),$("onClose")}))}();var t=pl(R,50);i._debouncedChange=pl(p,300),i.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&u(i.daysContainer,"mouseover",(function(t){"range"===i.config.mode&&B(yl(t))}));u(i._input,"keydown",I),void 0!==i.calendarContainer&&u(i.calendarContainer,"keydown",I);i.config.inline||i.config.static||u(window,"resize",t);void 0!==window.ontouchstart?u(window.document,"touchstart",T):u(window.document,"mousedown",T);u(window.document,"focus",T,{capture:!0}),!0===i.config.clickOpens&&(u(i._input,"focus",i.open),u(i._input,"click",i.open));void 0!==i.daysContainer&&(u(i.monthNav,"click",tt),u(i.monthNav,["keyup","increment"],h),u(i.daysContainer,"click",H));if(void 0!==i.timeContainer&&void 0!==i.minuteElement&&void 0!==i.hourElement){var e=function(t){return yl(t).select()};u(i.timeContainer,["increment"],a),u(i.timeContainer,"blur",a,{capture:!0}),u(i.timeContainer,"click",m),u([i.hourElement,i.minuteElement],["focus","click"],e),void 0!==i.secondElement&&u(i.secondElement,"focus",(function(){return i.secondElement&&i.secondElement.select()})),void 0!==i.amPM&&u(i.amPM,"click",(function(t){a(t)}))}i.config.allowInput&&u(i._input,"blur",O)}(),(i.selectedDates.length||i.config.noCalendar)&&(i.config.enableTime&&l(i.config.noCalendar?i.latestSelectedDateObj:void 0),Q(!1)),r();var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!i.isMobile&&n&&N(),$("onReady")}(),i}function Il(t,e){for(var i=Array.prototype.slice.call(t).filter((function(t){return t instanceof HTMLElement})),n=[],o=0;o<i.length;o++){var r=i[o];try{if(null!==r.getAttribute("data-fp-omit"))continue;void 0!==r._flatpickr&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=Ol(r,e||{}),n.push(r._flatpickr)}catch(t){console.error(t)}}return 1===n.length?n[0]:n}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return Il(this,t)},HTMLElement.prototype.flatpickr=function(t){return Il([this],t)});var Bl=function(t,e){return"string"==typeof t?Il(window.document.querySelectorAll(t),e):t instanceof Node?Il([t],e):Il(t,e)};Bl.defaultConfig={},Bl.l10ns={en:Dl({},cl),default:Dl({},cl)},Bl.localize=function(t){Bl.l10ns.default=Dl(Dl({},Bl.l10ns.default),t)},Bl.setDefaults=function(t){Bl.defaultConfig=Dl(Dl({},Bl.defaultConfig),t)},Bl.parseDate=Cl({}),Bl.formatDate=Ml({}),Bl.compareDates=Pl,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(t){return Il(this,t)}),Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof t?parseInt(t,10):t))},"undefined"!=typeof window&&(window.flatpickr=Bl);var Rl=function(){var t=this;this.currentValues,this.map,this.basemaps={},this.marker,this.icon,this.geoJson=or().geoJSON(),this.addressLocation={},function(e){function i(e){e||(e=mmpL10n.popup.info),"undefined"!=typeof switchEditors&&(e=switchEditors.wpautop(e)),t.marker.setPopupContent(e)}function n(){window.open(e("#link").val(),"_blank")}function o(){"popup"===e("input[name=action]:checked").val()?(e("#link").val(""),e("#link_settings").hide(),e("#editor").show(),void 0!==t.marker&&(t.marker.bindPopup("",t.popup),t.marker.openPopup(),t.marker.off("click",n),i(e("#popup").val()))):(e("#editor").hide(),e("#link_settings").show(),void 0!==t.marker&&(t.marker.closePopup(),t.marker.unbindPopup(),t.marker.on("click",n)))}function r(i){var n=i.lat.toFixed(6),o=i.lng.toFixed(6);n<-90?n=-90:n>90&&(n=90),o<-180?o=-180:o>180&&(o=180),e("#lat").val(n),e("#lng").val(o),t.marker.setLatLng([n,o]),t.map.panTo(t.marker.getLatLng()),t.addressLocation instanceof or().LatLng&&(t.marker.getLatLng().lat!==t.addressLocation.lat||t.marker.getLatLng().lng!==t.addressLocation.lng?e("#markerLocationWarning").show():e("#markerLocationWarning").hide())}function a(){e("#iconTarget").val(e("input[name=icon]:checked").val()),t.icon.options.iconUrl=e("input[name=icon]:checked+img").attr("src"),t.marker.setIcon(t.icon),e("#uploadFile").val(""),e("#iconSearch").val(""),e("#iconList .mmp-radio").show(),e("#icons").hide()}function s(i){if(t.currentValues=e("#markerSettings").serialize(),t.map=or().map("maps-marker-pro-marker",{center:[i.lat,i.lng],zoom:i.zoom,minZoom:0,maxZoom:23,zoomSnap:.5,zoomDelta:.5,maxBounds:[[-90,-180],[90,180]],attributionControl:!1}),t.attributionControl=or().control.attribution({prefix:i.attributionPrefix}).addTo(t.map),t.attributionControl._esriAttributionAdded=!0,e.each(i.availableBasemaps,(function(e,n){if(1===n.type||3===n.type||4===n.type||5===n.type||6===n.type){if(n.options.bounds&&"string"==typeof n.options.bounds){var o=La(n.options.bounds);n.options.rasterTiles?n.options.bounds=[t.map.unproject(or().point(o[0][1],o[0][0]),n.options.maxNativeZoom),t.map.unproject(or().point(o[1][1],o[1][0]),n.options.maxNativeZoom)]:n.options.bounds=o}else n.options.bounds=[[-90,-180],[90,180]];n.options.minZoom=0,n.options.maxZoom=23,n.options.noWrap=!0}1===n.type?n.wms?t.basemaps[e]=or().tileLayer.wms(n.url,n.options):t.basemaps[e]=or().tileLayer(n.url,n.options):2===n.type&&i.googleApiKey?t.basemaps[e]=new(or().gridLayer.googleMutant)(n.options):3===n.type&&i.bingApiKey?(n.options.bingMapsKey=i.bingApiKey,n.options.culture=i.bingCulture,t.basemaps[e]=or().tileLayer.bing(n.options)):4===n.type&&(i.hereApiKey||i.hereAppId&&i.hereAppCode)?(n.options.apiKey=i.hereApiKey,n.options.appId=i.hereAppId,n.options.appCode=i.hereAppCode,t.basemaps[e]=or().tileLayer.here(n.options)):5===n.type&&i.tomApiKey?(n.options.apiKey=i.tomApiKey,t.basemaps[e]=or().tileLayer.tomTom(n.options)):6===n.type&&(n.labels?t.basemaps[e]=or().layerGroup([da(n.key,n.options),da(n.labels,n.options)]):t.basemaps[e]=da(n.key,n.options))})),void 0!==t.basemaps[i.basemap])t.basemaps[i.basemap].addTo(t.map);else{var n=Object.keys(t.basemaps);n.length&&t.basemaps[n[0]].addTo(t.map)}t.geoJson=or().geoJSON(null,{pointToLayer:function(t,e){return or().marker(e,{pmIgnore:!0,interactive:!1,icon:or().icon({iconUrl:t.properties.icon,iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor})})}}).addTo(t.map),t.icon=or().icon({iconUrl:i.icon?mmpVars.iconsUrl+i.icon:mmpVars.pluginUrl+"images/leaflet/marker.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor}),t.popup={maxWidth:400,minWidth:200,maxHeight:400,className:"mmp-popup"},t.marker=or().marker([i.lat,i.lng],{icon:t.icon,draggable:!0}).addTo(t.map),e("#address").val()&&(t.addressLocation=t.marker.getLatLng()),o(),t.map.on("click",(function(t){r(t.latlng)})),t.map.on("zoomend",(function(){e("#zoom").val(t.map.getZoom().toFixed(1))})),t.marker.on("dragend",(function(){r(t.marker.getLatLng())}));var s,l={enableTime:!0,time_24hr:(s=mmpAdminL10n.global.timeFormat,!/a(?!\\)/i.test(s.replace(/\\\\/g,""))),altInput:!0,altFormat:Ta(mmpAdminL10n.global.dateFormat+" "+mmpAdminL10n.global.timeFormat),dateFormat:"Y-m-d H:i:S"},c=e("#scheduleFrom").flatpickr(l),h=e("#scheduleUntil").flatpickr(l);e("#scheduleFromClear").on("click",(function(){c.clear()})),e("#scheduleUntilClear").on("click",(function(){h.clear()})),e("#basemap").on("change",(function(){e.each(t.basemaps,(function(t,e){e.remove()})),void 0!==t.basemaps[e(this).val()]&&t.basemaps[e(this).val()].addTo(t.map)})),e("#previewMap").on("change",(function(){e.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_preview_map_markers",nonce:e("input[name=nonce]").val(),id:e("#previewMap").val()},beforeSend:function(){t.geoJson.clearLayers()}}).done((function(i){i.data.features&&(t.geoJson.addData(i.data),e("#previewOpacity").trigger("input"))}))})),e("#previewOpacity").on("input",or().Util.throttle((function(){var i=parseFloat(e("#previewOpacity").val());t.geoJson.eachLayer((function(t){t.setOpacity(i)}))}),100)),e("#lat, #lng").on("change",(function(){var t=parseFloat(e("#lat").val()),i=parseFloat(e("#lng").val());r(or().latLng(t,i))})),e("#zoom").on("change",(function(){t.map.setZoom(parseFloat(e("#zoom").val()))})),e("input[name=icon]").on("change",a),e("input[name=action]").on("change",o),e("#markerSettings").on("submit",(function(i){i.preventDefault(),i.stopPropagation(),e.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_marker",nonce:e("input[name=nonce]").val(),settings:e("#markerSettings").serialize()},beforeSend:function(){var t;t=e("#save"),e("#save").prop("disabled",!0),e(t).addClass("mmp-button-loading")}}).done((function(i){i.success?(t.currentValues=e("#markerSettings").serialize(),"new"===e("#id").val()?(localStorage.setItem("saved",!0),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_marker&id="+i.data.id):e('<div class="notice notice-success"><p>'+i.data.message+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){e(this).remove()}))):e('<div class="notice notice-error"><p>'+i.data+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){e(this).remove()}))})).fail((function(t,i,n){e('<div class="notice notice-error"><p>'+mmpAdminL10n.global.ajaxError+" ("+n+")</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){e(this).remove()}))})).always((function(){var t;t=e("#save"),e(t).removeClass("mmp-button-loading"),e("#save").prop("disabled",!1),e(".mmp-wrap")[0].scrollIntoView()}))})),e("#saveDefaultsLink").on("click",(function(t){t.preventDefault(),t.stopPropagation(),e(this).hide(),e(".mmp-save-defaults").show()})),e("#saveDefaultsConfirm").on("click",(function(){e.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_marker_defaults",nonce:e("input[name=nonce]").val(),settings:e("#markerSettings").serialize()},beforeSend:function(){e("#saveDefaultsConfirm").prop("disabled",!0),e("#saveDefaultsCancel").prop("disabled",!0),e(".mmp-save-defaults").addClass("mmp-save-defaults-loading")}}).always((function(){e(".mmp-save-defaults").removeClass("mmp-save-defaults-loading"),e(".mmp-save-defaults").fadeOut(500,(function(){e("#saveDefaultsConfirm").prop("disabled",!1),e("#saveDefaultsCancel").prop("disabled",!1),e("#saveDefaultsLink").show()}))}))})),e("#saveDefaultsCancel").on("click",(function(){e(".mmp-save-defaults").hide(),e("#saveDefaultsLink").show()})),e("#assignedMaps").select2({width:"260px",placeholder:mmpAdminL10n.marker.notAssigned,templateSelection:function(t){var i=e('<a href="'+mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+t.id+'" target="_blank">'+mmpAdminL10n.marker.edit+"</a>");return i.on("click",(function(t){t.stopPropagation()})),e("<span>"+t.text+"</span>").append(" (").append(i).append(")")}}),e("#changeIcon").on("click",(function(){e("#iconUpload").hide(),e("#icons").show()})),e("#iconSearch").keyup((function(){var t=e(this).val();e('input[name="icon"]').each((function(){-1===e(this).val().toUpperCase().indexOf(t.toUpperCase())?e(this).parent().hide():e(this).parent().show()}))})),e("#toggleUpload").on("click",(function(){e("#iconUpload").toggle()})),e("#upload").on("click",(function(){var t=e("#uploadFile").prop("files")[0];if(void 0!==t){var i=new FormData;i.append("action","mmp_icon_upload"),i.append("nonce",e("#upload_nonce").val()),i.append("upload",t),e.ajax({type:"POST",url:ajaxurl,processData:!1,contentType:!1,context:this,data:i}).done((function(t){t.success&&(e("#iconList").prepend('<label class="mmp-radio"><input type="radio" name="icon" value="'+t.data.name+'" checked="checked" /><img class="mmp-icon" src="'+t.data.url+'" /></label>'),e("input[name=icon]").on("change",a),e("input[name=icon]").trigger("change"))}))}}));var u=new Ia({selector:"#address",beforeSend:function(){e("#geocodingError").empty()},error:function(t){e("#geocodingError").html(t)},selected:function(e,i){var n=or().latLng(e.toFixed(6),i.toFixed(6));t.addressLocation=n,r(n)},provider:e("#geocodingProvider").val(),typingDelay:i.geocodingTypingDelay,minChars:i.geocodingMinChars});u.init(),e("#geocodingProvider").on("change",(function(){u.provider=e("#geocodingProvider").val(),u.autocomplete.start(),u.autocomplete.input.focus()})),e("#resetMarkerLocation").on("click",(function(){t.addressLocation instanceof or().LatLng&&r(t.addressLocation)})),localStorage.getItem("saved")&&(e('<div class="notice notice-success"><p>'+mmpAdminL10n.marker.saved+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){e(this).remove()})),localStorage.removeItem("saved")),e("#save").prop("disabled",!1)}e(".mmp-delete").on("click",(function(){confirm(mmpAdminL10n.marker.delete)&&e.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_marker_direct",nonce:e("#nonce").val(),id:e("#id").val()}}).done((function(){t.currentValues=e("#markerSettings").serialize(),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_markers"}))})),e(".mmp-admin-modal, .mmp-admin-modal-close").on("click",(function(t){t.target===this&&e("#icons").hide()})),e("#popup").on("change",(function(){i(e(this).val())})),e("#maps-marker-pro-marker").css({width:"100%",height:"480px"}),e.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_marker_settings",id:e("#id").val(),basemap:e("#basemap").val(),lat:e("#lat").val(),lng:e("#lng").val(),zoom:e("#zoom").val()}}).done((function(t){s(t.data)})),window.onbeforeunload=function(){return t.currentValues!==e("#markerSettings").serialize()?"":null}}(jQuery)};var zl=function(){!function(t){function e(e){t("#pagination_top button, #pagination_bottom button").prop("disabled",e),t("#page_top, #page_bottom").prop("disabled",e),t("#perpage_top, #perpage_bottom").prop("disabled",e),t("#search_top, #search_bottom").prop("disabled",e),t("#map_top, #map_bottom").prop("disabled",e)}function i(n,o,r,a,s,l){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_marker_list",nonce:t("#markerListNonce").val(),page:n,limit:o,search:r,map:a,sort:s,order:l},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0),t("#marker_list").empty(),t("#marker_list").addClass("mmp-page-loading")}}).done((function(n){var o=n.data;n.success?(t("#markercount_top, #markercount_bottom").html(o.total),t("#previous_top, #previous_bottom").val(o.page-1),t("#next_top, #next_bottom").val(o.page+1),t("#last_top, #last_bottom").val(Math.ceil(o.total/o.limit)),t("#page_top, #page_bottom").val(o.page),t("#pagecount_top, #pagecount_bottom").html(Math.ceil(o.total/o.limit)),t("#perpage_top, #perpage_bottom").val(o.limit),t("#search_top, #search_bottom").val(o.search),t("#marker_list").html(o.html),t('.mmp-sortable[data-orderby="'+o.sort+'"]').addClass("mmp-sorted-"+o.order)):t("#marker_list").html(o.html),t("#selectAll").on("click",(function(){t('input[name="selected[]"]').each((function(e,i){t(i).prop("checked",t("#selectAll").prop("checked"))}))})),t('input[name="selected[]"]').on("change",(function(){var e=!0;t('input[name="selected[]"]').each((function(i,n){e=e&&t(n).prop("checked")})),t("#selectAll").prop("checked",e)})),t(".mmp-sortable").on("click",(function(e){e.preventDefault(),e.stopPropagation();var n=t("#sortorder").val();n=t("#orderby").val()===t(this).data("orderby")&&"asc"===n?"desc":"asc",t("#sortorder").val(n),t("#orderby").val(t(this).data("orderby")),i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})),t(".mmp-table td:nth-child(4)").on("mouseenter",(function(){t(".mmp-action",t(this)).css("visibility","visible")})),t(".mmp-table td:nth-child(4)").on("mouseleave",(function(){t(".mmp-action",t(this)).css("visibility","hidden")})),t(".mmp-delete").on("click",(function(){var n=t(this).data("id");confirm(mmpAdminL10n.markers.delete.replace("{marker}",n))&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_marker",nonce:t("#markerListNonce").val(),id:n},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0)}}).done((function(){i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1),t("#bulkActionSubmit").prop("disabled",!1)}))}))})).always((function(){e(!1),t("#bulkActionSubmit").prop("disabled",!1),t("#marker_list").removeClass("mmp-page-loading")}))}t("input[name=bulkAction]").on("change",(function(){t("#bulkActionSubmit").prop("disabled",!1)})),t("#pagination_top button").on("click",(function(){i(t(this).val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})),t("#pagination_bottom button").on("click",(function(){i(t(this).val(),t("#perpage_bottom").val(),t("#search_bottom").val(),t("#map_bottom").val(),t("#orderby").val(),t("#sortorder").val())})),t("#page_top, #perpage_top").on("change",(function(){i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})),t("#page_bottom, #perpage_bottom").on("change",(function(){i(t("#page_bottom").val(),t("#perpage_bottom").val(),t("#search_bottom").val(),t("#map_bottom").val(),t("#orderby").val(),t("#sortorder").val())})),t("#search_top").on("change",(function(){i(1,t("#perpage_top").val(),t(this).val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})),t("#search_bottom").on("change",(function(){i(1,t("#perpage_bottom").val(),t(this).val(),t("#map_bottom").val(),t("#orderby").val(),t("#sortorder").val())})),t("#map_top").select2({width:"200px"}).on("select2:select",(function(){t("#map_bottom").select2("val",t("#map_top").val()),i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t(this).val(),t("#orderby").val(),t("#sortorder").val())})),t("#map_bottom").select2({width:"200px"}).on("select2:select",(function(){t("#map_top").select2("val",t("#map_bottom").val()),i(t("#page_bottom").val(),t("#perpage_bottom").val(),t("#search_bottom").val(),t(this).val(),t("#orderby").val(),t("#sortorder").val())})),t("#markerList").on("submit",(function(n){var o;switch(n.preventDefault(),n.stopPropagation(),t("input[name=bulkAction]:checked").val()){case"duplicate":o=mmpAdminL10n.markers.bulkDuplicate;break;case"delete":o=mmpAdminL10n.markers.bulkDelete;break;case"assign":o=mmpAdminL10n.markers.bulkAssign.replace("{map}",t("#assignTarget").val());break;default:return}confirm(o)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_bulk_action_markers",nonce:t("#bulkNonce").val(),data:t("#markerList").serialize()},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0)}}).done((function(){i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1),t("#bulkActionSubmit").prop("disabled",!1)}))})),t("#mmp-markers-screen-options-apply").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_markers_screen_options",nonce:t("#screenoptionnonce").val(),hiddenColumns:t(".mmp-markers-column").not(":checked").map((function(){return this.value})).get(),perPage:t("#mmp-markers-per-page").val()},beforeSend:function(){e(!0)}}).done((function(){t("#show-settings-link").trigger("click"),i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1)}))})),i()}(jQuery)};var Fl=function(){!function(t){var e=document.location.toString().split("#")[1],i=t("#settings").serialize(),n={},o=[];function r(e){t(".mmp-settings-tab").hide(),t(".mmp-tablink").removeClass("active"),t("#"+e+"_link").addClass("active"),t("#"+e+"_tab").show(),window.location.hash=e}function a(e){t(e).prop("disabled",!0),t(e).addClass("mmp-button-loading")}function s(e){t(e).removeClass("mmp-button-loading"),t(e).prop("disabled",!1)}function l(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_get_custom_layers",nonce:t("input[name=nonce]").val()}}).done((function(e){o=e.data;var i=t("<ul></ul>"),n=t("<ul></ul>");t.each(o,(function(e,o){var r=t("<li></li>"),a=t('<img src="'+mmpVars.pluginUrl+'images/icons/edit-layer.png" />');a.css("margin","0 10px 0 0"),a.css("verticalAlign","middle"),a.css("cursor","pointer"),a.on("click",(function(){var e;e=o.id,t("#customLayerId").val(e),c()})),r.append(a),r.append("[ID "+o.id+"] "+o.name),"1"==o.overlay?n.append(r):i.append(r)})),t("#custom-basemaps").html(i),t("#custom-overlays").html(n)}))}function c(){var e=t("#customLayerId").val(),i={},n={};"0"!=e&&(t.each(o,(function(t,o){if(o.id==e)return i=o,n=JSON.parse(o.options),!1})),"1"==i.overlay?t("#customLayerTypeOverlay").prop("checked",!0):t("#customLayerTypeBasemap").prop("checked",!0),t("#customLayerWms").prop("checked","1"==i.wms),t("#customLayerTms").prop("checked",n.tms),t("#customLayerRasterTiles").prop("checked",n.rasterTiles),t("#customLayerNoWrap").prop("checked",n.noWrap),t("#customLayerErrorTiles").prop("checked",n.errorTiles),t("#customLayerName").val(i.name),t("#customLayerUrl").val(i.url),t("#customLayerSubdomains").val(n.subdomains),t("#customLayerBounds").val(n.bounds),t("#customLayerMinZoom").val(n.minNativeZoom),t("#customLayerMaxZoom").val(n.maxNativeZoom),t("#customLayerOpacity").val(n.opacity),t("#customLayerAttribution").val(n.attribution),"1"==i.wms&&(t("#custom-layer-wms").show(),t("#customLayerTransparent").prop("checked",n.transparent),t("#customLayerUppercase").prop("checked",n.uppercase),t("#customLayerLayers").val(n.layers),t("#customLayerStyles").val(n.styles),t("#customLayerFormat").val(n.format),t("#customLayerVersion").val(n.version))),t("#mmp-custom-layer-modal").show()}t(".mmp-tablink").on("click",(function(){r(t(this).attr("id").replace("_link",""))})),t(".mmp-settings-nav ul li").each((function(){var e=t(this).closest(".mmp-settings-nav-group").find("span").html(),i=t(this).attr("id").replace("_link",""),o=t(this).html(),r=o;t("#"+i+"_tab").find("h3, p, .mmp-settings-desc, .mmp-settings-footnote").each((function(){r=r+" "+t(this).html()})),r=r.replace(/"/g,""),void 0===n[e]&&(n[e]=[]),n[e].push({value:i,search:r,title:o})})),t("#mmp-custom-layer-add").on("click",(function(){t("#customLayerId").val("0"),c()})),t("#customLayerWms").on("change",(function(){t(this).prop("checked")?t("#custom-layer-wms").show():t("#custom-layer-wms").hide()})),t("#settings").on("submit",(function(e){e.preventDefault(),e.stopPropagation();var n=t("#settings").serialize();t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_settings",nonce:t("input[name=nonce]").val(),settings:n},beforeSend:function(){a(t("#save"))}}).done((function(e){i=n;var o=e.success?"notice-success":"notice-error";t('<div class="notice '+o+'"><p>'+e.data+"</p></div>").insertBefore("#settings").delay(5e3).fadeOut(500,(function(){t(this).remove()}))})).fail((function(){t('<div class="notice notice-error"><p>'+mmpAdminL10n.global.ajaxError+"</p></div>").insertBefore("#settings").delay(5e3).fadeOut(500,(function(){t(this).remove()}))})).always((function(){s(t("#save")),t(".mmp-wrap")[0].scrollIntoView()}))}));var h=t("<select></select>").attr("id","mmp-select-search-tabs").css("width","300px").append("<option></option>");t.each(n,(function(e,i){var n=t("<optgroup></optgroup>");n.attr("label",e),t.each(i,(function(e,i){var o=t("<option></option>").attr("value",i.value).attr("data-search",i.search).html(i.title);n.append(o)})),h.append(n)})),h.appendTo("#top"),h.select2({placeholder:mmpAdminL10n.settings.search,allowClear:!0,matcher:function(e,i){if(""===t.trim(e.term))return i;if(void 0===i.text||void 0===i.children)return null;var n=[];if(t.each(i.children,(function(i,o){-1===o.text.toUpperCase().indexOf(e.term.toUpperCase())&&-1===t(o.element).data("search").toUpperCase().indexOf(e.term.toUpperCase())||n.push(o)})),n.length){var o=t.extend({},i,!0);return o.children=n,o}return null}}).on("change",(function(){r(t(this).val())})),t(".mmp-admin-modal, .mmp-admin-modal-close").on("click",(function(e){e.target===this&&(t("#mmp-custom-layer-modal").hide(),t("#mmp-custom-layer-form").trigger("reset"),t("#custom-layer-wms").hide())})),t("#mmp-custom-layer-delete").on("click",(function(){t("#mmp-custom-layer-modal").hide(),t("#mmp-custom-layer-form").trigger("reset"),t("#custom-layer-wms").hide(),function(e){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_custom_layer",nonce:t("input[name=nonce]").val(),id:e}}).done((function(){l()}))}(t("#customLayerId").val())})),t("#mmp-custom-layer-save").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_custom_layer",nonce:t("input[name=nonce]").val(),settings:t("#mmp-custom-layer-form").serialize()},beforeSend:function(){a(t("#mmp-custom-layer-save"))}}).done((function(){t("#mmp-custom-layer-modal").hide(),t("#mmp-custom-layer-form").trigger("reset"),t("#custom-layer-wms").hide(),l()})).always((function(){s(t("#mmp-custom-layer-save"))}))})),t("#icons_list").select2({width:"300px",placeholder:mmpAdminL10n.settings.selectIcons,templateResult:function(e){return e.id?t('<span><img src="'+mmpVars.iconsUrl+e.element.value+'" class="icons-list-item" /> '+e.text+"</span>"):e.text}}),t("#delete_icons").on("click",(function(){confirm(mmpAdminL10n.settings.confirmDelete)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_icons",nonce:t("input[name=nonce]").val(),icons:t("#icons_list").val()}}).done((function(){t("#icons_list option:selected").remove()}))})),r(void 0!==e?e:t(".mmp-tablink").first().attr("id").replace("_link","")),l(),window.onbeforeunload=function(){return i!==t("#settings").serialize()?"":null},t("#save").prop("disabled",!1)}(jQuery)};var jl=function(){!function(t){var e=document.location.toString().split("#")[1],i=0;function n(e){t(".mmp-tools-tab").hide(),t(".mmp-tablink").removeClass("active"),t("#"+e+"_tab").addClass("active"),t("#"+e+"_tab_content").show(),window.location.hash=e}function o(e){t(e).prop("disabled",!0),t(e).addClass("mmp-button-loading")}function r(e){t(e).removeClass("mmp-button-loading"),t(e).prop("disabled",!1)}function a(e){t("#backup_log").append('<span class="mmp-error">error ('+e.status+" - "+e.statusText+")</span>")}function s(t,e,i){var n=t?"notice-success":"notice-error";i.after('<div class="notice '+n+'"><p>'+e+"</p></div>")}function l(e){return{type:"POST",url:ajaxurl,dataType:"json",delay:250,data:function(i){return{action:e,nonce:t(this).data("nonce"),term:i.term,page:i.page}},processResults:function(t){return{results:t.data.results,pagination:{more:t.data.more}}}}}function c(){var e=[];t(".mmp-basemap").each((function(){e.push(t(this).data("id").toString())})),t("#basemapsList option").each((function(){var i=-1!==t.inArray(t(this).val().toString(),e);t(this).prop("disabled",i)})),t("#basemapsList option").each((function(){if(!t(this).prop("disabled"))return t(this).prop("selected",!0),!1})),t("#basemapsList option:enabled").length?t("#basemapsAdd").prop("disabled",!1):t("#basemapsAdd").prop("disabled",!0),t("input[name=basemapDefault]:checked").length||t("input[name=basemapDefault]").first().prop("checked",!0)}function h(){var e=[];t(".mmp-overlay").each((function(){e.push(t(this).data("id").toString())})),t("#overlaysList option").each((function(){var i=-1!==t.inArray(t(this).val().toString(),e);t(this).prop("disabled",i)})),t("#overlaysList option").each((function(){if(!t(this).prop("disabled"))return t(this).prop("selected",!0),!1})),t("#overlaysList option:enabled").length?t("#overlaysAdd").prop("disabled",!1):t("#overlaysAdd").prop("disabled",!0)}function u(e,i,n,o){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_backup",nonce:t("#backup_start").data("nonce"),table:e,offset:i,total:JSON.stringify(n),filename:o||0}}).done((function(e){var i=d(e.data);i.table>3?(t("#backup_log").append(i.message),t("#backup_start").removeClass("mmp-button-loading"),window.location=i.url):u(i.table,i.offset,i.total,i.filename)})).fail((function(t){a(t)}))}function p(e,i,n){var o=new FormData;if(o.append("action","mmp_restore"),o.append("nonce",t("#restore_start").data("nonce")),o.append("table",e),o.append("offset",i),o.append("total",n),!n.length){var r=t("#backup_file").prop("files")[0];if(void 0===r)return void t("#restore_start").removeClass("mmp-button-loading");o.append("upload",r)}t.ajax({type:"POST",url:ajaxurl,context:this,data:o,processData:!1,contentType:!1}).done((function(e){(o=d(e.data)).table>3?(m(o.maps),t("#backup_log").append(o.message),t("#restore_start").removeClass("mmp-button-loading")):p(o.table,o.offset,o.total)})).fail((function(t){a(t)}))}function d(e){for(var n=0;n<e.log.length;n++)t("#backup_log").append(e.log[n]+"<br />");e.offset+1e3<e.total[e.table]?(i+=1e3,e.offset+=1e3):(i+=e.total[e.table]-e.offset,e.table++,e.offset=0);for(var o=0,r=0;r<e.total.length;r++)o+=e.total[r];var a=(i/o*100).toFixed(0);return t("#backup_progress").css("width",a+"%"),e}function m(e){var i=t("#move_markers_source"),n=i.val(),o=t("#move_markers_target"),r=o.val(),a=t("#remove_markers_map"),s=a.val(),l=t("#assign_markers_map"),c=l.val(),h=t("#assign_map"),u=h.val();i.empty(),o.empty(),a.empty(),l.empty(),h.empty(),t.each(e,(function(e,p){i.append(t("<option></option>").attr("value",e).text(p).prop("selected",e==n)),o.append(t("<option></option>").attr("value",e).text(p).prop("selected",e==r)),a.append(t("<option></option>").attr("value",e).text(p).prop("selected",e==s)),l.append(t("<option></option>").attr("value",e).text(p).prop("selected",e==c)),h.append(t("<option></option>").attr("value",e).text(p).prop("selected",e==u))}))}t(".mmp-tablink").on("click",(function(){n(t(this).attr("id").replace("_tab",""))})),t(".mmp-batch-settings-tablink").on("click",(function(){var e=t(this).data("target");t(".mmp-map-batch-settings-group").hide(),t(".mmp-batch-settings-tablink").removeClass("active"),t(this).addClass("active"),t("#"+e+"Content").show()})),t(".batch-settings-check").on("change",(function(){t(this).prop("checked")?t(this).closest(".mmp-map-batch-setting").addClass("mmp-changed"):t(this).closest(".mmp-map-batch-setting").removeClass("mmp-changed"),t(".mmp-batch-settings-tablink").each((function(){var e=t(this).data("target");t(".batch-settings-check:checked",t("#"+e+"Content")).length?t(this).addClass("mmp-changed"):t(this).removeClass("mmp-changed")}))})),t("#mapSettings input, #mapSettings select, #mapSettings textarea").on("change",(function(){var e=t(this).attr("name");t("#"+e+"Check").prop("checked",!0).trigger("change")})),t(".mmp-gpx-start-icon").on("click",(function(){t("#gpxIconTarget").val("gpx-start"),t("#iconsGpx").show()})),t(".mmp-gpx-end-icon").on("click",(function(){t("#gpxIconTarget").val("gpx-end"),t("#iconsGpx").show()})),t("#iconsListGpx img").on("click",(function(){var e=t("#gpxIconTarget").val(),i=t(this).attr("src"),n=t(this).data("icon");"gpx-start"===e?(t("#gpxStartIcon").val(n).trigger("change"),t(".mmp-gpx-start-icon").attr("src",i)):"gpx-end"===e&&(t("#gpxEndIcon").val(n).trigger("change"),t(".mmp-gpx-end-icon").attr("src",i)),t("#iconsGpx").hide()})),t("#batch_settings_maps").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#save_batch_settings").on("click",(function(){confirm(mmpAdminL10n.tools.batchSettings)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_settings",nonce:t(this).data("nonce"),settings:t("#mapSettings").serialize()},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.data,t("#batch_settings_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#batch_settings_section"))})).always((function(){r(t(this))}))})),t("#basemapList").sortable({handle:".mmp-handle"}),t("#basemapsAdd").on("click",(function(){!function(e,i){var n=t('<li class="mmp-basemap" data-id="'+e+'"></li>'),o=t("<div></div>");n.append(o);var r=t('<input type="hidden" name="basemaps[]" value="'+e+'" />');o.append(r);var a=t('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');o.append(a);var s=t('<input type="radio" name="basemapDefault" value="'+e+'" />');o.append(" ").append(s);var l=t('<input type="text" class="mmp-align-middle" value="'+i+'" disabled="disabled" />');o.append(" ").append(l);var h=t('<i class="dashicons dashicons-no mmp-remove-basemap"></i>');h.on("click",(function(){t(this).parent().parent().remove(),c()})),o.append(" ").append(h),t("#basemapList").append(n)}(t("#basemapsList").val(),t("#basemapsList option:checked").text()),c()})),t(".mmp-remove-basemap").on("click",(function(){t(this).parent().parent().remove(),c()})),c(),t("#overlayList").sortable({handle:".mmp-handle"}),t("#overlaysAdd").on("click",(function(){!function(e,i){var n=t('<li class="mmp-overlay" data-id="'+e+'"></li>'),o=t("<div></div>");n.append(o);var r=t('<input type="hidden" name="overlays[]" value="'+e+'" />');o.append(r);var a=t('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');o.append(a);var s=t('<input type="checkbox" name="overlaysActive[]" value="'+e+'" />');o.append(" ").append(s);var l=t('<input type="text" class="mmp-align-middle" value="'+i+'" disabled="disabled" />');o.append(" ").append(l);var c=t('<i class="dashicons dashicons-no mmp-remove-overlay"></i>');c.on("click",(function(){t(this).parent().parent().remove(),h()})),o.append(" ").append(c),t("#overlayList").append(n)}(t("#overlaysList").val(),t("#overlaysList option:checked").text()),h()})),t(".mmp-remove-overlay").on("click",(function(){t(this).parent().parent().remove(),h()})),h(),t("#batch_layers_maps").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#save_batch_layers").on("click",(function(){confirm(mmpAdminL10n.tools.batchLayers)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_layers",nonce:t(this).data("nonce"),settings:t("#mapLayers").serialize()},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.data,t("#batch_layers_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#batch_layers_section"))})).always((function(){r(t(this))}))})),t("#markerIconSelection").on("click",(function(){t("#markerIcons").show()})),t("#markerIconsList img").on("click",(function(){var e=t(this).attr("src");t("#markerIconSelection").attr("src",e),t("#markerIcon").val(e),t("#markerIcons").hide()})),t("#batch_marker_markers").select2({width:"400px",ajax:l("mmp_query_markers")}),t("#batch_marker_maps").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#save_batch_marker").on("click",(function(){confirm(mmpAdminL10n.tools.batchMarker)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_marker",nonce:t(this).data("nonce"),settings:t("#markerSettings").serialize()},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.data,t("#batch_marker_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#batch_marker_section"))})).always((function(){r(t(this))}))})),t("#sourceIcon").on("click",(function(){t("#replaceIcon").val("0"),t("#icons").show()})),t("#targetIcon").on("click",(function(){t("#replaceIcon").val("1"),t("#icons").show()})),t("#iconsList img").on("click",(function(){var e="0"==t("#replaceIcon").val()?"#sourceIcon":"#targetIcon",i=t(this).attr("src");t(e).attr("src",i),t("#icons").hide()})),t("#replace_icon").on("click",(function(){confirm(mmpAdminL10n.tools.replaceIcon)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_replace_icon",nonce:t(this).data("nonce"),source:t("#sourceIcon").attr("src"),target:t("#targetIcon").attr("src")},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.data,t("#replace_icon_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#replace_icon_section"))})).always((function(){r(t(this))}))})),t("#backup_file").on("change",(function(){if(i=0,t("#backup_log").empty(),t("#backup_progress").css("width","0"),this.files.length){var e=(this.files[0].size/1024/1024).toFixed(2)+" MiB",n=t("#backup_max_size").val()/1024/1024+" MiB";t("#backup_log").append(mmpAdminL10n.tools.maxFileSize.replace("{maxFileSize}",n)+"<br />"),n<=0||this.files[0].size<=t("#backup_max_size").val()?(t("#backup_log").append('<span style="color:green;">'+mmpAdminL10n.tools.chosenFileSizeGood.replace("{chosenFileSize}",e)+"</span><br />"),t("#backup_start").prop("disabled",!0),t("#restore_start").prop("disabled",!1)):t("#backup_log").append('<span style="color:red;">'+mmpAdminL10n.tools.chosenFileSizeBad.replace("{chosenFileSize}",e)+"</span><br />")}else t("#restore_start").prop("disabled",!0),t("#backup_start").prop("disabled",!1)})),t("#backup_start").on("click",(function(){i=0,t("#backup_start").prop("disabled",!0),t("#restore_start").prop("disabled",!0),t("#backup_start").addClass("mmp-button-loading"),u(0,0,[],!1)})),t("#restore_start").on("click",(function(){i=0,t("#restore_start").prop("disabled",!0),t("#backup_start").prop("disabled",!0),t("#restore_start").addClass("mmp-button-loading"),p(0,0,[])})),t("#settings").on("click",(function(){t(this).trigger("select")})),t("#update_settings").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_update_settings",nonce:t(this).data("nonce"),settings:t("#settings").val()},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.data,t("#update_settings_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#update_settings_section"))})).always((function(){r(t(this))}))})),t("#move_markers_source, #move_markers_target").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#move_markers").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_move_markers",nonce:t(this).data("nonce"),source:t("#move_markers_source").val(),target:t("#move_markers_target").val()},beforeSend:function(){o(t(this))}}).done((function(e){e.success&&m(e.data.maps),s(e.success,e.data.message,t("#move_markers_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#move_markers_section"))})).always((function(){r(t(this))}))})),t("#remove_markers_map").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#remove_markers").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_remove_markers",nonce:t(this).data("nonce"),map:t("#remove_markers_map").val()},beforeSend:function(){o(t(this))}}).done((function(e){e.success&&m(e.data.maps),s(e.success,e.data.message,t("#remove_markers_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#remove_markers_section"))})).always((function(){r(t(this))}))})),t("#delete_all_maps_confirm").on("change",(function(){t(this).prop("checked")?t("#delete_all_maps").prop("disabled",!1):t("#delete_all_maps").prop("disabled",!0)})),t("#delete_all_maps").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_all_maps",nonce:t(this).data("nonce"),confirm:t("#delete_all_maps_confirm").prop("checked"),truncate:t("#delete_all_maps_reset_ids").prop("checked")},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.data,t("#delete_all_maps_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#delete_all_maps_section"))})).always((function(){r(t(this))}))})),t("#delete_all_markers_confirm").on("change",(function(){t(this).prop("checked")?t("#delete_all_markers").prop("disabled",!1):t("#delete_all_markers").prop("disabled",!0)})),t("#delete_all_markers").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_all_markers",nonce:t(this).data("nonce"),confirm:t("#delete_all_markers_confirm").prop("checked"),truncate:t("#delete_all_markers_reset_ids").prop("checked")},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.data,t("#delete_all_markers_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#delete_all_markers_section"))})).always((function(){r(t(this))}))})),t("#assign_markers_map").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#assign_markers").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_assign_markers",nonce:t(this).data("nonce"),map:t("#assign_markers_map").val()},beforeSend:function(){o(t(this))}}).done((function(e){e.success&&m(e.data.maps),s(e.success,e.data.message,t("#assign_markers_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#assign_markers_section"))})).always((function(){r(t(this))}))})),t("#register_strings").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_strings",nonce:t(this).data("nonce")},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.data,t("#register_strings_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#register_strings_section"))})).always((function(){r(t(this))}))})),t("input[name=test_mode]").on("change",(function(){"on"===t(this).val()?(t("#test_mode_wrap").attr("class","mmp-test-mode-on"),t("#test_mode_status").html(mmpAdminL10n.tools.testModeOn)):(t("#test_mode_wrap").attr("class","mmp-test-mode-off"),t("#test_mode_status").html(mmpAdminL10n.tools.testModeOff))})),t("#assign_maps").select2({width:"220px",ajax:l("mmp_query_maps")}),t("#import_file").on("change",(function(){if(t("#import_start").prop("disabled",!0),this.files.length){var e=t("#import_max_size").val();e<=0||this.files[0].size<=e?(t("#import_filesize_error").hide(),t("#import_start").prop("disabled",!1)):t("#import_filesize_error").show()}else t("#import_filesize_error").hide()})),t("#import_form").on("submit",(function(e){e.preventDefault(),e.stopPropagation();var i=new FormData(this);t.ajax({type:"POST",url:ajaxurl,context:this,data:i,processData:!1,contentType:!1,beforeSend:function(){o(t("#import_start")),t("#import_log").empty()}}).done((function(e){if(e.success){var i=e.data.summary+"\n";t.each(e.data.details,(function(t,e){i+="["+t+"] "+e.message+"\n"})),t("#import_log").text(i),m(e.data.maps)}else t("#import_log").append(e.data)})).fail((function(){t("#import_log").append("Failed to send request")})).always((function(){r(t("#import_start"))}))})),t("#export_include, #export_exclude").select2({width:"220px",ajax:l("mmp_query_maps")}),t("#export_form").on("submit",(function(e){e.preventDefault(),e.stopPropagation(),t.ajax({type:"POST",url:ajaxurl,context:this,data:t(this).serialize(),beforeSend:function(){o(t("#export_start")),t("#export_log").empty()}}).done((function(e){e.success?(t("#export_log").append(e.data.message),window.location.href=e.data.url):t("#export_log").append(e.data)})).fail((function(){t("#export_log").append(mmpAdminL10n.global.ajaxError)})).always((function(){r(t("#export_start"))}))})),t("#reset_database_confirm").on("change",(function(){t(this).prop("checked")?t("#reset_database").prop("disabled",!1):t("#reset_database").prop("disabled",!0)})),t("#reset_database").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_reset_database",nonce:t(this).data("nonce"),confirm:t("#reset_database_confirm").prop("checked")},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.data,t("#reset_database_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#reset_database_section"))})).always((function(){r(t(this))}))})),t("#reset_settings_confirm").on("change",(function(){t(this).prop("checked")?t("#reset_settings").prop("disabled",!1):t("#reset_settings").prop("disabled",!0)})),t("#reset_settings").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_reset_settings",nonce:t(this).data("nonce"),confirm:t("#reset_settings_confirm").prop("checked"),reset:{plugin:t("#reset_plugin_settings").prop("checked"),map:t("#reset_map_settings").prop("checked"),marker:t("#reset_marker_settings").prop("checked")}},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.data,t("#reset_settings_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#reset_settings_section"))})).always((function(){r(t(this))}))})),t("#data_migration_check").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_check_migration",nonce:t(this).data("nonce")},beforeSend:function(){t(this).prop("disabled",!0),t(this).addClass("mmp-button-loading")}}).done((function(e){t("#migration_log").html(e.data),t(".mmp-migration-shortcode").on("click",(function(){t(this).trigger("select")})),t("#data_migration_start").prop("disabled",!1)})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#data_migration"))})).always((function(){t(this).removeClass("mmp-button-loading")}))})),t("#data_migration_start").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_data_migration",nonce:t(this).data("nonce")},beforeSend:function(){t(this).prop("disabled",!0),t(this).addClass("mmp-button-loading")}}).done((function(e){s(e.success,e.data,t("#data_migration"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#data_migration"))})).always((function(){t(this).removeClass("mmp-button-loading")}))})),t(".mmp-admin-modal, .mmp-admin-modal-close").on("click",(function(e){e.target===this&&(t("#icons").hide(),t("#iconsGpx").hide(),t("#markerIcons").hide())})),t(window).on("hashchange",(function(){var t=document.location.toString().split("#")[1];void 0!==t&&n(t)})),n(void 0!==e?e:t(".mmp-tablink").first().attr("id").replace("_tab","")),t(".mmp-batch-settings-tablink").first().trigger("click")}(jQuery)};var Nl=function(){!function(t){function e(e){t(".mmp-license-error").remove(),t(".mmp-license-section button").prop("disabled",!0),t(e).addClass("mmp-button-loading")}function i(e){t(e).removeClass("mmp-button-loading"),t(".mmp-license-section button").prop("disabled",!1)}function n(e,i){t(e).closest(".mmp-license-section").after('<div class="notice notice-error mmp-license-error"><p>'+i+"</p></div>")}t("#update_license").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_update_license",nonce:t(this).data("nonce"),key:t("#license_key").val(),multisite:t("#distribute_multisite").prop("checked")?1:0},beforeSend:function(){e(this)}}).done((function(t){t.success?location.reload():n(this,t.data)})).fail((function(){n(this,mmpAdminL10n.global.ajaxError)})).always((function(){i(this)}))})),t("#personal_trial_submit").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_personal_trial",nonce:t(this).data("nonce"),first_name:t("#personal_trial_first_name").val(),last_name:t("#personal_trial_last_name").val(),email:t("#personal_trial_email").val(),tos:t("#personal_trial_tos").prop("checked")?1:0},beforeSend:function(){e(this)}}).done((function(t){t.success?location.reload():n(this,t.data)})).fail((function(){n(this,mmpAdminL10n.global.ajaxError)})).always((function(){i(this)}))})),t("#anonymous_trial_show").on("click",(function(e){e.preventDefault(),e.stopPropagation(),t(this).remove(),t("#anonymous_trial").removeClass("mmp-hidden")})),t("#anonymous_trial_submit").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_anonymous_trial",nonce:t(this).data("nonce"),tos:t("#anonymous_trial_tos").prop("checked")?1:0},beforeSend:function(){e(this)}}).done((function(t){t.success?location.reload():n(this,t.data)})).fail((function(){n(this,mmpAdminL10n.global.ajaxError)})).always((function(){i(this)}))}))}(jQuery)};window.MapsMarkerPro=el,window.editMapActions=il,window.listMapsActions=rl,window.editMarkerActions=Rl,window.listMarkersActions=zl,window.settingsActions=Fl,window.toolsActions=jl,window.licenseActions=Nl}()}();